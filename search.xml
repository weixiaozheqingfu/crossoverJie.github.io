<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[1K star+ ÁöÑÈ°πÁõÆÊòØÂ¶Ç‰ΩïÁÇºÊàêÁöÑÔºü]]></title>
    <url>%2F2018%2F05%2F15%2Fskill%2F1Kstar%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄÈ¶ñÂÖàÊ†áÈ¢òÂÖö‰∏Ä‰∏ãÔºåÂÖ∂ÂÆûËøôÁØáÊñáÁ´†‰∏ªË¶ÅÊòØËÆ∞ÂΩïÊàëÁöÑÁ¨¨‰∫å‰∏™Ëøá 1K star ÁöÑÈ°πÁõÆ Java-InterviewÔºåÈ°∫‰æøÂàÜ‰∫´‰∏ãÂÖ∂‰∏≠ÁöÑËøáÁ®ãÂèäÁªèÈ™å„ÄÇ ÈúÄÊ±ÇÈÄâÊã©Java-Interview‰πãÊâÄ‰ª•Ë¶ÅÂÅöËøô‰∏™È°πÁõÆ‰∏ªË¶ÅÊòØÂΩìÊó∂ÊàëÊ≠£Âú®Èù¢ÈòøÈáåÁöÑ‰∏§‰∏™ÈÉ®Èó®ÔºåÈùûÂ∏∏Âπ∏ËøêÁöÑÊòØÊäÄÊúØÈù¢ÈÉΩËøá‰∫Ü„ÄÇÂÖ∂‰∏≠ÁöÑËøáÁ®ãÁúüÊòØËÆ©ÊàëÂèóÁõäÂå™ÊµÖÊõ¥ÊòØÂç∞Ë±°Ê∑±ÂàªÔºåÊâÄ‰ª•Â∞±ÊÉ≥ÊääÊúüÈó¥ÁöÑÈóÆÈ¢òËÆ∞ÂΩï‰∏ãÊù•ÔºåÂä†‰∏äËá™Â∑±ÁöÑÁêÜËß£Â∏åÊúõËÉΩÂØπÂÖ∂‰ªñÊúãÂèãËµ∑Âà∞Â∏ÆÂä©„ÄÇ Ê≠£Â•ΩÈÇ£ÊÆµÊó∂Èó¥‰πüÊòØ‰º†ËØ¥‰∏≠ÁöÑÈáë‰∏âÈì∂ÂõõÔºåÊâÄ‰ª•Êó†ÂΩ¢‰∏≠‰πüÂè´È°∫ÂäøËÄå‰∏∫Âêßüòè„ÄÇ SSMËøô‰∏™È°πÁõÆÁöÑÂéÜÂè≤Â∞±ÊØîËæÉÊÇ†‰πÖ‰∫ÜÔºåÊàëÁúã‰∫Ü‰∏ãÁ¨¨‰∏ÄÊ¨°Êèê‰∫§Â∑Æ‰∏çÂ§öÊòØ‰∏§Âπ¥Ââç„ÄÇ ‰ªéËøô‰∏™ÂêçÂ≠ó‰πüÂèØ‰ª•ÁúãÂá∫ÂΩìÂàùËøòÊòØ‰∏Ä‰∏™ÂàöÂÖ•Ë°åÊ≤°Â§ö‰πÖÁöÑÂ∞èËèúÈ∏üÔºåÂõ†‰∏∫‰πãÂâçÂú®Â≠¶ Java ÁöÑÊó∂ÂÄôÁúüÁöÑËµ∞‰∫ÜÂæàÂ§öÂÜ§ÊûâË∑ØÔºåÊâÄ‰ª•‰ªéÂ§¥ÂºÄÂßãËÆ∞ÂΩïÂà∞Áé∞Âú®Êï¥‰∏™ËøáÁ®ãÊâÄÂ≠¶Âà∞ÁöÑ‰∏úË•øÔºåË∏©ËøáÁöÑÂùë„ÄÇ Áî±‰∫éÊòØÈù¢ÂêëÂ∞èÁôΩÔºåÂÖ•Èó®ÁÆÄÂçïÔºå‰∏äÊâãËæÉÂø´‰πüÂèñÁöÑ‰∫Ü‰∏ÄÂÆöÁöÑÂÖ≥Ê≥®„ÄÇ ÂÖ∂ÂÆû‰ªéËøô‰∏§‰∏™È°πÁõÆÂèØ‰ª•ÁúãÂá∫ÈÄâÊã©‰∏Ä‰∏™ÊñπÂêëÊòØÂæàÈáçË¶ÅÁöÑ„ÄÇ ‰ª•ÂèäËØ•È°πÁõÆËß£ÂÜ≥‰∫Ü‰ªÄ‰πàÈóÆÈ¢òÔºåÈïøÊúüÁöÑËßÑÂàíÔºåÂèó‰ºóÊòØÂì™‰∫õÈÉΩË¶ÅËÄÉËôëÊ∏ÖÊ•ö(ÊÄé‰πàÊúâÁÇπÂÉèÂÅö‰∫ßÂìÅüòÖÔºåÂÖ∂ÂÆûËøôÂ∞±ÊòØ‰Ω†Ëá™Â∑±ÁöÑ‰∫ßÂìÅ)„ÄÇ ÊØîÂ¶ÇËøô‰∏§‰∏™È°πÁõÆÁöÑÁõÆÊ†áÔºö Java-InterviewÔºöÊåÅÁª≠Êõ¥Êñ∞Èù¢ËØïÈóÆÈ¢òÔºåÂ∏åÊúõËÉΩËÆ©Èù¢ËØïËÄÖÁü•ÂÖ∂ÁÑ∂‰πüÁü•ÂÖ∂ÊâÄ‰ª•ÁÑ∂„ÄÇ SSMÔºöÂçö‰∏ª‰ªéÂ∞èÁôΩÂà∞Áé∞Âú®ÂÆûÈôÖÂºÄÂèëÊâÄÈÅáÂà∞ÁöÑÈóÆÈ¢òËÆ∞ÂΩïÔºå‰ª•ÂèäÂÆûÊàòÁªèÈ™åÔºåÁé∞Âú®ÈÄêÊ∏ê‰ºöÂàÜ‰∫´‰∏Ä‰∫õÈöæÁÇπ‰ª•ÂèäÂ∫ïÂ±Ç„ÄÇÂèó‰ºóÂ§ßÂ§öÊòØÂ∞èÁôΩ„ÄÇ ÊñáÊ°£ÂæàÈáçË¶ÅÊó¢ÁÑ∂È°πÁõÆÂÅöÂá∫Êù•ÊòØÁªô‰∫∫Áî®ÁöÑÔºåÈÇ£ÊñáÊ°£Â∞±ÊòæÂæóËá≥ÂÖ≥ÈáçË¶Å‰∫Ü„ÄÇ Â∞±ÂÉèÊó•Â∏∏ÂíåÂâçÁ´ØÊÄºÊé•Âè£Êó∂ÔºåÊúâ‰∏Ä‰∏™Ê†áÂáÜÁöÑÊñáÊ°£ËæìÂá∫ÊØîÂú®ÁôΩÊùø‰∏äÊäòËÖæÂçäÂ§©Ë¶ÅÈ´òÁöÑÂ§ö„ÄÇ ÂÖ∂ÂÆû‰ªîÁªÜËßÇÂØü GitHub ‰∏äÁÉ≠Èó®ÁöÑÈ°πÁõÆÔºå‰ºöÂèëÁé∞‰ªñ‰ª¨ÁöÑÊñáÊ°£Âá†‰πéÈÉΩÊúâ‰∏Ä‰∫õÂÖ±ÂêåÁªìÊûÑÔºö ÁÆÄÂçïÊèèËø∞È°πÁõÆÊòØÂπ≤‰ªÄ‰πàÁöÑ„ÄÇ Âø´ÈÄüÂêØÂä®„ÄÇ ÊúÄËøëÊõ¥Êñ∞„ÄÇ Q/A Á≠îÁñë„ÄÇ È°πÁõÆÊà™Âõæ„ÄÇ ‰∏ªË¶ÅÁõÆÁöÑÂ∞±ÊòØË¶ÅÁÆÄÂçïÊòìËØªÔºåÂø´ÈÄü‰∏äÊâã„ÄÇ ÁÑ∂ÂêéÊää‰∏Ä‰∫õÂ§çÊùÇÁöÑÂ¶ÇÁ≥ªÁªüËÆæËÆ°„ÄÅÂºÄÂèëÊåáÂçóÁ≠âÂèØ‰ª•ÊîæÂà∞ wiki ‰∏≠„ÄÇ ÂàáËÆ∞‰∏çË¶Å‰ªÄ‰πà‰∏úË•øÈÉΩÂæÄ README.MD ‰∏≠ÂÜôÔºå‰øùÊåÅ‰∏Ä‰∏™ÁÆÄÊ¥ÅÁöÑÊñáÊ°£ÂèØ‰ª•Âä†ÂàÜÂì¶„ÄÇ ÁßØÊûÅÊé®Ëçê‰ª£Á†ÅË¥®ÈáèËøô‰∏™Â∞±‰∏çÂ§öËØ¥‰∫ÜÔºåËøôÂ∫îËØ•ÊòØÊúÄÂü∫Êú¨ÁöÑË¶ÅÊ±Ç„ÄÇ ‰øóËØùËØ¥ÔºöÔºåÈÖíÈ¶ô‰∏çÊÄïÂ∑∑Â≠êÊ∑±„ÄÇ ‰ΩÜÂØπ‰∫éÂÅöÂºÄÊ∫êÈ°πÁõÆÊù•ËØ¥Â∞±‰∏çÂ§™ÈÄÇÂ∫î‰∫ÜÔºåÂΩì‰Ω†Âπ∏ËæõËã¶Ëã¶ÂÅö‰∫Ü‰∏Ä‰∏™Ëá™ËÆ§‰∏∫Âæà‰∏çÈîôÁöÑÈ°πÁõÆÔºåÁªìÊûú‰∏ÄÂπ¥ËøáÂéª‰∫ÜÈÉΩÊó†‰∫∫ÈóÆÊ¥•ÔºåËøô‰∏çÂÖç‰ºöÊúâÁÇπÊâìÂáªÁßØÊûÅÊÄß„ÄÇ ÊâÄ‰ª•ÈÄÇÂΩìÁöÑËá™ÊàëÊé®ËçêÂ∞±ÂæàÊúâÂøÖË¶Å‰∫Ü„ÄÇ ‰∏äÂõæÊòØÊàëÂçöÂÆ¢„ÄÅÈ°πÁõÆÁöÑ‰∏ªË¶ÅÊµÅÈáèÊù•Ê∫ê„ÄÇ ‰∏ãÈù¢ÊòØÊàëËá™Ë∫´‰ΩìÈ™åÊØîËæÉ‰ºòË¥®ÁöÑÊé®ËçêÊ∏†ÈÅìÔºö ÂºÄÂèëËÄÖÂ§¥Êù°ÔºöÁî±‰∫éÊà™ÂõæÁöÑÊó∂ÂÄôÊ≤°ÊúâÊñ∞ÂèëÊñáÁ´†Ôºå‰πãÂâçÈÇ£ÁØáÁßíÊùÄÊû∂ÊûÑÂÆûË∑µÂèë‰∫Ü‰πãÂêéÂçöÂÆ¢ 80% ÁöÑÊµÅÈáèÈÉΩÊòØ‰ªéÂ§¥Êù°ËøáÊù•ÁöÑÔºåËÄå‰∏îË¥®ÈáèÂæàÈ´òÔºå‰∏çÂæó‰∏çÁÇπ‰∏™Ëµû„ÄÇ Âπ∂ÂèëÁºñÁ®ãÁΩë: Âπ∂ÂèëÁºñÁ®ãÁΩëÊòØÁî±ÈòøÈáåÂ§ßÁâõÊ∏ÖËã±(‰π∞‰∫ÜÈÇ£Êú¨„ÄäÂπ∂ÂèëÁºñÁ®ãÁöÑËâ∫ÊúØ„ÄãÂ∞±Ë¢´ÂúàÁ≤â‰∫Ü)ÂàõÂäûÁöÑÔºåÂÖ∂‰∏≠ÁöÑÊñáÁ´†Ë¥®ÈáèÊôÆÈÅçËæÉÈ´ò(ÂØºËá¥‰πü‰ºöÊúâ‰∏ÄÁÇπÂÜô‰ΩúÈó®Êßõ)„ÄÇÁî±‰∫éÁΩëÁ´ôÁöÑÊµÅÈáè‰πüÊØîËæÉÈ´òÔºåÂè™Ë¶Å‰Ω†ÁöÑÊñáÁ´†Ë¥®Èáè‰∏çÈîôËÇØÂÆö‰ºöÂæóÂà∞Â•ΩÂ§Ñ„ÄÇ ÊéòÈáëÔºöÊéòÈáëËøô‰∏§Âπ¥‰πüÊØîËæÉÁÅ´ÔºåÊòØ‰∏ìÈó®ÂÅöÂºÄÂèëËÄÖÂÜÖÂÆπÁöÑÔºå‰πüÊòØÁΩëÁ´ôÊµÅÈáè‰∏çÈîô„ÄÇ ÂºÄÊ∫ê‰∏≠ÂõΩÔºöÂºÄÊ∫ê‰∏≠ÂõΩÁöÑÂçöÂÆ¢‰πü‰∏çÈîôÔºåËá™Â∑±‰πüÊúâ‰ª£Á†ÅÊâòÁÆ°Ôºå‰ΩÜÊàëËøòÊòØÊõ¥ÂñúÊ¨¢Áî® GitHubÔºå‰∏ÄËà¨‰∏ä‰∫ÜÁºñËæëÊé®ËçêÈÉΩ‰ºöÊúâ‰∏çÈîôÁöÑËÆøÈóÆÈáè„ÄÇ V2EXÔºöÂ§ßÂêçÈºéÈºéÁöÑ V Á´ôÔºåÂÖ∂ÂÆûÂèó‰ºóËæÉÂ∞ëÔºåÊ≠£Âõ†‰∏∫Â¶ÇÊ≠§‰πüÂΩ¢Êàê‰∫ÜÁã¨ÊúâÁöÑÊñáÂåñÔºåÂõ†Ê≠§‰πüÊòØÊàëÊØèÂ§©ÊØîÈÄõ(Êë∏È±º)ÁöÑÁΩëÁ´ôÔºåÁî±‰∫éÂèó‰ºóÂ§ßÂ§öÊòØÂºÄÂèëËÄÖÊâÄ‰ª•‰πüËÉΩÂæóÂà∞ÂæàÂ§öÊúâÁî®ÁöÑÂèçÈ¶à„ÄÇ Â§ß‰Ω¨Êé®ËçêÔºöÊúÄÂø´Êç∑ÁöÑÊñπÂºèÂÖ∂ÂÆûÂ∞±ÊòØÂè£Âè£Áõ∏‰º†ÔºåÂÖ∂‰∏≠ÂΩìÁÑ∂ÊòØÂ§ß‰Ω¨ÁöÑÊïàÁéáÊúÄÈ´ò„ÄÇ‰πãÂâçÊúâ‰∏™Á∫ØÊ¥ÅÁöÑÂæÆÁ¨ë„ÄÅÁ®ãÂ∫èÁåøDD ÈÉΩÊäïËøáÁ®øÔºå‰πüËÉΩÂ∏¶Êù•‰∏çÈîôÁöÑÊµÅÈáè„ÄÇ ÁÆÄ‰π¶:Êú¨Êù•‰∏çÊÉ≥Êé®ËçêÁÆÄ‰π¶ÁöÑÔºà‰πãÂâçÁöÑ‰∫ã‰ª∂‰ª•ÂèäÁé∞Âú®È∏°Ê±§Â§™Â§öÔºâÔºå‰ΩÜÊòØÊµÅÈáèËøòÂèØ‰ª•ÔºåÁé∞Âú®Â∞±Á∫ØÁ≤πÂΩìÂÅöÂçöÂÆ¢Â§á‰ªΩÁöÑÂ∑•ÂÖ∑‰∫Ü„ÄÇ ÂùöÊåÅ‰∏ãÊù•‰πãÂêé‰ºöÂèëÁé∞ÔºöÂè™Ë¶ÅËá™Â∑±ÂùöÊåÅ„ÄÅ‰øùËØÅË¥®ÈáèÊúÄÂêé‰ºöÂΩ¢ÊàêËá™Â∑±ÁöÑÈòÖËØªÂúàÂ≠êÔºåÂà∞ÂêéÈù¢ÁîöËá≥‰ºöÊúâÂÖ∂‰ªñÊúãÂèã‰∏ªÂä®Êù•Êâæ‰Ω†ÂàÜ‰∫´ÔºåËøô‰∫õÈÉΩÊòØËá™ÊàëÊèêÂçáÁöÑËøáÁ®ã„ÄÇ ‰∏çÂøòÂàùÂøÉÂΩìÂàùÂÅöÁöÑÁ¨¨‰∏Ä‰∏™ÂºÄÊ∫êÈ°πÁõÆÂ∞±ÊòØ SSMÔºåÂÆåÂÖ®ÂèóÂ§üÂ≠¶‰π†Êó∂ÊâæËµÑÊñôÁöÑÁóõËã¶Ôºå‰πüÂæóÂà∞‰∫ÜÂæàÂ§ö‰∫∫ÁöÑÂ∏ÆÂä©ÔºåÊâÄ‰ª•ÊâçÊúâ‰∫ÜËØ•È°πÁõÆ„ÄÇ Âπ≥Êó∂Â∑•‰Ωú‰∏≠ÊàñÂ§öÊàñÂ∞ëÈÉΩ‰ºöÁî®Âà∞ÂºÄÊ∫êÈ°πÁõÆÔºåÂÖ∂ÂÆûÊàë‰ª¨Â§ßÈÉ®ÂàÜ‰∫∫‰πüÂÜô‰∏çÂá∫ Spring„ÄÅGuava ËøôÊ†∑ÁöÑÈ°πÁõÆÔºåÂè™ÊòØÂÜçËøôËøáÁ®ã‰∏≠ÂèØ‰ª•ÂèÇ‰∏éËøõÂéªÔºåÊî∂Ëé∑‰πüÊòØÈùûÂ∏∏‰∏∞ÂØåÁöÑ„ÄÇ ‰∏§Âπ¥ÂâçÂèÇ‰∏éÂºÄÊ∫êÂà∞Áé∞Âú®ÊúâÊî∂Âà∞Èù¢ËØïÈÇÄËØ∑„ÄÅÁâ©Ë¥®Â•ñÂä±Ëøô‰∫õÈÉΩÊòØÊ≠£Èù¢ÁßØÊûÅÁöÑÔºåÂèØ‰ª•ÈºìÂä±Êàë‰ª¨Êé•ÁùÄÂÅö‰∏ãÂéª„ÄÇ ‰ΩÜÊúÄÂ§öÁöÑËøòÊòØÂú®ËøôËøáÁ®ã‰∏≠ÁªìËØÜ‰∫ÜÂæàÂ§öÊúãÂèãÔºåÊäÄÊúØËÉΩÂäõÊèêÂçá‰πüÂæàÊòéÊòæÔºåËøô‰∫õÈÉΩÊòØ‰øùÊåÅËá™ÊàëÂèØÊåÅÁª≠ÂèëÂ±ïÁöÑÂøÖË¶ÅÊù°‰ª∂„ÄÇ]]></content>
      <categories>
        <category>Â∞èÊäÄÂ∑ß</category>
      </categories>
      <tags>
        <tag>GitHub</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SSM(ÂçÅÂÖ´) ÁßíÊùÄÊû∂ÊûÑÂÆûË∑µ]]></title>
    <url>%2F2018%2F05%2F07%2Fssm%2FSSM18-seconds-kill%2F</url>
    <content type="text"><![CDATA[ÂâçË®Ä‰πãÂâçÂú® Java-Interview ‰∏≠ÊèêÂà∞ËøáÁßíÊùÄÊû∂ÊûÑÁöÑËÆæËÆ°ÔºåËøôÊ¨°Âü∫‰∫éÂÖ∂‰∏≠ÁöÑÁêÜËÆ∫ÁÆÄÂçïÂÆûÁé∞‰∫Ü‰∏Ä‰∏ã„ÄÇ Êú¨Ê¨°ÈááÁî®Âæ™Â∫èÊ∏êËøõÁöÑÊñπÂºèÈÄêÊ≠•ÊèêÈ´òÊÄßËÉΩËææÂà∞Âπ∂ÂèëÁßíÊùÄÁöÑÊïàÊûúÔºåÊñáÁ´†ËæÉÈïøËØ∑ÂáÜÂ§áÂ•ΩÁìúÂ≠êÊùøÂá≥(liushuizhangüòÇ)„ÄÇ Êú¨ÊñáÊâÄÊúâÊ∂âÂèäÁöÑ‰ª£Á†ÅÔºö https://github.com/crossoverJie/SSM https://github.com/crossoverJie/distributed-redis-tool ÊúÄÁªàÊû∂ÊûÑÂõæÔºö ÂÖàÁÆÄÂçïÊ†πÊçÆËøô‰∏™ÂõæË∞à‰∏ãËØ∑Ê±ÇÁöÑÊµÅËΩ¨ÔºåÂõ†‰∏∫ÂêéÈù¢‰∏çÁÆ°ÊÄé‰πàÊîπËøõËøô‰∏™ÈÉΩÊòØÊ≤°ÊúâÂèòÁöÑ„ÄÇ ÂâçÁ´ØËØ∑Ê±ÇËøõÂÖ• web Â±ÇÔºåÂØπÂ∫îÁöÑ‰ª£Á†ÅÂ∞±ÊòØ controller„ÄÇ ‰πãÂêéÂ∞ÜÁúüÊ≠£ÁöÑÂ∫ìÂ≠òÊ†°È™å„ÄÅ‰∏ãÂçïÁ≠âËØ∑Ê±ÇÂèëÂæÄ Service Â±ÇÔºàÂÖ∂‰∏≠ RPC Ë∞ÉÁî®‰æùÁÑ∂ÈááÁî®ÁöÑ dubboÔºåÂè™ÊòØÊõ¥Êñ∞‰∏∫ÊúÄÊñ∞ÁâàÊú¨ÔºåÊú¨Ê¨°‰∏ç‰ºöËøáÂ§öËÆ®ËÆ∫ dubbo Áõ∏ÂÖ≥ÁöÑÁªÜËäÇÔºåÊúâÂÖ¥Ë∂£ÁöÑÂèØ‰ª•Êü•Áúã Âü∫‰∫édubboÁöÑÂàÜÂ∏ÉÂºèÊû∂ÊûÑÔºâ„ÄÇ Service Â±ÇÂÜçÂØπÊï∞ÊçÆËøõË°åËêΩÂú∞Ôºå‰∏ãÂçïÂÆåÊàê„ÄÇ Êó†ÈôêÂà∂ÂÖ∂ÂÆûÊäõÂºÄÁßíÊùÄËøô‰∏™Âú∫ÊôØÊù•ËØ¥Ê≠£Â∏∏ÁöÑ‰∏Ä‰∏™‰∏ãÂçïÊµÅÁ®ãÂèØ‰ª•ÁÆÄÂçïÂàÜ‰∏∫‰ª•‰∏ãÂá†Ê≠•Ôºö Ê†°È™åÂ∫ìÂ≠ò Êâ£Â∫ìÂ≠ò ÂàõÂª∫ËÆ¢Âçï ÊîØ‰ªò Âü∫‰∫é‰∏äÊñáÁöÑÊû∂ÊûÑÊâÄ‰ª•Êàë‰ª¨Êúâ‰∫Ü‰ª•‰∏ãÂÆûÁé∞Ôºö ÂÖàÁúãÁúãÂÆûÈôÖÈ°πÁõÆÁöÑÁªìÊûÑÔºö ËøòÊòØÂíå‰ª•Ââç‰∏ÄÊ†∑Ôºö Êèê‰æõÂá∫‰∏Ä‰∏™ API Áî®‰∫é Service Â±ÇÂÆûÁé∞Ôºå‰ª•Âèä web Â±ÇÊ∂àË¥π„ÄÇ web Â±ÇÁÆÄÂçïÊù•ËØ¥Â∞±ÊòØ‰∏Ä‰∏™ SpringMVC„ÄÇ Service Â±ÇÂàôÊòØÁúüÊ≠£ÁöÑÊï∞ÊçÆËêΩÂú∞„ÄÇ SSM-SECONDS-KILL-ORDER-CONSUMER ÂàôÊòØÂêéÊñá‰ºöÊèêÂà∞ÁöÑ Kafka Ê∂àË¥π„ÄÇ Êï∞ÊçÆÂ∫ì‰πüÊòØÂè™ÊúâÁÆÄÂçïÁöÑ‰∏§Âº†Ë°®Ê®°Êãü‰∏ãÂçïÔºö 1234567891011121314151617CREATE TABLE `stock` ( `id` int(11) unsigned NOT NULL AUTO_INCREMENT, `name` varchar(50) NOT NULL DEFAULT '' COMMENT 'ÂêçÁß∞', `count` int(11) NOT NULL COMMENT 'Â∫ìÂ≠ò', `sale` int(11) NOT NULL COMMENT 'Â∑≤ÂîÆ', `version` int(11) NOT NULL COMMENT '‰πêËßÇÈîÅÔºåÁâàÊú¨Âè∑', PRIMARY KEY (`id`)) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;CREATE TABLE `stock_order` ( `id` int(11) unsigned NOT NULL AUTO_INCREMENT, `sid` int(11) NOT NULL COMMENT 'Â∫ìÂ≠òID', `name` varchar(30) NOT NULL DEFAULT '' COMMENT 'ÂïÜÂìÅÂêçÁß∞', `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'ÂàõÂª∫Êó∂Èó¥', PRIMARY KEY (`id`)) ENGINE=InnoDB AUTO_INCREMENT=55 DEFAULT CHARSET=utf8; web Â±Ç controller ÂÆûÁé∞: 12345678910111213141516171819@Autowiredprivate StockService stockService;@Autowiredprivate OrderService orderService;@RequestMapping("/createWrongOrder/&#123;sid&#125;")@ResponseBodypublic String createWrongOrder(@PathVariable int sid) &#123; logger.info("sid=[&#123;&#125;]", sid); int id = 0; try &#123; id = orderService.createWrongOrder(sid); &#125; catch (Exception e) &#123; logger.error("Exception",e); &#125; return String.valueOf(id);&#125; ÂÖ∂‰∏≠ web ‰Ωú‰∏∫‰∏Ä‰∏™Ê∂àË¥πËÄÖË∞ÉÁî®Áúã OrderService Êèê‰æõÂá∫Êù•ÁöÑ dubbo ÊúçÂä°„ÄÇ Service Â±ÇÔºåOrderService ÂÆûÁé∞Ôºö È¶ñÂÖàÊòØÂØπ API ÁöÑÂÆûÁé∞(‰ºöÂú® API Êèê‰æõÂá∫Êé•Âè£)Ôºö 1234567891011@Servicepublic class OrderServiceImpl implements OrderService &#123; @Resource(name = "DBOrderService") private com.crossoverJie.seconds.kill.service.OrderService orderService ; @Override public int createWrongOrder(int sid) throws Exception &#123; return orderService.createWrongOrder(sid); &#125;&#125; ËøôÈáåÂè™ÊòØÁÆÄÂçïË∞ÉÁî®‰∫Ü DBOrderService ‰∏≠ÁöÑÂÆûÁé∞ÔºåDBOrderService ÊâçÊòØÁúüÊ≠£ÁöÑÊï∞ÊçÆËêΩÂú∞Ôºå‰πüÂ∞±ÊòØÂÜôÊï∞ÊçÆÂ∫ì‰∫Ü„ÄÇ DBOrderService ÂÆûÁé∞Ôºö 12345678910111213141516171819202122232425262728293031323334353637383940414243444546Transactional(rollbackFor = Exception.class)@Service(value = "DBOrderService")public class OrderServiceImpl implements OrderService &#123; @Resource(name = "DBStockService") private com.crossoverJie.seconds.kill.service.StockService stockService; @Autowired private StockOrderMapper orderMapper; @Override public int createWrongOrder(int sid) throws Exception&#123; //Ê†°È™åÂ∫ìÂ≠ò Stock stock = checkStock(sid); //Êâ£Â∫ìÂ≠ò saleStock(stock); //ÂàõÂª∫ËÆ¢Âçï int id = createOrder(stock); return id; &#125; private Stock checkStock(int sid) &#123; Stock stock = stockService.getStockById(sid); if (stock.getSale().equals(stock.getCount())) &#123; throw new RuntimeException("Â∫ìÂ≠ò‰∏çË∂≥"); &#125; return stock; &#125; private int saleStock(Stock stock) &#123; stock.setSale(stock.getSale() + 1); return stockService.updateStockById(stock); &#125; private int createOrder(Stock stock) &#123; StockOrder order = new StockOrder(); order.setSid(stock.getId()); order.setName(stock.getName()); int id = orderMapper.insertSelective(order); return id; &#125; &#125; È¢ÑÂÖàÂàùÂßãÂåñ‰∫Ü 10 Êù°Â∫ìÂ≠ò„ÄÇ ÊâãÂä®Ë∞ÉÁî®‰∏ã createWrongOrder/1 Êé•Âè£ÂèëÁé∞Ôºö Â∫ìÂ≠òË°®Ôºö ËÆ¢ÂçïË°®Ôºö ‰∏ÄÂàáÁúãËµ∑Êù•ÈÉΩÊ≤°ÊúâÈóÆÈ¢òÔºåÊï∞ÊçÆ‰πüÊ≠£Â∏∏„ÄÇ ‰ΩÜÊòØÂΩìÁî® JMeter Âπ∂ÂèëÊµãËØïÊó∂Ôºö ÊµãËØïÈÖçÁΩÆÊòØÔºö300‰∏™Á∫øÁ®ãÂπ∂ÂèëÔºåÊµãËØï‰∏§ËΩÆÊù•ÁúãÁúãÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÁªìÊûúÔºö ËØ∑Ê±ÇÈÉΩÂìçÂ∫îÊàêÂäüÔºåÂ∫ìÂ≠òÁ°ÆÂÆû‰πüÊâ£ÂÆå‰∫ÜÔºå‰ΩÜÊòØËÆ¢ÂçïÂç¥ÁîüÊàê‰∫Ü 124 Êù°ËÆ∞ÂΩï„ÄÇ ËøôÊòæÁÑ∂ÊòØÂÖ∏ÂûãÁöÑË∂ÖÂçñÁé∞Ë±°„ÄÇ ÂÖ∂ÂÆûÁé∞Âú®ÂÜçÂéªÊâãÂä®Ë∞ÉÁî®Êé•Âè£‰ºöËøîÂõûÂ∫ìÂ≠ò‰∏çË∂≥Ôºå‰ΩÜ‰∏∫Êó∂ÊôöÁü£„ÄÇ ‰πêËßÇÈîÅÊõ¥Êñ∞ÊÄé‰πàÊù•ÈÅøÂÖç‰∏äËø∞ÁöÑÁé∞Ë±°Âë¢Ôºü ÊúÄÁÆÄÂçïÁöÑÂÅöÊ≥ïËá™ÁÑ∂ÊòØ‰πêËßÇÈîÅ‰∫ÜÔºåËøôÈáå‰∏çËøáÂ§öËÆ®ËÆ∫Ëøô‰∏™Ôºå‰∏çÁÜüÊÇâÁöÑÊúãÂèãÂèØ‰ª•Áúã‰∏ãËøôÁØá„ÄÇ Êù•ÁúãÁúãÂÖ∑‰ΩìÂÆûÁé∞Ôºö ÂÖ∂ÂÆûÂÖ∂‰ªñÁöÑÈÉΩÊ≤°ÊÄé‰πàÊîπÔºå‰∏ªË¶ÅÊòØ Service Â±Ç„ÄÇ 123456789101112131415161718192021@Overridepublic int createOptimisticOrder(int sid) throws Exception &#123; //Ê†°È™åÂ∫ìÂ≠ò Stock stock = checkStock(sid); //‰πêËßÇÈîÅÊõ¥Êñ∞Â∫ìÂ≠ò saleStockOptimistic(stock); //ÂàõÂª∫ËÆ¢Âçï int id = createOrder(stock); return id;&#125;private void saleStockOptimistic(Stock stock) &#123; int count = stockService.updateStockByOptimistic(stock); if (count == 0)&#123; throw new RuntimeException("Âπ∂ÂèëÊõ¥Êñ∞Â∫ìÂ≠òÂ§±Ë¥•") ; &#125;&#125; ÂØπÂ∫îÁöÑ XMLÔºö 1234567891011&lt;update id="updateByOptimistic" parameterType="com.crossoverJie.seconds.kill.pojo.Stock"&gt; update stock &lt;set&gt; sale = sale + 1, version = version + 1, &lt;/set&gt; WHERE id = #&#123;id,jdbcType=INTEGER&#125; AND version = #&#123;version,jdbcType=INTEGER&#125;&lt;/update&gt; ÂêåÊ†∑ÁöÑÊµãËØïÊù°‰ª∂ÔºåÊàë‰ª¨ÂÜçËøõË°å‰∏äÈù¢ÁöÑÊµãËØï /createOptimisticOrder/1Ôºö ËøôÊ¨°ÂèëÁé∞Êó†ËÆ∫ÊòØÂ∫ìÂ≠òËÆ¢ÂçïÈÉΩÊòØ OK ÁöÑ„ÄÇ Êü•ÁúãÊó•ÂøóÂèëÁé∞Ôºö ÂæàÂ§öÂπ∂ÂèëËØ∑Ê±Ç‰ºöÂìçÂ∫îÈîôËØØÔºåËøôÂ∞±ËææÂà∞‰∫ÜÊïàÊûú„ÄÇ ÊèêÈ´òÂêûÂêêÈáè‰∏∫‰∫ÜËøõ‰∏ÄÊ≠•ÊèêÈ´òÁßíÊùÄÊó∂ÁöÑÂêûÂêêÈáè‰ª•ÂèäÂìçÂ∫îÊïàÁéáÔºåËøôÈáåÁöÑ web Âíå Service ÈÉΩËøõË°å‰∫ÜÊ®™ÂêëÊâ©Â±ï„ÄÇ web Âà©Áî® Nginx ËøõË°åË¥üËΩΩ„ÄÇ Service ‰πüÊòØÂ§öÂè∞Â∫îÁî®„ÄÇ ÂÜçÁî® JMeter ÊµãËØïÊó∂ÂèØ‰ª•Áõ¥ËßÇÁöÑÁúãÂà∞ÊïàÊûú„ÄÇ Áî±‰∫éÊàëÊòØÂú®ÈòøÈáå‰∫ëÁöÑ‰∏ÄÂè∞Â∞èÊ∞¥ÁÆ°ÊúçÂä°Âô®ËøõË°åÊµãËØïÁöÑÔºåÂä†‰∏äÈÖçÁΩÆ‰∏çÈ´ò„ÄÅÂ∫îÁî®ÈÉΩÂú®Âêå‰∏ÄÂè∞ÔºåÊâÄ‰ª•Âπ∂Ê≤°ÊúâÂÆåÂÖ®‰ΩìÁé∞Âá∫ÊÄßËÉΩ‰∏äÁöÑ‰ºòÂäøÔºà Nginx ÂÅöË¥üËΩΩËΩ¨ÂèëÊó∂ÂÄô‰πü‰ºöÂ¢ûÂä†È¢ùÂ§ñÁöÑÁΩëÁªúÊ∂àËÄóÔºâ„ÄÇ shell ËÑöÊú¨ÂÆûÁé∞ÁÆÄÂçïÁöÑ CIÁî±‰∫éÂ∫îÁî®Â§öÂè∞ÈÉ®ÁΩ≤‰πãÂêéÔºåÊâãÂä®ÂèëÁâàÊµãËØïÁöÑÁóõËã¶Áõ∏‰ø°ÁªèÂéÜËøáÁöÑÈÉΩÊúâ‰Ωì‰ºö„ÄÇ ËøôÊ¨°Âπ∂Ê≤°ÊúâÁ≤æÂäõÂéªÊê≠Âª∫ÂÆåÊï¥ÁöÑ CI CDÔºåÂè™ÊòØÂÜô‰∫Ü‰∏Ä‰∏™ÁÆÄÂçïÁöÑËÑöÊú¨ÂÆûÁé∞‰∫ÜËá™Âä®ÂåñÈÉ®ÁΩ≤ÔºåÂ∏åÊúõÂØπËøôÊñπÈù¢Ê≤°ÊúâÁªèÈ™åÁöÑÂêåÂ≠¶Â∏¶Êù•‰∏ÄÁÇπÂêØÂèëÔºö ÊûÑÂª∫ web12345678910111213141516171819202122232425262728293031323334353637383940414243#!/bin/bash# ÊûÑÂª∫ web Ê∂àË¥πËÄÖ#read appnameappname=&quot;consumer&quot;echo &quot;input=&quot;$appnamePID=$(ps -ef | grep $appname | grep -v grep | awk &apos;&#123;print $2&#125;&apos;)# ÈÅçÂéÜÊùÄÊéâ pidfor var in $&#123;PID[@]&#125;;do echo &quot;loop pid= $var&quot; kill -9 $vardoneecho &quot;kill $appname success&quot;cd ..git pullcd SSM-SECONDS-KILLmvn -Dmaven.test.skip=true clean packageecho &quot;build war success&quot;cp /home/crossoverJie/SSM/SSM-SECONDS-KILL/SSM-SECONDS-KILL-WEB/target/SSM-SECONDS-KILL-WEB-2.2.0-SNAPSHOT.war /home/crossoverJie/tomcat/tomcat-dubbo-consumer-8083/webappsecho &quot;cp tomcat-dubbo-consumer-8083/webapps ok!&quot;cp /home/crossoverJie/SSM/SSM-SECONDS-KILL/SSM-SECONDS-KILL-WEB/target/SSM-SECONDS-KILL-WEB-2.2.0-SNAPSHOT.war /home/crossoverJie/tomcat/tomcat-dubbo-consumer-7083-slave/webappsecho &quot;cp tomcat-dubbo-consumer-7083-slave/webapps ok!&quot;sh /home/crossoverJie/tomcat/tomcat-dubbo-consumer-8083/bin/startup.shecho &quot;tomcat-dubbo-consumer-8083/bin/startup.sh success&quot;sh /home/crossoverJie/tomcat/tomcat-dubbo-consumer-7083-slave/bin/startup.shecho &quot;tomcat-dubbo-consumer-7083-slave/bin/startup.sh success&quot;echo &quot;start $appname success&quot; ÊûÑÂª∫ Service1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253# ÊûÑÂª∫ÊúçÂä°Êèê‰æõËÄÖ#read appnameappname=&quot;provider&quot;echo &quot;input=&quot;$appnamePID=$(ps -ef | grep $appname | grep -v grep | awk &apos;&#123;print $2&#125;&apos;)#if [ $? -eq 0 ]; then# echo &quot;process id:$PID&quot;#else# echo &quot;process $appname not exit&quot;# exit#fi# ÈÅçÂéÜÊùÄÊéâ pidfor var in $&#123;PID[@]&#125;;do echo &quot;loop pid= $var&quot; kill -9 $vardoneecho &quot;kill $appname success&quot;cd ..git pullcd SSM-SECONDS-KILLmvn -Dmaven.test.skip=true clean packageecho &quot;build war success&quot;cp /home/crossoverJie/SSM/SSM-SECONDS-KILL/SSM-SECONDS-KILL-SERVICE/target/SSM-SECONDS-KILL-SERVICE-2.2.0-SNAPSHOT.war /home/crossoverJie/tomcat/tomcat-dubbo-provider-8080/webappsecho &quot;cp tomcat-dubbo-provider-8080/webapps ok!&quot;cp /home/crossoverJie/SSM/SSM-SECONDS-KILL/SSM-SECONDS-KILL-SERVICE/target/SSM-SECONDS-KILL-SERVICE-2.2.0-SNAPSHOT.war /home/crossoverJie/tomcat/tomcat-dubbo-provider-7080-slave/webappsecho &quot;cp tomcat-dubbo-provider-7080-slave/webapps ok!&quot;sh /home/crossoverJie/tomcat/tomcat-dubbo-provider-8080/bin/startup.shecho &quot;tomcat-dubbo-provider-8080/bin/startup.sh success&quot;sh /home/crossoverJie/tomcat/tomcat-dubbo-provider-7080-slave/bin/startup.shecho &quot;tomcat-dubbo-provider-8080/bin/startup.sh success&quot;echo &quot;start $appname success&quot; ‰πãÂêéÊØèÂΩìÊàëÊúâÊõ¥Êñ∞ÔºåÂè™ÈúÄË¶ÅÊâßË°åËøô‰∏§‰∏™ËÑöÊú¨Â∞±ÂèØ‰ª•Â∏ÆÊàëËá™Âä®ÊûÑÂª∫„ÄÇ ÈÉΩÊòØÊúÄÂü∫Á°ÄÁöÑ Linux ÂëΩ‰ª§ÔºåÁõ∏‰ø°Â§ßÂÆ∂ÈÉΩÁúãÂæóÊòéÁôΩ„ÄÇ ‰πêËßÇÈîÅÊõ¥Êñ∞ + ÂàÜÂ∏ÉÂºèÈôêÊµÅ‰∏äÊñáÁöÑÁªìÊûúÁúã‰ººÊ≤°ÊúâÈóÆÈ¢òÔºåÂÖ∂ÂÆûËøòÂ∑ÆÂæóËøúÂë¢„ÄÇ ËøôÈáåÂè™ÊòØÊ®°Êãü‰∫Ü 300 ‰∏™Âπ∂ÂèëÊ≤°ÊúâÈóÆÈ¢òÔºå‰ΩÜÊòØÂΩìËØ∑Ê±ÇËææÂà∞‰∫Ü 3000 Ôºå3WÔºå300W Âë¢Ôºü ËôΩËØ¥ÂèØ‰ª•Ê®™ÂêëÊâ©Â±ïÂèØ‰ª•ÊîØÊíëÊõ¥Â§öÁöÑËØ∑Ê±Ç„ÄÇ ‰ΩÜÊòØËÉΩ‰∏çËÉΩÂà©Áî®ÊúÄÂ∞ëÁöÑËµÑÊ∫êËß£ÂÜ≥ÈóÆÈ¢òÂë¢Ôºü ÂÖ∂ÂÆû‰ªîÁªÜÂàÜÊûê‰∏ã‰ºöÂèëÁé∞Ôºö ÂÅáËÆæÊàëÁöÑÂïÜÂìÅ‰∏ÄÂÖ±Âè™Êúâ 10 ‰∏™Â∫ìÂ≠òÔºåÈÇ£‰πàÊó†ËÆ∫‰Ω†Â§öÂ∞ë‰∫∫Êù•‰π∞ÂÖ∂ÂÆûÊúÄÁªà‰πüÊúÄÂ§öÂè™Êúâ 10 ‰∫∫ÂèØ‰ª•‰∏ãÂçïÊàêÂäü„ÄÇ ÊâÄ‰ª•ÂÖ∂‰∏≠‰ºöÊúâ 99% ÁöÑËØ∑Ê±ÇÈÉΩÊòØÊó†ÊïàÁöÑ„ÄÇ Â§ßÂÆ∂ÈÉΩÁü•ÈÅìÔºöÂ§ßÂ§öÊï∞Â∫îÁî®Êï∞ÊçÆÂ∫ìÈÉΩÊòØÂéãÂÄíÈ™ÜÈ©ºÁöÑÊúÄÂêé‰∏ÄÊ†πÁ®ªËçâ„ÄÇ ÈÄöËøá Druid ÁöÑÁõëÊéßÊù•ÁúãÁúã‰πãÂâçËØ∑Ê±ÇÊï∞ÊçÆÂ∫ìÁöÑÊÉÖÂÜµÔºö Âõ†‰∏∫ Service ÊòØ‰∏§‰∏™Â∫îÁî®„ÄÇ Êï∞ÊçÆÂ∫ì‰πüÊúâ 20 Â§ö‰∏™ËøûÊé•„ÄÇ ÊÄé‰πàÊ†∑Êù•‰ºòÂåñÂë¢ÔºüÂÖ∂ÂÆûÂæàÂÆπÊòìÊÉ≥Âà∞ÁöÑÂ∞±ÊòØÂàÜÂ∏ÉÂºèÈôêÊµÅ„ÄÇ Êàë‰ª¨Â∞ÜÂπ∂ÂèëÊéßÂà∂Âú®‰∏Ä‰∏™ÂèØÊéßÁöÑËåÉÂõ¥‰πãÂÜÖÔºåÁÑ∂ÂêéÂø´ÈÄüÂ§±Ë¥•ËøôÊ†∑Â∞±ËÉΩÊúÄÂ§ßÁ®ãÂ∫¶ÁöÑ‰øùÊä§Á≥ªÁªü„ÄÇ distributed-redis-tool ‚¨ÜÔ∏èv1.0.3‰∏∫Ê≠§ËøòÂØπ https://github.com/crossoverJie/distributed-redis-tool ËøõË°å‰∫ÜÂ∞èÂ∞èÁöÑÂçáÁ∫ß„ÄÇ Âõ†‰∏∫Âä†‰∏äËØ•ÁªÑ‰ª∂‰πãÂêéÊâÄÊúâÁöÑËØ∑Ê±ÇÈÉΩ‰ºöÁªèËøá RedisÔºåÊâÄ‰ª•ÂØπ Redis ËµÑÊ∫êÁöÑ‰ΩøÁî®‰πüÊòØË¶ÅÈùûÂ∏∏Â∞èÂøÉ„ÄÇ API Êõ¥Êñ∞‰øÆÊîπ‰πãÂêéÁöÑ API Â¶Ç‰∏ãÔºö 123456789101112131415161718192021@Configurationpublic class RedisLimitConfig &#123; private Logger logger = LoggerFactory.getLogger(RedisLimitConfig.class); @Value("$&#123;redis.limit&#125;") private int limit; @Autowired private JedisConnectionFactory jedisConnectionFactory; @Bean public RedisLimit build() &#123; RedisLimit redisLimit = new RedisLimit.Builder(jedisConnectionFactory, RedisToolsConstant.SINGLE) .limit(limit) .build(); return redisLimit; &#125;&#125; ËøôÈáåÊûÑÂª∫Âô®ÊîπÁî®‰∫Ü JedisConnectionFactoryÔºåÊâÄ‰ª•ÂæóÈÖçÂêà Spring Êù•‰∏ÄËµ∑‰ΩøÁî®„ÄÇ Âπ∂Âú®ÂàùÂßãÂåñÊó∂ÊòæÁ§∫‰º†ÂÖ• Redis ÊòØ‰ª•ÈõÜÁæ§ÊñπÂºèÈÉ®ÁΩ≤ËøòÊòØÂçïÊú∫ÔºàÂº∫ÁÉàÂª∫ËÆÆÈõÜÁæ§ÔºåÈôêÊµÅ‰πãÂêéÂØπ Redis ËøòÊòØÊúâ‰∏ÄÂÆöÁöÑÂéãÂäõÔºâ„ÄÇ ÈôêÊµÅÂÆûÁé∞Êó¢ÁÑ∂ API Êõ¥Êñ∞‰∫ÜÔºåÂÆûÁé∞Ëá™ÁÑ∂‰πüË¶Å‰øÆÊîπÔºö 12345678910111213141516171819202122232425262728293031323334353637383940414243444546/** * limit traffic * @return if true */public boolean limit() &#123; //get connection Object connection = getConnection(); Object result = limitRequest(connection); if (FAIL_CODE != (Long) result) &#123; return true; &#125; else &#123; return false; &#125;&#125;private Object limitRequest(Object connection) &#123; Object result = null; String key = String.valueOf(System.currentTimeMillis() / 1000); if (connection instanceof Jedis)&#123; result = ((Jedis)connection).eval(script, Collections.singletonList(key), Collections.singletonList(String.valueOf(limit))); ((Jedis) connection).close(); &#125;else &#123; result = ((JedisCluster) connection).eval(script, Collections.singletonList(key), Collections.singletonList(String.valueOf(limit))); try &#123; ((JedisCluster) connection).close(); &#125; catch (IOException e) &#123; logger.error("IOException",e); &#125; &#125; return result;&#125;private Object getConnection() &#123; Object connection ; if (type == RedisToolsConstant.SINGLE)&#123; RedisConnection redisConnection = jedisConnectionFactory.getConnection(); connection = redisConnection.getNativeConnection(); &#125;else &#123; RedisClusterConnection clusterConnection = jedisConnectionFactory.getClusterConnection(); connection = clusterConnection.getNativeConnection() ; &#125; return connection;&#125; Â¶ÇÊûúÊòØÂéüÁîüÁöÑ Spring Â∫îÁî®ÂæóÈááÁî® @SpringControllerLimit(errorCode = 200) Ê≥®Ëß£„ÄÇ ÂÆûÈôÖ‰ΩøÁî®Â¶Ç‰∏ãÔºö web Á´ØÔºö 123456789101112131415161718/** * ‰πêËßÇÈîÅÊõ¥Êñ∞Â∫ìÂ≠ò ÈôêÊµÅ * @param sid * @return */@SpringControllerLimit(errorCode = 200)@RequestMapping("/createOptimisticLimitOrder/&#123;sid&#125;")@ResponseBodypublic String createOptimisticLimitOrder(@PathVariable int sid) &#123; logger.info("sid=[&#123;&#125;]", sid); int id = 0; try &#123; id = orderService.createOptimisticOrder(sid); &#125; catch (Exception e) &#123; logger.error("Exception",e); &#125; return String.valueOf(id);&#125; Service Á´ØÂ∞±Ê≤°‰ªÄ‰πàÊõ¥Êñ∞‰∫ÜÔºå‰æùÁÑ∂ÊòØÈááÁî®ÁöÑ‰πêËßÇÈîÅÊõ¥Êñ∞Êï∞ÊçÆÂ∫ì„ÄÇ ÂÜçÂéãÊµãÁúã‰∏ãÊïàÊûú /createOptimisticLimitOrderByRedis/1Ôºö È¶ñÂÖàÊòØÁúãÁªìÊûúÊ≤°ÊúâÈóÆÈ¢òÔºåÂÜçÁúãÊï∞ÊçÆÂ∫ìËøûÊé•‰ª•ÂèäÂπ∂ÂèëËØ∑Ê±ÇÊï∞ÈÉΩÊúâÊòéÊòæÁöÑ‰∏ãÈôç„ÄÇ ‰πêËßÇÈîÅÊõ¥Êñ∞ + ÂàÜÂ∏ÉÂºèÈôêÊµÅ + Redis ÁºìÂ≠òÂÖ∂ÂÆû‰ªîÁªÜËßÇÂØü Druid ÁõëÊéßÊï∞ÊçÆÂèëÁé∞Ëøô‰∏™ SQL Ë¢´Â§öÊ¨°Êü•ËØ¢Ôºö ÂÖ∂ÂÆûËøôÊòØÂÆûÊó∂Êü•ËØ¢Â∫ìÂ≠òÁöÑ SQLÔºå‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜÂú®ÊØèÊ¨°‰∏ãÂçï‰πãÂâçÂà§Êñ≠ÊòØÂê¶ËøòÊúâÂ∫ìÂ≠ò„ÄÇ Ëøô‰πüÊòØ‰∏™‰ºòÂåñÁÇπ„ÄÇ ËøôÁßçÊï∞ÊçÆÊàë‰ª¨ÂÆåÂÖ®ÂèØ‰ª•ÊîæÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÊïàÁéáÊØîÂú®Êï∞ÊçÆÂ∫ìË¶ÅÈ´òÂæàÂ§ö„ÄÇ Áî±‰∫éÊàë‰ª¨ÁöÑÂ∫îÁî®ÊòØÂàÜÂ∏ÉÂºèÁöÑÔºåÊâÄ‰ª•Â†ÜÂÜÖÁºìÂ≠òÊòæÁÑ∂‰∏çÂêàÈÄÇÔºåRedis Â∞±ÈùûÂ∏∏ÈÄÇÂêà„ÄÇ ËøôÊ¨°‰∏ªË¶ÅÊîπÈÄ†ÁöÑÊòØ Service Â±ÇÔºö ÊØèÊ¨°Êü•ËØ¢Â∫ìÂ≠òÊó∂Ëµ∞ Redis„ÄÇ Êâ£Â∫ìÂ≠òÊó∂Êõ¥Êñ∞ Redis„ÄÇ ÈúÄË¶ÅÊèêÂâçÂ∞ÜÂ∫ìÂ≠ò‰ø°ÊÅØÂÜôÂÖ• RedisÔºàÊâãÂä®ÊàñËÄÖÁ®ãÂ∫èËá™Âä®ÈÉΩÂèØ‰ª•Ôºâ„ÄÇ ‰∏ªË¶Å‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344@Overridepublic int createOptimisticOrderUseRedis(int sid) throws Exception &#123; //Ê£ÄÈ™åÂ∫ìÂ≠òÔºå‰ªé Redis Ëé∑Âèñ Stock stock = checkStockByRedis(sid); //‰πêËßÇÈîÅÊõ¥Êñ∞Â∫ìÂ≠ò ‰ª•ÂèäÊõ¥Êñ∞ Redis saleStockOptimisticByRedis(stock); //ÂàõÂª∫ËÆ¢Âçï int id = createOrder(stock); return id ;&#125;private Stock checkStockByRedis(int sid) throws Exception &#123; Integer count = Integer.parseInt(redisTemplate.opsForValue().get(RedisKeysConstant.STOCK_COUNT + sid)); Integer sale = Integer.parseInt(redisTemplate.opsForValue().get(RedisKeysConstant.STOCK_SALE + sid)); if (count.equals(sale))&#123; throw new RuntimeException("Â∫ìÂ≠ò‰∏çË∂≥ Redis currentCount=" + sale); &#125; Integer version = Integer.parseInt(redisTemplate.opsForValue().get(RedisKeysConstant.STOCK_VERSION + sid)); Stock stock = new Stock() ; stock.setId(sid); stock.setCount(count); stock.setSale(sale); stock.setVersion(version); return stock;&#125; /** * ‰πêËßÇÈîÅÊõ¥Êñ∞Êï∞ÊçÆÂ∫ì ËøòË¶ÅÊõ¥Êñ∞ Redis * @param stock */private void saleStockOptimisticByRedis(Stock stock) &#123; int count = stockService.updateStockByOptimistic(stock); if (count == 0)&#123; throw new RuntimeException("Âπ∂ÂèëÊõ¥Êñ∞Â∫ìÂ≠òÂ§±Ë¥•") ; &#125; //Ëá™Â¢û redisTemplate.opsForValue().increment(RedisKeysConstant.STOCK_SALE + stock.getId(),1) ; redisTemplate.opsForValue().increment(RedisKeysConstant.STOCK_VERSION + stock.getId(),1) ;&#125; ÂéãÊµãÁúãÁúãÂÆûÈôÖÊïàÊûú /createOptimisticLimitOrderByRedis/1Ôºö ÊúÄÂêéÂèëÁé∞Êï∞ÊçÆÊ≤°ÈóÆÈ¢òÔºåÊï∞ÊçÆÂ∫ìÁöÑËØ∑Ê±Ç‰∏éÂπ∂Âèë‰πüÈÉΩ‰∏ãÊù•‰∫Ü„ÄÇ ‰πêËßÇÈîÅÊõ¥Êñ∞ + ÂàÜÂ∏ÉÂºèÈôêÊµÅ + Redis ÁºìÂ≠ò + Kafka ÂºÇÊ≠•ÊúÄÂêéÁöÑ‰ºòÂåñËøòÊòØÊÉ≥Â¶Ç‰ΩïÊù•ÂÜçÊ¨°ÊèêÈ´òÂêûÂêêÈáè‰ª•ÂèäÊÄßËÉΩÁöÑ„ÄÇ Êàë‰ª¨‰∏äÊñáÊâÄÊúâ‰æãÂ≠êÂÖ∂ÂÆûÈÉΩÊòØÂêåÊ≠•ËØ∑Ê±ÇÔºåÂÆåÂÖ®ÂèØ‰ª•Âà©Áî®ÂêåÊ≠•ËΩ¨ÂºÇÊ≠•Êù•ÊèêÈ´òÊÄßËÉΩÂïä„ÄÇ ËøôÈáåÊàë‰ª¨Â∞ÜÂÜôËÆ¢Âçï‰ª•ÂèäÊõ¥Êñ∞Â∫ìÂ≠òÁöÑÊìç‰ΩúËøõË°åÂºÇÊ≠•ÂåñÔºåÂà©Áî® Kafka Êù•ËøõË°åËß£ËÄ¶ÂíåÈòüÂàóÁöÑ‰ΩúÁî®„ÄÇ ÊØèÂΩì‰∏Ä‰∏™ËØ∑Ê±ÇÈÄöËøá‰∫ÜÈôêÊµÅÂà∞Ëææ‰∫Ü Service Â±ÇÈÄöËøá‰∫ÜÂ∫ìÂ≠òÊ†°È™å‰πãÂêéÂ∞±Â∞ÜËÆ¢Âçï‰ø°ÊÅØÂèëÁªô Kafka ÔºåËøôÊ†∑‰∏Ä‰∏™ËØ∑Ê±ÇÂ∞±ÂèØ‰ª•Áõ¥Êé•ËøîÂõû‰∫Ü„ÄÇ Ê∂àË¥πÁ®ãÂ∫èÂÜçÂØπÊï∞ÊçÆËøõË°åÂÖ•Â∫ìËêΩÂú∞„ÄÇ Âõ†‰∏∫ÂºÇÊ≠•‰∫ÜÔºåÊâÄ‰ª•ÊúÄÁªàÈúÄË¶ÅÈááÂèñÂõûË∞ÉÊàñËÄÖÊòØÂÖ∂‰ªñÊèêÈÜíÁöÑÊñπÂºèÊèêÈÜíÁî®Êà∑Ë¥≠‰π∞ÂÆåÊàê„ÄÇ ËøôÈáå‰ª£Á†ÅËæÉÂ§öÂ∞±‰∏çË¥¥‰∫ÜÔºåÊ∂àË¥πÁ®ãÂ∫èÂÖ∂ÂÆûÂ∞±ÊòØÊää‰πãÂâçÁöÑ Service Â±ÇÁöÑÈÄªËæëÈáçÂÜô‰∫Ü‰∏ÄÈÅçÔºå‰∏çËøáÈááÁî®ÁöÑÊòØ SpringBoot„ÄÇ ÊÑüÂÖ¥Ë∂£ÁöÑÊúãÂèãÂèØ‰ª•Áúã‰∏ã„ÄÇ https://github.com/crossoverJie/SSM/tree/master/SSM-SECONDS-KILL/SSM-SECONDS-KILL-ORDER-CONSUMER ÊÄªÁªìÂÖ∂ÂÆûÁªèËøá‰∏äÈù¢ÁöÑ‰∏ÄÈ°ø‰ºòÂåñÊÄªÁªìËµ∑Êù•Êó†ÈùûÂ∞±ÊòØ‰ª•‰∏ãÂá†ÁÇπÔºö Â∞ΩÈáèÂ∞ÜËØ∑Ê±ÇÊã¶Êà™Âú®‰∏äÊ∏∏„ÄÇ ËøòÂèØ‰ª•Ê†πÊçÆ UID ËøõË°åÈôêÊµÅ„ÄÇ ÊúÄÂ§ßÁ®ãÂ∫¶ÁöÑÂáèÂ∞ëËØ∑Ê±ÇËêΩÂà∞ DB„ÄÇ Â§öÂà©Áî®ÁºìÂ≠ò„ÄÇ ÂêåÊ≠•Êìç‰ΩúÂºÇÊ≠•Âåñ„ÄÇ fail fastÔºåÂ∞ΩÊó©Â§±Ë¥•Ôºå‰øùÊä§Â∫îÁî®„ÄÇ Á†ÅÂ≠ó‰∏çÊòìÔºåËøôÂ∫îËØ•ÊòØÊàëÂÜôËøáÂ≠óÊï∞ÊúÄÂ§öÁöÑ‰∫ÜÔºåÊÉ≥ÊÉ≥ÂΩìÂπ¥È´ò‰∏≠ 800 Â≠óÁöÑ‰ΩúÊñáÈÉΩÊÜã‰∏çÂá∫Êù•üòÇÔºåÂèØÊÉ≥ËÄåÁü•ÊòØÊúâÂ§öÈöæÂæó‰∫Ü„ÄÇ ‰ª•‰∏äÂÜÖÂÆπÊ¨¢ËøéËÆ®ËÆ∫„ÄÇ Âè∑Â§ñÊúÄËøëÂú®ÊÄªÁªì‰∏Ä‰∫õ Java Áõ∏ÂÖ≥ÁöÑÁü•ËØÜÁÇπÔºåÊÑüÂÖ¥Ë∂£ÁöÑÊúãÂèãÂèØ‰ª•‰∏ÄËµ∑Áª¥Êä§„ÄÇ Âú∞ÂùÄ: https://github.com/crossoverJie/Java-Interview]]></content>
      <categories>
        <category>SSM</category>
        <category>Distributed Tools</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Kafka</tag>
        <tag>Redis</tag>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[sbc(‰∏É)ÂàÜÂ∏ÉÂºèÈôêÊµÅ]]></title>
    <url>%2F2018%2F04%2F28%2Fsbc%2Fsbc7-Distributed-Limit%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄÊú¨ÊñáÊé•ÁùÄ‰∏äÊñáÂ∫îÁî®ÈôêÊµÅËøõË°åËÆ®ËÆ∫„ÄÇ ‰πãÂâçË∞àÂà∞ÁöÑÈôêÊµÅÊñπÊ°àÂè™ËÉΩÈíàÂØπ‰∫éÂçï‰∏™ JVM ÊúâÊïàÔºå‰πüÂ∞±ÊòØÂçïÊú∫Â∫îÁî®„ÄÇËÄåÂØπ‰∫éÁé∞Âú®ÊôÆÈÅçÁöÑÂàÜÂ∏ÉÂºèÂ∫îÁî®‰πüÂæóÊúâ‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÈôêÊµÅÁöÑÊñπÊ°à„ÄÇ Âü∫‰∫éÊ≠§Â∞ùËØïÂÜô‰∫ÜËøô‰∏™ÁªÑ‰ª∂Ôºö https://github.com/crossoverJie/distributed-redis-tool DEMO‰ª•‰∏ãÈááÁî®ÁöÑÊòØ https://github.com/crossoverJie/springboot-cloud Êù•ÂÅöÊºîÁ§∫„ÄÇ Âú® Order Â∫îÁî®Êèê‰æõÁöÑÊé•Âè£‰∏≠ÈááÂèñ‰∫ÜÈôêÊµÅ„ÄÇÈ¶ñÂÖàÊòØÈÖçÁΩÆ‰∫ÜÈôêÊµÅÂ∑•ÂÖ∑ÁöÑ Bean: 12345678910111213141516171819202122@Configurationpublic class RedisLimitConfig &#123; @Value("$&#123;redis.limit&#125;") private int limit; @Autowired private JedisConnectionFactory jedisConnectionFactory; @Bean public RedisLimit build() &#123; RedisClusterConnection clusterConnection = jedisConnectionFactory.getClusterConnection(); JedisCluster jedisCluster = (JedisCluster) clusterConnection.getNativeConnection(); RedisLimit redisLimit = new RedisLimit.Builder&lt;&gt;(jedisCluster) .limit(limit) .build(); return redisLimit; &#125;&#125; Êé•ÁùÄÂú® Controller ‰ΩøÁî®ÁªÑ‰ª∂Ôºö 123456789101112131415161718192021222324252627@Autowiredprivate RedisLimit redisLimit ;@Override@CheckReqNopublic BaseResponse&lt;OrderNoResVO&gt; getOrderNo(@RequestBody OrderNoReqVO orderNoReq) &#123; BaseResponse&lt;OrderNoResVO&gt; res = new BaseResponse(); //ÈôêÊµÅ boolean limit = redisLimit.limit(); if (!limit)&#123; res.setCode(StatusEnum.REQUEST_LIMIT.getCode()); res.setMessage(StatusEnum.REQUEST_LIMIT.getMessage()); return res ; &#125; res.setReqNo(orderNoReq.getReqNo()); if (null == orderNoReq.getAppId())&#123; throw new SBCException(StatusEnum.FAIL); &#125; OrderNoResVO orderNoRes = new OrderNoResVO() ; orderNoRes.setOrderId(DateUtil.getLongTime()); res.setCode(StatusEnum.SUCCESS.getCode()); res.setMessage(StatusEnum.SUCCESS.getMessage()); res.setDataBody(orderNoRes); return res ;&#125; ‰∏∫‰∫ÜÊñπ‰æø‰ΩøÁî®Ôºå‰πüÊèê‰æõ‰∫ÜÊ≥®Ëß£: 1234567@Override@ControllerLimitpublic BaseResponse&lt;OrderNoResVO&gt; getOrderNoLimit(@RequestBody OrderNoReqVO orderNoReq) &#123; BaseResponse&lt;OrderNoResVO&gt; res = new BaseResponse(); // ‰∏öÂä°ÈÄªËæë return res ;&#125; ËØ•Ê≥®Ëß£Êã¶Êà™‰∫Ü http ËØ∑Ê±ÇÔºå‰ºöÂÜçËØ∑Ê±ÇËææÂà∞ÈòàÂÄºÊó∂Áõ¥Êé•ËøîÂõû„ÄÇ ÊôÆÈÄöÊñπÊ≥ï‰πüÂèØ‰ΩøÁî®: 12@CommonLimitpublic void doSomething()&#123;&#125; ‰ºöÂú®Ë∞ÉÁî®ËææÂà∞ÈòàÂÄºÊó∂ÊäõÂá∫ÂºÇÂ∏∏„ÄÇ ‰∏∫‰∫ÜÊ®°ÊãüÂπ∂ÂèëÔºåÂú® User Â∫îÁî®‰∏≠ÂºÄÂêØ‰∫Ü 10 ‰∏™Á∫øÁ®ãË∞ÉÁî® Order(ÈôêÊµÅÊ¨°Êï∞‰∏∫5) Êé•Âè£(‰πüÂèØ‰ΩøÁî®‰∏ì‰∏öÁöÑÂπ∂ÂèëÊµãËØïÂ∑•ÂÖ∑ JMeter Á≠â)„ÄÇ 1234567891011121314151617181920212223242526272829303132333435363738394041@Overridepublic BaseResponse&lt;UserResVO&gt; getUserByFeign(@RequestBody UserReqVO userReq) &#123; //Ë∞ÉÁî®ËøúÁ®ãÊúçÂä° OrderNoReqVO vo = new OrderNoReqVO(); vo.setAppId(1L); vo.setReqNo(userReq.getReqNo()); for (int i = 0; i &lt; 10; i++) &#123; executorService.execute(new Worker(vo, orderServiceClient)); &#125; UserRes userRes = new UserRes(); userRes.setUserId(123); userRes.setUserName("Âº†‰∏â"); userRes.setReqNo(userReq.getReqNo()); userRes.setCode(StatusEnum.SUCCESS.getCode()); userRes.setMessage("ÊàêÂäü"); return userRes;&#125;private static class Worker implements Runnable &#123; private OrderNoReqVO vo; private OrderServiceClient orderServiceClient; public Worker(OrderNoReqVO vo, OrderServiceClient orderServiceClient) &#123; this.vo = vo; this.orderServiceClient = orderServiceClient; &#125; @Override public void run() &#123; BaseResponse&lt;OrderNoResVO&gt; orderNo = orderServiceClient.getOrderNoCommonLimit(vo); logger.info("ËøúÁ®ãËøîÂõû:" + JSON.toJSONString(orderNo)); &#125;&#125; ‰∏∫‰∫ÜÈ™åËØÅÂàÜÂ∏ÉÂºèÊïàÊûúÂêØÂä®‰∫Ü‰∏§‰∏™ Order Â∫îÁî®„ÄÇ ÊïàÊûúÂ¶Ç‰∏ãÔºö ÂÆûÁé∞ÂéüÁêÜÂÆûÁé∞ÂéüÁêÜÂÖ∂ÂÆûÂæàÁÆÄÂçï„ÄÇÊó¢ÁÑ∂Ë¶ÅËææÂà∞ÂàÜÂ∏ÉÂºèÂÖ®Â±ÄÈôêÊµÅÁöÑÊïàÊûúÔºåÈÇ£Ëá™ÁÑ∂ÈúÄË¶Å‰∏Ä‰∏™Á¨¨‰∏âÊñπÁªÑ‰ª∂Êù•ËÆ∞ÂΩïËØ∑Ê±ÇÁöÑÊ¨°Êï∞„ÄÇ ÂÖ∂‰∏≠ Redis Â∞±ÈùûÂ∏∏ÈÄÇÂêàËøôÊ†∑ÁöÑÂú∫ÊôØ„ÄÇ ÊØèÊ¨°ËØ∑Ê±ÇÊó∂Â∞ÜÂΩìÂâçÊó∂Èó¥(Á≤æÁ°ÆÂà∞Áßí)‰Ωú‰∏∫ Key ÂÜôÂÖ•Âà∞ Redis ‰∏≠ÔºåË∂ÖÊó∂Êó∂Èó¥ËÆæÁΩÆ‰∏∫ 2 ÁßíÔºåRedis Â∞ÜËØ• Key ÁöÑÂÄºËøõË°åËá™Â¢û„ÄÇ ÂΩìËææÂà∞ÈòàÂÄºÊó∂ËøîÂõûÈîôËØØ„ÄÇ ÂÜôÂÖ• Redis ÁöÑÊìç‰ΩúÁî® Lua ËÑöÊú¨Êù•ÂÆåÊàêÔºåÂà©Áî® Redis ÁöÑÂçïÁ∫øÁ®ãÊú∫Âà∂ÂèØ‰ª•‰øùËØÅÊØè‰∏™ Redis ËØ∑Ê±ÇÁöÑÂéüÂ≠êÊÄß„ÄÇ Lua ËÑöÊú¨Â¶Ç‰∏ã: 123456789101112131415161718--lua ‰∏ãÊ†á‰ªé 1 ÂºÄÂßã-- ÈôêÊµÅ keylocal key = KEYS[1]-- ÈôêÊµÅÂ§ßÂ∞èlocal limit = tonumber(ARGV[1])-- Ëé∑ÂèñÂΩìÂâçÊµÅÈáèÂ§ßÂ∞èlocal curentLimit = tonumber(redis.call('get', key) or "0")if curentLimit + 1 &gt; limit then -- ËææÂà∞ÈôêÊµÅÂ§ßÂ∞è ËøîÂõû return 0;else -- Ê≤°ÊúâËææÂà∞ÈòàÂÄº value + 1 redis.call("INCRBY", key, 1) redis.call("EXPIRE", key, 2) return curentLimit + 1end Java ‰∏≠ÁöÑË∞ÉÁî®ÈÄªËæë: 123456789101112131415161718public boolean limit() &#123; String key = String.valueOf(System.currentTimeMillis() / 1000); Object result = null; if (jedis instanceof Jedis) &#123; result = ((Jedis) this.jedis).eval(script, Collections.singletonList(key), Collections.singletonList(String.valueOf(limit))); &#125; else if (jedis instanceof JedisCluster) &#123; result = ((JedisCluster) this.jedis).eval(script, Collections.singletonList(key), Collections.singletonList(String.valueOf(limit))); &#125; else &#123; //throw new RuntimeException("instance is error") ; return false; &#125; if (FAIL_CODE != (Long) result) &#123; return true; &#125; else &#123; return false; &#125;&#125; ÊâÄ‰ª•Âè™ÈúÄË¶ÅÂú®ÈúÄË¶ÅÈôêÊµÅÁöÑÂú∞ÊñπË∞ÉÁî®ËØ•ÊñπÊ≥ïÂØπËøîÂõûÂÄºËøõË°åÂà§Êñ≠Âç≥ÂèØËææÂà∞ÈôêÊµÅÁöÑÁõÆÁöÑ„ÄÇ ÂΩìÁÑ∂ËøôÂè™ÊòØÂà©Áî® Redis ÂÅö‰∫Ü‰∏Ä‰∏™Á≤óÊö¥ÁöÑËÆ°Êï∞Âô®ÔºåÂ¶ÇÊûúÊÉ≥ÂÆûÁé∞Á±ª‰ºº‰∫é‰∏äÊñá‰∏≠ÁöÑ‰ª§ÁâåÊ°∂ÁÆóÊ≥ïÂèØ‰ª•Âü∫‰∫é Lua Ëá™Ë°åÂÆûÁé∞„ÄÇ Builder ÊûÑÂª∫Âô®Âú®ËÆæËÆ°Ëøô‰∏™ÁªÑ‰ª∂Êó∂ÊÉ≥Â∞ΩÈáèÁöÑÊèê‰æõÁªô‰ΩøÁî®ËÄÖÊ∏ÖÊô∞„ÄÅÂèØËØªÊÄß„ÄÅ‰∏çÊòìÂá∫ÈîôÁöÑ API„ÄÇ ÊØîÂ¶ÇÁ¨¨‰∏ÄÊ≠•ÔºåÂ¶Ç‰ΩïÊûÑÂª∫‰∏Ä‰∏™ÈôêÊµÅÂØπË±°„ÄÇ ÊúÄÂ∏∏Áî®ÁöÑÊñπÂºèËá™ÁÑ∂Â∞±ÊòØÊûÑÈÄ†ÂáΩÊï∞ÔºåÂ¶ÇÊûúÊúâÂ§ö‰∏™ÂüüÂàôÂèØ‰ª•ÈááÁî®ÈáçÂè†ÊûÑÈÄ†Âô®ÁöÑÊñπÂºè: 123public A()&#123;&#125;public A(int a)&#123;&#125;public A(int a,int b)&#123;&#125; Áº∫ÁÇπ‰πüÊòØÊòæËÄåÊòìËßÅÁöÑÔºöÂ¶ÇÊûúÂèÇÊï∞ËøáÂ§ö‰ºöÂØºËá¥Èöæ‰ª•ÈòÖËØªÔºåÁîöËá≥Â¶ÇÊûúÂèÇÊï∞Á±ªÂûã‰∏ÄËá¥ÁöÑÊÉÖÂÜµ‰∏ãÂÆ¢Êà∑Á´ØÈ¢†ÂÄí‰∫ÜÈ°∫Â∫èÔºå‰ΩÜ‰∏ç‰ºöÂºïËµ∑Ë≠¶Âëä‰ªéËÄåÂá∫Áé∞Èöæ‰ª•È¢ÑÊµãÁöÑÁªìÊûú„ÄÇ Á¨¨‰∫åÁßçÊñπÊ°àÂèØ‰ª•ÈááÁî® JavaBean Ê®°ÂºèÔºåÂà©Áî® setter ÊñπÊ≥ïËøõË°åÊûÑÂª∫: 123A a = new A();a.setA(a);a.setB(b); ËøôÁßçÊñπÂºèÊ∏ÖÊô∞ÊòìËØªÔºå‰ΩÜÂç¥ÂÆπÊòìËÆ©ÂØπË±°Â§Ñ‰∫é‰∏ç‰∏ÄËá¥ÁöÑÁä∂ÊÄÅÔºå‰ΩøÂØπË±°Â§Ñ‰∫éÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑÁä∂ÊÄÅ„ÄÇ ÊâÄ‰ª•ËøôÈáåÈááÁî®‰∫ÜÁ¨¨‰∏âÁßçÂàõÂª∫ÂØπË±°ÁöÑÊñπÂºèÔºåÊûÑÂª∫Âô®Ôºö 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576public class RedisLimit &#123; private JedisCommands jedis; private int limit = 200; private static final int FAIL_CODE = 0; /** * lua script */ private String script; private RedisLimit(Builder builder) &#123; this.limit = builder.limit ; this.jedis = builder.jedis ; buildScript(); &#125; /** * limit traffic * @return if true */ public boolean limit() &#123; String key = String.valueOf(System.currentTimeMillis() / 1000); Object result = null; if (jedis instanceof Jedis) &#123; result = ((Jedis) this.jedis).eval(script, Collections.singletonList(key), Collections.singletonList(String.valueOf(limit))); &#125; else if (jedis instanceof JedisCluster) &#123; result = ((JedisCluster) this.jedis).eval(script, Collections.singletonList(key), Collections.singletonList(String.valueOf(limit))); &#125; else &#123; //throw new RuntimeException("instance is error") ; return false; &#125; if (FAIL_CODE != (Long) result) &#123; return true; &#125; else &#123; return false; &#125; &#125; /** * read lua script */ private void buildScript() &#123; script = ScriptUtil.getScript("limit.lua"); &#125; /** * the builder * @param &lt;T&gt; */ public static class Builder&lt;T extends JedisCommands&gt;&#123; private T jedis = null ; private int limit = 200; public Builder(T jedis)&#123; this.jedis = jedis ; &#125; public Builder limit(int limit)&#123; this.limit = limit ; return this; &#125; public RedisLimit build()&#123; return new RedisLimit(this) ; &#125; &#125;&#125; ËøôÊ†∑ÂÆ¢Êà∑Á´ØÂú®‰ΩøÁî®Êó∂: 123RedisLimit redisLimit = new RedisLimit.Builder&lt;&gt;(jedisCluster) .limit(limit) .build(); Êõ¥Âä†ÁöÑÁÆÄÂçïÁõ¥Êé•ÔºåÂπ∂‰∏îÈÅøÂÖç‰∫ÜÂ∞ÜÂàõÂª∫ËøáÁ®ãÂàÜÊàê‰∫ÜÂ§ö‰∏™Â≠êÊ≠•È™§„ÄÇ ËøôÂú®ÊúâÂ§ö‰∏™ÊûÑÈÄ†ÂèÇÊï∞Ôºå‰ΩÜÂèà‰∏çÊòØÂøÖÈÄâÂ≠óÊÆµÊó∂ÂæàÊúâ‰ΩúÁî®„ÄÇ Âõ†Ê≠§È°∫‰æøÂ∞ÜÂàÜÂ∏ÉÂºèÈîÅÁöÑÊûÑÂª∫Âô®ÊñπÂºè‰πü‰∏ÄÂπ∂Êõ¥Êñ∞‰∫ÜÔºö https://github.com/crossoverJie/distributed-redis-tool#features Êõ¥Â§öÂÜÖÂÆπÂèØ‰ª•ÂèÇËÄÉ Effective Java API‰ªé‰∏äÊñáÂèØ‰ª•ÁúãÂá∫Ôºå‰ΩøÁî®ËøáÁ®ãÂ∞±ÊòØË∞ÉÁî® limit ÊñπÊ≥ï„ÄÇ 12345//ÈôêÊµÅ boolean limit = redisLimit.limit(); if (!limit)&#123; //ÂÖ∑‰ΩìÈôêÊµÅÈÄªËæë &#125; ‰∏∫‰∫ÜÂáèÂ∞ë‰æµÂÖ•ÊÄßÔºå‰πü‰∏∫‰∫ÜÁÆÄÂåñÂÆ¢Êà∑Á´ØÊèê‰æõ‰∫Ü‰∏§ÁßçÊ≥®Ëß£ÊñπÂºè„ÄÇ @ControllerLimitËØ•Ê≥®Ëß£ÂèØ‰ª•‰ΩúÁî®‰∫é @RequestMapping ‰øÆÈ•∞ÁöÑÊé•Âè£‰∏≠ÔºåÂπ∂‰ºöÂú®ÈôêÊµÅÂêéÊèê‰æõÈôêÊµÅÂìçÂ∫î„ÄÇ ÂÆûÁé∞Â¶Ç‰∏ãÔºö 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849@Componentpublic class WebIntercept extends WebMvcConfigurerAdapter &#123; private static Logger logger = LoggerFactory.getLogger(WebIntercept.class); @Autowired private RedisLimit redisLimit; @Override public void addInterceptors(InterceptorRegistry registry) &#123; registry.addInterceptor(new CustomInterceptor()) .addPathPatterns("/**"); &#125; private class CustomInterceptor extends HandlerInterceptorAdapter &#123; @Override public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception &#123; if (redisLimit == null) &#123; throw new NullPointerException("redisLimit is null"); &#125; if (handler instanceof HandlerMethod) &#123; HandlerMethod method = (HandlerMethod) handler; ControllerLimit annotation = method.getMethodAnnotation(ControllerLimit.class); if (annotation == null) &#123; //skip return true; &#125; boolean limit = redisLimit.limit(); if (!limit) &#123; logger.warn("request has bean limit"); response.sendError(500, "request limit"); return false; &#125; &#125; return true; &#125; &#125;&#125; ÂÖ∂ÂÆûÂ∞±ÊòØÂÆûÁé∞‰∫Ü SpringMVC ‰∏≠ÁöÑÊã¶Êà™Âô®ÔºåÂπ∂Âú®Êã¶Êà™ËøáÁ®ã‰∏≠Âà§Êñ≠ÊòØÂê¶Êúâ‰ΩøÁî®Ê≥®Ëß£Ôºå‰ªéËÄåË∞ÉÁî®ÈôêÊµÅÈÄªËæë„ÄÇ ÂâçÊèêÊòØÂ∫îÁî®ÈúÄË¶ÅÊâ´ÊèèÂà∞ËØ•Á±ªÔºåËÆ© Spring ËøõË°åÁÆ°ÁêÜ„ÄÇ 1@ComponentScan(value = "com.crossoverjie.distributed.intercept") @CommonLimitÂΩìÁÑ∂‰πüÂèØ‰ª•Âú®ÊôÆÈÄöÊñπÊ≥ï‰∏≠‰ΩøÁî®„ÄÇÂÆûÁé∞ÂéüÁêÜÂàôÊòØ Spring AOP (SpringMVC ÁöÑÊã¶Êà™Âô®Êú¨Ë¥®‰πüÊòØ AOP)„ÄÇ 12345678910111213141516171819202122232425262728@Aspect@Component@EnableAspectJAutoProxy(proxyTargetClass = true)public class CommonAspect &#123; private static Logger logger = LoggerFactory.getLogger(CommonAspect.class); @Autowired private RedisLimit redisLimit ; @Pointcut("@annotation(com.crossoverjie.distributed.annotation.CommonLimit)") private void check()&#123;&#125; @Before("check()") public void before(JoinPoint joinPoint) throws Exception &#123; if (redisLimit == null) &#123; throw new NullPointerException("redisLimit is null"); &#125; boolean limit = redisLimit.limit(); if (!limit) &#123; logger.warn("request has bean limit"); throw new RuntimeException("request has bean limit") ; &#125; &#125;&#125; ÂæàÁÆÄÂçïÔºå‰πüÊòØÂú®Êã¶Êà™ËøáÁ®ã‰∏≠Ë∞ÉÁî®ÈôêÊµÅ„ÄÇ ÂΩìÁÑ∂‰ΩøÁî®Êó∂‰πüÂæóÊâ´ÊèèÂà∞ËØ•ÂåÖ: 1@ComponentScan(value = "com.crossoverjie.distributed.intercept") ÊÄªÁªìÈôêÊµÅÂú®‰∏Ä‰∏™È´òÂπ∂ÂèëÂ§ßÊµÅÈáèÁöÑÁ≥ªÁªü‰∏≠ÊòØ‰øùÊä§Â∫îÁî®ÁöÑ‰∏Ä‰∏™Âà©Âô®ÔºåÊàêÁÜüÁöÑÊñπÊ°à‰πüÂæàÂ§öÔºåÂ∏åÊúõÂØπÂàö‰∫ÜËß£Ëøô‰∏ÄÂùóÁöÑÊúãÂèãÊèê‰æõ‰∏Ä‰∫õÊÄùË∑Ø„ÄÇ ‰ª•‰∏äÊâÄÊúâÁöÑÊ∫êÁ†ÅÔºö https://github.com/crossoverJie/distributed-redis-tool https://github.com/crossoverJie/springboot-cloud ÊÑüÂÖ¥Ë∂£ÁöÑÊúãÂèãÂèØ‰ª•ÁÇπ‰∏™ Star ÊàñÊòØÊèê‰∫§ PR„ÄÇ Âè∑Â§ñÊúÄËøëÂú®ÊÄªÁªì‰∏Ä‰∫õ Java Áõ∏ÂÖ≥ÁöÑÁü•ËØÜÁÇπÔºåÊÑüÂÖ¥Ë∂£ÁöÑÊúãÂèãÂèØ‰ª•‰∏ÄËµ∑Áª¥Êä§„ÄÇ Âú∞ÂùÄ: https://github.com/crossoverJie/Java-Interview]]></content>
      <categories>
        <category>sbc</category>
        <category>Distributed Tools</category>
      </categories>
      <tags>
        <tag>Distributed Lock</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[„ÄêËØë„ÄëÂØπ‰∫éÂàùÂ≠¶ËÄÖ‰ªÄ‰πàÊòØÊúÄÂ•ΩÁöÑÁºñÁ®ãËØ≠Ë®ÄÔºü]]></title>
    <url>%2F2018%2F04%2F12%2Ftranslation%2Ftranslation-What%20Is%20The%20Best%20Programming%20Language%20to%20Start%2F</url>
    <content type="text"><![CDATA[ÂéüÊñáÈìæÊé•PythonÔºüJavaÔºüRubyÔºüJavaScriptÔºüÊúâÈùûÂ∏∏Â§öÁöÑÈÄâÊã©„ÄÇÈÄâÊã©‰∏ÄÁßçÁºñÁ®ãËØ≠Ë®ÄÂºÄÂßã‰Ω†ÁöÑÁºñÁ†Å‰πãÊóÖ‰∏çÂ∫îËØ•ÊòØ‰∏Ä‰ª∂Ëâ∞Â∑®ÁöÑ‰ªªÂä°„ÄÇ ‰∫ãÂÆû‰∏äÔºö‰Ω†Â∞ÜË¶ÅÂ≠¶‰π†ÁöÑËØ≠Ë®ÄÂπ∂‰∏çÊòØÁâπÂà´ÈáçË¶ÅÔºåÊõ¥ÈáçË¶ÅÁöÑÊòØÂ≠¶‰π†ÁºñÁ®ãÁöÑÁêÜÂøµ„ÄÇÂØπ‰∫é‰ªª‰ΩïÁºñÁ®ãËØ≠Ë®ÄÊù•ËØ¥Áü•ËØÜÁöÑÂèØ‰º†ÈÄíÊÄßÈÉΩÊòØËá≥ÂÖ≥ÈáçË¶ÅÁöÑ„ÄÇ ÊàëÂ≠¶‰π†ÁöÑÁ¨¨‰∏ÄÈó®ËØ≠Ë®ÄÊòØ JavaÔºåÂ≠¶‰π†‰∫ÜÂæ™ÁéØÔºåwhile Âæ™ÁéØÔºåÊù°‰ª∂ÔºåÂáΩÊï∞ÔºåÈù¢ÂêëÂØπË±°ÁºñÁ®ãÂíåËÆ∏Â§öÁºñÁ®ãÁêÜÂøµ„ÄÇ ÁÑ∂ËÄåÔºåÈÄâÊã©‰∏ÄÈó®ËÉΩÂú®ÁºñÁ®ãÈ¢ÜÂüüËΩªÊùæÊâæÂà∞Â∑•‰ΩúÁöÑËØ≠Ë®ÄÊòØÊõ¥Â•ΩÁöÑÈÄâÊã©„ÄÇÂØπ‰∫éÂàùÂ≠¶ËÄÖÊù•ËØ¥ÔºåÊàëËøôÈáåÊúâ‰∏Ä‰ªΩÂàóË°®Êé®ËçêÁªô‰Ω†Ôºö PythonPython Âú®ÁæéÂõΩÂ§ßÂ≠¶ÈáåÊòØÊúÄÂèóÊ¨¢ËøéÁöÑÂÖ•Èó®ÂûãËØ≠Ë®Ä„ÄÇ Â∞±ÂÉè JavaScript ‰∏ÄÊ†∑ÔºåPython ‰πüÈùûÂ∏∏ÁÅµÊ¥ªÔºåÁé∞Âú®Ë¢´Áî®‰∫éÊûÑÂª∫ÁîüÁâ©‰ø°ÊÅØÂ≠¶ÁöÑ web Â∫îÁî®„ÄÇÊàëÂº∫ÁÉàÊé®Ëçê‰Ω†Â≠¶‰π† PythonÔºåÂÆÉÊòØÂæàÊ£íÁöÑÂÖ•Èó®ÈÄâÊã©„ÄÇ JavaJava ÊòØ‰ºÅ‰∏öÁéØÂ¢É‰∏≠‰ΩøÁî®ÊúÄÂ§öÁöÑËØ≠Ë®ÄÔºåÊ†πÊçÆ TIOBE ÁªüËÆ° Java ÈïøÂπ¥Âç†ÊçÆÁºñÁ®ãËØ≠Ë®ÄÊ¶úÈ¶ñ„ÄÇÂêåÊó∂ Java ÊòØÂº∫Á±ªÂûãÂú∞ÈùôÊÄÅËØ≠Ë®ÄÔºåÂèØ‰ª•Êõ¥ÂÆπÊòìÂú∞ÂéªÊèèËø∞‰∏Ä‰∫õÁºñÁ®ãÁêÜÂøµ„ÄÇ Java ‰Ωú‰∏∫ÊúÄÂ∏∏‰ΩøÁî®ÁöÑËØ≠Ë®ÄÔºå‰Ω†ÂèØ‰ª•ÂæàËΩªÊùæÂú∞Âú®ËøôÊÆµÁºñÁ®ã‰πãÊóÖ‰∏≠ÊâæÂà∞ Java ÁöÑÁõ∏ÂÖ≥ËØæÁ®ãÂíåÊåáÂçóÊù•Ëé∑ÂæóÂ∏ÆÂä©„ÄÇ‰Ω†ËøòÂèØ‰ª•‰ΩøÁî® Java ÊûÑÂª∫ÊúçÂä°Á´ØÂ∫îÁî®„ÄÅAndroid APP Á≠âÂ∫îÁî®Á®ãÂ∫è„ÄÇ RubyRuby ÊòØÊàëÊúÄÂñúÊ¨¢ÁöÑÁºñÁ®ãËØ≠Ë®ÄÔºåÂÆÉÁºñÂÜôÁÆÄÂçïÔºåÂÆπÊòìÁêÜËß£Âπ∂‰∏î‰ΩøÁî®È°∫Êâã„ÄÇ Â∞±ÂÉè JavaScript ‰∏ÄÊ†∑ÔºåÂÆÉÂ≠¶Ëµ∑Êù•ÁÆÄÂçï‰ΩÜÊòØ‰∏çÊòìÊéåÊè°„ÄÇRuby Âú®ÂæàÂ§öÂÖ¨Âè∏‰∏≠Ë¢´ÂπøÊ≥õÂ∫îÁî®ÔºåÊØîÂ¶Ç Airbnb, EBANX, Shopify, Twitter, GitHub Á≠âÁ≠â„ÄÇÂÆÉËøòÊúâ‰∏Ä‰∏™Ë∂ÖËµûÁöÑ 7*24 Â∞èÊó∂ÁöÑÂú®Á∫øÁ§æÂå∫ÈöèÊó∂Êèê‰æõÂ∏ÆÂä©„ÄÇRuby ‰ª• Ruby on Rails Ê°ÜÊû∂ËëóÁß∞ÔºåÂÆÉÂèØ‰ª•Â∏Æ‰Ω†ÂæàËΩªÊùæÁöÑÊûÑÂª∫Êï¥‰∏™ web Â∫îÁî®„ÄÇ JavaScriptJavaScript ÊòØÊàëÁî®ËøáÁöÑÊúÄÁÅµÊ¥ªÁöÑËØ≠Ë®Ä‰πã‰∏Ä„ÄÇ ‰Ω†ËÉΩÁî®ÂÆÉÊûÑÂª∫ÊéßÂà∂Âè∞Á®ãÂ∫èÔºåÊ°åÈù¢ËΩØ‰ª∂ÔºåÊâãÊú∫ APPÔºåÂâçÁ´ØÂºÄÂèëÔºåÂêéÁ´ØÂºÄÂèëÁ≠âÁ≠â„ÄÇÂÆÉÊòØ‰∏Ä‰∏™Âæà‰∏çÈîôÁöÑÁºñÁ®ãËØ≠Ë®ÄÔºåÁÆÄÂçïÊòìÂ≠¶‰ΩÜÈöæ‰ª•ÊéåÊè°„ÄÇ ÊàëÂª∫ËÆÆ‰Ω†Â≠¶‰π†Âπ∂ÊéåÊè° JavaScript Ôºå‰ΩÜ‰∏çÊòØ‰Ωú‰∏∫Á¨¨‰∏ÄÈó®ËØ≠Ë®Ä„ÄÇ ÂØπ‰∫éÂàùÂ≠¶ËÄÖÊù•ËØ¥ JavaScript ÂæàÈöæË∞ÉËØïÂπ∂‰∏î‰∏çÂÆπÊòìÂ≠¶‰π†ÁºñÁ®ãÁêÜÂøµÊØîÂ¶ÇÂºÇÊ≠•ÔºåÂéüÂûãÔºåÈù¢ÂêëÂØπË±°Á≠âÁ≠â„ÄÇ ‰∏çË¶ÅÁ∫†ÁªìËØ≠Ë®Ä‰Ω†ÈúÄË¶ÅÈÄöËøáÈÄâÊã©‰∏ÄÈó®ËØ≠Ë®ÄÊù•Â≠¶‰π†ÁºñÁ®ãÁêÜÂøµÔºåÂΩì‰Ω†Â≠¶ÂÆå‰πãÂêé‰Ω†Â∞ÜËä±Ë¥πËæÉÂ∞èÁöÑÂ≠¶‰π†Êõ≤Á∫øÊù•Â≠¶‰π†‰ªª‰ΩïÂÖ∂‰ªñÁöÑËØ≠Ë®Ä„ÄÇ Â¶ÇÊûú‰Ω†ÊÉ≥Ë¶ÅÂ≠¶‰π†Â¶Ç‰ΩïÂ≠¶‰π†‰∏ÄÈó®Êñ∞ËØ≠Ë®ÄÁöÑËØùÔºåÂèØ‰ª•ÈòÖËØªÊàëÁöÑÊñáÁ´† ‚ÄúHow to Learn a New Programming Language or Framework‚ÄùÔºåÂ∞Ü‰ºöÈùûÂ∏∏ÊúâÁî®„ÄÇ]]></content>
      <categories>
        <category>ÁøªËØë</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Âä®ÊâãÂÆûÁé∞‰∏Ä‰∏™ LRU cache]]></title>
    <url>%2F2018%2F04%2F07%2Falgorithm%2FLRU-cache%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄLRU ÊòØ Least Recently Used ÁöÑÁÆÄÂÜôÔºåÂ≠óÈù¢ÊÑèÊÄùÂàôÊòØÊúÄËøëÊúÄÂ∞ë‰ΩøÁî®„ÄÇ ÈÄöÂ∏∏Áî®‰∫éÁºìÂ≠òÁöÑÊ∑òÊ±∞Á≠ñÁï•ÂÆûÁé∞ÔºåÁî±‰∫éÁºìÂ≠òÁöÑÂÜÖÂ≠òÈùûÂ∏∏ÂÆùË¥µÔºåÊâÄ‰ª•ÈúÄË¶ÅÊ†πÊçÆÊüêÁßçËßÑÂàôÊù•ÂâîÈô§Êï∞ÊçÆ‰øùËØÅÂÜÖÂ≠ò‰∏çË¢´ÊíëÊª°„ÄÇ Â¶ÇÂ∏∏Áî®ÁöÑ Redis Â∞±Êúâ‰ª•‰∏ãÂá†ÁßçÁ≠ñÁï•Ôºö Á≠ñÁï• ÊèèËø∞ volatile-lru ‰ªéÂ∑≤ËÆæÁΩÆËøáÊúüÊó∂Èó¥ÁöÑÊï∞ÊçÆÈõÜ‰∏≠ÊåëÈÄâÊúÄËøëÊúÄÂ∞ë‰ΩøÁî®ÁöÑÊï∞ÊçÆÊ∑òÊ±∞ volatile-ttl ‰ªéÂ∑≤ËÆæÁΩÆËøáÊúüÊó∂Èó¥ÁöÑÊï∞ÊçÆÈõÜ‰∏≠ÊåëÈÄâÂ∞ÜË¶ÅËøáÊúüÁöÑÊï∞ÊçÆÊ∑òÊ±∞ volatile-random ‰ªéÂ∑≤ËÆæÁΩÆËøáÊúüÊó∂Èó¥ÁöÑÊï∞ÊçÆÈõÜ‰∏≠‰ªªÊÑèÈÄâÊã©Êï∞ÊçÆÊ∑òÊ±∞ allkeys-lru ‰ªéÊâÄÊúâÊï∞ÊçÆÈõÜ‰∏≠ÊåëÈÄâÊúÄËøëÊúÄÂ∞ë‰ΩøÁî®ÁöÑÊï∞ÊçÆÊ∑òÊ±∞ allkeys-random ‰ªéÊâÄÊúâÊï∞ÊçÆÈõÜ‰∏≠‰ªªÊÑèÈÄâÊã©Êï∞ÊçÆËøõË°åÊ∑òÊ±∞ no-envicition Á¶ÅÊ≠¢È©±ÈÄêÊï∞ÊçÆ ÊëòÊäÑËá™:https://github.com/CyC2018/Interview-Notebook/blob/master/notes/Redis.md#%E5%8D%81%E4%B8%89%E6%95%B0%E6%8D%AE%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5 ÂÆûÁé∞‰∏Ä‰πãÂâç‰πüÊúâÊé•Ëß¶Ëøá‰∏ÄÈÅìÈù¢ËØïÈ¢òÔºåÂ§ßÊ¶ÇÈúÄÊ±ÇÊòØÔºö ÂÆûÁé∞‰∏Ä‰∏™ LRU ÁºìÂ≠òÔºåÂΩìÁºìÂ≠òÊï∞ÊçÆËææÂà∞ N ‰πãÂêéÈúÄË¶ÅÊ∑òÊ±∞ÊéâÊúÄËøëÊúÄÂ∞ë‰ΩøÁî®ÁöÑÊï∞ÊçÆ„ÄÇ N Â∞èÊó∂‰πãÂÜÖÊ≤°ÊúâË¢´ËÆøÈóÆÁöÑÊï∞ÊçÆ‰πüÈúÄË¶ÅÊ∑òÊ±∞Êéâ„ÄÇ ‰ª•‰∏ãÊòØÊàëÁöÑÂÆûÁé∞Ôºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323public class LRUAbstractMap extends java.util.AbstractMap &#123; private final static Logger LOGGER = LoggerFactory.getLogger(LRUAbstractMap.class); /** * Ê£ÄÊü•ÊòØÂê¶Ë∂ÖÊúüÁ∫øÁ®ã */ private ExecutorService checkTimePool ; /** * map ÊúÄÂ§ßsize */ private final static int MAX_SIZE = 1024 ; private final static ArrayBlockingQueue&lt;Node&gt; QUEUE = new ArrayBlockingQueue&lt;&gt;(MAX_SIZE) ; /** * ÈªòËÆ§Â§ßÂ∞è */ private final static int DEFAULT_ARRAY_SIZE =1024 ; /** * Êï∞ÁªÑÈïøÂ∫¶ */ private int arraySize ; /** * Êï∞ÁªÑ */ private Object[] arrays ; /** * Âà§Êñ≠ÊòØÂê¶ÂÅúÊ≠¢ flag */ private volatile boolean flag = true ; /** * Ë∂ÖÊó∂Êó∂Èó¥ */ private final static Long EXPIRE_TIME = 60 * 60 * 1000L ; /** * Êï¥‰∏™ Map ÁöÑÂ§ßÂ∞è */ private volatile AtomicInteger size ; public LRUAbstractMap() &#123; arraySize = DEFAULT_ARRAY_SIZE; arrays = new Object[arraySize] ; //ÂºÄÂêØ‰∏Ä‰∏™Á∫øÁ®ãÊ£ÄÊü•ÊúÄÂÖàÊîæÂÖ•ÈòüÂàóÁöÑÂÄºÊòØÂê¶Ë∂ÖÊúü executeCheckTime(); &#125; /** * ÂºÄÂêØ‰∏Ä‰∏™Á∫øÁ®ãÊ£ÄÊü•ÊúÄÂÖàÊîæÂÖ•ÈòüÂàóÁöÑÂÄºÊòØÂê¶Ë∂ÖÊúü ËÆæÁΩÆ‰∏∫ÂÆàÊä§Á∫øÁ®ã */ private void executeCheckTime() &#123; ThreadFactory namedThreadFactory = new ThreadFactoryBuilder() .setNameFormat("check-thread-%d") .setDaemon(true) .build(); checkTimePool = new ThreadPoolExecutor(1, 1, 0L, TimeUnit.MILLISECONDS, new ArrayBlockingQueue&lt;&gt;(1),namedThreadFactory,new ThreadPoolExecutor.AbortPolicy()); checkTimePool.execute(new CheckTimeThread()) ; &#125; @Override public Set&lt;Entry&gt; entrySet() &#123; return super.keySet(); &#125; @Override public Object put(Object key, Object value) &#123; int hash = hash(key); int index = hash % arraySize ; Node currentNode = (Node) arrays[index] ; if (currentNode == null)&#123; arrays[index] = new Node(null,null, key, value); //ÂÜôÂÖ•ÈòüÂàó QUEUE.offer((Node) arrays[index]) ; sizeUp(); &#125;else &#123; Node cNode = currentNode ; Node nNode = cNode ; //Â≠òÂú®Â∞±Ë¶ÜÁõñ if (nNode.key == key)&#123; cNode.val = value ; &#125; while (nNode.next != null)&#123; //key Â≠òÂú® Â∞±Ë¶ÜÁõñ ÁÆÄÂçïÂà§Êñ≠ if (nNode.key == key)&#123; nNode.val = value ; break ; &#125;else &#123; //‰∏çÂ≠òÂú®Â∞±Êñ∞Â¢ûÈìæË°® sizeUp(); Node node = new Node(nNode,null,key,value) ; //ÂÜôÂÖ•ÈòüÂàó QUEUE.offer(currentNode) ; cNode.next = node ; &#125; nNode = nNode.next ; &#125; &#125; return null ; &#125; @Override public Object get(Object key) &#123; int hash = hash(key) ; int index = hash % arraySize ; Node currentNode = (Node) arrays[index] ; if (currentNode == null)&#123; return null ; &#125; if (currentNode.next == null)&#123; //Êõ¥Êñ∞Êó∂Èó¥ currentNode.setUpdateTime(System.currentTimeMillis()); //Ê≤°ÊúâÂÜ≤Á™Å return currentNode ; &#125; Node nNode = currentNode ; while (nNode.next != null)&#123; if (nNode.key == key)&#123; //Êõ¥Êñ∞Êó∂Èó¥ currentNode.setUpdateTime(System.currentTimeMillis()); return nNode ; &#125; nNode = nNode.next ; &#125; return super.get(key); &#125; @Override public Object remove(Object key) &#123; int hash = hash(key) ; int index = hash % arraySize ; Node currentNode = (Node) arrays[index] ; if (currentNode == null)&#123; return null ; &#125; if (currentNode.key == key)&#123; sizeDown(); arrays[index] = null ; //ÁßªÈô§ÈòüÂàó QUEUE.poll(); return currentNode ; &#125; Node nNode = currentNode ; while (nNode.next != null)&#123; if (nNode.key == key)&#123; sizeDown(); //Âú®ÈìæË°®‰∏≠ÊâæÂà∞‰∫Ü Êää‰∏ä‰∏Ä‰∏™ËäÇÁÇπÁöÑ next ÊåáÂêëÂΩìÂâçËäÇÁÇπÁöÑ‰∏ã‰∏Ä‰∏™ËäÇÁÇπ nNode.pre.next = nNode.next ; nNode = null ; //ÁßªÈô§ÈòüÂàó QUEUE.poll(); return nNode; &#125; nNode = nNode.next ; &#125; return super.remove(key); &#125; /** * Â¢ûÂä†size */ private void sizeUp()&#123; //Âú®putÂÄºÊó∂ÂÄôËÆ§‰∏∫ÈáåËæπÂ∑≤ÁªèÊúâÊï∞ÊçÆ‰∫Ü flag = true ; if (size == null)&#123; size = new AtomicInteger() ; &#125; int size = this.size.incrementAndGet(); if (size &gt;= MAX_SIZE) &#123; //ÊâæÂà∞ÈòüÂàóÂ§¥ÁöÑÊï∞ÊçÆ Node node = QUEUE.poll() ; if (node == null)&#123; throw new RuntimeException("data error") ; &#125; //ÁßªÈô§ËØ• key Object key = node.key ; remove(key) ; lruCallback() ; &#125; &#125; /** * Êï∞ÈáèÂáèÂ∞è */ private void sizeDown()&#123; if (QUEUE.size() == 0)&#123; flag = false ; &#125; this.size.decrementAndGet() ; &#125; @Override public int size() &#123; return size.get() ; &#125; /** * ÈìæË°® */ private class Node&#123; private Node next ; private Node pre ; private Object key ; private Object val ; private Long updateTime ; public Node(Node pre,Node next, Object key, Object val) &#123; this.pre = pre ; this.next = next; this.key = key; this.val = val; this.updateTime = System.currentTimeMillis() ; &#125; public void setUpdateTime(Long updateTime) &#123; this.updateTime = updateTime; &#125; public Long getUpdateTime() &#123; return updateTime; &#125; @Override public String toString() &#123; return "Node&#123;" + "key=" + key + ", val=" + val + '&#125;'; &#125; &#125; /** * copy HashMap ÁöÑ hash ÂÆûÁé∞ * @param key * @return */ public int hash(Object key) &#123; int h; return (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16); &#125; private void lruCallback()&#123; LOGGER.debug("lruCallback"); &#125; private class CheckTimeThread implements Runnable&#123; @Override public void run() &#123; while (flag)&#123; try &#123; Node node = QUEUE.poll(); if (node == null)&#123; continue ; &#125; Long updateTime = node.getUpdateTime() ; if ((updateTime - System.currentTimeMillis()) &gt;= EXPIRE_TIME)&#123; remove(node.key) ; &#125; &#125; catch (Exception e) &#123; LOGGER.error("InterruptedException"); &#125; &#125; &#125; &#125;&#125; ÊÑüÂÖ¥Ë∂£ÁöÑÊúãÂèãÂèØ‰ª•Áõ¥Êé•‰ªé: https://github.com/crossoverJie/Java-Interview/blob/master/src/main/java/com/crossoverjie/actual/LRUAbstractMap.java ‰∏ãËΩΩ‰ª£Á†ÅÊú¨Âú∞ËøêË°å„ÄÇ ‰ª£Á†ÅÁúãÁùÄÊØîËæÉÂ§öÔºåÂÖ∂ÂÆûÂÆûÁé∞ÁöÑÊÄùË∑ØËøòÊòØÊØîËæÉÁÆÄÂçïÔºö ÈááÁî®‰∫Ü‰∏é HashMap ‰∏ÄÊ†∑ÁöÑ‰øùÂ≠òÊï∞ÊçÆÊñπÂºèÔºåÂè™ÊòØËá™Â∑±ÊâãÂä®ÂÆûÁé∞‰∫Ü‰∏Ä‰∏™ÁÆÄÊòìÁâà„ÄÇ ÂÜÖÈÉ®ÈááÁî®‰∫Ü‰∏Ä‰∏™ÈòüÂàóÊù•‰øùÂ≠òÊØèÊ¨°ÂÜôÂÖ•ÁöÑÊï∞ÊçÆ„ÄÇ ÂÜôÂÖ•ÁöÑÊó∂ÂÄôÂà§Êñ≠ÁºìÂ≠òÊòØÂê¶Â§ß‰∫é‰∫ÜÈòàÂÄº NÔºåÂ¶ÇÊûúÊª°Ë∂≥ÂàôÊ†πÊçÆÈòüÂàóÁöÑ FIFO ÁâπÊÄßÂ∞ÜÈòüÂàóÂ§¥ÁöÑÊï∞ÊçÆÂà†Èô§„ÄÇÂõ†‰∏∫ÈòüÂàóÂ§¥ÁöÑÊï∞ÊçÆËÇØÂÆöÊòØÊúÄÂÖàÊîæËøõÂéªÁöÑ„ÄÇ ÂÜçÂºÄÂêØ‰∫Ü‰∏Ä‰∏™ÂÆàÊä§Á∫øÁ®ãÁî®‰∫éÂà§Êñ≠ÊúÄÂÖàÊîæËøõÂéªÁöÑÊï∞ÊçÆÊòØÂê¶Ë∂ÖÊúüÔºàÂõ†‰∏∫Â∞±ÁÆóË∂ÖÊúü‰πüÊòØÊúÄÂÖàÊîæËøõÂéªÁöÑÊï∞ÊçÆÊúÄÊúâÂèØËÉΩÊª°Ë∂≥Ë∂ÖÊúüÊù°‰ª∂„ÄÇÔºâ ËÆæÁΩÆ‰∏∫ÂÆàÊä§Á∫øÁ®ãÂèØ‰ª•Êõ¥Â•ΩÁöÑË°®ÊòéÂÖ∂ÁõÆÁöÑÔºàÊúÄÂùèÁöÑÊÉÖÂÜµ‰∏ãÔºåÂ¶ÇÊûúÊòØ‰∏Ä‰∏™Áî®Êà∑Á∫øÁ®ãÊúÄÁªàÊúâÂèØËÉΩÂØºËá¥Á®ãÂ∫è‰∏çËÉΩÊ≠£Â∏∏ÈÄÄÂá∫ÔºåÂõ†‰∏∫ËØ•Á∫øÁ®ã‰∏ÄÁõ¥Âú®ËøêË°åÔºåÂÆàÊä§Á∫øÁ®ãÂàô‰∏ç‰ºöÊúâËøô‰∏™ÊÉÖÂÜµ„ÄÇÔºâ ‰ª•‰∏ä‰ª£Á†ÅÂ§ß‰ΩìÂäüËÉΩÊª°Ë∂≥‰∫ÜÔºå‰ΩÜÊòØÊúâ‰∏Ä‰∏™Ëá¥ÂëΩÈóÆÈ¢ò„ÄÇ Â∞±ÊòØÊúÄËøëÊúÄÂ∞ë‰ΩøÁî®Ê≤°ÊúâÊª°Ë∂≥ÔºåÂà†Èô§ÁöÑÊï∞ÊçÆÈÉΩÊòØÊúÄÂÖàÊîæÂÖ•ÁöÑÊï∞ÊçÆ„ÄÇ ‰∏çËøáÂÖ∂‰∏≠ÁöÑ put get ÊµÅÁ®ãÁÆóÊòØ‰∏Ä‰∏™ÁÆÄÊòìÁöÑ HashMap ÂÆûÁé∞ÔºåÂèØ‰ª•ÂØπ HashMap Âä†Ê∑±‰∏Ä‰∫õÁêÜËß£„ÄÇ ÂÆûÁé∞‰∫åÂõ†Ê≠§Â¶Ç‰ΩïÊù•ÂÆûÁé∞‰∏Ä‰∏™ÂÆåÊï¥ÁöÑ LRU ÁºìÂ≠òÂë¢ÔºåËøôÊ¨°‰∏çËÄÉËôëËøáÊúüÊó∂Èó¥ÁöÑÈóÆÈ¢ò„ÄÇ ÂÖ∂ÂÆû‰ªé‰∏ä‰∏Ä‰∏™ÂÆûÁé∞‰πüËÉΩÊÉ≥Âà∞‰∏Ä‰∫õÊÄùË∑ØÔºö Ë¶ÅËÆ∞ÂΩïÊúÄËøëÊúÄÂ∞ë‰ΩøÁî®ÔºåÈÇ£Ëá≥Â∞ëÈúÄË¶Å‰∏Ä‰∏™ÊúâÂ∫èÁöÑÈõÜÂêàÊù•‰øùËØÅÂÜôÂÖ•ÁöÑÈ°∫Â∫è„ÄÇ Âú®‰ΩøÁî®‰∫ÜÊï∞ÊçÆ‰πãÂêéËÉΩÂ§üÊõ¥Êñ∞ÂÆÉÁöÑÈ°∫Â∫è„ÄÇ Âü∫‰∫é‰ª•‰∏ä‰∏§ÁÇπÂæàÂÆπÊòìÊÉ≥Âà∞‰∏Ä‰∏™Â∏∏Áî®ÁöÑÊï∞ÊçÆÁªìÊûÑÔºöÈìæË°®„ÄÇ ÊØèÊ¨°ÂÜôÂÖ•Êï∞ÊçÆÊó∂Â∞ÜÊï∞ÊçÆÊîæÂÖ•ÈìæË°®Â§¥ÁªìÁÇπ„ÄÇ ‰ΩøÁî®Êï∞ÊçÆÊó∂ÂÄôÂ∞ÜÊï∞ÊçÆÁßªÂä®Âà∞Â§¥ÁªìÁÇπ„ÄÇ ÁºìÂ≠òÊï∞ÈáèË∂ÖËøáÈòàÂÄºÊó∂ÁßªÈô§ÈìæË°®Â∞æÈÉ®Êï∞ÊçÆ„ÄÇ Âõ†Ê≠§Êúâ‰∫Ü‰ª•‰∏ãÂÆûÁé∞Ôºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211public class LRUMap&lt;K, V&gt; &#123; private final Map&lt;K, V&gt; cacheMap = new HashMap&lt;&gt;(); /** * ÊúÄÂ§ßÁºìÂ≠òÂ§ßÂ∞è */ private int cacheSize; /** * ËäÇÁÇπÂ§ßÂ∞è */ private int nodeCount; /** * Â§¥ÁªìÁÇπ */ private Node&lt;K, V&gt; header; /** * Â∞æÁªìÁÇπ */ private Node&lt;K, V&gt; tailer; public LRUMap(int cacheSize) &#123; this.cacheSize = cacheSize; //Â§¥ÁªìÁÇπÁöÑ‰∏ã‰∏Ä‰∏™ÁªìÁÇπ‰∏∫Á©∫ header = new Node&lt;&gt;(); header.next = null; //Â∞æÁªìÁÇπÁöÑ‰∏ä‰∏Ä‰∏™ÁªìÁÇπ‰∏∫Á©∫ tailer = new Node&lt;&gt;(); tailer.tail = null; //ÂèåÂêëÈìæË°® Â§¥ÁªìÁÇπÁöÑ‰∏äÁªìÁÇπÊåáÂêëÂ∞æÁªìÁÇπ header.tail = tailer; //Â∞æÁªìÁÇπÁöÑ‰∏ãÁªìÁÇπÊåáÂêëÂ§¥ÁªìÁÇπ tailer.next = header; &#125; public void put(K key, V value) &#123; cacheMap.put(key, value); //ÂèåÂêëÈìæË°®‰∏≠Ê∑ªÂä†ÁªìÁÇπ addNode(key, value); &#125; public V get(K key)&#123; Node&lt;K, V&gt; node = getNode(key); //ÁßªÂä®Âà∞Â§¥ÁªìÁÇπ moveToHead(node) ; return cacheMap.get(key); &#125; private void moveToHead(Node&lt;K,V&gt; node)&#123; //Â¶ÇÊûúÊòØÊúÄÂêéÁöÑ‰∏Ä‰∏™ËäÇÁÇπ if (node.tail == null)&#123; node.next.tail = null ; tailer = node.next ; nodeCount -- ; &#125; //Â¶ÇÊûúÊòØÊú¨Êù•Â∞±ÊòØÂ§¥ËäÇÁÇπ ‰∏ç‰ΩúÂ§ÑÁêÜ if (node.next == null)&#123; return ; &#125; //Â¶ÇÊûúÂ§Ñ‰∫é‰∏≠Èó¥ËäÇÁÇπ if (node.tail != null &amp;&amp; node.next != null)&#123; //ÂÆÉÁöÑ‰∏ä‰∏ÄËäÇÁÇπÊåáÂêëÂÆÉÁöÑ‰∏ã‰∏ÄËäÇÁÇπ ‰πüÂ∞±Âà†Èô§ÂΩìÂâçËäÇÁÇπ node.tail.next = node.next ; nodeCount -- ; &#125; //ÊúÄÂêéÂú®Â§¥ÈÉ®Â¢ûÂä†ÂΩìÂâçËäÇÁÇπ //Ê≥®ÊÑèËøôÈáåÈúÄË¶ÅÈáçÊñ∞ new ‰∏Ä‰∏™ÂØπË±°Ôºå‰∏çÁÑ∂ÂéüÊú¨ÁöÑnode ËøòÊúâÁùÄ‰∏ãÈù¢ÁöÑÂºïÁî®Ôºå‰ºöÈÄ†ÊàêÂÜÖÂ≠òÊ∫¢Âá∫„ÄÇ node = new Node&lt;&gt;(node.getKey(),node.getValue()) ; addHead(node) ; &#125; /** * ÈìæË°®Êü•ËØ¢ ÊïàÁéáËæÉ‰Ωé * @param key * @return */ private Node&lt;K,V&gt; getNode(K key)&#123; Node&lt;K,V&gt; node = tailer ; while (node != null)&#123; if (node.getKey().equals(key))&#123; return node ; &#125; node = node.next ; &#125; return null ; &#125; /** * ÂÜôÂÖ•Â§¥ÁªìÁÇπ * @param key * @param value */ private void addNode(K key, V value) &#123; Node&lt;K, V&gt; node = new Node&lt;&gt;(key, value); //ÂÆπÈáèÊª°‰∫ÜÂà†Èô§ÊúÄÂêé‰∏Ä‰∏™ if (cacheSize == nodeCount) &#123; //Âà†Èô§Â∞æÁªìÁÇπ delTail(); &#125; //ÂÜôÂÖ•Â§¥ÁªìÁÇπ addHead(node); &#125; /** * Ê∑ªÂä†Â§¥ÁªìÁÇπ * * @param node */ private void addHead(Node&lt;K, V&gt; node) &#123; //ÂÜôÂÖ•Â§¥ÁªìÁÇπ header.next = node; node.tail = header; header = node; nodeCount++; //Â¶ÇÊûúÂÜôÂÖ•ÁöÑÊï∞ÊçÆÂ§ß‰∫é2‰∏™ Â∞±Â∞ÜÂàùÂßãÂåñÁöÑÂ§¥Â∞æÁªìÁÇπÂà†Èô§ if (nodeCount == 2) &#123; tailer.next.next.tail = null; tailer = tailer.next.next; &#125; &#125; private void delTail() &#123; //ÊääÂ∞æÁªìÁÇπ‰ªéÁºìÂ≠ò‰∏≠Âà†Èô§ cacheMap.remove(tailer.getKey()); //Âà†Èô§Â∞æÁªìÁÇπ tailer.next.tail = null; tailer = tailer.next; nodeCount--; &#125; private class Node&lt;K, V&gt; &#123; private K key; private V value; Node&lt;K, V&gt; tail; Node&lt;K, V&gt; next; public Node(K key, V value) &#123; this.key = key; this.value = value; &#125; public Node() &#123; &#125; public K getKey() &#123; return key; &#125; public void setKey(K key) &#123; this.key = key; &#125; public V getValue() &#123; return value; &#125; public void setValue(V value) &#123; this.value = value; &#125; &#125; @Override public String toString() &#123; StringBuilder sb = new StringBuilder() ; Node&lt;K,V&gt; node = tailer ; while (node != null)&#123; sb.append(node.getKey()).append(":") .append(node.getValue()) .append("--&gt;") ; node = node.next ; &#125; return sb.toString(); &#125;&#125; Ê∫êÁ†ÅÔºöhttps://github.com/crossoverJie/Java-Interview/blob/master/src/main/java/com/crossoverjie/actual/LRUMap.java ÂÆûÈôÖÊïàÊûúÔºåÂÜôÂÖ•Êó∂Ôºö 1234567891011121314151617181920 @Test public void put() throws Exception &#123; LRUMap&lt;String,Integer&gt; lruMap = new LRUMap(3) ; lruMap.put("1",1) ; lruMap.put("2",2) ; lruMap.put("3",3) ; System.out.println(lruMap.toString()); lruMap.put("4",4) ; System.out.println(lruMap.toString()); lruMap.put("5",5) ; System.out.println(lruMap.toString()); &#125;//ËæìÂá∫Ôºö1:1--&gt;2:2--&gt;3:3--&gt;2:2--&gt;3:3--&gt;4:4--&gt;3:3--&gt;4:4--&gt;5:5--&gt; ‰ΩøÁî®Êó∂Ôºö 12345678910111213141516171819202122 @Test public void get() throws Exception &#123; LRUMap&lt;String,Integer&gt; lruMap = new LRUMap(3) ; lruMap.put("1",1) ; lruMap.put("2",2) ; lruMap.put("3",3) ; System.out.println(lruMap.toString()); System.out.println("=============="); Integer integer = lruMap.get("1"); System.out.println(integer); System.out.println("=============="); System.out.println(lruMap.toString()); &#125; //ËæìÂá∫1:1--&gt;2:2--&gt;3:3--&gt;==============1==============2:2--&gt;3:3--&gt;1:1--&gt; ÂÆûÁé∞ÊÄùË∑ØÂíå‰∏äÊñáÊèêÂà∞ÁöÑ‰∏ÄËá¥ÔºåËØ¥‰∏ãÈáçÁÇπÔºö Êï∞ÊçÆÊòØÁõ¥Êé•Âà©Áî® HashMap Êù•Â≠òÊîæÁöÑ„ÄÇ ÂÜÖÈÉ®‰ΩøÁî®‰∫Ü‰∏Ä‰∏™ÂèåÂêëÈìæË°®Êù•Â≠òÊîæÊï∞ÊçÆÔºåÊâÄ‰ª•Êúâ‰∏Ä‰∏™Â§¥ÁªìÁÇπ headerÔºå‰ª•ÂèäÂ∞æÁªìÁÇπ tailer„ÄÇ ÊØèÊ¨°ÂÜôÂÖ•Â§¥ÁªìÁÇπÔºåÂà†Èô§Â∞æÁªìÁÇπÊó∂ÈÉΩÊòØ‰æùËµñ‰∫é header tailerÔºåÂ¶ÇÊûúÁúãÁùÄÊØîËæÉÊáµÂª∫ËÆÆËá™Â∑±ÂÆûÁé∞‰∏Ä‰∏™ÈìæË°®ÁÜüÊÇâ‰∏ãÔºåÊàñÁªìÂêà‰∏ãÊñáÁöÑÂØπË±°ÂÖ≥Á≥ªÂõæ‰∏ÄËµ∑ÁêÜËß£„ÄÇ ‰ΩøÁî®Êï∞ÊçÆÁßªÂä®Âà∞ÈìæË°®Â§¥Êó∂ÔºåÁ¨¨‰∏ÄÊ≠•ÊòØÈúÄË¶ÅÂú®ÂèåÂêëÈìæË°®‰∏≠ÊâæÂà∞ËØ•ËäÇÁÇπ„ÄÇËøôÈáåÂ∞±‰ΩìÁé∞Âá∫ÈìæË°®ÁöÑÈóÆÈ¢ò‰∫Ü„ÄÇÊü•ÊâæÊïàÁéáÂæà‰ΩéÔºåÊúÄÂ∑ÆÈúÄË¶Å O(N)„ÄÇ‰πãÂêé‰æùËµñ‰∫éÂΩìÂâçËäÇÁÇπËøõË°åÁßªÂä®„ÄÇ Âú®ÂÜôÂÖ•Â§¥ÁªìÁÇπÊó∂ÊúâÂà§Êñ≠ÈìæË°®Â§ßÂ∞èÁ≠â‰∫é 2 Êó∂ÈúÄË¶ÅÂà†Èô§ÂàùÂßãÂåñÁöÑÂ§¥Â∞æÁªìÁÇπ„ÄÇËøôÊòØÂõ†‰∏∫ÂàùÂßãÂåñÊó∂ÂÄôÁîüÊàê‰∫Ü‰∏§‰∏™ÂèåÂêëËäÇÁÇπÔºåÊ≤°ÊúâÊï∞ÊçÆÂè™ÊòØ‰∏∫‰∫ÜÂΩ¢Êàê‰∏Ä‰∏™Êï∞ÊçÆÁªìÊûÑ„ÄÇÂΩìÁúüÂÆûÊï∞ÊçÆËøõÊù•‰πãÂêéÈúÄË¶ÅÂà†Èô§‰ª•Êñπ‰æøÂêéÁª≠ÁöÑÊìç‰ΩúÔºàËøôÁÇπÂèØ‰ª•ÁªßÁª≠‰ºòÂåñÔºâ„ÄÇ ‰ª•‰∏äÁöÑÊâÄÊúâÊìç‰ΩúÈÉΩÊòØÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑÔºåÈúÄË¶Å‰ΩøÁî®ËÄÖËá™Ë°åÊéßÂà∂„ÄÇ ‰∏ãÈù¢ÊòØÂØπË±°ÂÖ≥Á≥ªÂõæÔºö ÂàùÂßãÂåñÊó∂ ÂÜôÂÖ•Êï∞ÊçÆÊó∂12LRUMap&lt;String,Integer&gt; lruMap = new LRUMap(3) ;lruMap.put("1",1) ; 1lruMap.put("2",2) ; 1lruMap.put("3",3) ; 1lruMap.put("4",4) ; Ëé∑ÂèñÊï∞ÊçÆÊó∂Êï∞ÊçÆÂíå‰∏äÊñá‰∏ÄÊ†∑Ôºö 1Integer integer = lruMap.get("2"); ÈÄöËøá‰ª•‰∏äÂá†Âº†ÂõæÂ∫îËØ•ÊòØÂæàÂ•ΩÁêÜËß£Êï∞ÊçÆÊòØÂ¶Ç‰ΩïÂ≠òÊîæÁöÑ‰∫Ü„ÄÇ ÂÆûÁé∞‰∏âÂÖ∂ÂÆûÂ¶ÇÊûúÂØπ Java ÁöÑÈõÜÂêàÊØîËæÉÁÜüÊÇâÁöÑËØùÔºå‰ºöÂèëÁé∞‰∏äÊñáÁöÑÁªìÊûÑÂíå LinkedHashMap ÈùûÂ∏∏Á±ª‰ºº„ÄÇ ÂØπÊ≠§‰∏çÂ§™ÁÜüÊÇâÁöÑÊúãÂèãÂèØ‰ª•ÂÖà‰∫ÜËß£‰∏ã LinkedHashMap Â∫ïÂ±ÇÂàÜÊûê „ÄÇ ÊâÄ‰ª•Êàë‰ª¨ÂÆåÂÖ®ÂèØ‰ª•ÂÄüÂä©‰∫éÂÆÉÊù•ÂÆûÁé∞Ôºö 123456789101112131415161718192021222324252627282930313233343536373839public class LRULinkedMap&lt;K,V&gt; &#123; /** * ÊúÄÂ§ßÁºìÂ≠òÂ§ßÂ∞è */ private int cacheSize; private LinkedHashMap&lt;K,V&gt; cacheMap ; public LRULinkedMap(int cacheSize) &#123; this.cacheSize = cacheSize; cacheMap = new LinkedHashMap(16,0.75F,true)&#123; @Override protected boolean removeEldestEntry(Map.Entry eldest) &#123; if (cacheSize + 1 == cacheMap.size())&#123; return true ; &#125;else &#123; return false ; &#125; &#125; &#125;; &#125; public void put(K key,V value)&#123; cacheMap.put(key,value) ; &#125; public V get(K key)&#123; return cacheMap.get(key) ; &#125; public Collection&lt;Map.Entry&lt;K, V&gt;&gt; getAll() &#123; return new ArrayList&lt;Map.Entry&lt;K, V&gt;&gt;(cacheMap.entrySet()); &#125;&#125; Ê∫êÁ†ÅÔºöhttps://github.com/crossoverJie/Java-Interview/blob/master/src/main/java/com/crossoverjie/actual/LRULinkedMap.java ËøôÊ¨°Â∞±ÊØîËæÉÁÆÄÊ¥Å‰∫ÜÔºå‰πüÂ∞±Âá†Ë°å‰ª£Á†ÅÔºàÂÖ∑‰ΩìÁöÑÈÄªËæë LinkedHashMap Â∑≤ÁªèÂ∏ÆÊàë‰ª¨ÂÆûÁé∞Â•Ω‰∫ÜÔºâ ÂÆûÈôÖÊïàÊûú: 123456789101112131415161718192021 @Test public void put() throws Exception &#123; LRULinkedMap&lt;String,Integer&gt; map = new LRULinkedMap(3) ; map.put("1",1); map.put("2",2); map.put("3",3); for (Map.Entry&lt;String, Integer&gt; e : map.getAll())&#123; System.out.print(e.getKey() + " : " + e.getValue() + "\t"); &#125; System.out.println(""); map.put("4",4); for (Map.Entry&lt;String, Integer&gt; e : map.getAll())&#123; System.out.print(e.getKey() + " : " + e.getValue() + "\t"); &#125; &#125; //ËæìÂá∫1 : 1 2 : 2 3 : 3 2 : 2 3 : 3 4 : 4 ‰ΩøÁî®Êó∂Ôºö 123456789101112131415161718192021222324 @Test public void get() throws Exception &#123; LRULinkedMap&lt;String,Integer&gt; map = new LRULinkedMap(4) ; map.put("1",1); map.put("2",2); map.put("3",3); map.put("4",4); for (Map.Entry&lt;String, Integer&gt; e : map.getAll())&#123; System.out.print(e.getKey() + " : " + e.getValue() + "\t"); &#125; System.out.println(""); map.get("1") ; for (Map.Entry&lt;String, Integer&gt; e : map.getAll())&#123; System.out.print(e.getKey() + " : " + e.getValue() + "\t"); &#125; &#125;&#125;//ËæìÂá∫1 : 1 2 : 2 3 : 3 4 : 4 2 : 2 3 : 3 4 : 4 1 : 1 LinkedHashMap ÂÜÖÈÉ®‰πüÊúâÁª¥Êä§‰∏Ä‰∏™ÂèåÂêëÈòüÂàóÔºåÂú®ÂàùÂßãÂåñÊó∂‰πü‰ºöÁªôÂÆö‰∏Ä‰∏™ÁºìÂ≠òÂ§ßÂ∞èÁöÑÈòàÂÄº„ÄÇÂàùÂßãÂåñÊó∂Ëá™ÂÆö‰πâÊòØÂê¶ÈúÄË¶ÅÂà†Èô§ÊúÄËøë‰∏çÂ∏∏‰ΩøÁî®ÁöÑÊï∞ÊçÆÔºåÂ¶ÇÊûúÊòØÂàô‰ºöÊåâÁÖßÂÆûÁé∞‰∫å‰∏≠ÁöÑÊñπÂºèÁÆ°ÁêÜÊï∞ÊçÆ„ÄÇ ÂÖ∂ÂÆû‰∏ªË¶Å‰ª£Á†ÅÂ∞±ÊòØÈáçÂÜô‰∫Ü LinkedHashMap ÁöÑ removeEldestEntry ÊñπÊ≥ï: 123protected boolean removeEldestEntry(Map.Entry&lt;K,V&gt; eldest) &#123; return false;&#125; ÂÆÉÈªòËÆ§ÊòØËøîÂõû falseÔºå‰πüÂ∞±ÊòØ‰∏ç‰ºöÁÆ°ÊúâÊ≤°ÊúâË∂ÖËøáÈòàÂÄº„ÄÇ ÊâÄ‰ª•Êàë‰ª¨Ëá™ÂÆö‰πâÂ§ß‰∫é‰∫ÜÈòàÂÄºÊó∂ËøîÂõû trueÔºåËøôÊ†∑ LinkedHashMap Â∞±‰ºöÂ∏ÆÊàë‰ª¨Âà†Èô§ÊúÄËøëÊúÄÂ∞ë‰ΩøÁî®ÁöÑÊï∞ÊçÆ„ÄÇ ÊÄªÁªì‰ª•‰∏äÂ∞±ÊòØÂØπ LRU ÁºìÂ≠òÁöÑÂÆûÁé∞Ôºå‰∫ÜËß£‰∫ÜËøô‰∫õËá≥Â∞ëÂú®Âπ≥Êó∂‰ΩøÁî®Êó∂ÂèØ‰ª•Áü•ÂÖ∂ÊâÄ‰ª•ÁÑ∂„ÄÇ ÂΩìÁÑ∂‰∏öÁïå‰ΩøÁî®ËæÉÂ§öÁöÑËøòÊúâ guava ÁöÑÂÆûÁé∞ÔºåÂπ∂‰∏îÂÆÉËøòÊîØÊåÅÂ§öÁßçËøáÊúüÁ≠ñÁï•„ÄÇ Âè∑Â§ñÊúÄËøëÂú®ÊÄªÁªì‰∏Ä‰∫õ Java Áõ∏ÂÖ≥ÁöÑÁü•ËØÜÁÇπÔºåÊÑüÂÖ¥Ë∂£ÁöÑÊúãÂèãÂèØ‰ª•‰∏ÄËµ∑Áª¥Êä§„ÄÇ Âú∞ÂùÄ: https://github.com/crossoverJie/Java-Interview]]></content>
      <categories>
        <category>ÁÆóÊ≥ï</category>
        <category>LRU cache</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Âü∫‰∫é Redis ÁöÑÂàÜÂ∏ÉÂºèÈîÅ]]></title>
    <url>%2F2018%2F03%2F29%2Fdistributed-lock%2Fdistributed-lock-redis%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄÂàÜÂ∏ÉÂºèÈîÅÂú®ÂàÜÂ∏ÉÂºèÂ∫îÁî®‰∏≠Â∫îÁî®ÂπøÊ≥õÔºåÊÉ≥Ë¶ÅÊêûÊáÇ‰∏Ä‰∏™Êñ∞‰∫ãÁâ©È¶ñÂÖàÂæó‰∫ÜËß£ÂÆÉÁöÑÁî±Êù•ÔºåËøôÊ†∑ÊâçËÉΩÊõ¥Âä†ÁöÑÁêÜËß£ÁîöËá≥ÂèØ‰ª•‰∏æ‰∏ÄÂèç‰∏â„ÄÇ È¶ñÂÖàË∞àÂà∞ÂàÜÂ∏ÉÂºèÈîÅËá™ÁÑ∂‰πüÂ∞±ËÅîÊÉ≥Âà∞ÂàÜÂ∏ÉÂºèÂ∫îÁî®„ÄÇ Âú®Êàë‰ª¨Â∞ÜÂ∫îÁî®ÊãÜÂàÜ‰∏∫ÂàÜÂ∏ÉÂºèÂ∫îÁî®‰πãÂâçÁöÑÂçïÊú∫Á≥ªÁªü‰∏≠ÔºåÂØπ‰∏Ä‰∫õÂπ∂ÂèëÂú∫ÊôØËØªÂèñÂÖ¨ÂÖ±ËµÑÊ∫êÊó∂Â¶ÇÊâ£Â∫ìÂ≠òÔºåÂçñËΩ¶Á•®‰πãÁ±ªÁöÑÈúÄÊ±ÇÂèØ‰ª•ÁÆÄÂçïÁöÑ‰ΩøÁî®ÂêåÊ≠•ÊàñËÄÖÊòØÂä†ÈîÅÂ∞±ÂèØ‰ª•ÂÆûÁé∞„ÄÇ ‰ΩÜÊòØÂ∫îÁî®ÂàÜÂ∏ÉÂºè‰∫Ü‰πãÂêéÁ≥ªÁªüÁî±‰ª•ÂâçÁöÑÂçïËøõÁ®ãÂ§öÁ∫øÁ®ãÁöÑÁ®ãÂ∫èÂèò‰∏∫‰∫ÜÂ§öËøõÁ®ãÂ§öÁ∫øÁ®ãÔºåËøôÊó∂‰ΩøÁî®‰ª•‰∏äÁöÑËß£ÂÜ≥ÊñπÊ°àÊòéÊòæÂ∞±‰∏çÂ§ü‰∫Ü„ÄÇ Âõ†Ê≠§‰∏öÁïåÂ∏∏Áî®ÁöÑËß£ÂÜ≥ÊñπÊ°àÈÄöÂ∏∏ÊòØÂÄüÂä©‰∫é‰∏Ä‰∏™Á¨¨‰∏âÊñπÁªÑ‰ª∂Âπ∂Âà©Áî®ÂÆÉËá™Ë∫´ÁöÑÊéí‰ªñÊÄßÊù•ËææÂà∞Â§öËøõÁ®ãÁöÑ‰∫íÊñ•„ÄÇÂ¶ÇÔºö Âü∫‰∫é DB ÁöÑÂîØ‰∏ÄÁ¥¢Âºï„ÄÇ Âü∫‰∫é ZK ÁöÑ‰∏¥Êó∂ÊúâÂ∫èËäÇÁÇπ„ÄÇ Âü∫‰∫é Redis ÁöÑ NX EX ÂèÇÊï∞„ÄÇ ËøôÈáå‰∏ªË¶ÅÂü∫‰∫é Redis ËøõË°åËÆ®ËÆ∫„ÄÇ ÂÆûÁé∞Êó¢ÁÑ∂ÊòØÈÄâÁî®‰∫Ü RedisÔºåÈÇ£‰πàÂÆÉÂ∞±ÂæóÂÖ∑ÊúâÊéí‰ªñÊÄßÊâçË°å„ÄÇÂêåÊó∂ÂÆÉÊúÄÂ•Ω‰πüÊúâÈîÅÁöÑ‰∏Ä‰∫õÂü∫Êú¨ÁâπÊÄßÔºö È´òÊÄßËÉΩ(Âä†„ÄÅËß£ÈîÅÊó∂È´òÊÄßËÉΩ) ÂèØ‰ª•‰ΩøÁî®ÈòªÂ°ûÈîÅ‰∏éÈùûÈòªÂ°ûÈîÅ„ÄÇ ‰∏çËÉΩÂá∫Áé∞Ê≠ªÈîÅ„ÄÇ ÂèØÁî®ÊÄß(‰∏çËÉΩÂá∫Áé∞ËäÇÁÇπ down ÊéâÂêéÂä†ÈîÅÂ§±Ë¥•)„ÄÇ ËøôÈáåÂà©Áî® Redis set key Êó∂ÁöÑ‰∏Ä‰∏™ NX ÂèÇÊï∞ÂèØ‰ª•‰øùËØÅÂú®Ëøô‰∏™ key ‰∏çÂ≠òÂú®ÁöÑÊÉÖÂÜµ‰∏ãÂÜôÂÖ•ÊàêÂäü„ÄÇÂπ∂‰∏îÂÜçÂä†‰∏ä EX ÂèÇÊï∞ÂèØ‰ª•ËÆ©ËØ• key Âú®Ë∂ÖÊó∂‰πãÂêéËá™Âä®Âà†Èô§„ÄÇ ÊâÄ‰ª•Âà©Áî®‰ª•‰∏ä‰∏§‰∏™ÁâπÊÄßÂèØ‰ª•‰øùËØÅÂú®Âêå‰∏ÄÊó∂ÂàªÂè™‰ºöÊúâ‰∏Ä‰∏™ËøõÁ®ãËé∑ÂæóÈîÅÔºåÂπ∂‰∏î‰∏ç‰ºöÂá∫Áé∞Ê≠ªÈîÅ(ÊúÄÂùèÁöÑÊÉÖÂÜµÂ∞±ÊòØË∂ÖÊó∂Ëá™Âä®Âà†Èô§ key)„ÄÇ Âä†ÈîÅÂÆûÁé∞‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 12345678910111213private static final String SET_IF_NOT_EXIST = "NX";private static final String SET_WITH_EXPIRE_TIME = "PX";public boolean tryLock(String key, String request) &#123; String result = this.jedis.set(LOCK_PREFIX + key, request, SET_IF_NOT_EXIST, SET_WITH_EXPIRE_TIME, 10 * TIME); if (LOCK_MSG.equals(result))&#123; return true ; &#125;else &#123; return false ; &#125;&#125; Ê≥®ÊÑèËøôÈáå‰ΩøÁî®ÁöÑ jedis ÁöÑ 1String set(String key, String value, String nxxx, String expx, long time); api„ÄÇ ËØ•ÂëΩ‰ª§ÂèØ‰ª•‰øùËØÅ NX EX ÁöÑÂéüÂ≠êÊÄß„ÄÇ ‰∏ÄÂÆö‰∏çË¶ÅÊää‰∏§‰∏™ÂëΩ‰ª§(NX EX)ÂàÜÂºÄÊâßË°åÔºåÂ¶ÇÊûúÂú® NX ‰πãÂêéÁ®ãÂ∫èÂá∫Áé∞ÈóÆÈ¢òÂ∞±ÊúâÂèØËÉΩ‰∫ßÁîüÊ≠ªÈîÅ„ÄÇ ÈòªÂ°ûÈîÅÂêåÊó∂‰πüÂèØ‰ª•ÂÆûÁé∞‰∏Ä‰∏™ÈòªÂ°ûÈîÅÔºö 123456789101112131415161718192021222324252627282930//‰∏ÄÁõ¥ÈòªÂ°ûpublic void lock(String key, String request) throws InterruptedException &#123; for (;;)&#123; String result = this.jedis.set(LOCK_PREFIX + key, request, SET_IF_NOT_EXIST, SET_WITH_EXPIRE_TIME, 10 * TIME); if (LOCK_MSG.equals(result))&#123; break ; &#125; //Èò≤Ê≠¢‰∏ÄÁõ¥Ê∂àËÄó CPU Thread.sleep(DEFAULT_SLEEP_TIME) ; &#125;&#125; //Ëá™ÂÆö‰πâÈòªÂ°ûÊó∂Èó¥ public boolean lock(String key, String request,int blockTime) throws InterruptedException &#123; while (blockTime &gt;= 0)&#123; String result = this.jedis.set(LOCK_PREFIX + key, request, SET_IF_NOT_EXIST, SET_WITH_EXPIRE_TIME, 10 * TIME); if (LOCK_MSG.equals(result))&#123; return true ; &#125; blockTime -= DEFAULT_SLEEP_TIME ; Thread.sleep(DEFAULT_SLEEP_TIME) ; &#125; return false ;&#125; Ëß£ÈîÅËß£ÈîÅ‰πüÂæàÁÆÄÂçïÔºåÂÖ∂ÂÆûÂ∞±ÊòØÊääËøô‰∏™ key Âà†ÊéâÂ∞±‰∏á‰∫ãÂ§ßÂêâ‰∫ÜÔºåÊØîÂ¶Ç‰ΩøÁî® del key ÂëΩ‰ª§„ÄÇ ‰ΩÜÁé∞ÂÆûÂæÄÂæÄÊ≤°ÊúâÈÇ£‰πà easy„ÄÇ Â¶ÇÊûúËøõÁ®ã A Ëé∑Âèñ‰∫ÜÈîÅËÆæÁΩÆ‰∫ÜË∂ÖÊó∂Êó∂Èó¥Ôºå‰ΩÜÊòØÁî±‰∫éÊâßË°åÂë®ÊúüËæÉÈïøÂØºËá¥Âà∞‰∫ÜË∂ÖÊó∂Êó∂Èó¥‰πãÂêéÈîÅÂ∞±Ëá™Âä®ÈáäÊîæ‰∫Ü„ÄÇËøôÊó∂ËøõÁ®ã B Ëé∑Âèñ‰∫ÜËØ•ÈîÅÊâßË°åÂæàÂø´Â∞±ÈáäÊîæÈîÅ„ÄÇËøôÊ†∑Â∞±‰ºöÂá∫Áé∞ËøõÁ®ã B Â∞ÜËøõÁ®ã A ÁöÑÈîÅÈáäÊîæ‰∫Ü„ÄÇ ÊâÄ‰ª•ÊúÄÂ•ΩÁöÑÊñπÂºèÊòØÂú®ÊØèÊ¨°Ëß£ÈîÅÊó∂ÈÉΩÈúÄË¶ÅÂà§Êñ≠ÈîÅÊòØÂê¶ÊòØËá™Â∑±ÁöÑ„ÄÇ ËøôÊó∂Â∞±ÈúÄË¶ÅÁªìÂêàÂä†ÈîÅÊú∫Âà∂‰∏ÄËµ∑ÂÆûÁé∞‰∫Ü„ÄÇ Âä†ÈîÅÊó∂ÈúÄË¶Å‰º†ÈÄí‰∏Ä‰∏™ÂèÇÊï∞ÔºåÂ∞ÜËØ•ÂèÇÊï∞‰Ωú‰∏∫Ëøô‰∏™ key ÁöÑ valueÔºåËøôÊ†∑ÊØèÊ¨°Ëß£ÈîÅÊó∂Âà§Êñ≠ value ÊòØÂê¶Áõ∏Á≠âÂç≥ÂèØ„ÄÇ ÊâÄ‰ª•Ëß£ÈîÅ‰ª£Á†ÅÂ∞±‰∏çËÉΩÊòØÁÆÄÂçïÁöÑ del‰∫Ü„ÄÇ 1234567891011121314151617181920public boolean unlock(String key,String request)&#123; //lua script String script = "if redis.call('get', KEYS[1]) == ARGV[1] then return redis.call('del', KEYS[1]) else return 0 end"; Object result = null ; if (jedis instanceof Jedis)&#123; result = ((Jedis)this.jedis).eval(script, Collections.singletonList(LOCK_PREFIX + key), Collections.singletonList(request)); &#125;else if (jedis instanceof JedisCluster)&#123; result = ((JedisCluster)this.jedis).eval(script, Collections.singletonList(LOCK_PREFIX + key), Collections.singletonList(request)); &#125;else &#123; //throw new RuntimeException("instance is error") ; return false ; &#125; if (UNLOCK_MSG.equals(result))&#123; return true ; &#125;else &#123; return false ; &#125;&#125; ËøôÈáå‰ΩøÁî®‰∫Ü‰∏Ä‰∏™ lua ËÑöÊú¨Êù•Âà§Êñ≠ value ÊòØÂê¶Áõ∏Á≠âÔºåÁõ∏Á≠âÊâçÊâßË°å del ÂëΩ‰ª§„ÄÇ ‰ΩøÁî® lua ‰πüÂèØ‰ª•‰øùËØÅËøôÈáå‰∏§‰∏™Êìç‰ΩúÁöÑÂéüÂ≠êÊÄß„ÄÇ Âõ†Ê≠§‰∏äÊñáÊèêÂà∞ÁöÑÂõõ‰∏™Âü∫Êú¨ÁâπÊÄß‰πüËÉΩÊª°Ë∂≥‰∫ÜÔºö ‰ΩøÁî® Redis ÂèØ‰ª•‰øùËØÅÊÄßËÉΩ„ÄÇ ÈòªÂ°ûÈîÅ‰∏éÈùûÈòªÂ°ûÈîÅËßÅ‰∏äÊñá„ÄÇ Âà©Áî®Ë∂ÖÊó∂Êú∫Âà∂Ëß£ÂÜ≥‰∫ÜÊ≠ªÈîÅ„ÄÇ Redis ÊîØÊåÅÈõÜÁæ§ÈÉ®ÁΩ≤ÊèêÈ´ò‰∫ÜÂèØÁî®ÊÄß„ÄÇ ‰ΩøÁî®ÊàëËá™Â∑±ÊúâÊí∏‰∫Ü‰∏Ä‰∏™ÂÆåÊï¥ÁöÑÂÆûÁé∞ÔºåÂπ∂‰∏îÂ∑≤ÁªèÁî®‰∫é‰∫ÜÁîü‰∫ßÔºåÊúâÂÖ¥Ë∂£ÁöÑÊúãÂèãÂèØ‰ª•ÂºÄÁÆ±‰ΩøÁî®: maven ‰æùËµñÔºö 12345&lt;dependency&gt; &lt;groupId&gt;top.crossoverjie.opensource&lt;/groupId&gt; &lt;artifactId&gt;distributed-redis-lock&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt;&lt;/dependency&gt; ÈÖçÁΩÆ bean : 1234567891011121314@Configurationpublic class RedisLockConfig &#123; @Bean public RedisLock build()&#123; RedisLock redisLock = new RedisLock() ; HostAndPort hostAndPort = new HostAndPort("127.0.0.1",7000) ; JedisCluster jedisCluster = new JedisCluster(hostAndPort) ; // Jedis Êàñ JedisCluster ÈÉΩÂèØ‰ª• redisLock.setJedisCluster(jedisCluster) ; return redisLock ; &#125;&#125; ‰ΩøÁî®Ôºö 123456789101112131415161718192021@Autowiredprivate RedisLock redisLock ;public void use() &#123; String key = "key"; String request = UUID.randomUUID().toString(); try &#123; boolean locktest = redisLock.tryLock(key, request); if (!locktest) &#123; System.out.println("locked error"); return; &#125; //do something &#125; finally &#123; redisLock.unlock(key,request) ; &#125;&#125; ‰ΩøÁî®ÂæàÁÆÄÂçï„ÄÇËøôÈáå‰∏ªË¶ÅÊòØÊÉ≥Âà©Áî® Spring Êù•Â∏ÆÊàë‰ª¨ÁÆ°ÁêÜ RedisLock Ëøô‰∏™Âçï‰æãÁöÑ beanÔºåÊâÄ‰ª•Âú®ÈáäÊîæÈîÅÁöÑÊó∂ÂÄôÈúÄË¶ÅÊâãÂä®(Âõ†‰∏∫Êï¥‰∏™‰∏ä‰∏ãÊñáÂè™Êúâ‰∏Ä‰∏™ RedisLock ÂÆû‰æã)ÁöÑ‰º†ÂÖ• key ‰ª•Âèä request(api ÁúãËµ∑Êù•‰∏çÊòØÁâπÂà´‰ºòÈõÖ)„ÄÇ ‰πüÂèØ‰ª•Âú®ÊØèÊ¨°‰ΩøÁî®ÈîÅÁöÑÊó∂ÂÄô new ‰∏Ä‰∏™ RedisLock ‰º†ÂÖ• key ‰ª•Âèä requestÔºåËøôÊ†∑ÂÄíÊòØÂú®Ëß£ÈîÅÊó∂ÂæàÊñπ‰æø„ÄÇ‰ΩÜÊòØÈúÄË¶ÅËá™Ë°åÁÆ°ÁêÜ RedisLock ÁöÑÂÆû‰æã„ÄÇÂêÑÊúâ‰ºòÂä£Âêß„ÄÇ È°πÁõÆÊ∫êÁ†ÅÂú®Ôºö https://github.com/crossoverJie/distributed-lock-redis Ê¨¢ËøéËÆ®ËÆ∫„ÄÇ ÂçïÊµãÂú®ÂÅöËøô‰∏™È°πÁõÆÁöÑÊó∂ÂÄôËÆ©Êàë‰∏çÂæó‰∏çÊÉ≥Êèê‰∏Ä‰∏ãÂçïÊµã„ÄÇ Âõ†‰∏∫Ëøô‰∏™Â∫îÁî®ÊòØÂº∫‰æùËµñ‰∫éÁ¨¨‰∏âÊñπÁªÑ‰ª∂ÁöÑ(Redis)Ôºå‰ΩÜÊòØÂú®ÂçïÊµã‰∏≠Êàë‰ª¨ÈúÄË¶ÅÊéíÈô§ÊéâËøôÁßç‰æùËµñ„ÄÇÊØîÂ¶ÇÂÖ∂‰ªñ‰ºô‰º¥ fork ‰∫ÜËØ•È°πÁõÆÊÉ≥Âú®Êú¨Âú∞Ë∑ë‰∏ÄÈÅçÂçïÊµãÔºåÁªìÊûúËøêË°å‰∏çËµ∑Êù•Ôºö ÊúâÂèØËÉΩÊòØ Redis ÁöÑ ip„ÄÅÁ´ØÂè£ÂíåÂçïÊµãÈáåÁöÑ‰∏ç‰∏ÄËá¥„ÄÇ Redis Ëá™Ë∫´ÂèØËÉΩ‰πüÊúâÈóÆÈ¢ò„ÄÇ ‰πüÊúâÂèØËÉΩÊòØËØ•ÂêåÂ≠¶ÁöÑÁéØÂ¢É‰∏≠Âπ∂Ê≤°Êúâ Redis„ÄÇ ÊâÄ‰ª•ÊúÄÂ•ΩÊòØË¶ÅÊääËøô‰∫õÂ§ñÈÉ®‰∏çÁ®≥ÂÆöÁöÑÂõ†Á¥†ÊéíÈô§ÊéâÔºåÂçïÊµãÂè™ÊµãÊàë‰ª¨ÂÜôÂ•ΩÁöÑ‰ª£Á†Å„ÄÇ ‰∫éÊòØÂ∞±ÂèØ‰ª•ÂºïÂÖ•ÂçïÊµãÂà©Âô® Mock ‰∫Ü„ÄÇ ÂÆÉÁöÑÊÉ≥Ê≥ïÂæàÁÆÄÁ≠îÔºåÂ∞±ÊòØË¶ÅÊää‰Ω†ÊâÄ‰æùËµñÁöÑÂ§ñÈÉ®ËµÑÊ∫êÁªüÁªüÂ±èËîΩÊéâ„ÄÇÂ¶ÇÔºöÊï∞ÊçÆÂ∫ì„ÄÅÂ§ñÈÉ®Êé•Âè£„ÄÅÂ§ñÈÉ®Êñá‰ª∂Á≠âÁ≠â„ÄÇ ‰ΩøÁî®ÊñπÂºè‰πüÊå∫ÁÆÄÂçïÔºåÂèØ‰ª•ÂèÇËÄÉËØ•È°πÁõÆÁöÑÂçïÊµãÔºö 12345678910111213141516@Testpublic void tryLock() throws Exception &#123; String key = "test"; String request = UUID.randomUUID().toString(); Mockito.when(jedisCluster.set(Mockito.anyString(), Mockito.anyString(), Mockito.anyString(), Mockito.anyString(), Mockito.anyLong())).thenReturn("OK"); boolean locktest = redisLock.tryLock(key, request); System.out.println("locktest=" + locktest); Assert.assertTrue(locktest); //check Mockito.verify(jedisCluster).set(Mockito.anyString(), Mockito.anyString(), Mockito.anyString(), Mockito.anyString(), Mockito.anyLong());&#125; ËøôÈáåÂè™ÊòØÁÆÄÂçïÊºîÁ§∫‰∏ãÔºåÂèØ‰ª•ÁöÑËØù‰∏ãÊ¨°‰ªîÁªÜÂàÜÊûêÂàÜÊûê„ÄÇ ÂÆÉÁöÑÂéüÁêÜÂÖ∂ÂÆû‰πüÊå∫ÁÆÄÂçïÔºådebug ÁöÑËØùÂèØ‰ª•ÂæàÁõ¥Êé•ÁöÑÁúãÂá∫Êù•Ôºö ËøôÈáåÊàë‰ª¨ÊâÄ‰æùËµñÁöÑ JedisCluster ÂÖ∂ÂÆûÊòØ‰∏Ä‰∏™ cglib ‰ª£ÁêÜÂØπË±°„ÄÇÊâÄ‰ª•‰πü‰∏çÈöæÊÉ≥Âà∞ÂÆÉÊòØÂ¶Ç‰ΩïÂ∑•‰ΩúÁöÑ„ÄÇ ÊØîÂ¶ÇËøôÈáåÊàë‰ª¨ÈúÄË¶ÅÁî®Âà∞ JedisCluster ÁöÑ set ÂáΩÊï∞Âπ∂ÈúÄË¶ÅÂÆÉÁöÑËøîÂõûÂÄº„ÄÇ Mock Â∞±Â∞ÜËØ•ÂØπË±°‰ª£ÁêÜ‰∫ÜÔºåÂπ∂Âú®ÂÆûÈôÖÊâßË°å set ÊñπÊ≥ïÂêéÁªô‰Ω†ËøîÂõû‰∫Ü‰∏Ä‰∏™‰Ω†Ëá™ÂÆö‰πâÁöÑÂÄº„ÄÇ ËøôÊ†∑Êàë‰ª¨Â∞±ÂèØ‰ª•ÈöèÂøÉÊâÄÊ¨≤ÁöÑÊµãËØï‰∫ÜÔºåÂÆåÂÖ®ÊääÂ§ñÈÉ®‰æùËµñÊâÄÂ±èËîΩ‰∫Ü„ÄÇ ÊÄªÁªìËá≥Ê≠§‰∏Ä‰∏™Âü∫‰∫é Redis ÁöÑÂàÜÂ∏ÉÂºèÈîÅÂÆåÊàêÔºå‰ΩÜÊòØ‰æùÁÑ∂Êúâ‰∫õÈóÆÈ¢ò„ÄÇ Â¶ÇÂú® key Ë∂ÖÊó∂‰πãÂêé‰∏öÂä°Âπ∂Ê≤°ÊúâÊâßË°åÂÆåÊØï‰ΩÜÂç¥Ëá™Âä®ÈáäÊîæÈîÅ‰∫ÜÔºåËøôÊ†∑Â∞±‰ºöÂØºËá¥Âπ∂ÂèëÈóÆÈ¢ò„ÄÇ Â∞±ÁÆó Redis ÊòØÈõÜÁæ§ÈÉ®ÁΩ≤ÁöÑÔºåÂ¶ÇÊûúÊØè‰∏™ËäÇÁÇπÈÉΩÂè™ÊòØ master Ê≤°Êúâ slaveÔºåÈÇ£‰πà master ÂÆïÊú∫Êó∂ËØ•ËäÇÁÇπ‰∏äÁöÑÊâÄÊúâ key Âú®ÈÇ£‰∏ÄÊó∂ÂàªÈÉΩÁõ∏ÂΩì‰∫éÊòØÈáäÊîæÈîÅ‰∫ÜÔºåËøôÊ†∑‰πü‰ºöÂá∫Áé∞Âπ∂ÂèëÈóÆÈ¢ò„ÄÇÂ∞±ÁÆóÊòØÊúâ slave ËäÇÁÇπÔºå‰ΩÜÂ¶ÇÊûúÂú®Êï∞ÊçÆÂêåÊ≠•Âà∞ salve ‰πãÂâç master ÂÆïÊú∫‰πüÊòØ‰ºöÂá∫Áé∞‰∏äÈù¢ÁöÑÈóÆÈ¢ò„ÄÇ ÊÑüÂÖ¥Ë∂£ÁöÑÊúãÂèãËøòÂèØ‰ª•ÂèÇËÄÉ Redisson ÁöÑÂÆûÁé∞„ÄÇ Âè∑Â§ñÊúÄËøëÂú®ÊÄªÁªì‰∏Ä‰∫õ Java Áõ∏ÂÖ≥ÁöÑÁü•ËØÜÁÇπÔºåÊÑüÂÖ¥Ë∂£ÁöÑÊúãÂèãÂèØ‰ª•‰∏ÄËµ∑Áª¥Êä§„ÄÇ Âú∞ÂùÄ: https://github.com/crossoverJie/Java-Interview]]></content>
      <categories>
        <category>Distributed Tools</category>
      </categories>
      <tags>
        <tag>Distributed Lock</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Spring Bean ÁîüÂëΩÂë®Êúü]]></title>
    <url>%2F2018%2F03%2F21%2Fspring%2Fspring-bean-lifecycle%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄSpring Bean ÁöÑÁîüÂëΩÂë®ÊúüÂú®Êï¥‰∏™ Spring ‰∏≠Âç†ÊúâÂæàÈáçË¶ÅÁöÑ‰ΩçÁΩÆÔºåÊéåÊè°Ëøô‰∫õÂèØ‰ª•Âä†Ê∑±ÂØπ Spring ÁöÑÁêÜËß£„ÄÇ È¶ñÂÖàÁúã‰∏ãÁîüÂëΩÂë®ÊúüÂõæÔºö ÂÜçË∞àÁîüÂëΩÂë®Êúü‰πãÂâçÊúâ‰∏ÄÁÇπÈúÄË¶ÅÂÖàÊòéÁ°ÆÔºö Spring Âè™Â∏ÆÊàë‰ª¨ÁÆ°ÁêÜÂçï‰æãÊ®°Âºè Bean ÁöÑÂÆåÊï¥ÁîüÂëΩÂë®ÊúüÔºåÂØπ‰∫é prototype ÁöÑ bean ÔºåSpring Âú®ÂàõÂª∫Â•Ω‰∫§Áªô‰ΩøÁî®ËÄÖ‰πãÂêéÂàô‰∏ç‰ºöÂÜçÁÆ°ÁêÜÂêéÁª≠ÁöÑÁîüÂëΩÂë®Êúü„ÄÇ Ê≥®Ëß£ÊñπÂºèÂú® bean ÂàùÂßãÂåñÊó∂‰ºöÁªèÂéÜÂá†‰∏™Èò∂ÊÆµÔºåÈ¶ñÂÖàÂèØ‰ª•‰ΩøÁî®Ê≥®Ëß£ @PostConstruct, @PreDestroy Êù•Âú® bean ÁöÑÂàõÂª∫ÂíåÈîÄÊØÅÈò∂ÊÆµËøõË°åË∞ÉÁî®: 1234567891011121314@Componentpublic class AnnotationBean &#123; private final static Logger LOGGER = LoggerFactory.getLogger(AnnotationBean.class); @PostConstruct public void start()&#123; LOGGER.info("AnnotationBean start"); &#125; @PreDestroy public void destroy()&#123; LOGGER.info("AnnotationBean destroy"); &#125;&#125; InitializingBean, DisposableBean Êé•Âè£ËøòÂèØ‰ª•ÂÆûÁé∞ InitializingBean,DisposableBean Ëøô‰∏§‰∏™Êé•Âè£Ôºå‰πüÊòØÂú®ÂàùÂßãÂåñ‰ª•ÂèäÈîÄÊØÅÈò∂ÊÆµË∞ÉÁî®Ôºö 12345678910111213@Servicepublic class SpringLifeCycleService implements InitializingBean,DisposableBean&#123; private final static Logger LOGGER = LoggerFactory.getLogger(SpringLifeCycleService.class); @Override public void afterPropertiesSet() throws Exception &#123; LOGGER.info("SpringLifeCycleService start"); &#125; @Override public void destroy() throws Exception &#123; LOGGER.info("SpringLifeCycleService destroy"); &#125;&#125; Ëá™ÂÆö‰πâÂàùÂßãÂåñÂíåÈîÄÊØÅÊñπÊ≥ï‰πüÂèØ‰ª•Ëá™ÂÆö‰πâÊñπÊ≥ïÁî®‰∫éÂú®ÂàùÂßãÂåñ„ÄÅÈîÄÊØÅÈò∂ÊÆµË∞ÉÁî®: 123456789101112131415161718192021222324@Configurationpublic class LifeCycleConfig &#123; @Bean(initMethod = "start", destroyMethod = "destroy") public SpringLifeCycle create()&#123; SpringLifeCycle springLifeCycle = new SpringLifeCycle() ; return springLifeCycle ; &#125;&#125;public class SpringLifeCycle&#123; private final static Logger LOGGER = LoggerFactory.getLogger(SpringLifeCycle.class); public void start()&#123; LOGGER.info("SpringLifeCycle start"); &#125; public void destroy()&#123; LOGGER.info("SpringLifeCycle destroy"); &#125;&#125; ‰ª•‰∏äÊòØÂú® SpringBoot ‰∏≠ÂèØ‰ª•ËøôÊ†∑ÈÖçÁΩÆÔºåÂ¶ÇÊûúÊòØÂéüÂßãÁöÑÂü∫‰∫é XML ‰πüÊòØÂèØ‰ª•‰ΩøÁî®: 12&lt;bean class="com.crossoverjie.spring.SpringLifeCycle" init-method="start" destroy-method="destroy"&gt;&lt;/bean&gt; Êù•ËææÂà∞ÂêåÊ†∑ÁöÑÊïàÊûú„ÄÇ ÂÆûÁé∞ *Aware Êé•Âè£*Aware Êé•Âè£ÂèØ‰ª•Áî®‰∫éÂú®ÂàùÂßãÂåñ bean Êó∂Ëé∑Âæó Spring ‰∏≠ÁöÑ‰∏Ä‰∫õÂØπË±°ÔºåÂ¶ÇËé∑Âèñ Spring ‰∏ä‰∏ãÊñáÁ≠â„ÄÇ 123456789101112@Componentpublic class SpringLifeCycleAware implements ApplicationContextAware &#123; private final static Logger LOGGER = LoggerFactory.getLogger(SpringLifeCycleAware.class); private ApplicationContext applicationContext ; @Override public void setApplicationContext(ApplicationContext applicationContext) throws BeansException &#123; this.applicationContext = applicationContext ; LOGGER.info("SpringLifeCycleAware start"); &#125;&#125; ËøôÊ†∑Âú® springLifeCycleAware Ëøô‰∏™ bean ÂàùÂßãÂåñ‰ºöÂ∞±‰ºöË∞ÉÁî® setApplicationContext ÊñπÊ≥ïÔºåÂπ∂ÂèØ‰ª•Ëé∑Âæó applicationContext ÂØπË±°„ÄÇ BeanPostProcessor Â¢ûÂº∫Â§ÑÁêÜÂô®ÂÆûÁé∞ BeanPostProcessor Êé•Âè£ÔºåSpring ‰∏≠ÊâÄÊúâ bean Âú®ÂÅöÂàùÂßãÂåñÊó∂ÈÉΩ‰ºöË∞ÉÁî®ËØ•Êé•Âè£‰∏≠ÁöÑ‰∏§‰∏™ÊñπÊ≥ïÔºåÂèØ‰ª•Áî®‰∫éÂØπ‰∏Ä‰∫õÁâπÊÆäÁöÑ bean ËøõË°åÂ§ÑÁêÜÔºö 12345678910111213141516171819202122232425262728293031323334@Componentpublic class SpringLifeCycleProcessor implements BeanPostProcessor &#123; private final static Logger LOGGER = LoggerFactory.getLogger(SpringLifeCycleProcessor.class); /** * È¢ÑÂàùÂßãÂåñ ÂàùÂßãÂåñ‰πãÂâçË∞ÉÁî® * @param bean * @param beanName * @return * @throws BeansException */ @Override public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException &#123; if ("annotationBean".equals(beanName))&#123; LOGGER.info("SpringLifeCycleProcessor start beanName=&#123;&#125;",beanName); &#125; return bean; &#125; /** * ÂêéÂàùÂßãÂåñ bean ÂàùÂßãÂåñÂÆåÊàêË∞ÉÁî® * @param bean * @param beanName * @return * @throws BeansException */ @Override public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException &#123; if ("annotationBean".equals(beanName))&#123; LOGGER.info("SpringLifeCycleProcessor end beanName=&#123;&#125;",beanName); &#125; return bean; &#125;&#125; ÊâßË°å‰πãÂêéËßÇÂØüÁªìÊûúÔºö 123456789101112131415018-03-21 00:40:24.856 [restartedMain] INFO c.c.s.p.SpringLifeCycleProcessor - SpringLifeCycleProcessor start beanName=annotationBean2018-03-21 00:40:24.860 [restartedMain] INFO c.c.spring.annotation.AnnotationBean - AnnotationBean start2018-03-21 00:40:24.861 [restartedMain] INFO c.c.s.p.SpringLifeCycleProcessor - SpringLifeCycleProcessor end beanName=annotationBean2018-03-21 00:40:24.864 [restartedMain] INFO c.c.s.aware.SpringLifeCycleAware - SpringLifeCycleAware start2018-03-21 00:40:24.867 [restartedMain] INFO c.c.s.service.SpringLifeCycleService - SpringLifeCycleService start2018-03-21 00:40:24.887 [restartedMain] INFO c.c.spring.SpringLifeCycle - SpringLifeCycle start2018-03-21 00:40:25.062 [restartedMain] INFO o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 357292018-03-21 00:40:25.122 [restartedMain] INFO o.s.j.e.a.AnnotationMBeanExporter - Registering beans for JMX exposure on startup2018-03-21 00:40:25.140 [restartedMain] INFO com.crossoverjie.Application - Started Application in 2.309 seconds (JVM running for 3.681)2018-03-21 00:40:25.143 [restartedMain] INFO com.crossoverjie.Application - start ok!2018-03-21 00:40:25.153 [Thread-8] INFO o.s.c.a.AnnotationConfigApplicationContext - Closing org.springframework.context.annotation.AnnotationConfigApplicationContext@3913adad: startup date [Wed Mar 21 00:40:23 CST 2018]; root of context hierarchy2018-03-21 00:40:25.155 [Thread-8] INFO o.s.j.e.a.AnnotationMBeanExporter - Unregistering JMX-exposed beans on shutdown2018-03-21 00:40:25.156 [Thread-8] INFO c.c.spring.SpringLifeCycle - SpringLifeCycle destroy2018-03-21 00:40:25.156 [Thread-8] INFO c.c.s.service.SpringLifeCycleService - SpringLifeCycleService destroy2018-03-21 00:40:25.156 [Thread-8] INFO c.c.spring.annotation.AnnotationBean - AnnotationBean destroy Áõ¥Âà∞ Spring ‰∏ä‰∏ãÊñáÈîÄÊØÅÊó∂Âàô‰ºöË∞ÉÁî®Ëá™ÂÆö‰πâÁöÑÈîÄÊØÅÊñπÊ≥ï‰ª•ÂèäÂÆûÁé∞‰∫Ü DisposableBean ÁöÑ destroy() ÊñπÊ≥ï„ÄÇ Âè∑Â§ñÊúÄËøëÂú®ÊÄªÁªì‰∏Ä‰∫õ Java Áõ∏ÂÖ≥ÁöÑÁü•ËØÜÁÇπÔºåÊÑüÂÖ¥Ë∂£ÁöÑÊúãÂèãÂèØ‰ª•‰∏ÄËµ∑Áª¥Êä§„ÄÇ Âú∞ÂùÄ: https://github.com/crossoverJie/Java-Interview]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ê∑±ÂÖ•ÁêÜËß£Á∫øÁ®ãÈÄö‰ø°]]></title>
    <url>%2F2018%2F03%2F16%2Fjava-senior%2Fthread-communication%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄÂºÄÂèë‰∏≠‰∏çÂÖç‰ºöÈÅáÂà∞ÈúÄË¶ÅÊâÄÊúâÂ≠êÁ∫øÁ®ãÊâßË°åÂÆåÊØïÈÄöÁü•‰∏ªÁ∫øÁ®ãÂ§ÑÁêÜÊüê‰∫õÈÄªËæëÁöÑÂú∫ÊôØ„ÄÇ ÊàñËÄÖÊòØÁ∫øÁ®ã A Âú®ÊâßË°åÂà∞Êüê‰∏™Êù°‰ª∂ÈÄöÁü•Á∫øÁ®ã B ÊâßË°åÊüê‰∏™Êìç‰Ωú„ÄÇ ÂèØ‰ª•ÈÄöËøá‰ª•‰∏ãÂá†ÁßçÊñπÂºèÂÆûÁé∞Ôºö Á≠âÂæÖÈÄöÁü•Êú∫Âà∂ Á≠âÂæÖÈÄöÁü•Ê®°ÂºèÊòØ Java ‰∏≠ÊØîËæÉÁªèÂÖ∏ÁöÑÁ∫øÁ®ãÈÄö‰ø°ÊñπÂºè„ÄÇ ‰∏§‰∏™Á∫øÁ®ãÈÄöËøáÂØπÂêå‰∏ÄÂØπË±°Ë∞ÉÁî®Á≠âÂæÖ wait() ÂíåÈÄöÁü• notify() ÊñπÊ≥ïÊù•ËøõË°åÈÄöËÆØ„ÄÇ Â¶Ç‰∏§‰∏™Á∫øÁ®ã‰∫§ÊõøÊâìÂç∞Â•áÂÅ∂Êï∞Ôºö 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091public class TwoThreadWaitNotify &#123; private int start = 1; private boolean flag = false; public static void main(String[] args) &#123; TwoThreadWaitNotify twoThread = new TwoThreadWaitNotify(); Thread t1 = new Thread(new OuNum(twoThread)); t1.setName("A"); Thread t2 = new Thread(new JiNum(twoThread)); t2.setName("B"); t1.start(); t2.start(); &#125; /** * ÂÅ∂Êï∞Á∫øÁ®ã */ public static class OuNum implements Runnable &#123; private TwoThreadWaitNotify number; public OuNum(TwoThreadWaitNotify number) &#123; this.number = number; &#125; @Override public void run() &#123; while (number.start &lt;= 100) &#123; synchronized (TwoThreadWaitNotify.class) &#123; System.out.println("ÂÅ∂Êï∞Á∫øÁ®ãÊä¢Âà∞ÈîÅ‰∫Ü"); if (number.flag) &#123; System.out.println(Thread.currentThread().getName() + "+-+ÂÅ∂Êï∞" + number.start); number.start++; number.flag = false; TwoThreadWaitNotify.class.notify(); &#125;else &#123; try &#123; TwoThreadWaitNotify.class.wait(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125; &#125; &#125; /** * Â•áÊï∞Á∫øÁ®ã */ public static class JiNum implements Runnable &#123; private TwoThreadWaitNotify number; public JiNum(TwoThreadWaitNotify number) &#123; this.number = number; &#125; @Override public void run() &#123; while (number.start &lt;= 100) &#123; synchronized (TwoThreadWaitNotify.class) &#123; System.out.println("Â•áÊï∞Á∫øÁ®ãÊä¢Âà∞ÈîÅ‰∫Ü"); if (!number.flag) &#123; System.out.println(Thread.currentThread().getName() + "+-+Â•áÊï∞" + number.start); number.start++; number.flag = true; TwoThreadWaitNotify.class.notify(); &#125;else &#123; try &#123; TwoThreadWaitNotify.class.wait(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125; &#125; &#125;&#125; ËæìÂá∫ÁªìÊûúÔºö 12345678t2+-+Â•áÊï∞93t1+-+ÂÅ∂Êï∞94t2+-+Â•áÊï∞95t1+-+ÂÅ∂Êï∞96t2+-+Â•áÊï∞97t1+-+ÂÅ∂Êï∞98t2+-+Â•áÊï∞99t1+-+ÂÅ∂Êï∞100 ËøôÈáåÁöÑÁ∫øÁ®ã A ÂíåÁ∫øÁ®ã B ÈÉΩÂØπÂêå‰∏Ä‰∏™ÂØπË±° TwoThreadWaitNotify.class Ëé∑ÂèñÈîÅÔºåA Á∫øÁ®ãË∞ÉÁî®‰∫ÜÂêåÊ≠•ÂØπË±°ÁöÑ wait() ÊñπÊ≥ïÈáäÊîæ‰∫ÜÈîÅÂπ∂ËøõÂÖ• WAITING Áä∂ÊÄÅ„ÄÇ B Á∫øÁ®ãË∞ÉÁî®‰∫Ü notify() ÊñπÊ≥ïÔºåËøôÊ†∑ A Á∫øÁ®ãÊî∂Âà∞ÈÄöÁü•‰πãÂêéÂ∞±ÂèØ‰ª•‰ªé wait() ÊñπÊ≥ï‰∏≠ËøîÂõû„ÄÇ ËøôÈáåÂà©Áî®‰∫Ü TwoThreadWaitNotify.class ÂØπË±°ÂÆåÊàê‰∫ÜÈÄö‰ø°„ÄÇ Êúâ‰∏Ä‰∫õÈúÄË¶ÅÊ≥®ÊÑè: wait() „ÄÅnofify() „ÄÅnofityAll() Ë∞ÉÁî®ÁöÑÂâçÊèêÈÉΩÊòØËé∑Âæó‰∫ÜÂØπË±°ÁöÑÈîÅ(‰πüÂèØÁß∞‰∏∫ÂØπË±°ÁõëËßÜÂô®)„ÄÇ Ë∞ÉÁî® wait() ÊñπÊ≥ïÂêéÁ∫øÁ®ã‰ºöÈáäÊîæÈîÅÔºåËøõÂÖ• WAITING Áä∂ÊÄÅÔºåËØ•Á∫øÁ®ã‰πü‰ºöË¢´ÁßªÂä®Âà∞Á≠âÂæÖÈòüÂàó‰∏≠„ÄÇ Ë∞ÉÁî® notify() ÊñπÊ≥ï‰ºöÂ∞ÜÁ≠âÂæÖÈòüÂàó‰∏≠ÁöÑÁ∫øÁ®ãÁßªÂä®Âà∞ÂêåÊ≠•ÈòüÂàó‰∏≠ÔºåÁ∫øÁ®ãÁä∂ÊÄÅ‰πü‰ºöÊõ¥Êñ∞‰∏∫ BLOCKED ‰ªé wait() ÊñπÊ≥ïËøîÂõûÁöÑÂâçÊèêÊòØË∞ÉÁî® notify() ÊñπÊ≥ïÁöÑÁ∫øÁ®ãÈáäÊîæÈîÅÔºåwait() ÊñπÊ≥ïÁöÑÁ∫øÁ®ãËé∑ÂæóÈîÅ„ÄÇ Á≠âÂæÖÈÄöÁü•ÊúâÁùÄ‰∏Ä‰∏™ÁªèÂÖ∏ËåÉÂºèÔºö Á∫øÁ®ã A ‰Ωú‰∏∫Ê∂àË¥πËÄÖÔºö Ëé∑ÂèñÂØπË±°ÁöÑÈîÅ„ÄÇ ËøõÂÖ• while(Âà§Êñ≠Êù°‰ª∂)ÔºåÂπ∂Ë∞ÉÁî® wait() ÊñπÊ≥ï„ÄÇ ÂΩìÊù°‰ª∂Êª°Ë∂≥Ë∑≥Âá∫Âæ™ÁéØÊâßË°åÂÖ∑‰ΩìÂ§ÑÁêÜÈÄªËæë„ÄÇ Á∫øÁ®ã B ‰Ωú‰∏∫Áîü‰∫ßËÄÖ: Ëé∑ÂèñÂØπË±°ÈîÅ„ÄÇ Êõ¥Êîπ‰∏éÁ∫øÁ®ã A ÂÖ±Áî®ÁöÑÂà§Êñ≠Êù°‰ª∂„ÄÇ Ë∞ÉÁî® notify() ÊñπÊ≥ï„ÄÇ ‰º™‰ª£Á†ÅÂ¶Ç‰∏ã: 1234567891011121314//Thread Asynchronized(Object)&#123; while(Êù°‰ª∂)&#123; Object.wait(); &#125; //do something&#125;//Thread Bsynchronized(Object)&#123; Êù°‰ª∂=false;//ÊîπÂèòÊù°‰ª∂ Object.notify();&#125; join() ÊñπÊ≥ï1234567891011121314151617181920212223242526272829303132333435private static void join() throws InterruptedException &#123; Thread t1 = new Thread(new Runnable() &#123; @Override public void run() &#123; LOGGER.info("running"); try &#123; Thread.sleep(3000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125;) ; Thread t2 = new Thread(new Runnable() &#123; @Override public void run() &#123; LOGGER.info("running2"); try &#123; Thread.sleep(4000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125;) ; t1.start(); t2.start(); //Á≠âÂæÖÁ∫øÁ®ã1ÁªàÊ≠¢ t1.join(); //Á≠âÂæÖÁ∫øÁ®ã2ÁªàÊ≠¢ t2.join(); LOGGER.info("main over");&#125; ËæìÂá∫ÁªìÊûú: 1232018-03-16 20:21:30.967 [Thread-1] INFO c.c.actual.ThreadCommunication - running22018-03-16 20:21:30.967 [Thread-0] INFO c.c.actual.ThreadCommunication - running2018-03-16 20:21:34.972 [main] INFO c.c.actual.ThreadCommunication - main over Âú® t1.join() Êó∂‰ºö‰∏ÄÁõ¥ÈòªÂ°ûÂà∞ t1 ÊâßË°åÂÆåÊØïÔºåÊâÄ‰ª•ÊúÄÁªà‰∏ªÁ∫øÁ®ã‰ºöÁ≠âÂæÖ t1 Âíå t2 Á∫øÁ®ãÊâßË°åÂÆåÊØï„ÄÇ ÂÖ∂ÂÆû‰ªéÊ∫êÁ†ÅÂèØ‰ª•ÁúãÂá∫Ôºåjoin() ‰πüÊòØÂà©Áî®ÁöÑÁ≠âÂæÖÈÄöÁü•Êú∫Âà∂Ôºö Ê†∏ÂøÉÈÄªËæë: 123while (isAlive()) &#123; wait(0);&#125; Âú® join Á∫øÁ®ãÂÆåÊàêÂêé‰ºöË∞ÉÁî® notifyAll() ÊñπÊ≥ïÔºåÊòØÂú® JVM ÂÆûÁé∞‰∏≠Ë∞ÉÁî®ÔºåÊâÄ‰ª•ËøôÈáåÁúã‰∏çÂá∫Êù•„ÄÇ volatile ÂÖ±‰∫´ÂÜÖÂ≠òÂõ†‰∏∫ Java ÊòØÈááÁî®ÂÖ±‰∫´ÂÜÖÂ≠òÁöÑÊñπÂºèËøõË°åÁ∫øÁ®ãÈÄö‰ø°ÁöÑÔºåÊâÄ‰ª•ÂèØ‰ª•ÈááÁî®‰ª•‰∏ãÊñπÂºèÁî®‰∏ªÁ∫øÁ®ãÂÖ≥Èó≠ A Á∫øÁ®ã: 1234567891011121314151617181920212223242526272829public class Volatile implements Runnable&#123; private static volatile boolean flag = true ; @Override public void run() &#123; while (flag)&#123; System.out.println(Thread.currentThread().getName() + "Ê≠£Âú®ËøêË°å„ÄÇ„ÄÇ„ÄÇ"); &#125; System.out.println(Thread.currentThread().getName() +"ÊâßË°åÂÆåÊØï"); &#125; public static void main(String[] args) throws InterruptedException &#123; Volatile aVolatile = new Volatile(); new Thread(aVolatile,"thread A").start(); System.out.println("main Á∫øÁ®ãÊ≠£Âú®ËøêË°å") ; TimeUnit.MILLISECONDS.sleep(100) ; aVolatile.stopThread(); &#125; private void stopThread()&#123; flag = false ; &#125;&#125; ËæìÂá∫ÁªìÊûúÔºö12345thread AÊ≠£Âú®ËøêË°å„ÄÇ„ÄÇ„ÄÇthread AÊ≠£Âú®ËøêË°å„ÄÇ„ÄÇ„ÄÇthread AÊ≠£Âú®ËøêË°å„ÄÇ„ÄÇ„ÄÇthread AÊ≠£Âú®ËøêË°å„ÄÇ„ÄÇ„ÄÇthread AÊâßË°åÂÆåÊØï ËøôÈáåÁöÑ flag Â≠òÊîæ‰∫é‰∏ªÂÜÖÂ≠ò‰∏≠ÔºåÊâÄ‰ª•‰∏ªÁ∫øÁ®ãÂíåÁ∫øÁ®ã A ÈÉΩÂèØ‰ª•ÁúãÂà∞„ÄÇ flag ÈááÁî® volatile ‰øÆÈ•∞‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜÂÜÖÂ≠òÂèØËßÅÊÄßÔºåÊõ¥Â§öÂÜÖÂÆπÂèØ‰ª•Êü•ÁúãËøôÈáå„ÄÇ CountDownLatch Âπ∂ÂèëÂ∑•ÂÖ∑CountDownLatch ÂèØ‰ª•ÂÆûÁé∞ join Áõ∏ÂêåÁöÑÂäüËÉΩÔºå‰ΩÜÊòØÊõ¥Âä†ÁöÑÁÅµÊ¥ª„ÄÇ 12345678910111213141516171819202122232425private static void countDownLatch() throws Exception&#123; int thread = 3 ; long start = System.currentTimeMillis(); final CountDownLatch countDown = new CountDownLatch(thread); for (int i= 0 ;i&lt;thread ; i++)&#123; new Thread(new Runnable() &#123; @Override public void run() &#123; LOGGER.info("thread run"); try &#123; Thread.sleep(2000); countDown.countDown(); LOGGER.info("thread end"); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125;).start(); &#125; countDown.await(); long stop = System.currentTimeMillis(); LOGGER.info("main over total time=&#123;&#125;",stop-start);&#125; ËæìÂá∫ÁªìÊûú: 12345672018-03-16 20:19:44.126 [Thread-0] INFO c.c.actual.ThreadCommunication - thread run2018-03-16 20:19:44.126 [Thread-2] INFO c.c.actual.ThreadCommunication - thread run2018-03-16 20:19:44.126 [Thread-1] INFO c.c.actual.ThreadCommunication - thread run2018-03-16 20:19:46.136 [Thread-2] INFO c.c.actual.ThreadCommunication - thread end2018-03-16 20:19:46.136 [Thread-1] INFO c.c.actual.ThreadCommunication - thread end2018-03-16 20:19:46.136 [Thread-0] INFO c.c.actual.ThreadCommunication - thread end2018-03-16 20:19:46.136 [main] INFO c.c.actual.ThreadCommunication - main over total time=2012 CountDownLatch ‰πüÊòØÂü∫‰∫é AQS(AbstractQueuedSynchronizer) ÂÆûÁé∞ÁöÑÔºåÊõ¥Â§öÂÆûÁé∞ÂèÇËÄÉ ReentrantLock ÂÆûÁé∞ÂéüÁêÜ ÂàùÂßãÂåñ‰∏Ä‰∏™ CountDownLatch Êó∂ÂëäËØâÂπ∂ÂèëÁöÑÁ∫øÁ®ãÔºåÁÑ∂ÂêéÂú®ÊØè‰∏™Á∫øÁ®ãÂ§ÑÁêÜÂÆåÊØï‰πãÂêéË∞ÉÁî® countDown() ÊñπÊ≥ï„ÄÇ ËØ•ÊñπÊ≥ï‰ºöÂ∞Ü AQS ÂÜÖÁΩÆÁöÑ‰∏Ä‰∏™ state Áä∂ÊÄÅ -1 „ÄÇ ÊúÄÁªàÂú®‰∏ªÁ∫øÁ®ãË∞ÉÁî® await() ÊñπÊ≥ïÔºåÂÆÉ‰ºöÈòªÂ°ûÁõ¥Âà∞ state == 0 ÁöÑÊó∂ÂÄôËøîÂõû„ÄÇ CyclicBarrier Âπ∂ÂèëÂ∑•ÂÖ∑123456789101112131415161718192021222324252627282930313233343536373839404142434445464748private static void cyclicBarrier() throws Exception &#123; CyclicBarrier cyclicBarrier = new CyclicBarrier(3) ; new Thread(new Runnable() &#123; @Override public void run() &#123; LOGGER.info("thread run"); try &#123; cyclicBarrier.await() ; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; LOGGER.info("thread end do something"); &#125; &#125;).start(); new Thread(new Runnable() &#123; @Override public void run() &#123; LOGGER.info("thread run"); try &#123; cyclicBarrier.await() ; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; LOGGER.info("thread end do something"); &#125; &#125;).start(); new Thread(new Runnable() &#123; @Override public void run() &#123; LOGGER.info("thread run"); try &#123; Thread.sleep(5000); cyclicBarrier.await() ; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; LOGGER.info("thread end do something"); &#125; &#125;).start(); LOGGER.info("main thread");&#125; CyclicBarrier ‰∏≠ÊñáÂêçÂè´ÂÅöÂ±èÈöúÊàñËÄÖÊòØÊ†ÖÊ†èÔºå‰πüÂèØ‰ª•Áî®‰∫éÁ∫øÁ®ãÈó¥ÈÄö‰ø°„ÄÇ ÂÆÉÂèØ‰ª•Á≠âÂæÖ N ‰∏™Á∫øÁ®ãÈÉΩËææÂà∞Êüê‰∏™Áä∂ÊÄÅÂêéÁªßÁª≠ËøêË°åÁöÑÊïàÊûú„ÄÇ È¶ñÂÖàÂàùÂßãÂåñÁ∫øÁ®ãÂèÇ‰∏éËÄÖ„ÄÇ Ë∞ÉÁî® await() Â∞Ü‰ºöÂú®ÊâÄÊúâÂèÇ‰∏éËÄÖÁ∫øÁ®ãÈÉΩË∞ÉÁî®‰πãÂâçÁ≠âÂæÖ„ÄÇ Áõ¥Âà∞ÊâÄÊúâÂèÇ‰∏éËÄÖÈÉΩË∞ÉÁî®‰∫Ü await() ÂêéÔºåÊâÄÊúâÁ∫øÁ®ã‰ªé await() ËøîÂõûÁªßÁª≠ÂêéÁª≠ÈÄªËæë„ÄÇ ËøêË°åÁªìÊûú: 12345672018-03-18 22:40:00.731 [Thread-0] INFO c.c.actual.ThreadCommunication - thread run2018-03-18 22:40:00.731 [Thread-1] INFO c.c.actual.ThreadCommunication - thread run2018-03-18 22:40:00.731 [Thread-2] INFO c.c.actual.ThreadCommunication - thread run2018-03-18 22:40:00.731 [main] INFO c.c.actual.ThreadCommunication - main thread2018-03-18 22:40:05.741 [Thread-0] INFO c.c.actual.ThreadCommunication - thread end do something2018-03-18 22:40:05.741 [Thread-1] INFO c.c.actual.ThreadCommunication - thread end do something2018-03-18 22:40:05.741 [Thread-2] INFO c.c.actual.ThreadCommunication - thread end do something ÂèØ‰ª•ÁúãÂá∫Áî±‰∫éÂÖ∂‰∏≠‰∏Ä‰∏™Á∫øÁ®ã‰ºëÁú†‰∫Ü‰∫îÁßíÔºåÊâÄÊúâÂÖ∂‰ΩôÊâÄÊúâÁöÑÁ∫øÁ®ãÈÉΩÂæóÁ≠âÂæÖËøô‰∏™Á∫øÁ®ãË∞ÉÁî® await() „ÄÇ ËØ•Â∑•ÂÖ∑ÂèØ‰ª•ÂÆûÁé∞ CountDownLatch ÂêåÊ†∑ÁöÑÂäüËÉΩÔºå‰ΩÜÊòØË¶ÅÊõ¥Âä†ÁÅµÊ¥ª„ÄÇÁîöËá≥ÂèØ‰ª•Ë∞ÉÁî® reset() ÊñπÊ≥ïÈáçÁΩÆ CyclicBarrier (ÈúÄË¶ÅËá™Ë°åÊçïËé∑ BrokenBarrierException Â§ÑÁêÜ) ÁÑ∂ÂêéÈáçÊñ∞ÊâßË°å„ÄÇ Á∫øÁ®ãÂìçÂ∫î‰∏≠Êñ≠12345678910111213141516171819202122232425public class StopThread implements Runnable &#123; @Override public void run() &#123; while ( !Thread.currentThread().isInterrupted()) &#123; // Á∫øÁ®ãÊâßË°åÂÖ∑‰ΩìÈÄªËæë System.out.println(Thread.currentThread().getName() + "ËøêË°å‰∏≠„ÄÇ„ÄÇ"); &#125; System.out.println(Thread.currentThread().getName() + "ÈÄÄÂá∫„ÄÇ„ÄÇ"); &#125; public static void main(String[] args) throws InterruptedException &#123; Thread thread = new Thread(new StopThread(), "thread A"); thread.start(); System.out.println("main Á∫øÁ®ãÊ≠£Âú®ËøêË°å") ; TimeUnit.MILLISECONDS.sleep(10) ; thread.interrupt(); &#125;&#125; ËæìÂá∫ÁªìÊûú: 123thread AËøêË°å‰∏≠„ÄÇ„ÄÇthread AËøêË°å‰∏≠„ÄÇ„ÄÇthread AÈÄÄÂá∫„ÄÇ„ÄÇ ÂèØ‰ª•ÈááÁî®‰∏≠Êñ≠Á∫øÁ®ãÁöÑÊñπÂºèÊù•ÈÄö‰ø°ÔºåË∞ÉÁî®‰∫Ü thread.interrupt() ÊñπÊ≥ïÂÖ∂ÂÆûÂ∞±ÊòØÂ∞Ü thread ‰∏≠ÁöÑ‰∏Ä‰∏™Ê†áÂøóÂ±ûÊÄßÁΩÆ‰∏∫‰∫Ü true„ÄÇ Âπ∂‰∏çÊòØËØ¥Ë∞ÉÁî®‰∫ÜËØ•ÊñπÊ≥ïÂ∞±ÂèØ‰ª•‰∏≠Êñ≠Á∫øÁ®ãÔºåÂ¶ÇÊûú‰∏çÂØπËøô‰∏™Ê†áÂøóËøõË°åÂìçÂ∫îÂÖ∂ÂÆûÊòØÊ≤°Êúâ‰ªÄ‰πà‰ΩúÁî®(ËøôÈáåÂØπËøô‰∏™Ê†áÂøóËøõË°å‰∫ÜÂà§Êñ≠)„ÄÇ ‰ΩÜÊòØÂ¶ÇÊûúÊäõÂá∫‰∫Ü InterruptedException ÂºÇÂ∏∏ÔºåËØ•Ê†áÂøóÂ∞±‰ºöË¢´ JVM ÈáçÁΩÆ‰∏∫ false„ÄÇ Á∫øÁ®ãÊ±† awaitTermination() ÊñπÊ≥ïÂ¶ÇÊûúÊòØÁî®Á∫øÁ®ãÊ±†Êù•ÁÆ°ÁêÜÁ∫øÁ®ãÔºåÂèØ‰ª•‰ΩøÁî®‰ª•‰∏ãÊñπÂºèÊù•ËÆ©‰∏ªÁ∫øÁ®ãÁ≠âÂæÖÁ∫øÁ®ãÊ±†‰∏≠ÊâÄÊúâ‰ªªÂä°ÊâßË°åÂÆåÊØï: 1234567891011121314151617181920212223242526272829303132private static void executorService() throws Exception&#123; BlockingQueue&lt;Runnable&gt; queue = new LinkedBlockingQueue&lt;&gt;(10) ; ThreadPoolExecutor poolExecutor = new ThreadPoolExecutor(5,5,1, TimeUnit.MILLISECONDS,queue) ; poolExecutor.execute(new Runnable() &#123; @Override public void run() &#123; LOGGER.info("running"); try &#123; Thread.sleep(3000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125;); poolExecutor.execute(new Runnable() &#123; @Override public void run() &#123; LOGGER.info("running2"); try &#123; Thread.sleep(2000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125;); poolExecutor.shutdown(); while (!poolExecutor.awaitTermination(1,TimeUnit.SECONDS))&#123; LOGGER.info("Á∫øÁ®ãËøòÂú®ÊâßË°å„ÄÇ„ÄÇ„ÄÇ"); &#125; LOGGER.info("main over");&#125; ËæìÂá∫ÁªìÊûú: 123452018-03-16 20:18:01.273 [pool-1-thread-2] INFO c.c.actual.ThreadCommunication - running22018-03-16 20:18:01.273 [pool-1-thread-1] INFO c.c.actual.ThreadCommunication - running2018-03-16 20:18:02.273 [main] INFO c.c.actual.ThreadCommunication - Á∫øÁ®ãËøòÂú®ÊâßË°å„ÄÇ„ÄÇ„ÄÇ2018-03-16 20:18:03.278 [main] INFO c.c.actual.ThreadCommunication - Á∫øÁ®ãËøòÂú®ÊâßË°å„ÄÇ„ÄÇ„ÄÇ2018-03-16 20:18:04.278 [main] INFO c.c.actual.ThreadCommunication - main over ‰ΩøÁî®Ëøô‰∏™ awaitTermination() ÊñπÊ≥ïÁöÑÂâçÊèêÈúÄË¶ÅÂÖ≥Èó≠Á∫øÁ®ãÊ±†ÔºåÂ¶ÇË∞ÉÁî®‰∫Ü shutdown() ÊñπÊ≥ï„ÄÇ Ë∞ÉÁî®‰∫Ü shutdown() ‰πãÂêéÁ∫øÁ®ãÊ±†‰ºöÂÅúÊ≠¢Êé•ÂèóÊñ∞‰ªªÂä°ÔºåÂπ∂‰∏î‰ºöÂπ≥ÊªëÁöÑÂÖ≥Èó≠Á∫øÁ®ãÊ±†‰∏≠Áé∞ÊúâÁöÑ‰ªªÂä°„ÄÇ ÁÆ°ÈÅìÈÄö‰ø°12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849public static void piped() throws IOException &#123; //Èù¢Âêë‰∫éÂ≠óÁ¨¶ PipedInputStream Èù¢Âêë‰∫éÂ≠óËäÇ PipedWriter writer = new PipedWriter(); PipedReader reader = new PipedReader(); //ËæìÂÖ•ËæìÂá∫ÊµÅÂª∫Á´ãËøûÊé• writer.connect(reader); Thread t1 = new Thread(new Runnable() &#123; @Override public void run() &#123; LOGGER.info("running"); try &#123; for (int i = 0; i &lt; 10; i++) &#123; writer.write(i+""); Thread.sleep(10); &#125; &#125; catch (Exception e) &#123; &#125; finally &#123; try &#123; writer.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125;); Thread t2 = new Thread(new Runnable() &#123; @Override public void run() &#123; LOGGER.info("running2"); int msg = 0; try &#123; while ((msg = reader.read()) != -1) &#123; LOGGER.info("msg=&#123;&#125;", (char) msg); &#125; &#125; catch (Exception e) &#123; &#125; &#125; &#125;); t1.start(); t2.start();&#125; ËæìÂá∫ÁªìÊûú: 1234567891011122018-03-16 19:56:43.014 [Thread-0] INFO c.c.actual.ThreadCommunication - running2018-03-16 19:56:43.014 [Thread-1] INFO c.c.actual.ThreadCommunication - running22018-03-16 19:56:43.130 [Thread-1] INFO c.c.actual.ThreadCommunication - msg=02018-03-16 19:56:43.132 [Thread-1] INFO c.c.actual.ThreadCommunication - msg=12018-03-16 19:56:43.132 [Thread-1] INFO c.c.actual.ThreadCommunication - msg=22018-03-16 19:56:43.133 [Thread-1] INFO c.c.actual.ThreadCommunication - msg=32018-03-16 19:56:43.133 [Thread-1] INFO c.c.actual.ThreadCommunication - msg=42018-03-16 19:56:43.133 [Thread-1] INFO c.c.actual.ThreadCommunication - msg=52018-03-16 19:56:43.133 [Thread-1] INFO c.c.actual.ThreadCommunication - msg=62018-03-16 19:56:43.134 [Thread-1] INFO c.c.actual.ThreadCommunication - msg=72018-03-16 19:56:43.134 [Thread-1] INFO c.c.actual.ThreadCommunication - msg=82018-03-16 19:56:43.134 [Thread-1] INFO c.c.actual.ThreadCommunication - msg=9 Java ËôΩËØ¥ÊòØÂü∫‰∫éÂÜÖÂ≠òÈÄö‰ø°ÁöÑÔºå‰ΩÜ‰πüÂèØ‰ª•‰ΩøÁî®ÁÆ°ÈÅìÈÄö‰ø°„ÄÇ ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåËæìÂÖ•ÊµÅÂíåËæìÂá∫ÊµÅÈúÄË¶ÅÈ¶ñÂÖàÂª∫Á´ãËøûÊé•„ÄÇËøôÊ†∑Á∫øÁ®ã B Â∞±ÂèØ‰ª•Êî∂Âà∞Á∫øÁ®ã A ÂèëÂá∫ÁöÑÊ∂àÊÅØ‰∫Ü„ÄÇ ÂÆûÈôÖÂºÄÂèë‰∏≠ÂèØ‰ª•ÁÅµÊ¥ªÊ†πÊçÆÈúÄÊ±ÇÈÄâÊã©ÊúÄÈÄÇÂêàÁöÑÁ∫øÁ®ãÈÄö‰ø°ÊñπÂºè„ÄÇ Âè∑Â§ñÊúÄËøëÂú®ÊÄªÁªì‰∏Ä‰∫õ Java Áõ∏ÂÖ≥ÁöÑÁü•ËØÜÁÇπÔºåÊÑüÂÖ¥Ë∂£ÁöÑÊúãÂèãÂèØ‰ª•‰∏ÄËµ∑Áª¥Êä§„ÄÇ Âú∞ÂùÄ: https://github.com/crossoverJie/Java-Interview]]></content>
      <categories>
        <category>Java ËøõÈò∂</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Thread</tag>
        <tag>concurrent</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[‰Ω†Â∫îËØ•Áü•ÈÅìÁöÑ volatile ÂÖ≥ÈîÆÂ≠ó]]></title>
    <url>%2F2018%2F03%2F09%2Fvolatile%2F</url>
    <content type="text"><![CDATA[ÂâçË®Ä‰∏çÁÆ°ÊòØÂú®Èù¢ËØïËøòÊòØÂÆûÈôÖÂºÄÂèë‰∏≠ volatile ÈÉΩÊòØ‰∏Ä‰∏™Â∫îËØ•ÊéåÊè°ÁöÑÊäÄËÉΩ„ÄÇ È¶ñÂÖàÊù•ÁúãÁúã‰∏∫‰ªÄ‰πà‰ºöÂá∫Áé∞Ëøô‰∏™ÂÖ≥ÈîÆÂ≠ó„ÄÇ ÂÜÖÂ≠òÂèØËßÅÊÄßÁî±‰∫é Java ÂÜÖÂ≠òÊ®°Âûã(JMM)ËßÑÂÆöÔºåÊâÄÊúâÁöÑÂèòÈáèÈÉΩÂ≠òÊîæÂú®‰∏ªÂÜÖÂ≠ò‰∏≠ÔºåËÄåÊØè‰∏™Á∫øÁ®ãÈÉΩÊúâÁùÄËá™Â∑±ÁöÑÂ∑•‰ΩúÂÜÖÂ≠ò(È´òÈÄüÁºìÂ≠ò)„ÄÇ Á∫øÁ®ãÂú®Â∑•‰ΩúÊó∂ÔºåÈúÄË¶ÅÂ∞Ü‰∏ªÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÊã∑Ë¥ùÂà∞Â∑•‰ΩúÂÜÖÂ≠ò‰∏≠„ÄÇËøôÊ†∑ÂØπÊï∞ÊçÆÁöÑ‰ªª‰ΩïÊìç‰ΩúÈÉΩÊòØÂü∫‰∫éÂ∑•‰ΩúÂÜÖÂ≠ò(ÊïàÁéáÊèêÈ´ò)ÔºåÂπ∂‰∏î‰∏çËÉΩÁõ¥Êé•Êìç‰Ωú‰∏ªÂÜÖÂ≠ò‰ª•ÂèäÂÖ∂‰ªñÁ∫øÁ®ãÂ∑•‰ΩúÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÔºå‰πãÂêéÂÜçÂ∞ÜÊõ¥Êñ∞‰πãÂêéÁöÑÊï∞ÊçÆÂà∑Êñ∞Âà∞‰∏ªÂÜÖÂ≠ò‰∏≠„ÄÇ ËøôÈáåÊâÄÊèêÂà∞ÁöÑ‰∏ªÂÜÖÂ≠òÂèØ‰ª•ÁÆÄÂçïËÆ§‰∏∫ÊòØÂ†ÜÂÜÖÂ≠òÔºåËÄåÂ∑•‰ΩúÂÜÖÂ≠òÂàôÂèØ‰ª•ËÆ§‰∏∫ÊòØÊ†àÂÜÖÂ≠ò„ÄÇ Â¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö ÊâÄ‰ª•Âú®Âπ∂ÂèëËøêË°åÊó∂ÂèØËÉΩ‰ºöÂá∫Áé∞Á∫øÁ®ã B ÊâÄËØªÂèñÂà∞ÁöÑÊï∞ÊçÆÊòØÁ∫øÁ®ã A Êõ¥Êñ∞‰πãÂâçÁöÑÊï∞ÊçÆ„ÄÇ ÊòæÁÑ∂ËøôËÇØÂÆöÊòØ‰ºöÂá∫ÈóÆÈ¢òÁöÑÔºåÂõ†Ê≠§ volatile ÁöÑ‰ΩúÁî®Âá∫Áé∞‰∫ÜÔºö ÂΩì‰∏Ä‰∏™ÂèòÈáèË¢´ volatile ‰øÆÈ•∞Êó∂Ôºå‰ªª‰ΩïÁ∫øÁ®ãÂØπÂÆÉÁöÑÂÜôÊìç‰ΩúÈÉΩ‰ºöÁ´ãÂç≥Âà∑Êñ∞Âà∞‰∏ªÂÜÖÂ≠ò‰∏≠ÔºåÂπ∂‰∏î‰ºöÂº∫Âà∂ËÆ©ÁºìÂ≠ò‰∫ÜËØ•ÂèòÈáèÁöÑÁ∫øÁ®ã‰∏≠ÁöÑÊï∞ÊçÆÊ∏ÖÁ©∫ÔºåÂøÖÈ°ª‰ªé‰∏ªÂÜÖÂ≠òÈáçÊñ∞ËØªÂèñÊúÄÊñ∞Êï∞ÊçÆ„ÄÇ volatile ‰øÆÈ•∞‰πãÂêéÂπ∂‰∏çÊòØËÆ©Á∫øÁ®ãÁõ¥Êé•‰ªé‰∏ªÂÜÖÂ≠ò‰∏≠Ëé∑ÂèñÊï∞ÊçÆÔºå‰æùÁÑ∂ÈúÄË¶ÅÂ∞ÜÂèòÈáèÊã∑Ë¥ùÂà∞Â∑•‰ΩúÂÜÖÂ≠ò‰∏≠„ÄÇ ÂÜÖÂ≠òÂèØËßÅÊÄßÁöÑÂ∫îÁî®ÂΩìÊàë‰ª¨ÈúÄË¶ÅÂú®‰∏§‰∏™Á∫øÁ®ãÈó¥‰æùÊçÆ‰∏ªÂÜÖÂ≠òÈÄö‰ø°Êó∂ÔºåÈÄö‰ø°ÁöÑÈÇ£‰∏™ÂèòÈáèÂ∞±ÂøÖÈ°ªÁöÑÁî® volatile Êù•‰øÆÈ•∞Ôºö 1234567891011121314151617181920212223242526272829public class Volatile implements Runnable&#123; private static volatile boolean flag = true ; @Override public void run() &#123; while (flag)&#123; System.out.println(Thread.currentThread().getName() + "Ê≠£Âú®ËøêË°å„ÄÇ„ÄÇ„ÄÇ"); &#125; System.out.println(Thread.currentThread().getName() +"ÊâßË°åÂÆåÊØï"); &#125; public static void main(String[] args) throws InterruptedException &#123; Volatile aVolatile = new Volatile(); new Thread(aVolatile,"thread A").start(); System.out.println("main Á∫øÁ®ãÊ≠£Âú®ËøêË°å") ; TimeUnit.MILLISECONDS.sleep(100) ; aVolatile.stopThread(); &#125; private void stopThread()&#123; flag = false ; &#125;&#125; ‰∏ªÁ∫øÁ®ãÂú®‰øÆÊîπ‰∫ÜÊ†áÂøó‰Ωç‰ΩøÂæóÁ∫øÁ®ã A Á´ãÂç≥ÂÅúÊ≠¢ÔºåÂ¶ÇÊûúÊ≤°ÊúâÁî® volatile ‰øÆÈ•∞ÔºåÂ∞±ÊúâÂèØËÉΩÂá∫Áé∞Âª∂Ëøü„ÄÇ ‰ΩÜËøôÈáåÊúâ‰∏™ËØØÂå∫ÔºåËøôÊ†∑ÁöÑ‰ΩøÁî®ÊñπÂºèÂÆπÊòìÁªô‰∫∫ÁöÑÊÑüËßâÊòØÔºö ÂØπ volatile ‰øÆÈ•∞ÁöÑÂèòÈáèËøõË°åÂπ∂ÂèëÊìç‰ΩúÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ„ÄÇ ËøôÈáåË¶ÅÈáçÁÇπÂº∫Ë∞ÉÔºåvolatile Âπ∂‰∏çËÉΩ‰øùËØÅÁ∫øÁ®ãÂÆâÂÖ®ÊÄßÔºÅ Â¶Ç‰∏ãÁ®ãÂ∫è: 1234567891011121314151617181920212223242526272829303132public class VolatileInc implements Runnable&#123; private static volatile int count = 0 ; //‰ΩøÁî® volatile ‰øÆÈ•∞Âü∫Êú¨Êï∞ÊçÆÂÜÖÂ≠ò‰∏çËÉΩ‰øùËØÅÂéüÂ≠êÊÄß //private static AtomicInteger count = new AtomicInteger() ; @Override public void run() &#123; for (int i=0;i&lt;10000 ;i++)&#123; count ++ ; //count.incrementAndGet() ; &#125; &#125; public static void main(String[] args) throws InterruptedException &#123; VolatileInc volatileInc = new VolatileInc() ; Thread t1 = new Thread(volatileInc,"t1") ; Thread t2 = new Thread(volatileInc,"t2") ; t1.start(); //t1.join(); t2.start(); //t2.join(); for (int i=0;i&lt;10000 ;i++)&#123; count ++ ; //count.incrementAndGet(); &#125; System.out.println("ÊúÄÁªàCount="+count); &#125;&#125; ÂΩìÊàë‰ª¨‰∏â‰∏™Á∫øÁ®ã(t1,t2,main)ÂêåÊó∂ÂØπ‰∏Ä‰∏™ int ËøõË°åÁ¥ØÂä†Êó∂‰ºöÂèëÁé∞ÊúÄÁªàÁöÑÂÄºÈÉΩ‰ºöÂ∞è‰∫é 30000„ÄÇ ËøôÊòØÂõ†‰∏∫ËôΩÁÑ∂ volatile ‰øùËØÅ‰∫ÜÂÜÖÂ≠òÂèØËßÅÊÄßÔºåÊØè‰∏™Á∫øÁ®ãÊãøÂà∞ÁöÑÂÄºÈÉΩÊòØÊúÄÊñ∞ÂÄºÔºå‰ΩÜ count ++ Ëøô‰∏™Êìç‰ΩúÂπ∂‰∏çÊòØÂéüÂ≠êÁöÑÔºåËøôÈáåÈù¢Ê∂âÂèäÂà∞Ëé∑ÂèñÂÄº„ÄÅËá™Â¢û„ÄÅËµãÂÄºÁöÑÊìç‰ΩúÂπ∂‰∏çËÉΩÂêåÊó∂ÂÆåÊàê„ÄÇ ÊâÄ‰ª•ÊÉ≥Âà∞ËææÂà∞Á∫øÁ®ãÂÆâÂÖ®ÂèØ‰ª•‰ΩøËøô‰∏â‰∏™Á∫øÁ®ã‰∏≤Ë°åÊâßË°å(ÂÖ∂ÂÆûÂ∞±ÊòØÂçïÁ∫øÁ®ãÔºåÊ≤°ÊúâÂèëÊå•Â§öÁ∫øÁ®ãÁöÑ‰ºòÂäø)„ÄÇ ‰πüÂèØ‰ª•‰ΩøÁî® synchronize ÊàñËÄÖÊòØÈîÅÁöÑÊñπÂºèÊù•‰øùËØÅÂéüÂ≠êÊÄß„ÄÇ ËøòÂèØ‰ª•Áî® Atomic ÂåÖ‰∏≠ AtomicInteger Êù•ÊõøÊç¢ intÔºåÂÆÉÂà©Áî®‰∫Ü CAS ÁÆóÊ≥ïÊù•‰øùËØÅ‰∫ÜÂéüÂ≠êÊÄß„ÄÇ Êåá‰ª§ÈáçÊéíÂÜÖÂ≠òÂèØËßÅÊÄßÂè™ÊòØ volatile ÁöÑÂÖ∂‰∏≠‰∏Ä‰∏™ËØ≠‰πâÔºåÂÆÉËøòÂèØ‰ª•Èò≤Ê≠¢ JVM ËøõË°åÊåá‰ª§ÈáçÊéí‰ºòÂåñ„ÄÇ ‰∏æ‰∏Ä‰∏™‰º™‰ª£Á†Å: 123int a=10 ;//1int b=20 ;//2int c= a+b ;//3 ‰∏ÄÊÆµÁâπÂà´ÁÆÄÂçïÁöÑ‰ª£Á†ÅÔºåÁêÜÊÉ≥ÊÉÖÂÜµ‰∏ãÂÆÉÁöÑÊâßË°åÈ°∫Â∫èÊòØÔºö1&gt;2&gt;3„ÄÇ‰ΩÜÊúâÂèØËÉΩÁªèËøá JVM ‰ºòÂåñ‰πãÂêéÁöÑÊâßË°åÈ°∫Â∫èÂèò‰∏∫‰∫Ü 2&gt;1&gt;3„ÄÇ ÂèØ‰ª•ÂèëÁé∞‰∏çÁÆ° JVM ÊÄé‰πà‰ºòÂåñÔºåÂâçÊèêÈÉΩÊòØ‰øùËØÅÂçïÁ∫øÁ®ã‰∏≠ÊúÄÁªàÁªìÊûú‰∏çÂèòÁöÑÊÉÖÂÜµ‰∏ãËøõË°åÁöÑ„ÄÇ ÂèØËÉΩËøôÈáåËøòÁúã‰∏çÂá∫Êúâ‰ªÄ‰πàÈóÆÈ¢òÔºåÈÇ£Áúã‰∏ã‰∏ÄÊÆµ‰º™‰ª£Á†Å: 12345678910111213141516171819private static Map&lt;String,String&gt; value ;private static volatile boolean flag = fasle ;//‰ª•‰∏ãÊñπÊ≥ïÂèëÁîüÂú®Á∫øÁ®ã A ‰∏≠ ÂàùÂßãÂåñ Mappublic void initMap()&#123; //ËÄóÊó∂Êìç‰Ωú value = getMapValue() ;//1 flag = true ;//2&#125;//ÂèëÁîüÂú®Á∫øÁ®ã B‰∏≠ Á≠âÂà∞ Map ÂàùÂßãÂåñÊàêÂäüËøõË°åÂÖ∂‰ªñÊìç‰Ωúpublic void doSomeThing()&#123; while(!flag)&#123; sleep() ; &#125; //dosomething doSomeThing(value);&#125; ËøôÈáåÂ∞±ËÉΩÁúãÂá∫ÈóÆÈ¢ò‰∫ÜÔºåÂΩì flag Ê≤°ÊúâË¢´ volatile ‰øÆÈ•∞Êó∂ÔºåJVM ÂØπ 1 Âíå 2 ËøõË°åÈáçÊéíÔºåÂØºËá¥ value ÈÉΩËøòÊ≤°ÊúâË¢´ÂàùÂßãÂåñÂ∞±ÊúâÂèØËÉΩË¢´Á∫øÁ®ã B ‰ΩøÁî®‰∫Ü„ÄÇ ÊâÄ‰ª•Âä†‰∏ä volatile ‰πãÂêéÂèØ‰ª•Èò≤Ê≠¢ËøôÊ†∑ÁöÑÈáçÊéí‰ºòÂåñÔºå‰øùËØÅ‰∏öÂä°ÁöÑÊ≠£Á°ÆÊÄß„ÄÇ Êåá‰ª§ÈáçÊéíÁöÑÁöÑÂ∫îÁî®‰∏Ä‰∏™ÁªèÂÖ∏ÁöÑ‰ΩøÁî®Âú∫ÊôØÂ∞±ÊòØÂèåÈáçÊáíÂä†ËΩΩÁöÑÂçï‰æãÊ®°Âºè‰∫Ü: 12345678910111213141516171819public class Singleton &#123; private static volatile Singleton singleton; private Singleton() &#123; &#125; public static Singleton getInstance() &#123; if (singleton == null) &#123; synchronized (Singleton.class) &#123; if (singleton == null) &#123; //Èò≤Ê≠¢Êåá‰ª§ÈáçÊéí singleton = new Singleton(); &#125; &#125; &#125; return singleton; &#125;&#125; ËøôÈáåÁöÑ volatile ÂÖ≥ÈîÆÂ≠ó‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜÈò≤Ê≠¢Êåá‰ª§ÈáçÊéí„ÄÇ Â¶ÇÊûú‰∏çÁî® Ôºåsingleton = new Singleton();ÔºåËøôÊÆµ‰ª£Á†ÅÂÖ∂ÂÆûÊòØÂàÜ‰∏∫‰∏âÊ≠•Ôºö ÂàÜÈÖçÂÜÖÂ≠òÁ©∫Èó¥„ÄÇ(1) ÂàùÂßãÂåñÂØπË±°„ÄÇ(2) Â∞Ü singleton ÂØπË±°ÊåáÂêëÂàÜÈÖçÁöÑÂÜÖÂ≠òÂú∞ÂùÄ„ÄÇ(3) Âä†‰∏ä volatile ÊòØ‰∏∫‰∫ÜËÆ©‰ª•‰∏äÁöÑ‰∏âÊ≠•Êìç‰ΩúÈ°∫Â∫èÊâßË°åÔºåÂèç‰πãÊúâÂèØËÉΩÁ¨¨‰∫åÊ≠•Âú®Á¨¨‰∏âÊ≠•‰πãÂâçË¢´ÊâßË°åÂ∞±ÊúâÂèØËÉΩÊüê‰∏™Á∫øÁ®ãÊãøÂà∞ÁöÑÂçï‰æãÂØπË±°ÊòØËøòÊ≤°ÊúâÂàùÂßãÂåñÁöÑÔºå‰ª•Ëá¥‰∫éÊä•Èîô„ÄÇ ÊÄªÁªìvolatile Âú® Java Âπ∂Âèë‰∏≠Áî®ÁöÑÂæàÂ§öÔºåÊØîÂ¶ÇÂÉè Atomic ÂåÖ‰∏≠ÁöÑ value„ÄÅ‰ª•Âèä AbstractQueuedLongSynchronizer ‰∏≠ÁöÑ state ÈÉΩÊòØË¢´ÂÆö‰πâ‰∏∫ volatile Êù•Áî®‰∫é‰øùËØÅÂÜÖÂ≠òÂèØËßÅÊÄß„ÄÇ Â∞ÜËøôÂùóÁêÜËß£ÈÄèÂΩªÂØπÊàë‰ª¨ÁºñÂÜôÂπ∂ÂèëÁ®ãÂ∫èÊó∂ÂèØ‰ª•Êèê‰æõÂæàÂ§ßÂ∏ÆÂä©„ÄÇ Âè∑Â§ñÊúÄËøëÂú®ÊÄªÁªì‰∏Ä‰∫õ Java Áõ∏ÂÖ≥ÁöÑÁü•ËØÜÁÇπÔºåÊÑüÂÖ¥Ë∂£ÁöÑÊúãÂèãÂèØ‰ª•‰∏ÄËµ∑Áª¥Êä§„ÄÇ Âú∞ÂùÄ: https://github.com/crossoverJie/Java-Interview]]></content>
      <categories>
        <category>Java ËøõÈò∂</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>volatile</tag>
        <tag>concurrent</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LinkedHashMap Â∫ïÂ±ÇÂàÜÊûê]]></title>
    <url>%2F2018%2F02%2F06%2FLinkedHashMap%2F</url>
    <content type="text"><![CDATA[‰ºóÊâÄÂë®Áü• HashMap ÊòØ‰∏Ä‰∏™Êó†Â∫èÁöÑ MapÔºåÂõ†‰∏∫ÊØèÊ¨°Ê†πÊçÆ key ÁöÑ hashcode Êò†Â∞ÑÂà∞ Entry Êï∞ÁªÑ‰∏äÔºåÊâÄ‰ª•ÈÅçÂéÜÂá∫Êù•ÁöÑÈ°∫Â∫èÂπ∂‰∏çÊòØÂÜôÂÖ•ÁöÑÈ°∫Â∫è„ÄÇ Âõ†Ê≠§ JDK Êé®Âá∫‰∏Ä‰∏™Âü∫‰∫é HashMap ‰ΩÜÂÖ∑ÊúâÈ°∫Â∫èÁöÑ LinkedHashMap Êù•Ëß£ÂÜ≥ÊúâÊéíÂ∫èÈúÄÊ±ÇÁöÑÂú∫ÊôØ„ÄÇ ÂÆÉÁöÑÂ∫ïÂ±ÇÊòØÁªßÊâø‰∫é HashMap ÂÆûÁé∞ÁöÑÔºåÁî±‰∏Ä‰∏™ÂèåÂêëÈìæË°®ÊâÄÊûÑÊàê„ÄÇ LinkedHashMap ÁöÑÊéíÂ∫èÊñπÂºèÊúâ‰∏§ÁßçÔºö Ê†πÊçÆÂÜôÂÖ•È°∫Â∫èÊéíÂ∫è„ÄÇ Ê†πÊçÆËÆøÈóÆÈ°∫Â∫èÊéíÂ∫è„ÄÇ ÂÖ∂‰∏≠Ê†πÊçÆËÆøÈóÆÈ°∫Â∫èÊéíÂ∫èÊó∂ÔºåÊØèÊ¨° get ÈÉΩ‰ºöÂ∞ÜËÆøÈóÆÁöÑÂÄºÁßªÂä®Âà∞ÈìæË°®Êú´Â∞æÔºåËøôÊ†∑ÈáçÂ§çÊìç‰ΩúÂ∞±ËÉΩÁöÑÂà∞‰∏Ä‰∏™ÊåâÁÖßËÆøÈóÆÈ°∫Â∫èÊéíÂ∫èÁöÑÈìæË°®„ÄÇ Êï∞ÊçÆÁªìÊûÑ1234567891011@Testpublic void test()&#123; Map&lt;String, Integer&gt; map = new LinkedHashMap&lt;String, Integer&gt;(); map.put("1",1) ; map.put("2",2) ; map.put("3",3) ; map.put("4",4) ; map.put("5",5) ; System.out.println(map.toString());&#125; Ë∞ÉËØïÂèØ‰ª•ÁúãÂà∞ map ÁöÑÁªÑÊàêÔºö ÊâìÂºÄÊ∫êÁ†ÅÂèØ‰ª•ÁúãÂà∞Ôºö 123456789101112131415161718192021/** * The head of the doubly linked list. */private transient Entry&lt;K,V&gt; header;/** * The iteration ordering method for this linked hash map: &lt;tt&gt;true&lt;/tt&gt; * for access-order, &lt;tt&gt;false&lt;/tt&gt; for insertion-order. * * @serial */private final boolean accessOrder;private static class Entry&lt;K,V&gt; extends HashMap.Entry&lt;K,V&gt; &#123; // These fields comprise the doubly linked list used for iteration. Entry&lt;K,V&gt; before, after; Entry(int hash, K key, V value, HashMap.Entry&lt;K,V&gt; next) &#123; super(hash, key, value, next); &#125;&#125; ÂÖ∂‰∏≠ Entry ÁªßÊâø‰∫é HashMap ÁöÑ EntryÔºåÂπ∂Êñ∞Â¢û‰∫Ü‰∏ä‰∏ãËäÇÁÇπÁöÑÊåáÈíàÔºå‰πüÂ∞±ÂΩ¢Êàê‰∫ÜÂèåÂêëÈìæË°®„ÄÇ ËøòÊúâ‰∏Ä‰∏™ header ÁöÑÊàêÂëòÂèòÈáèÔºåÊòØËøô‰∏™ÂèåÂêëÈìæË°®ÁöÑÂ§¥ÁªìÁÇπ„ÄÇ ‰∏äËæπÁöÑ demo ÊÄªÁªìÊàê‰∏ÄÂº†ÂõæÂ¶Ç‰∏ãÔºö Á¨¨‰∏Ä‰∏™Á±ª‰ºº‰∫é HashMap ÁöÑÁªìÊûÑÔºåÂà©Áî® Entry ‰∏≠ÁöÑ next ÊåáÈíàËøõË°åÂÖ≥ËÅî„ÄÇ ‰∏ãËæπÂàôÊòØ LinkedHashMap Â¶Ç‰ΩïËææÂà∞ÊúâÂ∫èÁöÑÂÖ≥ÈîÆ„ÄÇ Â∞±ÊòØÂà©Áî®‰∫ÜÂ§¥ËäÇÁÇπÂíåÂÖ∂‰ΩôÁöÑÂêÑ‰∏™ËäÇÁÇπ‰πãÈó¥ÈÄöËøá Entry ‰∏≠ÁöÑ after Âíå before ÊåáÈíàËøõË°åÂÖ≥ËÅî„ÄÇ ÂÖ∂‰∏≠ËøòÊúâ‰∏Ä‰∏™ accessOrder ÊàêÂëòÂèòÈáèÔºåÈªòËÆ§ÊòØ falseÔºåÈªòËÆ§ÊåâÁÖßÊèíÂÖ•È°∫Â∫èÊéíÂ∫èÔºå‰∏∫ true Êó∂ÊåâÁÖßËÆøÈóÆÈ°∫Â∫èÊéíÂ∫èÔºå‰πüÂèØ‰ª•Ë∞ÉÁî®: 123456public LinkedHashMap(int initialCapacity, float loadFactor, boolean accessOrder) &#123; super(initialCapacity, loadFactor); this.accessOrder = accessOrder;&#125; Ëøô‰∏™ÊûÑÈÄ†ÊñπÊ≥ïÂèØ‰ª•ÊòæÁ§∫ÁöÑ‰º†ÂÖ• accessOrder„ÄÇ ÊûÑÈÄ†ÊñπÊ≥ïLinkedHashMap ÁöÑÊûÑÈÄ†ÊñπÊ≥ï: 1234public LinkedHashMap() &#123; super(); accessOrder = false;&#125; ÂÖ∂ÂÆûÂ∞±ÊòØË∞ÉÁî®ÁöÑ HashMap ÁöÑÊûÑÈÄ†ÊñπÊ≥ï: HashMap ÂÆûÁé∞Ôºö 123456789101112131415public HashMap(int initialCapacity, float loadFactor) &#123; if (initialCapacity &lt; 0) throw new IllegalArgumentException("Illegal initial capacity: " + initialCapacity); if (initialCapacity &gt; MAXIMUM_CAPACITY) initialCapacity = MAXIMUM_CAPACITY; if (loadFactor &lt;= 0 || Float.isNaN(loadFactor)) throw new IllegalArgumentException("Illegal load factor: " + loadFactor); this.loadFactor = loadFactor; threshold = initialCapacity; //HashMap Âè™ÊòØÂÆö‰πâ‰∫ÜÊîπÊñπÊ≥ïÔºåÂÖ∑‰ΩìÂÆûÁé∞‰∫§Áªô‰∫Ü LinkedHashMap init();&#125; ÂèØ‰ª•ÁúãÂà∞ÈáåÈù¢Êúâ‰∏Ä‰∏™Á©∫ÁöÑ init()ÔºåÂÖ∑‰ΩìÊòØÁî± LinkedHashMap Êù•ÂÆûÁé∞ÁöÑÔºö 12345@Overridevoid init() &#123; header = new Entry&lt;&gt;(-1, null, null, null); header.before = header.after = header;&#125; ÂÖ∂ÂÆû‰πüÂ∞±ÊòØÂØπ header ËøõË°å‰∫ÜÂàùÂßãÂåñ„ÄÇ put ÊñπÊ≥ïÁúã LinkedHashMap ÁöÑ put() ÊñπÊ≥ï‰πãÂâçÂÖàÁúãÁúã HashMap ÁöÑ put ÊñπÊ≥ïÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142public V put(K key, V value) &#123; if (table == EMPTY_TABLE) &#123; inflateTable(threshold); &#125; if (key == null) return putForNullKey(value); int hash = hash(key); int i = indexFor(hash, table.length); for (Entry&lt;K,V&gt; e = table[i]; e != null; e = e.next) &#123; Object k; if (e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k))) &#123; V oldValue = e.value; e.value = value; //Á©∫ÂÆûÁé∞Ôºå‰∫§Áªô LinkedHashMap Ëá™Â∑±ÂÆûÁé∞ e.recordAccess(this); return oldValue; &#125; &#125; modCount++; // LinkedHashMap ÂØπÂÖ∂ÈáçÂÜô addEntry(hash, key, value, i); return null;&#125;// LinkedHashMap ÂØπÂÖ∂ÈáçÂÜôvoid addEntry(int hash, K key, V value, int bucketIndex) &#123; if ((size &gt;= threshold) &amp;&amp; (null != table[bucketIndex])) &#123; resize(2 * table.length); hash = (null != key) ? hash(key) : 0; bucketIndex = indexFor(hash, table.length); &#125; createEntry(hash, key, value, bucketIndex);&#125;// LinkedHashMap ÂØπÂÖ∂ÈáçÂÜôvoid createEntry(int hash, K key, V value, int bucketIndex) &#123; Entry&lt;K,V&gt; e = table[bucketIndex]; table[bucketIndex] = new Entry&lt;&gt;(hash, key, value, e); size++;&#125; ‰∏ª‰ΩìÁöÑÂÆûÁé∞ÈÉΩÊòØÂÄüÂä©‰∫é HashMap Êù•ÂÆåÊàêÁöÑÔºåÂè™ÊòØÂØπÂÖ∂‰∏≠ÁöÑ recordAccess(), addEntry(), createEntry() ËøõË°å‰∫ÜÈáçÂÜô„ÄÇ LinkedHashMap ÁöÑÂÆûÁé∞Ôºö 1234567891011121314151617181920212223242526272829303132333435363738 //Â∞±ÊòØÂà§Êñ≠ÊòØÂê¶ÊòØÊ†πÊçÆËÆøÈóÆÈ°∫Â∫èÊéíÂ∫èÔºåÂ¶ÇÊûúÊòØÂàôÈúÄË¶ÅÂ∞ÜÂΩìÂâçËøô‰∏™ Entry ÁßªÂä®Âà∞ÈìæË°®ÁöÑÊú´Â∞æ void recordAccess(HashMap&lt;K,V&gt; m) &#123; LinkedHashMap&lt;K,V&gt; lm = (LinkedHashMap&lt;K,V&gt;)m; if (lm.accessOrder) &#123; lm.modCount++; remove(); addBefore(lm.header); &#125; &#125; //Ë∞ÉÁî®‰∫Ü HashMap ÁöÑÂÆûÁé∞ÔºåÂπ∂Âà§Êñ≠ÊòØÂê¶ÈúÄË¶ÅÂà†Èô§ÊúÄÂ∞ë‰ΩøÁî®ÁöÑ Entry(ÈªòËÆ§‰∏çÂà†Èô§) void addEntry(int hash, K key, V value, int bucketIndex) &#123; super.addEntry(hash, key, value, bucketIndex); // Remove eldest entry if instructed Entry&lt;K,V&gt; eldest = header.after; if (removeEldestEntry(eldest)) &#123; removeEntryForKey(eldest.key); &#125;&#125;void createEntry(int hash, K key, V value, int bucketIndex) &#123; HashMap.Entry&lt;K,V&gt; old = table[bucketIndex]; Entry&lt;K,V&gt; e = new Entry&lt;&gt;(hash, key, value, old); //Â∞±Â§ö‰∫ÜËøô‰∏ÄÊ≠•ÔºåÂ∞ÜÊñ∞Â¢ûÁöÑ Entry Âä†ÂÖ•Âà∞ header ÂèåÂêëÈìæË°®‰∏≠ table[bucketIndex] = e; e.addBefore(header); size++;&#125; //ÂÜôÂÖ•Âà∞ÂèåÂêëÈìæË°®‰∏≠ private void addBefore(Entry&lt;K,V&gt; existingEntry) &#123; after = existingEntry; before = existingEntry.before; before.after = this; after.before = this; &#125; get ÊñπÊ≥ïLinkedHashMap ÁöÑ get() ÊñπÊ≥ï‰πüÈáçÂÜô‰∫ÜÔºö 123456789101112131415161718192021public V get(Object key) &#123; Entry&lt;K,V&gt; e = (Entry&lt;K,V&gt;)getEntry(key); if (e == null) return null; //Â§ö‰∫Ü‰∏Ä‰∏™Âà§Êñ≠ÊòØÂê¶ÊòØÊåâÁÖßËÆøÈóÆÈ°∫Â∫èÊéíÂ∫èÔºåÊòØÂàôÂ∞ÜÂΩìÂâçÁöÑ Entry ÁßªÂä®Âà∞ÈìæË°®Â§¥ÈÉ®„ÄÇ e.recordAccess(this); return e.value;&#125;void recordAccess(HashMap&lt;K,V&gt; m) &#123; LinkedHashMap&lt;K,V&gt; lm = (LinkedHashMap&lt;K,V&gt;)m; if (lm.accessOrder) &#123; lm.modCount++; //Âà†Èô§ remove(); //Ê∑ªÂä†Âà∞Â§¥ÈÉ® addBefore(lm.header); &#125;&#125; clear() Ê∏ÖÁ©∫Â∞±Ë¶ÅÊØîËæÉÁÆÄÂçï‰∫ÜÔºö 12345//Âè™ÈúÄË¶ÅÊääÊåáÈíàÈÉΩÊåáÂêëËá™Â∑±Âç≥ÂèØÔºåÂéüÊú¨ÈÇ£‰∫õ Entry Ê≤°ÊúâÂºïÁî®‰πãÂêéÂ∞±‰ºöË¢´ JVM Ëá™Âä®ÂõûÊî∂„ÄÇpublic void clear() &#123; super.clear(); header.before = header.after = header;&#125; ÊÄªÁªìÊÄªÁöÑÊù•ËØ¥ LinkedHashMap ÂÖ∂ÂÆûÂ∞±ÊòØÂØπ HashMap ËøõË°å‰∫ÜÊãìÂ±ïÔºå‰ΩøÁî®‰∫ÜÂèåÂêëÈìæË°®Êù•‰øùËØÅ‰∫ÜÈ°∫Â∫èÊÄß„ÄÇ Âõ†‰∏∫ÊòØÁªßÊâø‰∏é HashMap ÁöÑÔºåÊâÄ‰ª•‰∏Ä‰∫õ HashMap Â≠òÂú®ÁöÑÈóÆÈ¢ò LinkedHashMap ‰πü‰ºöÂ≠òÂú®ÔºåÊØîÂ¶Ç‰∏çÊîØÊåÅÂπ∂ÂèëÁ≠â„ÄÇ Âè∑Â§ñÊúÄËøëÂú®ÊÄªÁªì‰∏Ä‰∫õ Java Áõ∏ÂÖ≥ÁöÑÁü•ËØÜÁÇπÔºåÊÑüÂÖ¥Ë∂£ÁöÑÊúãÂèãÂèØ‰ª•‰∏ÄËµ∑Áª¥Êä§„ÄÇ Âú∞ÂùÄ: https://github.com/crossoverJie/Java-Interview]]></content>
      <categories>
        <category>Java ËøõÈò∂</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>LinkedHashMap</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ReentrantLock ÂÆûÁé∞ÂéüÁêÜ]]></title>
    <url>%2F2018%2F01%2F25%2FReentrantLock%2F</url>
    <content type="text"><![CDATA[‰ΩøÁî® synchronize Êù•ÂÅöÂêåÊ≠•Â§ÑÁêÜÊó∂ÔºåÈîÅÁöÑËé∑ÂèñÂíåÈáäÊîæÈÉΩÊòØÈöêÂºèÁöÑÔºåÂÆûÁé∞ÁöÑÂéüÁêÜÊòØÈÄöËøáÁºñËØëÂêéÂä†‰∏ä‰∏çÂêåÁöÑÊú∫Âô®Êåá‰ª§Êù•ÂÆûÁé∞„ÄÇ ËÄå ReentrantLock Â∞±ÊòØ‰∏Ä‰∏™ÊôÆÈÄöÁöÑÁ±ªÔºåÂÆÉÊòØÂü∫‰∫é AQS(AbstractQueuedSynchronizer)Êù•ÂÆûÁé∞ÁöÑ„ÄÇ ÊòØ‰∏Ä‰∏™ÈáçÂÖ•ÈîÅÔºö‰∏Ä‰∏™Á∫øÁ®ãËé∑Âæó‰∫ÜÈîÅ‰πãÂêé‰ªçÁÑ∂ÂèØ‰ª•ÂèçÂ§çÁöÑÂä†ÈîÅÔºå‰∏ç‰ºöÂá∫Áé∞Ëá™Â∑±ÈòªÂ°ûËá™Â∑±ÁöÑÊÉÖÂÜµ„ÄÇ AQS ÊòØ Java Âπ∂ÂèëÂåÖÈáåÂÆûÁé∞ÈîÅ„ÄÅÂêåÊ≠•ÁöÑ‰∏Ä‰∏™ÈáçË¶ÅÁöÑÂü∫Á°ÄÊ°ÜÊû∂„ÄÇ ÈîÅÁ±ªÂûãReentrantLock ÂàÜ‰∏∫ÂÖ¨Âπ≥ÈîÅÂíåÈùûÂÖ¨Âπ≥ÈîÅÔºåÂèØ‰ª•ÈÄöËøáÊûÑÈÄ†ÊñπÊ≥ïÊù•ÊåáÂÆöÂÖ∑‰ΩìÁ±ªÂûãÔºö 123456789//ÈªòËÆ§ÈùûÂÖ¨Âπ≥ÈîÅpublic ReentrantLock() &#123; sync = new NonfairSync();&#125;//ÂÖ¨Âπ≥ÈîÅpublic ReentrantLock(boolean fair) &#123; sync = fair ? new FairSync() : new NonfairSync();&#125; ÈªòËÆ§‰∏ÄËà¨‰ΩøÁî®ÈùûÂÖ¨Âπ≥ÈîÅÔºåÂÆÉÁöÑÊïàÁéáÂíåÂêûÂêêÈáèÈÉΩÊØîÂÖ¨Âπ≥ÈîÅÈ´òÁöÑÂ§ö(ÂêéÈù¢‰ºöÂàÜÊûêÂÖ∑‰ΩìÂéüÂõ†)„ÄÇ Ëé∑ÂèñÈîÅÈÄöÂ∏∏ÁöÑ‰ΩøÁî®ÊñπÂºèÂ¶Ç‰∏ã: 1234567891011private ReentrantLock lock = new ReentrantLock();public void run() &#123; lock.lock(); try &#123; //do bussiness &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; lock.unlock(); &#125;&#125; ÂÖ¨Âπ≥ÈîÅËé∑ÂèñÈîÅÈ¶ñÂÖàÁúã‰∏ãËé∑ÂèñÈîÅÁöÑËøáÁ®ãÔºö 123public void lock() &#123; sync.lock();&#125; ÂèØ‰ª•ÁúãÂà∞ÊòØ‰ΩøÁî® syncÁöÑÊñπÊ≥ïÔºåËÄåËøô‰∏™ÊñπÊ≥ïÊòØ‰∏Ä‰∏™ÊäΩË±°ÊñπÊ≥ïÔºåÂÖ∑‰ΩìÊòØÁî±ÂÖ∂Â≠êÁ±ª(FairSync)Êù•ÂÆûÁé∞ÁöÑÔºå‰ª•‰∏ãÊòØÂÖ¨Âπ≥ÈîÅÁöÑÂÆûÁé∞: 12345678910 final void lock() &#123; acquire(1); &#125; //AbstractQueuedSynchronizer ‰∏≠ÁöÑ acquire() public final void acquire(int arg) &#123; if (!tryAcquire(arg) &amp;&amp; acquireQueued(addWaiter(Node.EXCLUSIVE), arg)) selfInterrupt();&#125; Á¨¨‰∏ÄÊ≠•ÊòØÂ∞ùËØïËé∑ÂèñÈîÅ(tryAcquire(arg)),Ëøô‰∏™‰πüÊòØÁî±ÂÖ∂Â≠êÁ±ªÂÆûÁé∞Ôºö 1234567891011121314151617181920 protected final boolean tryAcquire(int acquires) &#123; final Thread current = Thread.currentThread(); int c = getState(); if (c == 0) &#123; if (!hasQueuedPredecessors() &amp;&amp; compareAndSetState(0, acquires)) &#123; setExclusiveOwnerThread(current); return true; &#125; &#125; else if (current == getExclusiveOwnerThread()) &#123; int nextc = c + acquires; if (nextc &lt; 0) throw new Error("Maximum lock count exceeded"); setState(nextc); return true; &#125; return false; &#125;&#125; È¶ñÂÖà‰ºöÂà§Êñ≠ AQS ‰∏≠ÁöÑ state ÊòØÂê¶Á≠â‰∫é 0Ôºå0 Ë°®Á§∫ÁõÆÂâçÊ≤°ÊúâÂÖ∂‰ªñÁ∫øÁ®ãËé∑ÂæóÈîÅÔºåÂΩìÂâçÁ∫øÁ®ãÂ∞±ÂèØ‰ª•Â∞ùËØïËé∑ÂèñÈîÅ„ÄÇ Ê≥®ÊÑè:Â∞ùËØï‰πãÂâç‰ºöÂà©Áî® hasQueuedPredecessors() ÊñπÊ≥ïÊù•Âà§Êñ≠ AQS ÁöÑÈòüÂàó‰∏≠‰∏≠ÊòØÂê¶ÊúâÂÖ∂‰ªñÁ∫øÁ®ãÔºåÂ¶ÇÊûúÊúâÂàô‰∏ç‰ºöÂ∞ùËØïËé∑ÂèñÈîÅ(ËøôÊòØÂÖ¨Âπ≥ÈîÅÁâπÊúâÁöÑÊÉÖÂÜµ)„ÄÇ Â¶ÇÊûúÈòüÂàó‰∏≠Ê≤°ÊúâÁ∫øÁ®ãÂ∞±Âà©Áî® CAS Êù•Â∞Ü AQS ‰∏≠ÁöÑ state ‰øÆÊîπ‰∏∫1Ôºå‰πüÂ∞±ÊòØËé∑ÂèñÈîÅÔºåËé∑ÂèñÊàêÂäüÂàôÂ∞ÜÂΩìÂâçÁ∫øÁ®ãÁΩÆ‰∏∫Ëé∑ÂæóÈîÅÁöÑÁã¨Âç†Á∫øÁ®ã(setExclusiveOwnerThread(current))„ÄÇ Â¶ÇÊûú state Â§ß‰∫é 0 Êó∂ÔºåËØ¥ÊòéÈîÅÂ∑≤ÁªèË¢´Ëé∑Âèñ‰∫ÜÔºåÂàôÈúÄË¶ÅÂà§Êñ≠Ëé∑ÂèñÈîÅÁöÑÁ∫øÁ®ãÊòØÂê¶‰∏∫ÂΩìÂâçÁ∫øÁ®ã(ReentrantLock ÊîØÊåÅÈáçÂÖ•)ÔºåÊòØÂàôÈúÄË¶ÅÂ∞Ü state + 1ÔºåÂπ∂Â∞ÜÂÄºÊõ¥Êñ∞„ÄÇ ÂÜôÂÖ•ÈòüÂàóÂ¶ÇÊûú tryAcquire(arg) Ëé∑ÂèñÈîÅÂ§±Ë¥•ÔºåÂàôÈúÄË¶ÅÁî® addWaiter(Node.EXCLUSIVE) Â∞ÜÂΩìÂâçÁ∫øÁ®ãÂÜôÂÖ•ÈòüÂàó‰∏≠„ÄÇ ÂÜôÂÖ•‰πãÂâçÈúÄË¶ÅÂ∞ÜÂΩìÂâçÁ∫øÁ®ãÂåÖË£Ö‰∏∫‰∏Ä‰∏™ Node ÂØπË±°(addWaiter(Node.EXCLUSIVE))„ÄÇ AQS ‰∏≠ÁöÑÈòüÂàóÊòØÁî± Node ËäÇÁÇπÁªÑÊàêÁöÑÂèåÂêëÈìæË°®ÂÆûÁé∞ÁöÑ„ÄÇ ÂåÖË£Ö‰ª£Á†Å: 1234567891011121314private Node addWaiter(Node mode) &#123; Node node = new Node(Thread.currentThread(), mode); // Try the fast path of enq; backup to full enq on failure Node pred = tail; if (pred != null) &#123; node.prev = pred; if (compareAndSetTail(pred, node)) &#123; pred.next = node; return node; &#125; &#125; enq(node); return node;&#125; È¶ñÂÖàÂà§Êñ≠ÈòüÂàóÊòØÂê¶‰∏∫Á©∫Ôºå‰∏ç‰∏∫Á©∫Êó∂ÂàôÂ∞ÜÂ∞ÅË£ÖÂ•ΩÁöÑ Node Âà©Áî® CAS ÂÜôÂÖ•ÈòüÂ∞æÔºåÂ¶ÇÊûúÂá∫Áé∞Âπ∂ÂèëÂÜôÂÖ•Â§±Ë¥•Â∞±ÈúÄË¶ÅË∞ÉÁî® enq(node); Êù•ÂÜôÂÖ•‰∫Ü„ÄÇ 123456789101112131415private Node enq(final Node node) &#123; for (;;) &#123; Node t = tail; if (t == null) &#123; // Must initialize if (compareAndSetHead(new Node())) tail = head; &#125; else &#123; node.prev = t; if (compareAndSetTail(t, node)) &#123; t.next = node; return t; &#125; &#125; &#125;&#125; Ëøô‰∏™Â§ÑÁêÜÈÄªËæëÂ∞±Áõ∏ÂΩì‰∫éËá™ÊóãÂä†‰∏ä CAS ‰øùËØÅ‰∏ÄÂÆöËÉΩÂÜôÂÖ•ÈòüÂàó„ÄÇ ÊåÇËµ∑Á≠âÂæÖÁ∫øÁ®ãÂÜôÂÖ•ÈòüÂàó‰πãÂêéÈúÄË¶ÅÂ∞ÜÂΩìÂâçÁ∫øÁ®ãÊåÇËµ∑(Âà©Áî®acquireQueued(addWaiter(Node.EXCLUSIVE), arg))Ôºö 123456789101112131415161718192021final boolean acquireQueued(final Node node, int arg) &#123; boolean failed = true; try &#123; boolean interrupted = false; for (;;) &#123; final Node p = node.predecessor(); if (p == head &amp;&amp; tryAcquire(arg)) &#123; setHead(node); p.next = null; // help GC failed = false; return interrupted; &#125; if (shouldParkAfterFailedAcquire(p, node) &amp;&amp; parkAndCheckInterrupt()) interrupted = true; &#125; &#125; finally &#123; if (failed) cancelAcquire(node); &#125;&#125; È¶ñÂÖà‰ºöÊ†πÊçÆ node.predecessor() Ëé∑ÂèñÂà∞‰∏ä‰∏Ä‰∏™ËäÇÁÇπÊòØÂê¶‰∏∫Â§¥ËäÇÁÇπÔºåÂ¶ÇÊûúÊòØÂàôÂ∞ùËØïËé∑Âèñ‰∏ÄÊ¨°ÈîÅÔºåËé∑ÂèñÊàêÂäüÂ∞±‰∏á‰∫ãÂ§ßÂêâ‰∫Ü„ÄÇ Â¶ÇÊûú‰∏çÊòØÂ§¥ËäÇÁÇπÔºåÊàñËÄÖËé∑ÂèñÈîÅÂ§±Ë¥•ÔºåÂàô‰ºöÊ†πÊçÆ‰∏ä‰∏Ä‰∏™ËäÇÁÇπÁöÑ waitStatus Áä∂ÊÄÅÊù•Â§ÑÁêÜ(shouldParkAfterFailedAcquire(p, node))„ÄÇ waitStatus Áî®‰∫éËÆ∞ÂΩïÂΩìÂâçËäÇÁÇπÁöÑÁä∂ÊÄÅÔºåÂ¶ÇËäÇÁÇπÂèñÊ∂à„ÄÅËäÇÁÇπÁ≠âÂæÖÁ≠â„ÄÇ shouldParkAfterFailedAcquire(p, node) ËøîÂõûÂΩìÂâçÁ∫øÁ®ãÊòØÂê¶ÈúÄË¶ÅÊåÇËµ∑ÔºåÂ¶ÇÊûúÈúÄË¶ÅÂàôË∞ÉÁî® parkAndCheckInterrupt()Ôºö 1234private final boolean parkAndCheckInterrupt() &#123; LockSupport.park(this); return Thread.interrupted();&#125; ‰ªñÊòØÂà©Áî® LockSupport ÁöÑ part ÊñπÊ≥ïÊù•ÊåÇËµ∑ÂΩìÂâçÁ∫øÁ®ãÁöÑÔºåÁõ¥Âà∞Ë¢´Âî§ÈÜí„ÄÇ ÈùûÂÖ¨Âπ≥ÈîÅËé∑ÂèñÈîÅÂÖ¨Âπ≥ÈîÅ‰∏éÈùûÂÖ¨Âπ≥ÈîÅÁöÑÂ∑ÆÂºÇ‰∏ªË¶ÅÂú®Ëé∑ÂèñÈîÅÔºö ÂÖ¨Âπ≥ÈîÅÂ∞±Áõ∏ÂΩì‰∫é‰π∞Á•®ÔºåÂêéÊù•ÁöÑ‰∫∫ÈúÄË¶ÅÊéíÂà∞ÈòüÂ∞æ‰æùÊ¨°‰π∞Á•®Ôºå‰∏çËÉΩÊèíÈòü„ÄÇ ËÄåÈùûÂÖ¨Âπ≥ÈîÅÂàôÊ≤°ÊúâËøô‰∫õËßÑÂàôÔºåÊòØÊä¢Âç†Ê®°ÂºèÔºåÊØèÊù•‰∏Ä‰∏™‰∫∫‰∏ç‰ºöÂéªÁÆ°ÈòüÂàóÂ¶Ç‰ΩïÔºåÁõ¥Êé•Â∞ùËØïËé∑ÂèñÈîÅ„ÄÇ ÈùûÂÖ¨Âπ≥ÈîÅ:1234567final void lock() &#123; //Áõ¥Êé•Â∞ùËØïËé∑ÂèñÈîÅ if (compareAndSetState(0, 1)) setExclusiveOwnerThread(Thread.currentThread()); else acquire(1);&#125; ÂÖ¨Âπ≥ÈîÅ:123final void lock() &#123; acquire(1);&#125; ËøòË¶Å‰∏Ä‰∏™ÈáçË¶ÅÁöÑÂå∫Âà´ÊòØÂú®Â∞ùËØïËé∑ÂèñÈîÅÊó∂tryAcquire(arg)ÔºåÈùûÂÖ¨Âπ≥ÈîÅÊòØ‰∏çÈúÄË¶ÅÂà§Êñ≠ÈòüÂàó‰∏≠ÊòØÂê¶ËøòÊúâÂÖ∂‰ªñÁ∫øÁ®ãÔºå‰πüÊòØÁõ¥Êé•Â∞ùËØïËé∑ÂèñÈîÅÔºö 12345678910111213141516171819final boolean nonfairTryAcquire(int acquires) &#123; final Thread current = Thread.currentThread(); int c = getState(); if (c == 0) &#123; //Ê≤°Êúâ !hasQueuedPredecessors() Âà§Êñ≠ if (compareAndSetState(0, acquires)) &#123; setExclusiveOwnerThread(current); return true; &#125; &#125; else if (current == getExclusiveOwnerThread()) &#123; int nextc = c + acquires; if (nextc &lt; 0) // overflow throw new Error("Maximum lock count exceeded"); setState(nextc); return true; &#125; return false;&#125; ÈáäÊîæÈîÅÂÖ¨Âπ≥ÈîÅÂíåÈùûÂÖ¨Âπ≥ÈîÅÁöÑÈáäÊîæÊµÅÁ®ãÈÉΩÊòØ‰∏ÄÊ†∑ÁöÑÔºö 12345678910111213141516171819202122232425262728public void unlock() &#123; sync.release(1);&#125;public final boolean release(int arg) &#123; if (tryRelease(arg)) &#123; Node h = head; if (h != null &amp;&amp; h.waitStatus != 0) //Âî§ÈÜíË¢´ÊåÇËµ∑ÁöÑÁ∫øÁ®ã unparkSuccessor(h); return true; &#125; return false;&#125;//Â∞ùËØïÈáäÊîæÈîÅprotected final boolean tryRelease(int releases) &#123; int c = getState() - releases; if (Thread.currentThread() != getExclusiveOwnerThread()) throw new IllegalMonitorStateException(); boolean free = false; if (c == 0) &#123; free = true; setExclusiveOwnerThread(null); &#125; setState(c); return free;&#125; È¶ñÂÖà‰ºöÂà§Êñ≠ÂΩìÂâçÁ∫øÁ®ãÊòØÂê¶‰∏∫Ëé∑ÂæóÈîÅÁöÑÁ∫øÁ®ãÔºåÁî±‰∫éÊòØÈáçÂÖ•ÈîÅÊâÄ‰ª•ÈúÄË¶ÅÂ∞Ü state ÂáèÂà∞ 0 ÊâçËÆ§‰∏∫ÂÆåÂÖ®ÈáäÊîæÈîÅ„ÄÇ ÈáäÊîæ‰πãÂêéÈúÄË¶ÅË∞ÉÁî® unparkSuccessor(h) Êù•Âî§ÈÜíË¢´ÊåÇËµ∑ÁöÑÁ∫øÁ®ã„ÄÇ ÊÄªÁªìÁî±‰∫éÂÖ¨Âπ≥ÈîÅÈúÄË¶ÅÂÖ≥ÂøÉÈòüÂàóÁöÑÊÉÖÂÜµÔºåÂæóÊåâÁÖßÈòüÂàóÈáåÁöÑÂÖàÂêéÈ°∫Â∫èÊù•Ëé∑ÂèñÈîÅ(‰ºöÈÄ†ÊàêÂ§ßÈáèÁöÑÁ∫øÁ®ã‰∏ä‰∏ãÊñáÂàáÊç¢)ÔºåËÄåÈùûÂÖ¨Âπ≥ÈîÅÂàôÊ≤°ÊúâËøô‰∏™ÈôêÂà∂„ÄÇ ÊâÄ‰ª•‰πüÂ∞±ËÉΩËß£ÈáäÈùûÂÖ¨Âπ≥ÈîÅÁöÑÊïàÁéá‰ºöË¢´ÂÖ¨Âπ≥ÈîÅÊõ¥È´ò„ÄÇ Âè∑Â§ñÊúÄËøëÂú®ÊÄªÁªì‰∏Ä‰∫õ Java Áõ∏ÂÖ≥ÁöÑÁü•ËØÜÁÇπÔºåÊÑüÂÖ¥Ë∂£ÁöÑÊúãÂèãÂèØ‰ª•‰∏ÄËµ∑Áª¥Êä§„ÄÇ Âú∞ÂùÄ: https://github.com/crossoverJie/Java-Interview]]></content>
      <categories>
        <category>Java ËøõÈò∂</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ReentrantLock</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂØπË±°ÁöÑÂàõÂª∫‰∏éÂÜÖÂ≠òÂàÜÈÖç]]></title>
    <url>%2F2018%2F01%2F18%2FnewObject%2F</url>
    <content type="text"><![CDATA[ÂàõÂª∫ÂØπË±°ÂΩì JVM Êî∂Âà∞‰∏Ä‰∏™ new Êåá‰ª§Êó∂Ôºå‰ºöÊ£ÄÊü•Êåá‰ª§‰∏≠ÁöÑÂèÇÊï∞Âú®Â∏∏ÈáèÊ±†ÊòØÂê¶ÊúâËøô‰∏™Á¨¶Âè∑ÁöÑÂºïÁî®ÔºåËøò‰ºöÊ£ÄÊü•ËØ•Á±ªÊòØÂê¶Â∑≤ÁªèË¢´Âä†ËΩΩËøá‰∫ÜÔºåÂ¶ÇÊûúÊ≤°ÊúâÁöÑËØùÂàôË¶ÅËøõË°å‰∏ÄÊ¨°Á±ªÂä†ËΩΩ„ÄÇ Êé•ÁùÄÂ∞±ÊòØÂàÜÈÖçÂÜÖÂ≠ò‰∫ÜÔºåÈÄöÂ∏∏Êúâ‰∏§ÁßçÊñπÂºèÔºö ÊåáÈíàÁ¢∞Êíû Á©∫Èó≤ÂàóË°® ‰ΩøÁî®ÊåáÈíàÁ¢∞ÊíûÁöÑÂâçÊèêÊòØÂ†ÜÂÜÖÂ≠òÊòØÂÆåÂÖ®Â∑•Êï¥ÁöÑÔºåÁî®ËøáÁöÑÂÜÖÂ≠òÂíåÊ≤°Áî®ÁöÑÂÜÖÂ≠òÂêÑÂú®‰∏ÄËæπÊØèÊ¨°ÂàÜÈÖçÁöÑÊó∂ÂÄôÂè™ÈúÄË¶ÅÂ∞ÜÊåáÈíàÂêëÁ©∫Èó≤ÂÜÖÂ≠ò‰∏ÄÊñπÁßªÂä®‰∏ÄÊÆµÂíåÂÜÖÂ≠òÂ§ßÂ∞èÁõ∏Á≠âÂå∫ÂüüÂç≥ÂèØ„ÄÇ ÂΩìÂ†Ü‰∏≠Â∑≤Áªè‰ΩøÁî®ÁöÑÂÜÖÂ≠òÂíåÊú™‰ΩøÁî®ÁöÑÂÜÖÂ≠ò‰∫íÁõ∏‰∫§ÈîôÊó∂ÔºåÊåáÈíàÁ¢∞ÊíûÁöÑÊñπÂºèÂ∞±Ë°å‰∏çÈÄö‰∫ÜÔºåËøôÊó∂Â∞±ÈúÄË¶ÅÈááÁî®Á©∫Èó≤ÂàóË°®ÁöÑÊñπÂºè„ÄÇËôöÊãüÊú∫‰ºöÁª¥Êä§‰∏Ä‰∏™Á©∫Èó≤ÁöÑÂàóË°®ÔºåÁî®‰∫éËÆ∞ÂΩïÂì™‰∫õÂÜÖÂ≠òÊòØÂèØ‰ª•ËøõË°åÂàÜÈÖçÁöÑÔºåÂàÜÈÖçÊó∂Áõ¥Êé•‰ªéÂèØÁî®ÂÜÖÂ≠ò‰∏≠Áõ¥Êé•ÂàÜÈÖçÂç≥ÂèØ„ÄÇ Â†Ü‰∏≠ÁöÑÂÜÖÂ≠òÊòØÂê¶Â∑•Êï¥ÊòØÊúâÂûÉÂúæÊî∂ÈõÜÂô®Êù•ÂÜ≥ÂÆöÁöÑÔºåÂ¶ÇÊûúÂ∏¶ÊúâÂéãÁº©ÂäüËÉΩÁöÑÂûÉÂúæÊî∂ÈõÜÂô®Â∞±ÊòØÈááÁî®ÊåáÈíàÁ¢∞ÊíûÁöÑÊñπÂºèÊù•ËøõË°åÂÜÖÂ≠òÂàÜÈÖçÁöÑ„ÄÇ ÂàÜÈÖçÂÜÖÂ≠òÊó∂‰πü‰ºöÂá∫Áé∞Âπ∂ÂèëÈóÆÈ¢ò: ËøôÊ†∑ÂèØ‰ª•Âú®ÂàõÂª∫ÂØπË±°ÁöÑÊó∂ÂÄô‰ΩøÁî® CAS ËøôÊ†∑ÁöÑ‰πêËßÇÈîÅÊù•‰øùËØÅ„ÄÇ ‰πüÂèØ‰ª•Â∞ÜÂÜÖÂ≠òÂàÜÈÖçÂÆâÊéíÂú®ÊØè‰∏™Á∫øÁ®ãÁã¨ÊúâÁöÑÁ©∫Èó¥ËøõË°åÔºåÊØè‰∏™Á∫øÁ®ãÈ¶ñÂÖàÂú®Â†ÜÂÜÖÂ≠ò‰∏≠ÂàÜÈÖç‰∏ÄÂ∞èÂùóÂÜÖÂ≠òÔºåÁß∞‰∏∫Êú¨Âú∞ÂàÜÈÖçÁºìÂ≠ò(TLAB : Thread Local Allocation Buffer)„ÄÇ ÂàÜÈÖçÂÜÖÂ≠òÊó∂ÔºåÂè™ÈúÄË¶ÅÂú®Ëá™Â∑±ÁöÑÂàÜÈÖçÁºìÂ≠ò‰∏≠ÂàÜÈÖçÂç≥ÂèØÔºåÁî±‰∫éËøô‰∏™ÂÜÖÂ≠òÂå∫ÂüüÊòØÁ∫øÁ®ãÁßÅÊúâÁöÑÔºåÊâÄ‰ª•‰∏ç‰ºöÂá∫Áé∞Âπ∂ÂèëÈóÆÈ¢ò„ÄÇ ÂèØ‰ª•‰ΩøÁî® -XX:+/-UseTLAB ÂèÇÊï∞Êù•ËÆæÂÆö JVM ÊòØÂê¶ÂºÄÂêØ TLAB „ÄÇ ÂÜÖÂ≠òÂàÜÈÖç‰πãÂêéÈúÄË¶ÅÂØπËØ•ÂØπË±°ËøõË°åËÆæÁΩÆÔºåÂ¶ÇÂØπË±°Â§¥„ÄÇÂØπË±°Â§¥ÁöÑ‰∏Ä‰∫õÂ∫îÁî®ÂèØ‰ª•Êü•Áúã Synchronize ÂÖ≥ÈîÆÂ≠óÂéüÁêÜ„ÄÇ ÂØπË±°ËÆøÈóÆ‰∏Ä‰∏™ÂØπË±°Ë¢´ÂàõÂª∫‰πãÂêéËá™ÁÑ∂ÊòØ‰∏∫‰∫Ü‰ΩøÁî®ÔºåÂú® Java ‰∏≠ÊòØÈÄöËøáÊ†àÊù•ÂºïÁî®Â†ÜÂÜÖÂ≠ò‰∏≠ÁöÑÂØπË±°Êù•ËøõË°åÊìç‰ΩúÁöÑ„ÄÇ ÂØπ‰∫éÊàë‰ª¨Â∏∏Áî®ÁöÑ HotSpot ËôöÊãüÊú∫Êù•ËØ¥ÔºåËøôÊ†∑ÂºïÁî®ÂÖ≥Á≥ªÊòØÈÄöËøáÁõ¥Êé•ÊåáÈíàÊù•ÂÖ≥ËÅîÁöÑ„ÄÇ Â¶ÇÂõæ: ËøôÊ†∑ÁöÑÂ•ΩÂ§ÑÂ∞±ÊòØÔºöÂú® Java ÈáåËøõË°åÈ¢ëÁπÅÁöÑÂØπË±°ËÆøÈóÆÂèØ‰ª•ÊèêÂçáËÆøÈóÆÈÄüÂ∫¶(Áõ∏ÂØπ‰∫é‰ΩøÁî®Âè•ÊüÑÊ±†Êù•ËØ¥)„ÄÇ ÂÜÖÂ≠òÂàÜÈÖçEden Âå∫ÂàÜÈÖçÁÆÄÂçïÁöÑÊù•ËØ¥ÂØπË±°ÈÉΩÊòØÂú®Â†ÜÂÜÖÂ≠ò‰∏≠ÂàÜÈÖçÁöÑÔºåÂæÄÁªÜ‰∏ÄÁÇπÁúãÂàôÊòØ‰ºòÂÖàÂú® Eden Âå∫ÂàÜÈÖç„ÄÇ ËøôÈáåÂ∞±Ê∂âÂèäÂà∞Â†ÜÂÜÖÂ≠òÁöÑÂàíÂàÜ‰∫ÜÔºå‰∏∫‰∫ÜÊñπ‰æøÂûÉÂúæÂõûÊî∂ÔºåJVM Â∞ÜÂØπÂÜÖÂ≠òÂàÜ‰∏∫Êñ∞Áîü‰ª£ÂíåËÄÅÂπ¥‰ª£„ÄÇ ËÄåÊñ∞Áîü‰ª£‰∏≠Âèà‰ºöÂàíÂàÜ‰∏∫ Eden Âå∫Ôºåfrom Survivor„ÄÅto Survivor Âå∫„ÄÇ ÂÖ∂‰∏≠ Eden Âíå Survivor Âå∫ÁöÑÊØî‰æãÈªòËÆ§ÊòØ 8:1:1ÔºåÂΩìÁÑ∂‰πüÊîØÊåÅÂèÇÊï∞Ë∞ÉÊï¥ -XX:SurvivorRatio=8„ÄÇ ÂΩìÂú® Eden Âå∫ÂàÜÈÖçÂÜÖÂ≠ò‰∏çË∂≥Êó∂ÔºåÂàô‰ºöÂèëÁîü minorGC ÔºåÁî±‰∫é Java ÂØπË±°Â§öÊï∞ÊòØÊúùÁîüÂ§ïÁÅ≠ÁöÑÁâπÊÄßÔºåÊâÄ‰ª• minorGC ÈÄöÂ∏∏‰ºöÊØîËæÉÈ¢ëÁπÅÔºåÊïàÁéá‰πüÊØîËæÉÈ´ò„ÄÇ ÂΩìÂèëÁîü minorGC Êó∂ÔºåJVM ‰ºöÊ†πÊçÆÂ§çÂà∂ÁÆóÊ≥ïÂ∞ÜÂ≠òÊ¥ªÁöÑÂØπË±°Êã∑Ë¥ùÂà∞Âè¶‰∏Ä‰∏™Êú™‰ΩøÁî®ÁöÑ Survivor Âå∫ÔºåÂ¶ÇÊûú Survivor Âå∫ÂÜÖÂ≠ò‰∏çË∂≥Êó∂ÔºåÂàô‰ºö‰ΩøÁî®ÂàÜÈÖçÊãÖ‰øùÁ≠ñÁï•Â∞ÜÂØπË±°ÁßªÂä®Âà∞ËÄÅÂπ¥‰ª£‰∏≠„ÄÇ Ë∞àÂà∞ minorGC Êó∂ÔºåÂ∞±‰∏çÂæó‰∏çÊèêÂà∞ fullGC(majorGC) ÔºåËøôÊòØÊåáÂèëÁîüÂú®ËÄÅÂπ¥‰ª£ÁöÑ GC Ôºå‰∏çËÆ∫ÊòØÊïàÁéáËøòÊòØÈÄüÂ∫¶ÈÉΩÊØî minorGC ÊÖ¢ÁöÑÂ§öÔºåÂõûÊî∂Êó∂Ëøò‰ºöÂèëÁîü stop the world ‰ΩøÁ®ãÂ∫èÂèëÁîüÂÅúÈ°øÔºåÊâÄ‰ª•Â∫îÂΩìÂ∞ΩÈáèÈÅøÂÖçÂèëÁîü fullGC „ÄÇ ËÄÅÂπ¥‰ª£ÂàÜÈÖç‰πüÊúâ‰∏Ä‰∫õÊÉÖÂÜµ‰ºöÂØºËá¥ÂØπË±°Áõ¥Êé•Âú®ËÄÅÂπ¥‰ª£ÂàÜÈÖçÔºåÊØîÂ¶ÇÂΩìÂàÜÈÖç‰∏Ä‰∏™Â§ßÂØπË±°Êó∂(Â§ßÁöÑÊï∞ÁªÑÔºåÂæàÈïøÁöÑÂ≠óÁ¨¶‰∏≤)ÔºåÁî±‰∫é Eden Âå∫Ê≤°ÊúâË∂≥Â§üÂ§ßÁöÑËøûÁª≠Á©∫Èó¥Êù•ÂàÜÈÖçÊó∂Ôºå‰ºöÂØºËá¥ÊèêÂâçËß¶Âèë‰∏ÄÊ¨° GCÔºåÊâÄ‰ª•Â∞ΩÈáèÂà´È¢ëÁπÅÁöÑÂàõÂª∫Â§ßÂØπË±°„ÄÇ Âõ†Ê≠§ JVM ‰ºöÊ†πÊçÆ‰∏Ä‰∏™ÈòàÂÄºÊù•Âà§Êñ≠Â§ß‰∫éËØ•ÈòàÂÄºÂØπË±°Áõ¥Êé•ÂàÜÈÖçÂà∞ËÄÅÂπ¥‰ª£ÔºåËøôÊ†∑ÂèØ‰ª•ÈÅøÂÖçÂú®Êñ∞Áîü‰ª£È¢ëÁπÅÁöÑÂèëÁîü GC„ÄÇ ÂØπ‰∫é‰∏Ä‰∫õÂú®Êñ∞Áîü‰ª£ÁöÑËÄÅÂØπË±° JVM ‰πü‰ºöÊ†πÊçÆÊüêÁßçÊú∫Âà∂ÁßªÂä®Âà∞ËÄÅÂπ¥‰ª£‰∏≠„ÄÇ JVM ÊòØÊ†πÊçÆËÆ∞ÂΩïÂØπË±°Âπ¥ÈæÑÁöÑÊñπÂºèÊù•Âà§Êñ≠ËØ•ÂØπË±°ÊòØÂê¶Â∫îËØ•ÁßªÂä®Âà∞ËÄÅÂπ¥‰ª£ÔºåÊ†πÊçÆÊñ∞Áîü‰ª£ÁöÑÂ§çÂà∂ÁÆóÊ≥ïÔºåÂΩì‰∏Ä‰∏™ÂØπË±°Ë¢´ÁßªÂä®Âà∞ Survivor Âå∫‰πãÂêé JVM Â∞±ÁªôËØ•ÂØπË±°ÁöÑÂπ¥ÈæÑËÆ∞‰∏∫1ÔºåÊØèÂΩìÁÜ¨Ëøá‰∏ÄÊ¨° minorGC ÂêéÂØπË±°ÁöÑÂπ¥ÈæÑÂ∞± +1 ÔºåÁõ¥Âà∞ËææÂà∞ÈòàÂÄº(ÈªòËÆ§‰∏∫15)Â∞±ÁßªÂä®Âà∞ËÄÅÂπ¥‰ª£‰∏≠„ÄÇ ÂèØ‰ª•‰ΩøÁî® -XX:MaxTenuringThreshold=15 Êù•ÈÖçÁΩÆËøô‰∏™ÈòàÂÄº„ÄÇ ÊÄªÁªìËôΩËØ¥Ëøô‰∫õÂÜÖÂÆπÁï•ÊòæÊûØÁá•Ôºå‰ΩÜÂΩìÂ∫îÁî®ÂèëÁîü‰∏çÊ≠£Â∏∏ÁöÑ GC Êó∂ÔºåÂèØ‰ª•Êñπ‰æøÊõ¥Âø´ÁöÑÂÆö‰ΩçÈóÆÈ¢ò„ÄÇ Âè∑Â§ñÊúÄËøëÂú®ÊÄªÁªì‰∏Ä‰∫õ Java Áõ∏ÂÖ≥ÁöÑÁü•ËØÜÁÇπÔºåÊÑüÂÖ¥Ë∂£ÁöÑÊúãÂèãÂèØ‰ª•‰∏ÄËµ∑Áª¥Êä§„ÄÇ Âú∞ÂùÄ: https://github.com/crossoverJie/Java-Interview]]></content>
      <categories>
        <category>Java ËøõÈò∂</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Synchronize ÂÖ≥ÈîÆÂ≠óÂéüÁêÜ]]></title>
    <url>%2F2018%2F01%2F14%2FSynchronize%2F</url>
    <content type="text"><![CDATA[‰ºóÊâÄÂë®Áü• Synchronize ÂÖ≥ÈîÆÂ≠óÊòØËß£ÂÜ≥Âπ∂ÂèëÈóÆÈ¢òÂ∏∏Áî®Ëß£ÂÜ≥ÊñπÊ°àÔºåÊúâ‰ª•‰∏ã‰∏âÁßç‰ΩøÁî®ÊñπÂºè: ÂêåÊ≠•ÊôÆÈÄöÊñπÊ≥ïÔºåÈîÅÁöÑÊòØÂΩìÂâçÂØπË±°„ÄÇ ÂêåÊ≠•ÈùôÊÄÅÊñπÊ≥ïÔºåÈîÅÁöÑÊòØÂΩìÂâç Class ÂØπË±°„ÄÇ ÂêåÊ≠•ÂùóÔºåÈîÅÁöÑÊòØ {} ‰∏≠ÁöÑÂØπË±°„ÄÇ ÂÆûÁé∞ÂéüÁêÜÔºöJVM ÊòØÈÄöËøáËøõÂÖ•„ÄÅÈÄÄÂá∫ÂØπË±°ÁõëËßÜÂô®( Monitor )Êù•ÂÆûÁé∞ÂØπÊñπÊ≥ï„ÄÅÂêåÊ≠•ÂùóÁöÑÂêåÊ≠•ÁöÑ„ÄÇ ÂÖ∑‰ΩìÂÆûÁé∞ÊòØÂú®ÁºñËØë‰πãÂêéÂú®ÂêåÊ≠•ÊñπÊ≥ïË∞ÉÁî®ÂâçÂä†ÂÖ•‰∏Ä‰∏™ monitor.enter Êåá‰ª§ÔºåÂú®ÈÄÄÂá∫ÊñπÊ≥ïÂíåÂºÇÂ∏∏Â§ÑÊèíÂÖ• monitor.exit ÁöÑÊåá‰ª§„ÄÇ ÂÖ∂Êú¨Ë¥®Â∞±ÊòØÂØπ‰∏Ä‰∏™ÂØπË±°ÁõëËßÜÂô®( Monitor )ËøõË°åËé∑ÂèñÔºåËÄåËøô‰∏™Ëé∑ÂèñËøáÁ®ãÂÖ∑ÊúâÊéí‰ªñÊÄß‰ªéËÄåËææÂà∞‰∫ÜÂêå‰∏ÄÊó∂ÂàªÂè™ËÉΩ‰∏Ä‰∏™Á∫øÁ®ãËÆøÈóÆÁöÑÁõÆÁöÑ„ÄÇ ËÄåÂØπ‰∫éÊ≤°ÊúâËé∑ÂèñÂà∞ÈîÅÁöÑÁ∫øÁ®ãÂ∞Ü‰ºöÈòªÂ°ûÂà∞ÊñπÊ≥ïÂÖ•Âè£Â§ÑÔºåÁõ¥Âà∞Ëé∑ÂèñÈîÅÁöÑÁ∫øÁ®ã monitor.exit ‰πãÂêéÊâçËÉΩÂ∞ùËØïÁªßÁª≠Ëé∑ÂèñÈîÅ„ÄÇ ÊµÅÁ®ãÂõæÂ¶Ç‰∏ã: ÈÄöËøá‰∏ÄÊÆµ‰ª£Á†ÅÊù•ÊºîÁ§∫: 12345public static void main(String[] args) &#123; synchronized (Synchronize.class)&#123; System.out.println("Synchronize"); &#125;&#125; ‰ΩøÁî® javap -c Synchronize ÂèØ‰ª•Êü•ÁúãÁºñËØë‰πãÂêéÁöÑÂÖ∑‰Ωì‰ø°ÊÅØ„ÄÇ 123456789101112131415161718192021222324252627282930public class com.crossoverjie.synchronize.Synchronize &#123; public com.crossoverjie.synchronize.Synchronize(); Code: 0: aload_0 1: invokespecial #1 // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V 4: return public static void main(java.lang.String[]); Code: 0: ldc #2 // class com/crossoverjie/synchronize/Synchronize 2: dup 3: astore_1 **4: monitorenter** 5: getstatic #3 // Field java/lang/System.out:Ljava/io/PrintStream; 8: ldc #4 // String Synchronize 10: invokevirtual #5 // Method java/io/PrintStream.println:(Ljava/lang/String;)V 13: aload_1 **14: monitorexit** 15: goto 23 18: astore_2 19: aload_1 20: monitorexit 21: aload_2 22: athrow 23: return Exception table: from to target type 5 15 18 any 18 21 18 any&#125; ÂèØ‰ª•ÁúãÂà∞Âú®ÂêåÊ≠•ÂùóÁöÑÂÖ•Âè£ÂíåÂá∫Âè£ÂàÜÂà´Êúâ monitorenter,monitorexitÊåá‰ª§„ÄÇ ÈîÅ‰ºòÂåñsynchronize ÂæàÂ§öÈÉΩÁß∞‰πã‰∏∫ÈáçÈáèÈîÅÔºåJDK1.6 ‰∏≠ÂØπ synchronize ËøõË°å‰∫ÜÂêÑÁßç‰ºòÂåñÔºå‰∏∫‰∫ÜËÉΩÂáèÂ∞ëËé∑ÂèñÂíåÈáäÊîæÈîÅÂ∏¶Êù•ÁöÑÊ∂àËÄóÂºïÂÖ•‰∫ÜÂÅèÂêëÈîÅÂíåËΩªÈáèÈîÅ„ÄÇ ËΩªÈáèÈîÅÂΩì‰ª£Á†ÅËøõÂÖ•ÂêåÊ≠•ÂùóÊó∂ÔºåÂ¶ÇÊûúÂêåÊ≠•ÂØπË±°‰∏∫Êó†ÈîÅÁä∂ÊÄÅÊó∂ÔºåÂΩìÂâçÁ∫øÁ®ã‰ºöÂú®Ê†àÂ∏ß‰∏≠ÂàõÂª∫‰∏Ä‰∏™ÈîÅËÆ∞ÂΩï(Lock Record)Âå∫ÂüüÔºåÂêåÊó∂Â∞ÜÈîÅÂØπË±°ÁöÑÂØπË±°Â§¥‰∏≠ Mark Word Êã∑Ë¥ùÂà∞ÈîÅËÆ∞ÂΩï‰∏≠ÔºåÂÜçÂ∞ùËØï‰ΩøÁî® CAS Â∞Ü Mark Word Êõ¥Êñ∞‰∏∫ÊåáÂêëÈîÅËÆ∞ÂΩïÁöÑÊåáÈíà„ÄÇ Â¶ÇÊûúÊõ¥Êñ∞ÊàêÂäüÔºåÂΩìÂâçÁ∫øÁ®ãÂ∞±Ëé∑Âæó‰∫ÜÈîÅ„ÄÇ Â¶ÇÊûúÊõ¥Êñ∞Â§±Ë¥• JVM ‰ºöÂÖàÊ£ÄÊü•ÈîÅÂØπË±°ÁöÑ Mark Word ÊòØÂê¶ÊåáÂêëÂΩìÂâçÁ∫øÁ®ãÁöÑÈîÅËÆ∞ÂΩï„ÄÇ Â¶ÇÊûúÊòØÂàôËØ¥ÊòéÂΩìÂâçÁ∫øÁ®ãÊã•ÊúâÈîÅÂØπË±°ÁöÑÈîÅÔºåÂèØ‰ª•Áõ¥Êé•ËøõÂÖ•ÂêåÊ≠•Âùó„ÄÇ ‰∏çÊòØÂàôËØ¥ÊòéÊúâÂÖ∂‰ªñÁ∫øÁ®ãÊä¢Âç†‰∫ÜÈîÅÔºåÂ¶ÇÊûúÂ≠òÂú®Â§ö‰∏™Á∫øÁ®ãÂêåÊó∂Á´û‰∫â‰∏ÄÊääÈîÅÔºåËΩªÈáèÈîÅÂ∞±‰ºöËÜ®ËÉÄ‰∏∫ÈáçÈáèÈîÅ„ÄÇ Ëß£ÈîÅËΩªÈáèÈîÅÁöÑËß£ÈîÅËøáÁ®ã‰πüÊòØÂà©Áî® CAS Êù•ÂÆûÁé∞ÁöÑÔºå‰ºöÂ∞ùËØïÈîÅËÆ∞ÂΩïÊõøÊç¢ÂõûÈîÅÂØπË±°ÁöÑ Mark Word „ÄÇÂ¶ÇÊûúÊõøÊç¢ÊàêÂäüÂàôËØ¥ÊòéÊï¥‰∏™ÂêåÊ≠•Êìç‰ΩúÂÆåÊàêÔºåÂ§±Ë¥•ÂàôËØ¥ÊòéÊúâÂÖ∂‰ªñÁ∫øÁ®ãÂ∞ùËØïËé∑ÂèñÈîÅÔºåËøôÊó∂Â∞±‰ºöÂî§ÈÜíË¢´ÊåÇËµ∑ÁöÑÁ∫øÁ®ã(Ê≠§Êó∂Â∑≤ÁªèËÜ®ËÉÄ‰∏∫ÈáçÈáèÈîÅ) ËΩªÈáèÈîÅËÉΩÊèêÂçáÊÄßËÉΩÁöÑÂéüÂõ†Ôºö ËÆ§‰∏∫Â§ßÂ§öÊï∞ÈîÅÂú®Êï¥‰∏™ÂêåÊ≠•Âë®ÊúüÈÉΩ‰∏çÂ≠òÂú®Á´û‰∫âÔºåÊâÄ‰ª•‰ΩøÁî® CAS ÊØî‰ΩøÁî®‰∫íÊñ•ÂºÄÈîÄÊõ¥Â∞ë„ÄÇ‰ΩÜÂ¶ÇÊûúÈîÅÁ´û‰∫âÊøÄÁÉàÔºåËΩªÈáèÈîÅÂ∞±‰∏ç‰ΩÜÊúâ‰∫íÊñ•ÁöÑÂºÄÈîÄÔºåËøòÊúâ CAS ÁöÑÂºÄÈîÄÔºåÁîöËá≥ÊØîÈáçÈáèÈîÅÊõ¥ÊÖ¢„ÄÇ ÂÅèÂêëÈîÅ‰∏∫‰∫ÜËøõ‰∏ÄÊ≠•ÁöÑÈôç‰ΩéËé∑ÂèñÈîÅÁöÑ‰ª£‰ª∑ÔºåJDK1.6 ‰πãÂêéËøòÂºïÂÖ•‰∫ÜÂÅèÂêëÈîÅ„ÄÇ ÂÅèÂêëÈîÅÁöÑÁâπÂæÅÊòØ:ÈîÅ‰∏çÂ≠òÂú®Â§öÁ∫øÁ®ãÁ´û‰∫âÔºåÂπ∂‰∏îÂ∫îÁî±‰∏Ä‰∏™Á∫øÁ®ãÂ§öÊ¨°Ëé∑ÂæóÈîÅ„ÄÇ ÂΩìÁ∫øÁ®ãËÆøÈóÆÂêåÊ≠•ÂùóÊó∂Ôºå‰ºö‰ΩøÁî® CAS Â∞ÜÁ∫øÁ®ã ID Êõ¥Êñ∞Âà∞ÈîÅÂØπË±°ÁöÑ Mark Word ‰∏≠ÔºåÂ¶ÇÊûúÊõ¥Êñ∞ÊàêÂäüÂàôËé∑ÂæóÂÅèÂêëÈîÅÔºåÂπ∂‰∏î‰πãÂêéÊØèÊ¨°ËøõÂÖ•Ëøô‰∏™ÂØπË±°ÈîÅÁõ∏ÂÖ≥ÁöÑÂêåÊ≠•ÂùóÊó∂ÈÉΩ‰∏çÈúÄË¶ÅÂÜçÊ¨°Ëé∑ÂèñÈîÅ‰∫Ü„ÄÇ ÈáäÊîæÈîÅÂΩìÊúâÂè¶Â§ñ‰∏Ä‰∏™Á∫øÁ®ãËé∑ÂèñËøô‰∏™ÈîÅÊó∂ÔºåÊåÅÊúâÂÅèÂêëÈîÅÁöÑÁ∫øÁ®ãÂ∞±‰ºöÈáäÊîæÈîÅÔºåÈáäÊîæÊó∂‰ºöÁ≠âÂæÖÂÖ®Â±ÄÂÆâÂÖ®ÁÇπ(Ëøô‰∏ÄÊó∂ÂàªÊ≤°ÊúâÂ≠óËäÇÁ†ÅËøêË°å)ÔºåÊé•ÁùÄ‰ºöÊöÇÂÅúÊã•ÊúâÂÅèÂêëÈîÅÁöÑÁ∫øÁ®ãÔºåÊ†πÊçÆÈîÅÂØπË±°ÁõÆÂâçÊòØÂê¶Ë¢´ÈîÅÊù•Âà§ÂÆöÂ∞ÜÂØπË±°Â§¥‰∏≠ÁöÑ Mark Word ËÆæÁΩÆ‰∏∫Êó†ÈîÅÊàñËÄÖÊòØËΩªÈáèÈîÅÁä∂ÊÄÅ„ÄÇ ÂÅèÂêëÈîÅÂèØ‰ª•ÊèêÈ´òÂ∏¶ÊúâÂêåÊ≠•Âç¥Ê≤°ÊúâÁ´û‰∫âÁöÑÁ®ãÂ∫èÊÄßËÉΩÔºå‰ΩÜÂ¶ÇÊûúÁ®ãÂ∫è‰∏≠Â§ßÂ§öÊï∞ÈîÅÈÉΩÂ≠òÂú®Á´û‰∫âÊó∂ÔºåÈÇ£ÂÅèÂêëÈîÅÂ∞±Ëµ∑‰∏çÂà∞Â§™Â§ß‰ΩúÁî®„ÄÇÂèØ‰ª•‰ΩøÁî® -XX:-userBiasedLocking=false Êù•ÂÖ≥Èó≠ÂÅèÂêëÈîÅÔºåÂπ∂ÈªòËÆ§ËøõÂÖ•ËΩªÈáèÈîÅ„ÄÇ ÂÖ∂‰ªñ‰ºòÂåñÈÄÇÂ∫îÊÄßËá™ÊóãÂú®‰ΩøÁî® CAS Êó∂ÔºåÂ¶ÇÊûúÊìç‰ΩúÂ§±Ë¥•ÔºåCAS ‰ºöËá™ÊóãÂÜçÊ¨°Â∞ùËØï„ÄÇÁî±‰∫éËá™ÊóãÊòØÈúÄË¶ÅÊ∂àËÄó CPU ËµÑÊ∫êÁöÑÔºåÊâÄ‰ª•Â¶ÇÊûúÈïøÊúüËá™ÊóãÂ∞±ÁôΩÁôΩÊµ™Ë¥π‰∫Ü CPU„ÄÇJDK1.6Âä†ÂÖ•‰∫ÜÈÄÇÂ∫îÊÄßËá™Êóã: Â¶ÇÊûúÊüê‰∏™ÈîÅËá™ÊóãÂæàÂ∞ëÊàêÂäüËé∑ÂæóÔºåÈÇ£‰πà‰∏ã‰∏ÄÊ¨°Â∞±‰ºöÂáèÂ∞ëËá™Êóã„ÄÇ Âè∑Â§ñÊúÄËøëÂú®ÊÄªÁªì‰∏Ä‰∫õ Java Áõ∏ÂÖ≥ÁöÑÁü•ËØÜÁÇπÔºåÊÑüÂÖ¥Ë∂£ÁöÑÊúãÂèãÂèØ‰ª•‰∏ÄËµ∑Áª¥Êä§„ÄÇ Âú∞ÂùÄ: https://github.com/crossoverJie/Java-Interview]]></content>
      <categories>
        <category>Java ËøõÈò∂</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>synchronize</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[‰∏ÄËá¥ Hash ÁÆóÊ≥ïÂàÜÊûê]]></title>
    <url>%2F2018%2F01%2F08%2FConsistent-Hash%2F</url>
    <content type="text"><![CDATA[ÂΩìÊàë‰ª¨Âú®ÂÅöÊï∞ÊçÆÂ∫ìÂàÜÂ∫ìÂàÜË°®ÊàñËÄÖÊòØÂàÜÂ∏ÉÂºèÁºìÂ≠òÊó∂Ôºå‰∏çÂèØÈÅøÂÖçÁöÑÈÉΩ‰ºöÈÅáÂà∞‰∏Ä‰∏™ÈóÆÈ¢ò: Â¶Ç‰ΩïÂ∞ÜÊï∞ÊçÆÂùáÂåÄÁöÑÂàÜÊï£Âà∞ÂêÑ‰∏™ËäÇÁÇπ‰∏≠ÔºåÂπ∂‰∏îÂ∞ΩÈáèÁöÑÂú®Âä†ÂáèËäÇÁÇπÊó∂ËÉΩ‰ΩøÂèóÂΩ±ÂìçÁöÑÊï∞ÊçÆÊúÄÂ∞ë„ÄÇ Hash ÂèñÊ®°ÈöèÊú∫ÊîæÁΩÆÂ∞±‰∏çËØ¥‰∫ÜÔºå‰ºöÂ∏¶Êù•ÂæàÂ§öÈóÆÈ¢ò„ÄÇÈÄöÂ∏∏ÊúÄÂÆπÊòìÊÉ≥Âà∞ÁöÑÊñπÊ°àÂ∞±ÊòØ hash ÂèñÊ®°‰∫Ü„ÄÇ ÂèØ‰ª•Â∞Ü‰º†ÂÖ•ÁöÑ Key ÊåâÁÖß index = hash(key) % N ËøôÊ†∑Êù•ËÆ°ÁÆóÂá∫ÈúÄË¶ÅÂ≠òÊîæÁöÑËäÇÁÇπ„ÄÇÂÖ∂‰∏≠ hash ÂáΩÊï∞ÊòØ‰∏Ä‰∏™Â∞ÜÂ≠óÁ¨¶‰∏≤ËΩ¨Êç¢‰∏∫Ê≠£Êï¥Êï∞ÁöÑÂìàÂ∏åÊò†Â∞ÑÊñπÊ≥ïÔºåN Â∞±ÊòØËäÇÁÇπÁöÑÊï∞Èáè„ÄÇ ËøôÊ†∑ÂèØ‰ª•Êª°Ë∂≥Êï∞ÊçÆÁöÑÂùáÂåÄÂàÜÈÖçÔºå‰ΩÜÊòØËøô‰∏™ÁÆóÊ≥ïÁöÑÂÆπÈîôÊÄßÂíåÊâ©Â±ïÊÄßÈÉΩËæÉÂ∑Æ„ÄÇ ÊØîÂ¶ÇÂ¢ûÂä†ÊàñÂà†Èô§‰∫Ü‰∏Ä‰∏™ËäÇÁÇπÊó∂ÔºåÊâÄÊúâÁöÑ Key ÈÉΩÈúÄË¶ÅÈáçÊñ∞ËÆ°ÁÆóÔºåÊòæÁÑ∂ËøôÊ†∑ÊàêÊú¨ËæÉÈ´òÔºå‰∏∫Ê≠§ÈúÄË¶Å‰∏Ä‰∏™ÁÆóÊ≥ïÊª°Ë∂≥ÂàÜÂ∏ÉÂùáÂåÄÂêåÊó∂‰πüË¶ÅÊúâËâØÂ•ΩÁöÑÂÆπÈîôÊÄßÂíåÊãìÂ±ïÊÄß„ÄÇ ‰∏ÄËá¥ Hash ÁÆóÊ≥ï‰∏ÄËá¥ Hash ÁÆóÊ≥ïÊòØÂ∞ÜÊâÄÊúâÁöÑÂìàÂ∏åÂÄºÊûÑÊàê‰∫Ü‰∏Ä‰∏™ÁéØÔºåÂÖ∂ËåÉÂõ¥Âú® 0 ~ 2^32-1„ÄÇÂ¶Ç‰∏ãÂõæÔºö ‰πãÂêéÂ∞ÜÂêÑ‰∏™ËäÇÁÇπÊï£ÂàóÂà∞Ëøô‰∏™ÁéØ‰∏äÔºåÂèØ‰ª•Áî®ËäÇÁÇπÁöÑ IP„ÄÅhostname ËøôÊ†∑ÁöÑÂîØ‰∏ÄÊÄßÂ≠óÊÆµ‰Ωú‰∏∫ Key ËøõË°å hash(key)ÔºåÊï£Âàó‰πãÂêéÂ¶Ç‰∏ãÔºö ‰πãÂêéÈúÄË¶ÅÂ∞ÜÊï∞ÊçÆÂÆö‰ΩçÂà∞ÂØπÂ∫îÁöÑËäÇÁÇπ‰∏äÔºå‰ΩøÁî®ÂêåÊ†∑ÁöÑ hash ÂáΩÊï∞ Â∞Ü Key ‰πüÊò†Â∞ÑÂà∞Ëøô‰∏™ÁéØ‰∏ä„ÄÇ ËøôÊ†∑ÊåâÁÖßÈ°∫Êó∂ÈíàÊñπÂêëÂ∞±ÂèØ‰ª•Êää k1 ÂÆö‰ΩçÂà∞ N1ËäÇÁÇπÔºåk2 ÂÆö‰ΩçÂà∞ N3ËäÇÁÇπÔºåk3 ÂÆö‰ΩçÂà∞ N2ËäÇÁÇπ„ÄÇ ÂÆπÈîôÊÄßËøôÊó∂ÂÅáËÆæ N1 ÂÆïÊú∫‰∫ÜÔºö ‰æùÁÑ∂Ê†πÊçÆÈ°∫Êó∂ÈíàÊñπÂêëÔºåk2 Âíå k3 ‰øùÊåÅ‰∏çÂèòÔºåÂè™Êúâ k1 Ë¢´ÈáçÊñ∞Êò†Â∞ÑÂà∞‰∫Ü N3„ÄÇËøôÊ†∑Â∞±ÂæàÂ•ΩÁöÑ‰øùËØÅ‰∫ÜÂÆπÈîôÊÄßÔºåÂΩì‰∏Ä‰∏™ËäÇÁÇπÂÆïÊú∫Êó∂Âè™‰ºöÂΩ±ÂìçÂà∞Â∞ëÂ∞ëÈÉ®ÂàÜÁöÑÊï∞ÊçÆ„ÄÇ ÊãìÂ±ïÊÄßÂΩìÊñ∞Â¢û‰∏Ä‰∏™ËäÇÁÇπÊó∂: Âú® N2 Âíå N3 ‰πãÈó¥Êñ∞Â¢û‰∫Ü‰∏Ä‰∏™ËäÇÁÇπ N4 ÔºåËøôÊó∂‰ºöÂèëÁé∞ÂèóÂç∞Ë±°ÁöÑÊï∞ÊçÆÂè™Êúâ k3ÔºåÂÖ∂‰ΩôÊï∞ÊçÆ‰πüÊòØ‰øùÊåÅ‰∏çÂèòÔºåÊâÄ‰ª•ËøôÊ†∑‰πüÂæàÂ•ΩÁöÑ‰øùËØÅ‰∫ÜÊãìÂ±ïÊÄß„ÄÇ ËôöÊãüËäÇÁÇπÂà∞ÁõÆÂâç‰∏∫Ê≠¢ËØ•ÁÆóÊ≥ï‰æùÁÑ∂‰πüÊúâÁÇπÈóÆÈ¢ò: ÂΩìËäÇÁÇπËæÉÂ∞ëÊó∂‰ºöÂá∫Áé∞Êï∞ÊçÆÂàÜÂ∏É‰∏çÂùáÂåÄÁöÑÊÉÖÂÜµÔºö ËøôÊ†∑‰ºöÂØºËá¥Â§ßÈÉ®ÂàÜÊï∞ÊçÆÈÉΩÂú® N1 ËäÇÁÇπÔºåÂè™ÊúâÂ∞ëÈáèÁöÑÊï∞ÊçÆÂú® N2 ËäÇÁÇπ„ÄÇ ‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºå‰∏ÄËá¥ÂìàÂ∏åÁÆóÊ≥ïÂºïÂÖ•‰∫ÜËôöÊãüËäÇÁÇπ„ÄÇÂ∞ÜÊØè‰∏Ä‰∏™ËäÇÁÇπÈÉΩËøõË°åÂ§öÊ¨° hashÔºåÁîüÊàêÂ§ö‰∏™ËäÇÁÇπÊîæÁΩÆÂú®ÁéØ‰∏äÁß∞‰∏∫ËôöÊãüËäÇÁÇπ: ËÆ°ÁÆóÊó∂ÂèØ‰ª•Âú® IP ÂêéÂä†‰∏äÁºñÂè∑Êù•ÁîüÊàêÂìàÂ∏åÂÄº„ÄÇ ËøôÊ†∑Âè™ÈúÄË¶ÅÂú®ÂéüÊúâÁöÑÂü∫Á°Ä‰∏äÂ§ö‰∏ÄÊ≠•Áî±ËôöÊãüËäÇÁÇπÊò†Â∞ÑÂà∞ÂÆûÈôÖËäÇÁÇπÁöÑÊ≠•È™§Âç≥ÂèØËÆ©Â∞ëÈáèËäÇÁÇπ‰πüËÉΩÊª°Ë∂≥ÂùáÂåÄÊÄß„ÄÇ Âè∑Â§ñÊúÄËøëÂú®ÊÄªÁªì‰∏Ä‰∫õ Java Áõ∏ÂÖ≥ÁöÑÁü•ËØÜÁÇπÔºåÊÑüÂÖ¥Ë∂£ÁöÑÊúãÂèãÂèØ‰ª•‰∏ÄËµ∑Áª¥Êä§„ÄÇ Âú∞ÂùÄ: https://github.com/crossoverJie/Java-Interview]]></content>
      <categories>
        <category>ÁÆóÊ≥ï</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[sbc(ÂÖ≠) Zuul GateWay ÁΩëÂÖ≥Â∫îÁî®]]></title>
    <url>%2F2017%2F11%2F28%2Fsbc6%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄÁúãËøá‰πãÂâçSBCÁ≥ªÂàóÁöÑÂ∞è‰ºô‰º¥Â∫îËØ•ÈÉΩÂèØ‰ª•Êê≠Âª∫‰∏Ä‰∏™È´òÂèØÁî®„ÄÅÂàÜÂ∏ÉÂºèÁöÑÂæÆÊúçÂä°‰∫Ü„ÄÇ ÁõÆÂâçÁöÑÁªìÊûÑÂõæÂ∫îËØ•Â¶Ç‰∏ãÊâÄÁ§∫: ÂêÑ‰∏™ÂæÆÊúçÂä°‰πãÈó¥ÈÉΩ‰∏çÂ≠òÂú®ÂçïÁÇπÔºåÂπ∂‰∏îÈÉΩÊ≥®ÂÜå‰∫é Eureka ÔºåÂü∫‰∫éÊ≠§ËøõË°åÊúçÂä°ÁöÑÊ≥®ÂÜå‰∫éÂèëÁé∞ÔºåÂÜçÈÄöËøá Ribbon ËøõË°åÊúçÂä°Ë∞ÉÁî®ÔºåÂπ∂ÂÖ∑ÊúâÂÆ¢Êà∑Á´ØË¥üËΩΩÂäüËÉΩ„ÄÇ ‰∏ÄÂàáÁúãËµ∑Êù•ÈÉΩÊØîËæÉÁæéÂ•ΩÔºå‰ΩÜËøôÈáåÂç¥Âøò‰∫Ü‰∏Ä‰∏™ÈáçË¶ÅÁöÑÁªÜËäÇÔºö ÂΩìÊàë‰ª¨ÈúÄË¶ÅÂØπÂ§ñÊèê‰æõÊúçÂä°Êó∂ÊÄé‰πàÂ§ÑÁêÜÔºü ËøôÂΩìÁÑ∂‰πüËÉΩÂÆûÁé∞ÔºåÊó†ÈùûÂ∞±ÊòØÂ∞ÜÊàë‰ª¨ÂÖ∑‰ΩìÁöÑÂæÆÊúçÂä°Âú∞ÂùÄÂä†Á´ØÂè£Êö¥Èú≤Âá∫ÂéªÂç≥ÂèØ„ÄÇ ÈÇ£ÂèàÂ¶Ç‰ΩïÊù•ÂÆûÁé∞Ë¥üËΩΩÂë¢Ôºü ÁÆÄÂçïÔºÅÂèØ‰ª•ÈÄöËøá Nginx F5 ‰πãÁ±ªÁöÑÂ∑•ÂÖ∑ËøõË°åË¥üËΩΩ„ÄÇ ‰ΩÜÊòØÂ¶ÇÊûúÁ≥ªÁªüÂ∫ûÂ§ßÔºåÊúçÂä°ÊãÜÂàÜÁöÑË∂≥Â§üÂ§öÈÇ£ÂèàÊúâË∞ÅÊù•Áª¥Êä§Ëøô‰∫õË∑ØÁî±ÂÖ≥Á≥ªÂë¢Ôºü ÂΩìÁÑ∂ËøôÊòØËøêÁª¥ÁöÑÊ¥ªÔºå‰∏çËøáËøôÊó∂ÂÄôËøêÁª¥ÂèØËÉΩÂ∞±Ë¶ÅÂèëÈ£ô‰∫ÜÔºÅ Âπ∂‰∏îËøòÊúâ‰∏ÄÁ≥ªÂàóÁöÑÈóÆÈ¢ò: ÊúçÂä°Ë∞ÉÁî®‰πãÈó¥ÁöÑ‰∏Ä‰∫õÈâ¥ÊùÉ„ÄÅÁ≠æÂêçÊ†°È™åÊÄé‰πàÂÅöÔºü Áî±‰∫éÊúçÂä°Á´ØÂú∞ÂùÄËæÉÂ§öÔºåÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÈöæ‰ª•Áª¥Êä§„ÄÇ ÈíàÂØπ‰∫éËøô‰∏Ä‰∫õÈóÆÈ¢ò SpringCloud ÂÖ®ÂÆ∂Ê°∂Ëá™ÁÑ∂‰πüÊúâÂØπÂ∫îÁöÑËß£ÂÜ≥ÊñπÊ°à: Zuul„ÄÇÂΩìÊàë‰ª¨Á≥ªÁªüÊï¥Âêà Zuul ÁΩëÂÖ≥‰πãÂêéÊû∂ÊûÑÂõæÂ∫îËØ•Â¶Ç‰∏ãÊâÄÁ§∫: Êàë‰ª¨Âú®ÊâÄÊúâÁöÑËØ∑Ê±ÇËøõÊù•‰πãÂâçÊäΩÂá∫‰∏ÄÂ±ÇÁΩëÂÖ≥Â∫îÁî®ÔºåÂ∞ÜÊúçÂä°Êèê‰æõÁöÑÊâÄÊúâÁªÜËäÇÈÉΩËøõË°å‰∫ÜÂåÖË£ÖÔºåËøôÊ†∑ÊâÄÊúâÁöÑÂÆ¢Êà∑Á´ØÈÉΩÊòØÂíåÁΩëÂÖ≥ËøõË°å‰∫§‰∫íÔºåÁÆÄÂåñ‰∫ÜÂÆ¢Êà∑Á´ØÂºÄÂèë„ÄÇ ÂêåÊó∂ÂÖ∑ÊúâÂ¶Ç‰∏ãÂäüËÉΩ: Zuul Ê≥®ÂÜå‰∫é Eureka Âπ∂ÈõÜÊàê‰∫Ü Ribbon ÊâÄ‰ª•Ëá™ÁÑ∂‰πüÊòØÂèØ‰ª•‰ªéÊ≥®ÂÜå‰∏≠ÂøÉËé∑ÂèñÂà∞ÊúçÂä°ÂàóË°®ËøõË°åÂÆ¢Êà∑Á´ØË¥üËΩΩ„ÄÇ ÂäüËÉΩ‰∏∞ÂØåÁöÑË∑ØÁî±ÂäüËÉΩÔºåËß£ÊîæËøêÁª¥„ÄÇ ÂÖ∑ÊúâËøáÊª§Âô®ÔºåÊâÄ‰ª•Èâ¥ÊùÉ„ÄÅÈ™åÁ≠æÈÉΩÂèØ‰ª•ÈõÜÊàê„ÄÇ Âü∫‰∫éÊ≠§Êàë‰ª¨Êù•ÁúãÁúã‰πãÂâçÁöÑÊû∂ÊûÑ‰∏≠Â¶Ç‰ΩïÈõÜÊàê Zuul „ÄÇ ÈõÜÊàê Zuul‰∏∫Ê≠§ÊàëÊñ∞Âª∫‰∫Ü‰∏Ä‰∏™È°πÁõÆ sbc-gateway-zuul Â∞±ÊòØ‰∏Ä‰∏™Âü∫Á°ÄÁöÑ SpringBoot ÁªìÊûÑ„ÄÇÂÖ∂‰∏≠Âä†ÂÖ•‰∫Ü Zuul ÁöÑ‰æùËµñÔºö 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-zuul&lt;/artifactId&gt;&lt;/dependency&gt; Áî±‰∫éÈúÄË¶ÅÂ∞ÜÁΩëÂÖ≥‰πüÊ≥®ÂÜåÂà∞ Eureka ‰∏≠ÔºåÊâÄ‰ª•Ëá™ÁÑ∂‰πüÈúÄË¶Å: 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-eureka&lt;/artifactId&gt;&lt;/dependency&gt; Á¥ßÊé•ÁùÄÈÖçÁΩÆ‰∏Ä‰∫õÈ°πÁõÆÂü∫Êú¨‰ø°ÊÅØ: 12345678# È°πÁõÆÈÖçÁΩÆspring.application.name=sbc-gateway-zuulserver.context-path=/server.port=8383# eurekaÂú∞ÂùÄeureka.client.serviceUrl.defaultZone=http://node1:8888/eureka/eureka.instance.prefer-ip-address=true Âú®ÂêØÂä®Á±ª‰∏≠Âä†ÂÖ•ÂºÄÂêØ Zuul ÁöÑÊ≥®Ëß£Ôºå‰∏Ä‰∏™ÁΩëÂÖ≥Â∫îÁî®Â∞±ÁÆóÊòØÊê≠Â•Ω‰∫Ü„ÄÇ 123456@SpringBootApplication//ÂºÄÂêØzuul‰ª£ÁêÜ@EnableZuulProxypublic class SbcGateWayZuulApplication &#123;&#125; ÂêØÂä® Eureka ÂíåÁΩëÂÖ≥ÁúãÂà∞Â∑≤ÁªèÊ≥®ÂÜåÊàêÂäüÈÇ£Â∞±Â§ßÂäüÂëäÊàê‰∫Ü: Ë∑ØÁî±Ë∑ØÁî±ÊòØÁΩëÂÖ≥ÁöÑÊ†∏ÂøÉÂäüËÉΩ‰πã‰∏ÄÔºåÂèØ‰ª•‰ΩøÁ≥ªÁªüÊúâ‰∏Ä‰∏™Áªü‰∏ÄÁöÑÂØπÂ§ñÊé•Âè£Ôºå‰∏ãÈù¢Êù•ÁúãÁúãÂÖ∑‰ΩìÁöÑÂ∫îÁî®„ÄÇ ‰º†ÁªüË∑ØÁî±‰º†ÁªüË∑ØÁî±ÈùûÂ∏∏ÁÆÄÂçïÔºåÂíå Nginx Á±ª‰ººÔºåÁî±ÂºÄÂèë„ÄÅËøêÁª¥‰∫∫ÂëòÊù•Áª¥Êä§ËØ∑Ê±ÇÂú∞ÂùÄÂíåÂØπÂ∫îÊúçÂä°ÁöÑÊò†Â∞ÑÂÖ≥Á≥ªÔºåÁ±ª‰ºº‰∫é: 12zuul.routes.user-service.path=/user-service/**zuul.routes.user-sercice.url=http://localhost:8080/ ËøôÊ†∑ÂΩìÊàë‰ª¨ËÆøÈóÆ http://localhost:8383/user-service/getUserInfo/1 ÁΩëÂÖ≥Â∞±‰ºöËá™Âä®ÁªôÊàë‰ª¨Ë∑ØÁî±Âà∞ http://localhost:8080/getUserInfo/1 ‰∏ä„ÄÇ ÂèØËßÅÂè™Ë¶ÅÊàë‰ª¨Áª¥Êä§Â•ΩËøô‰∏™Êò†Â∞ÑÂÖ≥Á≥ªÂç≥ÂèØËá™Áî±ÁöÑÈÖçÁΩÆË∑ØÁî±‰ø°ÊÅØ(user-sercice ÂèØËá™ÂÆö‰πâ)Ôºå‰ΩÜÊòØÂæàÊòéÊòæËøôÁßçÊñπÂºè‰∏çÁÆ°ÊòØÂØπËøêÁª¥ËøòÊòØÂºÄÂèëÈÉΩ‰∏çÂèãÂ•Ω„ÄÇÁî±‰∫éÂÆûÈôÖËøôÁßçÊñπÂºèÁî®ÁöÑ‰∏çÂ§öÂ∞±ÂÜçËøáÂ§öÂ±ïÂºÄ„ÄÇ ÊúçÂä°Ë∑ØÁî±ÂØπÊ≠§ Zuul Êèê‰æõ‰∫Ü‰∏ÄÁßçÂü∫‰∫éÊúçÂä°ÁöÑË∑ØÁî±ÊñπÂºè„ÄÇÊàë‰ª¨Âè™ÈúÄË¶ÅÁª¥Êä§ËØ∑Ê±ÇÂú∞ÂùÄ‰∏éÊúçÂä° ID ‰πãÈó¥ÁöÑÊò†Â∞ÑÂÖ≥Á≥ªÂç≥ÂèØÔºåÂπ∂‰∏îÁî±‰∫éÈõÜÊàê‰∫Ü Ribbon , Zuul ËøòÂèØ‰ª•Âú®Ë∑ØÁî±ÁöÑÊó∂ÂÄôÈÄöËøá Eureka ÂÆûÁé∞Ë¥üËΩΩË∞ÉÁî®„ÄÇ ÂÖ∑‰ΩìÈÖçÁΩÆÔºö 12zuul.routes.sbc-user.path=/api/user/**zuul.routes.sbc-user.serviceId=sbc-user ËøôÊ†∑ÂΩìËæìÂÖ• http://localhost:8383/api/user/getUserInfo/1 Êó∂Â∞±‰ºöË∑ØÁî±Âà∞Ê≥®ÂÜåÂà∞ Eureka ‰∏≠ÊúçÂä° ID ‰∏∫ sbc-user ÁöÑÊúçÂä°ËäÇÁÇπÔºåÂ¶ÇÊûúÊúâÂ§öËäÇÁÇπÂ∞±‰ºöÊåâÁÖß Ribbon ÁöÑË¥üËΩΩÁÆóÊ≥ïË∑ØÁî±Âà∞ÂÖ∂‰∏≠‰∏ÄÂè∞‰∏ä„ÄÇ ‰ª•‰∏äÈÖçÁΩÆËøòÂèØ‰ª•ÁÆÄÂÜô‰∏∫: 12# ÊúçÂä°Ë∑ØÁî± ÁÆÄÂåñÈÖçÁΩÆzuul.routes.sbc-user=/api/user/** ËøôÊ†∑ËÆ©Êàë‰ª¨ËÆøÈóÆ http://127.0.0.1:8383/api/user/userService/getUserByHystrix Êó∂ÂÄôÂ∞±‰ºöÊ†πÊçÆË¥üËΩΩÁÆóÊ≥ïÂ∏ÆÊàë‰ª¨Ë∑ØÁî±Âà∞ sbc-user Â∫îÁî®‰∏äÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫: ÂêØÂä®‰∫Ü‰∏§‰∏™ sbc-user ÊúçÂä°„ÄÇ ËØ∑Ê±ÇÁªìÊûú: ‰∏ÄÊ¨°Ë∑ØÁî±Â∞±ÁÆóÂÆåÊàê‰∫Ü„ÄÇ Âú®‰∏äÈù¢ÁöÑÈÖçÁΩÆ‰∏≠ÊúâÁúãÂà∞ /api/user/** ËøôÊ†∑ÁöÑÈÄöÈÖçÁ¨¶ÈÖçÁΩÆÔºåÂÖ∑‰ΩìÊúâ‰ª•‰∏ã‰∏âÁßçÈÖçÁΩÆÈúÄË¶Å‰∫ÜËß£: ? Âè™ËÉΩÂåπÈÖç‰ªªÊÑèÁöÑÂçï‰∏™Â≠óÁ¨¶ÔºåÂ¶Ç /api/user/? Â∞±Âè™ËÉΩÂåπÈÖç /api/user/x /api/user/y /api/user/z ËøôÊ†∑ÁöÑË∑ØÂæÑ„ÄÇ * Âè™ËÉΩÂåπÈÖç‰ªªÊÑèÂ≠óÁ¨¶ÔºåÂ¶Ç /api/user/* Â∞±Âè™ËÉΩÂåπÈÖç /api/user/x /api/user/xy /api/user/xyz„ÄÇ ** ÂèØ‰ª•ÂåπÈÖç‰ªªÊÑèÂ≠óÁ¨¶„ÄÅ‰ªªÊÑèÂ±ÇÁ∫ß„ÄÇÁªìÂêà‰∫Ü‰ª•‰∏ä‰∏§ÁßçÈÄöÈÖçÁ¨¶ÁöÑÁâπÁÇπÔºåÂ¶Ç /api/user/** ÂàôÂèØ‰ª•ÂåπÈÖç /api/user/x /api/user/x/y /api/user/x/y/zzzËøôÊ†∑ÁöÑË∑ØÂæÑÔºåÊúÄÁÆÄÂçïÁ≤óÊö¥ÔºÅ Ë∞àÂà∞ÈÄöÈÖçÁ¨¶ÂåπÈÖçÂ∞±‰∏çÂæó‰∏çÊèêÂà∞‰∏Ä‰∏™ÈóÆÈ¢òÔºåÂ¶Ç‰∏äÈù¢ÁöÑ sbc-user ÊúçÂä°Áî±‰∫éÂêéÊúüËø≠‰ª£Êõ¥Êñ∞ÔºåÂ∞Ü sbc-user ‰∏≠ÁöÑ‰∏ÄÈÉ®ÂàÜÈÄªËæëÊäΩÊàê‰∫ÜÂè¶‰∏Ä‰∏™ÊúçÂä° sbc-user-pro„ÄÇÊñ∞Â∫îÁî®ÁöÑË∑ØÁî±ËßÑÂàôÊòØ /api/user/pro/**,Â¶ÇÊûúÊàë‰ª¨ÊåâÁÖß: 12zuul.routes.sbc-user=/api/user/**zuul.routes.sbc-user-pro=/api/user/pro/** ËøõË°åÈÖçÁΩÆÁöÑËØùÔºåÊàë‰ª¨ÊÉ≥ÈÄöËøá /api/user/pro/ Êù•ËÆøÈóÆ sbc-user-pro Â∫îÁî®ÔºåÂç¥Áî±‰∫éÊª°Ë∂≥Á¨¨‰∏Ä‰∏™Ë∑ØÁî±ËßÑÂàôÔºåÊâÄ‰ª•‰ºöË¢´ Zuul Ë∑ØÁî±Âà∞ sbc-user Ëøô‰∏™Â∫îÁî®‰∏äÔºåËøôÊòæÁÑ∂ÊòØ‰∏çÂØπÁöÑ„ÄÇËØ•ÊÄé‰πàËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÂë¢Ôºü ÁøªÁúãË∑ØÁî±Ê∫êÁ†Å org.springframework.cloud.netflix.zuul.filters.SimpleRouteLocator ‰∏≠ÁöÑ locateRoutes() ÊñπÊ≥ï: 1234567891011/** * Compute a map of path pattern to route. The default is just a static map from the * &#123;@link ZuulProperties&#125;, but subclasses can add dynamic calculations. */protected Map&lt;String, ZuulRoute&gt; locateRoutes() &#123; LinkedHashMap&lt;String, ZuulRoute&gt; routesMap = new LinkedHashMap&lt;String, ZuulRoute&gt;(); for (ZuulRoute route : this.properties.getRoutes().values()) &#123; routesMap.put(route.getPath(), route); &#125; return routesMap;&#125; ÂèëÁé∞Ë∑ØÁî±ËßÑÂàôÊòØÈÅçÂéÜÈÖçÁΩÆÊñá‰ª∂Âπ∂ÊîæÂÖ• LinkedHashMap ‰∏≠ÔºåÁî±‰∫é LinkedHashMap ÊòØÊúâÂ∫èÁöÑÔºåÊâÄ‰ª•‰∏∫‰∫ÜËææÂà∞‰∏äÊñáÁöÑÊïàÊûúÔºåÈÖçÁΩÆÊñá‰ª∂ÁöÑÂä†ËΩΩÈ°∫Â∫èÈùûÂ∏∏ÈáçË¶ÅÔºåÂõ†Ê≠§Êàë‰ª¨Âè™ÈúÄË¶ÅÂ∞Ü‰ºòÂÖàÂåπÈÖçÁöÑË∑ØÁî±ËßÑÂàôÊîæÂâçÂç≥ÂèØËß£ÂÜ≥„ÄÇ ËøáÊª§Âô®ËøáÊª§Âô®ÂèØ‰ª•ËØ¥ÊòØÊï¥‰∏™ Zuul ÊúÄÊ†∏ÂøÉÁöÑÂäüËÉΩÔºåÂåÖÊã¨‰∏äÊñáÊèêÂà∞Ë∑ØÁî±ÂäüËÉΩ‰πüÊòØÁî±ËøáÊª§Âô®Êù•ÂÆûÁé∞ÁöÑ„ÄÇ ÊëòÊäÑÂÆòÊñπÁöÑËß£Èáä: Zuul ÁöÑÊ†∏ÂøÉÂ∞±ÊòØ‰∏ÄÁ≥ªÂàóÁöÑËøáÊª§Âô®Ôºå‰ªñËÉΩÂ§üÂú®Êï¥‰∏™ HTTP ËØ∑Ê±Ç„ÄÅÂìçÂ∫îËøáÁ®ã‰∏≠ÊâßË°åÂêÑÊ†∑ÁöÑÊìç‰Ωú„ÄÇ ÂÖ∂ÂÆûÊÄªÁªì‰∏ãÊù•Â∞±ÊòØÂõõ‰∏™ÁâπÂæÅ: ËøáÊª§Á±ªÂûã ËøáÊª§È°∫Â∫è ÊâßË°åÊù°‰ª∂ ÂÖ∑‰ΩìÂÆûÁé∞ ÂÖ∂ÂÆûÂ∞±ÊòØ ZuulFilter Êé•Âè£‰∏≠ÊâÄÂÆö‰πâÁöÑÂõõ‰∏™Êé•Âè£: 1234567String filterType();int filterOrder();boolean shouldFilter();Object run(); ÂÆòÊñπÊµÅÁ®ãÂõæ(ÁîüÂëΩÂë®Êúü): ÁÆÄÂçïÁêÜËß£‰∏ãÂ∞±ÊòØ: ÂΩì‰∏Ä‰∏™ËØ∑Ê±ÇËøõÊù•Êó∂ÔºåÈ¶ñÂÖàÊòØËøõÂÖ• pre ËøáÊª§Âô®ÔºåÂèØ‰ª•ÂÅö‰∏Ä‰∫õÈâ¥ÊùÉÔºåËÆ∞ÂΩïË∞ÉËØïÊó•ÂøóÁ≠âÊìç‰Ωú„ÄÇ‰πãÂêéËøõÂÖ• routing ËøáÊª§Âô®ËøõË°åË∑ØÁî±ËΩ¨ÂèëÔºåËΩ¨ÂèëÂèØ‰ª•‰ΩøÁî® Apache HttpClient ÊàñËÄÖÊòØ Ribbon „ÄÇpost ËøáÊª§Âô®Âë¢ÂàôÊòØÂ§ÑÁêÜÊúçÂä°ÂìçÂ∫î‰πãÂêéÁöÑÊï∞ÊçÆÔºåÂèØ‰ª•ËøõË°å‰∏Ä‰∫õÂåÖË£ÖÊù•ËøîÂõûÂÆ¢Êà∑Á´Ø„ÄÇ error ÂàôÊòØÂú®ÊúâÂºÇÂ∏∏ÂèëÁîüÊó∂Êâç‰ºöË∞ÉÁî®ÔºåÁõ∏ÂΩì‰∫éÊòØÂÖ®Â±ÄÂºÇÂ∏∏Êã¶Êà™Âô®„ÄÇ Ëá™ÂÆö‰πâËøáÊª§Âô®Êé•‰∏ãÊù•ÂÆûÁé∞‰∏Ä‰∏™ÊñáÂàùÊâÄÊèêÂà∞ÁöÑÈâ¥ÊùÉÊìç‰Ωú: Êñ∞Âª∫‰∏Ä‰∏™ RequestFilter Á±ªÁªßÊâø‰∏é ZuulFilter Êé•Âè£ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546/** * Function: ËØ∑Ê±ÇÊã¶Êà™ * * @author crossoverJie * Date: 2017/11/20 00:33 * @since JDK 1.8 */public class RequestFilter extends ZuulFilter &#123; private Logger logger = LoggerFactory.getLogger(RequestFilter.class) ; /** * ËØ∑Ê±ÇË∑ØÁî±‰πãÂâçË¢´Êã¶Êà™ ÂÆûÁé∞ pre Êã¶Êà™Âô® * @return */ @Override public String filterType() &#123; return "pre"; &#125; @Override public int filterOrder() &#123; return 0; &#125; @Override public boolean shouldFilter() &#123; return true; &#125; @Override public Object run() &#123; RequestContext currentContext = RequestContext.getCurrentContext(); HttpServletRequest request = currentContext.getRequest(); String token = request.getParameter("token"); if (StringUtil.isEmpty(token))&#123; logger.warn("need token"); //ËøáÊª§ËØ∑Ê±Ç currentContext.setSendZuulResponse(false); currentContext.setResponseStatusCode(400); return null ; &#125; logger.info("token =&#123;&#125;",token) ; return null; &#125;&#125; ÈùûÂ∏∏ easyÔºåÂ∞±ÁÆÄÂçïÊ†°È™å‰∏ãËØ∑Ê±Ç‰∏≠ÊòØÂê¶ÂåÖÂê´ tokenÔºå‰∏çÂåÖÂê´Â∞±ËøîÂõû 401 code„ÄÇ ‰∏ç‰ΩÜÂ¶ÇÊ≠§ÔºåËøòÈúÄË¶ÅÂ∞ÜËØ•Á±ªÂä†ÂÖ•Âà∞ Spring ËøõË°åÁÆ°ÁêÜ: Êñ∞Âª∫‰∫Ü FilterConf Á±ª: 123456789@Configuration@Componentpublic class FilterConf &#123; @Bean public RequestFilter filter()&#123; return new RequestFilter() ; &#125;&#125; ËøôÊ†∑ÈáçÂêØ‰πãÂêéÂ∞±ÂèØ‰ª•ÁúãÂà∞ÊïàÊûú‰∫Ü: ‰∏ç‰º† token Êó∂Ôºö ‰º†ÂÖ• token Êó∂Ôºö ÂèØËßÅ‰∏Ä‰∫õÈâ¥ÊùÉÊìç‰ΩúÊòØÂèØ‰ª•ÊîæÂà∞ËøôÈáåÊù•ËøõË°åÁªü‰∏ÄÂ§ÑÁêÜÁöÑ„ÄÇ ÂÖ∂‰ΩôÂá†‰∏™ËøáÊª§Âô®‰πüÊòØÂ§ßÂêåÂ∞èÂºÇÔºåÂèØ‰ª•Ê†πÊçÆÂÆûÈôÖÂú∫ÊôØÊù•Ëá™ÂÆö‰πâ„ÄÇ Zuul È´òÂèØÁî®Zuul Áé∞Âú®Êó¢ÁÑ∂‰Ωú‰∏∫‰∫ÜÂØπÂ§ñÁöÑÁ¨¨‰∏ÄÂÖ•Âè£ÔºåÈÇ£ËÇØÂÆö‰∏çËÉΩÊòØÂçïËäÇÁÇπÔºåÂØπ‰∫é Zuul ÁöÑÈ´òÂèØÁî®Êúâ‰ª•‰∏ã‰∏§ÁßçÊñπÂºèÂÆûÁé∞„ÄÇ Eureka È´òÂèØÁî®Á¨¨‰∏ÄÁßçÊúÄÂÆπÊòìÊÉ≥Âà∞ÂíåÂÆûÁé∞:Êàë‰ª¨ÂèØ‰ª•ÈÉ®ÁΩ≤Â§ö‰∏™ Zuul ËäÇÁÇπÔºåÂπ∂‰∏îÈÉΩÊ≥®ÂÜå‰∫é Eureka ÔºåÂ¶Ç‰∏ãÂõæÔºö ËøôÊ†∑ËôΩÁÑ∂ÁÆÄÂçïÊòìÁª¥Êä§Ôºå‰ΩÜÊòØÊúâ‰∏Ä‰∏™‰∏•ÈáçÁöÑÁº∫ÁÇπÔºöÈÇ£Â∞±ÊòØÂÆ¢Êà∑Á´Ø‰πüÂæóÊ≥®ÂÜåÂà∞ Eureka ‰∏äÊâçËÉΩÂØπ Zuul ÁöÑË∞ÉÁî®ÂÅöÂà∞Ë¥üËΩΩÔºåËøôÊòæÁÑ∂ÊòØ‰∏çÁé∞ÂÆûÁöÑ„ÄÇ ÊâÄ‰ª•‰∏ãÈù¢ËøôÁßçÂÅöÊ≥ïÊõ¥‰∏∫Â∏∏ËßÅ„ÄÇ Âü∫‰∫é Nginx È´òÂèØÁî®Âú®Ë∞ÉÁî® Zuul ‰πãÂâç‰ΩøÁî® Nginx ‰πãÁ±ªÁöÑË¥üËΩΩÂùáË°°Â∑•ÂÖ∑ËøõË°åË¥üËΩΩÔºåËøôÊ†∑ Zuul Êó¢ËÉΩÊ≥®ÂÜåÂà∞ Eureka ÔºåÂÆ¢Êà∑Á´Ø‰πüËÉΩÂÆûÁé∞ÂØπ Zuul ÁöÑË¥üËΩΩÔºåÂ¶Ç‰∏ãÂõæÔºö ÊÄªÁªìËøôÊ†∑Âú®ÂéüÊúâÁöÑÂæÆÊúçÂä°Êû∂ÊûÑÁöÑÂü∫Á°Ä‰∏äÂä†‰∏äÁΩëÂÖ≥‰πãÂêéÂè¶Êï¥‰∏™Á≥ªÁªüÊõ¥Âä†ÂÆåÂñÑ‰∫ÜÔºå‰ªéÁΩëÂÖ≥ÁöÑËÆæËÆ°Êù•ÁúãÔºöÂ§ßÂ§öÊï∞Á≥ªÁªüÊû∂ÊûÑÈÉΩÊúâÂàÜÂ±ÇÁöÑÊ¶ÇÂøµÔºå‰∏çËÉΩËß£ÂÜ≥ÈóÆÈ¢òÈÇ£Â∞±Â§öÂàÜÂá†Â±Çü§ì„ÄÇ È°πÁõÆÔºöhttps://github.com/crossoverJie/springboot-cloud ÂçöÂÆ¢Ôºöhttp://crossoverjie.top„ÄÇ]]></content>
      <categories>
        <category>sbc</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>SpringBoot</tag>
        <tag>SpringCloud</tag>
        <tag>Zuul</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[„ÄêËØë„Äë‰Ω†ÂèØ‰ª•Áî®GitHubÂÅöÁöÑ12‰ª∂ Cool ‰∫ãÊÉÖ]]></title>
    <url>%2F2017%2F11%2F05%2Ftranslation1-12%20cool%20things%20you%20can%20do%20with%20GitHub%2F</url>
    <content type="text"><![CDATA[ÂéüÊñáÈìæÊé•1 Âú® GitHub.com ÁºñËæë‰ª£Á†ÅÊàëÂ∞Ü‰ªéÊàëËÆ§‰∏∫Â§ßÂÆ∂ÈÉΩÁü•ÈÅìÁöÑ‰∏Ä‰ª∂‰∫ãÊÉÖÂºÄÂßã(Â∞ΩÁÆ°ÊàëÊòØÁõ¥Âà∞‰∏ÄÂë®ÂâçÊâçÁü•ÈÅì)„ÄÇ ÂΩì‰Ω†Âú® GitHub Êü•ÁúãÊñá‰ª∂Êó∂(‰ªª‰ΩïÊñáÊú¨Êñá‰ª∂Ôºå‰ªª‰Ωï‰ªìÂ∫ì‰∏≠)ÔºåÂè≥‰∏äËßí‰ºöÊúâ‰∏Ä‰∏™Â∞èÈìÖÁ¨îÂõæÊ†áÔºåÁÇπÂáªÂÆÉÂ∞±ÂèØ‰ª•ÁºñËæëÊñá‰ª∂‰∫Ü„ÄÇÂÆåÊàê‰πãÂêéÁÇπÂáª Propose file change ÊåâÈíÆ GitHub Â∞Ü‰ºöËá™Âä®Â∏Æ‰Ω† fork ËØ•È°πÁõÆÂπ∂‰∏îÂàõÂª∫‰∏Ä‰∏™ pull request „ÄÇ ÂæàÂéâÂÆ≥ÂêßÔºÅ‰ªñËá™Âä®Â∏Æ‰Ω† fork ‰∫ÜËØ• repo„ÄÇ ‰∏çÂÜçÈúÄË¶Å fork , pull ,Êú¨Âú∞ÁºñËæëÂÜç push ‰ª•ÂèäÂàõÂª∫‰∏Ä‰∏™ PR ËøôÊ†∑ÁöÑÊµÅÁ®ã‰∫Ü„ÄÇ ËøôÈùûÂ∏∏ÈÄÇÂêà‰øÆÂ§çÁºñÂÜô‰ª£Á†Å‰∏≠Âá∫Áé∞ÁöÑÊãºÂÜôÈîôËØØÂíå‰øÆÊ≠£‰∏Ä‰∏™‰∏çÂ§™ÁêÜÊÉ≥ÁöÑÊÉ≥Ê≥ï„ÄÇ 2 Á≤òË¥¥ÂõæÁâá‰Ω†‰∏ç‰ªÖ‰ªÖÂèóÈôê‰∫éËæìÂÖ•ÊñáÊú¨ÂíåÊèèËø∞ÈóÆÈ¢òÔºå‰Ω†Áü•ÈÅì‰Ω†ÂèØ‰ª•Áõ¥Êé•‰ªéÁ≤òË¥¥Êùø‰∏≠Á≤òË¥¥ÂõæÁâáÂêóÔºüÂΩì‰Ω†Á≤òË¥¥Êó∂Ôºå‰Ω†‰ºöÁúãÂà∞ÂõæÁâáÂ∑≤ÁªèË¢´‰∏ä‰º†‰∫Ü(ÊØ´Êó†ÁñëÈóÆË¢´‰∏ä‰º†Âà∞‰∫ëÁ´Ø)‰πãÂêé‰ºöÂèòÊàê Markdown ËØ≠Ê≥ïÊù•ÊòæÁ§∫ÂõæÁâá„ÄÇ 3 Ê†ºÂºèÂåñ‰ª£Á†ÅÂ¶ÇÊûú‰Ω†ÊÉ≥ÂÜô‰∏ÄÊÆµ‰ª£Á†ÅÔºå‰Ω†ÂèØ‰ª•‰∏â‰∏™ÂèçÂºïÂè∑ÂºÄÂßã ‚Äî‚Äî Â∞±ÂÉè‰Ω†Âú®Á†îÁ©∂MarkDownÊó∂ÊâÄÂ≠¶Âà∞ÁöÑ ‚Äî‚Äî ‰πãÂêé GitHub ‰ºöËØïÁùÄÁåúÊµã‰Ω†ÂÜôÁöÑËØ≠Ë®Ä„ÄÇ ‰ΩÜÂ¶ÇÊûú‰Ω†ÂÜô‰∫Ü‰∏Ä‰∫õÁ±ª‰ºº‰∫é Vue, Typescript, JSX ËøôÊ†∑ÁöÑËØ≠Ë®ÄÔºå‰Ω†ÂèØ‰ª•ÊòéÁ°ÆÊåáÂÆöÂæóÂà∞Ê≠£Á°ÆÁöÑÈ´ò‰∫Æ„ÄÇ Ê≥®ÊÑèÁ¨¨‰∏ÄË°å‰∏≠ÁöÑ1```jsx ËøôÊÑèÂë≥ÁùÄ‰ª£Á†ÅÊÆµÂ∞Ü‰ºöÂëàÁé∞Âá∫: (Ëøô‰∏™Êâ©Â±ï‰∫é gists „ÄÇÈ°∫‰æøËØ¥‰∏ÄÂè•ÔºåÂ¶ÇÊûú‰Ω†‰ΩøÁî® .jsx ÂêéÁºÄÔºåÂ∞±‰ºöÂæóÂà∞JSXÁöÑËØ≠Ê≥ïÈ´ò‰∫Æ) ËøôÊòØ‰∏Ä‰∏™ÊâÄÊúâÂèóÊîØÊåÅÁöÑËØ≠Ê≥ïÂàóË°®„ÄÇ 4 Âú® PR ‰∏≠Áî®ÂÖ≥ÈîÆËØçÂÖ≥Èó≠ IssuesÂÅáËÆæ‰Ω†ÂàõÂª∫‰∫Ü‰∏Ä‰∏™Áî®‰∫é‰øÆÂ§ç Issues #234 ÁöÑ PR ,‰Ω†ÂèØ‰ª•Âú®‰Ω† PR ÁöÑÊèèËø∞‰∏≠Â°´ÂÜô fixes #234 (ÊàñÊòØÂú®‰Ω† PR ‰ªªÊÑèËØÑËÆ∫‰∏≠Â°´ÂÜôÈÉΩÊòØÂèØ‰ª•ÁöÑ)„ÄÇ‰πãÂêéÂêàÂπ∂Ëøô‰∏™ PR Êó∂Â∞Ü‰ºöËá™Âä®ÂÖ≥Èó≠Â°´ÂÜôÁöÑ Issues„ÄÇÊÄé‰πàÊ†∑,Âæà cool Âêß„ÄÇ ‰∫ÜËß£ÊòØÊõ¥Â§öÁõ∏ÂÖ≥ÁöÑÂÜÖÂÆπ„ÄÇ 5 ÈìæÊé•Âà∞ËØÑËÆ∫‰Ω†ÊòØÂê¶ÊúâËøáÊÉ≥Ë¶ÅÈìæÊé•Âà∞ÁâπÊÆä comment ÁöÑÊÉ≥Ê≥ï‰ΩÜÂç¥Êó†Ê≥ïÂÆûÁé∞ÔºüÈÇ£ÊòØÂõ†‰∏∫‰Ω†‰∏çÁü•ÈÅìÊÄé‰πàÂÅö„ÄÇÊúãÂèãÈÇ£ÈÉΩÊòØËøáÂéªÂºè‰∫ÜÔºåÁé∞Âú®ÊàëÂ∞±ÂëäËØâ‰Ω†ÔºåÁÇπÂáªÁî®Êà∑ÂêçÊóÅËæπÁöÑÊó•Êúü/Êó∂Èó¥Âç≥ÂèØÈìæÊé•Âà∞ËØ• comment „ÄÇ 6 ÈìæÊé•Âà∞‰ª£Á†ÅÊàëÁü•ÈÅì‰Ω†ÊÉ≥ÈìæÊé•Âà∞ÂÖ∑‰ΩìÁöÑ‰ª£Á†ÅË°å‰∏ä„ÄÇ Â∞ùËØï:Êü•ÁúãÊñá‰ª∂Êó∂ÔºåÁÇπÂáª‰ª£Á†ÅÊóÅËæπÁöÑË°åÂè∑„ÄÇ ÁúãÂà∞‰∫ÜÂêßÔºåÊµèËßàÂô®ÁöÑ URL Â∑≤ÁªèË¢´Êõ¥Êñ∞‰∏∫Ë°åÂè∑‰∫Ü„ÄÇÂ¶ÇÊûú‰Ω†Êåâ‰Ωè shift,ÂêåÊó∂ÁÇπÂáªÂÖ∂‰ªñË°åÂè∑ÔºåURL ÂÜçÊ¨°Ë¢´Êõ¥Êñ∞ÔºåÂπ∂‰∏î‰Ω†‰πüÈ´ò‰∫ÆÊòæÁ§∫È°µÈù¢‰∏≠ÁöÑ‰∏ÄÊÆµ‰ª£Á†Å„ÄÇ ÂàÜ‰∫´Ëøô‰∏™ URL ÔºåËÆøÈóÆÊó∂Â∞Ü‰ºöÈìæÊé•Âà∞ËØ•Êñá‰ª∂Â∑≤ÁªèÈÄâ‰∏≠ÁöÑÈÇ£‰∫õ‰ª£Á†ÅÊÆµ„ÄÇ ‰ΩÜÁ≠â‰∏Ä‰∏ãÔºåÈÇ£ÊåáÂêëÁöÑÊòØÂΩìÂâçÁöÑÂàÜÊîØÔºåÂ¶ÇÊûúÊñá‰ª∂ÂèëÁîü‰∫ÜÊîπÂèòÂë¢Ôºü‰πüËÆ∏‰∏Ä‰∏™Âú®ÂΩìÂâçÁä∂ÊÄÅËøûÊé•Âà∞Êñá‰ª∂ÁöÑÊ∞∏‰πÖËøûÊé•Ê≠£ÊòØ‰Ω†ÊÉ≥Ë¶ÅÁöÑ„ÄÇ ÊàëÂæàÊáíÔºåÊâÄ‰ª•Áî®‰∏ÄÂº†Êà™ÂõæÂ±ïÁ§∫‰ª•‰∏äÁöÑÊâÄÊúâÊìç‰Ωú„ÄÇ Ë∞àÂà∞ÁΩëÂùÄ„ÄÇ„ÄÇ„ÄÇ 7 ÂÉèÂëΩ‰ª§Ë°å‰∏ÄÊ†∑‰ΩøÁî® GitHub ÈìæÊé•‰ΩøÁî® GitHub Ëá™Â∏¶ÁöÑ UI ÊµèËßà‰πüËøò‰∏çÈîôÔºå‰ΩÜÊúâÊó∂Áõ¥Êé•Âú® URL ‰∏≠ËæìÂÖ•ÊòØÊúÄÂø´ÁöÑÊñπÊ≥ï„ÄÇÊØîÂ¶ÇÔºåÊàëÊÉ≥Ë∑≥ËΩ¨Âà∞ÊàëÊ≠£Âú®ÁºñËæëÁöÑÂàÜÊîØÂπ∂Âíå master ËøõË°åÂØπÊØîÔºåÂ∞±ÂèØ‰ª•Âú®È°πÁõÆÂêçÁß∞ÂêéÈù¢Êé•‰∏ä /compare/branch-name „ÄÇ ‰∏éÈÄâ‰∏≠ÂàÜÊîØÁöÑÂØπÊØîÈ°µÂ∞Ü‰ºöÊòæÁ§∫Âá∫Êù•: ‰ª•‰∏äÂ∞±ÊòØÂíå master ÂàÜÊîØÁöÑÂ∑ÆÂºÇÔºåÂ¶ÇÊûúÊÉ≥Ë¶ÅÂêàÂπ∂ÂàÜÊîØÁöÑËØùÔºåÂè™ÈúÄË¶ÅËæìÂÖ• /compare/integration-branch...my-branch Âç≥ÂèØ„ÄÇ ‰Ω†ËøòÂèØ‰ª•Âà©Áî®Âø´Êç∑ÈîÆËææÂà∞ÂêåÊ†∑ÁöÑÊïàÊûúÔºå‰ΩøÁî® ctrl + L ÊàñËÄÖ cmd + L ÂèØ‰ª•Â∞ÜÂÖâÊ†áÁßªÂä®Âà∞ URL ‰∏ä(Ëá≥Â∞ëÂú® Chrome ‰∏≠ÂèØ‰ª•)„ÄÇ Âä†‰∏äÊµèËßàÂô®ÁöÑËá™Âä®Ë°•ÂÖ® ‚Äî‚Äî ‰Ω†Â∞±ÂèØ‰ª•Âú®‰∏§‰∏™ÂàÜÊîØ‰πãÈó¥ËΩªÊùæÂàáÊç¢‰∫Ü„ÄÇ 8 Âú®IssuesÂàõÂª∫ÂàóË°®‰Ω†ÊÉ≥Âú®‰Ω†ÁöÑ issue ‰∏≠ÁúãÂà∞Â§çÈÄâÊ°ÜÂàóË°®Âêó? ‰Ω†ÊÉ≥Âú®Êü•Áúã issue ÂàóË°®ÊòØÂÆÉ‰ª¨‰ª•Â•ΩÁúãÁöÑ 2 of 5 ËøõÂ∫¶Êù°ÂëàÁé∞ÂêóÔºü Â§™Â•Ω‰∫ÜÔºÅ‰Ω†ÂèØ‰ª•Áî®‰ª•‰∏ãËØ≠Ê≥ïÊù•ÂàõÂª∫‰∏Ä‰∏™‰∫§‰∫íÊÄßÁöÑÂ§çÈÄâÊ°Ü: 12345- [ ] Screen width (integer)- [x] Service worker support- [x] Fetch support- [ ] CSS flexbox support- [ ] Custom elements ÊòØÁî±‰∏Ä‰∏™Á©∫Ê†º„ÄÅ‰∏≠Ê®™Á∫ø„ÄÅÁ©∫Ê†º„ÄÅÂ∑¶Êã¨Âè∑„ÄÅÁ©∫Ê†º(ÊàñËÄÖÊòØ X )„ÄÅÂè≥Êã¨Âè∑„ÄÅÁ©∫Ê†º‰ª•Âèä‰∏Ä‰∫õÊñáÊú¨ÁªÑÊàê„ÄÇ ‰Ω†ÁîöËá≥ÂèØ‰ª•ÁúüÊ≠£ÁöÑ ÈÄâ‰∏≠/ÂèñÊ∂à Ëøô‰∫õÂ§çÈÄâÊ°ÜÔºÅÂü∫‰∫éÊüê‰∫õÂéüÂõ†ÔºåÂØπ‰∫éÊàëÊù•ËØ¥‰Ω†ÁúãËµ∑Êù•ÂÉèÊòØÊäÄÊúØÈ≠îÂäõ„ÄÇÊòØÁúüÁöÑËÉΩÂ§üÈÄâ‰∏≠Ëøô‰∫õÂ§çÈÄâÊ°ÜÔºÅÁîöËá≥ÂÆÉËøòÊõ¥Êñ∞‰∫ÜÂ∫ïÂ±ÇÊ∫êÁ†Å„ÄÇ psÔºö‰ª•‰∏ãÂåÖÊã¨Á¨¨‰πùÁÇπ Âü∫‰∫éGitHubÁöÑÈ°πÁõÆÈù¢Êùø Áî±‰∫éÁî®ÁöÑ‰∏çÂ§öÂ∞±Ê≤°ÊúâÁøªËØë„ÄÇ 10 GitHub wiki‰Ωú‰∏∫‰∏Ä‰∏™ÂÉèÁª¥Âü∫ÁôæÁßëÈÇ£Ê†∑ÁöÑÈùûÁªìÊûÑÂåñÁöÑÈ°µÈù¢ÈõÜÂêàÔºå GitHub WikiÁöÑ‰æõÁªô(ÊàëÊääÂÆÉÁß∞‰πã‰∏∫ Gwiki ) ÊòØ‰∏Ä‰∏™ÈùûÂ∏∏Ê£íÁöÑÂäüËÉΩ„ÄÇ ÂØπ‰∫éÁªìÊûÑÂåñÁöÑÈ°µÈù¢Êù•ËØ¥ ‚Äî‚Äî ‰æãÂ¶Ç‰Ω†ÁöÑÊñáÊ°£Ôºö‰∏çËÉΩËØ¥Ëøô‰∏™È°µÈù¢ÊòØÂÖ∂‰ªñÈ°µÈù¢ÁöÑÂ≠êÈ°µÈù¢ÔºåÊàñÂàôÊòØÊúâ ‚Äú‰∏ã‰∏ÄËäÇ‚ÄùÔºå‚Äú‰∏ä‰∏ÄËäÇ‚Äù ËøôÊ†∑ÁöÑ‰æøÊç∑ÊåâÈíÆ„ÄÇÂπ∂‰∏î Hansel Âíå Gretel ‰πüÊ≤°ÊúâÔºåÂõ†‰∏∫ÁªìÊûÑÂåñÈ°µÈù¢Âπ∂Ê≤°Êúâ breadcrumbs ËøôÊ†∑ÁöÑËÆæËÆ°„ÄÇ Êàë‰ª¨ÁªßÁª≠ÔºåËÆ© Gwiki Âä®Ëµ∑Êù•ÔºåÊàë‰ªé NodeJS ÁöÑÊñáÊ°£‰∏≠Â§çÂà∂‰∫ÜÂá†È°µÊù•‰Ωú‰∏∫ wiki È°µÈù¢„ÄÇÁÑ∂ÂêéÂàõÂª∫‰∫Ü‰∏Ä‰∏™Ëá™ÂÆö‰πâ‰æßËæπÊ†èÔºåÂ∏ÆÂä©ÊàëÊõ¥Â•ΩÂú∞Ê®°Êãü‰∏Ä‰∫õÂÆûÈôÖÁöÑÁõÆÂΩïÁªìÊûÑ„ÄÇÂ∞ΩÁÆ°ÂÆÉ‰∏ç‰ºöÁ™ÅÂá∫ÊòæÁ§∫‰Ω†ÂΩìÂâçÁöÑÈ°µÈù¢‰ΩçÁΩÆÔºå‰ΩÜ‰æßËæπÊ†è‰ºö‰∏ÄÁõ¥Â≠òÂú®„ÄÇ Ëøô‰∫õÈìæÊé•ÈúÄË¶Å‰Ω†ÊâãÂä®Áª¥Êä§Ôºå‰ΩÜÊÄªÁöÑÊù•ËØ¥ÔºåÊàëËÆ§‰∏∫ÂÆÉÂèØ‰ª•ÂÅöÂæóÂæàÂ•Ω„ÄÇ Â¶ÇÊûúÈúÄË¶ÅÁöÑËØùÂèØ‰ª•ÁúãÁúã„ÄÇ ËôΩÁÑ∂ÂÆÉ‰∏é GitBook ( Redux ÊñáÊ°£ÊâÄ‰ΩøÁî®ÁöÑ)ÊàñËÄÖÊòØÂÆöÂà∂ÁΩëÁ´ôÁõ∏ÊØî‰ªçÊúâÂ∑ÆË∑ù„ÄÇ‰ΩÜÂú®‰Ω†ÁöÑ repo ‰∏≠ÂÆÉÊúâ 80% ÂÆåÂÖ®ÂÄºÂæó‰ø°ËµñÁöÑ„ÄÇ ÊàëÁöÑÂª∫ËÆÆÊòØ: Â¶ÇÊûú‰Ω†Â∑≤ÁªèÊúâÂ§ö‰∏™ README.md Êñá‰ª∂ÔºåÂπ∂‰∏îÊÉ≥Ë¶Å‰∏Ä‰∫õÂÖ≥‰∫éÁî®Êà∑ÊåáÂçóÊàñÊõ¥ËØ¶ÁªÜÁöÑÊñáÊ°£ÁöÑ‰∏çÂêåÁöÑÈ°µÈù¢ÔºåÈÇ£‰πà‰Ω†Â∫îËØ•ÈÄâÊã© Gwiki„ÄÇ Â¶ÇÊûúÁº∫‰πèÁªìÊûÑÂåñ/ÂØºËà™ÂºÄÂßãËÆ©‰Ω†‰∏çÁàΩÁöÑËØùÔºåÈÇ£Â∞±ËØïËØïÂÖ∂‰ªñÁöÑÂêß„ÄÇ 11 GitHub Pages‰Ω†ÂèØËÉΩÂ∑≤ÁªèÁü•ÈÅì‰ΩøÁî® GitHub Pages Êù•ÊâòÁÆ°‰∏Ä‰∏™ÈùôÊÄÅÁΩëÁ´ô„ÄÇÂ¶ÇÊûú‰Ω†‰∏çÁü•ÈÅìÔºåÁé∞Âú®Â∞±Êù•Â≠¶‰π†ÔºåËøô‰∏ÄËäÇÊòØ‰∏ìÈó®Áî®‰∫éËÆ®ËÆ∫‰ΩøÁî® Jekyll Êù•ÊûÑÂª∫‰∏Ä‰∏™Á´ôÁÇπÁöÑ„ÄÇ ÊúÄÁÆÄÂçïÁöÑÂ∞±ÊòØÔºö GitHub Pages + Jekyll‰ºöÈÄöËøá‰∏Ä‰∏™ÊºÇ‰∫ÆÁöÑ‰∏ªÈ¢òÊù•Ê∏≤Êüì‰Ω†ÁöÑ README.md Êñá‰ª∂„ÄÇ‰æãÂ¶Ç:ÈÄöËøá about-github Êù•Êü•ÁúãÁöÑÊàëÁöÑ README È°µÈù¢„ÄÇ Â¶ÇÊûúÊàëÂú® GitHub ‰∏≠ÁÇπÂáª‰∫Ü settingsÈÄâÈ°πÔºåÂàáÊç¢Âà∞ Github Pages ËÆæÁΩÆÔºåÁÑ∂ÂêéÈÄâÊã©‰∏Ä‰∏™ Jekyll theme„ÄÇ„ÄÇ„ÄÇ ÊàëÂ∞±ÂèØ‰ª•ÂæóÂà∞ Jekyll-themed È°µÈù¢„ÄÇ ‰ªéËøôÁÇπ‰∏äÊàëÂèØ‰ª•‰∏ªË¶Å‰æùÊçÆÊòìÁºñËæëÁöÑ Markdown Êñá‰ª∂Êù•ÊûÑÂª∫‰∏Ä‰∏™ÂÆåÊï¥ÁöÑÈùôÊÄÅÁ´ôÁÇπ„ÄÇÊú¨Ë¥®‰∏äÊòØÊää GitHub ÂèòÊàê‰∫Ü CMS„ÄÇ ËôΩÁÑ∂ÊàëÊ≤°ÊúâÂÆûÈôÖ‰ΩøÁî®ËøáÔºå‰ΩÜÊòØ React Bootstrap ÁöÑÁΩëÁ´ôÈÉΩÊòØ‰ΩøÁî®ÂÆÉÊù•ÊûÑÂª∫ÁöÑ„ÄÇÊâÄ‰ª•ÂÆÉ‰∏ç‰ºöÁ≥üÁ≥ï„ÄÇ Ê≥®ÊÑè:ÂÆÉË¶ÅÊ±Ç Ruby ËøêË°åÊú¨Âú∞ÁéØÂ¢É( Windows Ëá™Ë°åÂÆâË£ÖÔºå macOS Ëá™Â∏¶)„ÄÇ 12 Êää GitHub ÂΩìÂÅö CRM ‰ΩøÁî®ÂÅáËÆæ‰Ω†Êúâ‰∏Ä‰∏™Â≠òÊúâ‰∏Ä‰∫õÊñáÊú¨ÂÜÖÂÆπÁöÑÁΩëÁ´ôÔºå‰Ω†‰∏çÊÉ≥Â∞ÜÊñáÊú¨ÂÜÖÂÆπÂ≠òÂÇ®‰∫éÁúüÊ≠£ÁöÑ HTML Ê∫êÁ†Å‰∏≠„ÄÇ Áõ∏ÂèçÁöÑÔºå‰Ω†ÊÉ≥Ë¶ÅÂ∞ÜËøô‰∫õÊñáÊú¨ÂùóÂ≠òÂÇ®‰∫éÈùûÂºÄÂèë‰∫∫ÂëòËÉΩËΩªÊùæÁöÑËøõË°åÁºñËæëÁöÑÂú∞Êñπ„ÄÇÂèØËÉΩÊòØ‰∏Ä‰∏™ÁâàÊú¨ÊéßÂà∂Á≥ªÁªüÔºåÁîöËá≥ÊòØ‰∏Ä‰∏™ÂÆ°Ê†∏ÊµÅÁ®ã„ÄÇ ÊàëÁöÑÂª∫ËÆÆÊòØ:‰ΩøÁî® GitHub ÂéÇÂ∫ì‰∏≠ÁöÑ Markdown Êñá‰ª∂Êù•Â≠òÂÇ®Ëøô‰∫õÊñáÊú¨ÂÜÖÂÆπÔºåÁÑ∂Âêé‰ΩøÁî®ÂâçÁ´ØÁªÑ‰ª∂Êù•ÊãâÂèñËøô‰∫õÊñáÊú¨ÂùóÂπ∂Â±ïÁ§∫Âú®È°µÈù¢‰∏ä„ÄÇ ÊàëÊòØÊêû React ÁöÑÔºåÊâÄ‰ª•ËøôÊúâ‰∏Ä‰∏™ Ëß£Êûê Markdown ÁöÑÁªÑ‰ª∂‰æãÂ≠êÔºåÁªôÂÆö‰∏Ä‰∫õ Markdown Êñá‰ª∂Ë∑ØÂæÑÔºåÂÆÉÂ∞Ü‰ºöËá™Âä®ÊãâÂèñÂπ∂‰Ωú‰∏∫ HTML ÊòæÁ§∫Âá∫Êù•„ÄÇ 1234567891011121314151617181920212223242526class Markdown extends React.Component &#123; constructor(props) &#123; super(props); // replace with your URL, obviously this.baseUrl = &apos;https://raw.githubusercontent.com/davidgilbertson/about-github/master/text-snippets&apos;; this.state = &#123; markdown: &apos;&apos;, &#125;; &#125; componentDidMount() &#123; fetch(`$&#123;this.baseUrl&#125;/$&#123;this.props.url&#125;`) .then(response =&gt; response.text()) .then((markdown) =&gt; &#123; this.setState(&#123;markdown&#125;); &#125;); &#125; render() &#123; return ( &lt;div dangerouslySetInnerHTML=&#123;&#123;__html: marked(this.state.markdown)&#125;&#125; /&gt; ); &#125;&#125; Â•ñÂä±ÁéØËäÇ ‚Äî‚Äî GitHub Â∑•ÂÖ∑ÊàëÂ∑≤Áªè‰ΩøÁî®‰∫Ü Octotree Chrome extension ÊúâÊÆµÊó∂Èó¥‰∫ÜÔºåÁé∞Âú®ÊàëÂêëÂ§ßÂÆ∂Êé®ËçêÂÆÉÔºÅÊó†ËÆ∫‰Ω†ÊòØÂú®Êü•ÁúãÂì™‰∏™ repo ÂÆÉÈÉΩ‰ºöÂú®Â∑¶‰æßÁªô‰Ω†‰∏Ä‰∏™Ê†ëÁä∂Èù¢Êùø„ÄÇ ÈÄöËøáËøô‰∏™ËßÜÈ¢ëÊàë‰∫ÜËß£Âà∞‰∫Ü octoboxÔºåÂÆÉÊòØÁî®‰∫éÁÆ°ÁêÜ‰Ω†ÁöÑ GitHub Issues Êî∂‰ª∂ÁÆ±ÔºåÁúãËµ∑Êù•Áõ∏ÂΩì‰∏çÈîôÔºÅ‰ª•‰∏äÂ∞±ÊòØÊàëÈíàÂØπ‰∫éoctoboxÁöÑÂÖ®ÈÉ®ÊÉ≥Ê≥ï„ÄÇ ÂÖ∂‰ªñÂ∞±ÊòØËøôÊ†∑‰∫ÜÔºÅÊàëÂ∏åÊúõËøôÈáåËá≥Â∞ëÊúâ‰∏â‰ª∂‰∫ãÊòØ‰Ω†Ëøò‰∏çÁü•ÈÅìÁöÑ„ÄÇ ÊúÄÂêé: hava a nice dayÔºÅ]]></content>
      <categories>
        <category>ÁøªËØë</category>
      </categories>
      <tags>
        <tag>GitHub</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SSM(ÂçÅ‰∏É) MQÂ∫îÁî®]]></title>
    <url>%2F2017%2F10%2F20%2FSSM17%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄÂÜôËøôÁØáÊñáÁ´†ÁöÑËµ∑Âõ†ÊòØÁî±‰∫é‰πãÂâçÁöÑ‰∏ÄÁØáÂÖ≥‰∫éKafkaÂºÇÂ∏∏Ê∂àË¥πÔºåÂΩìÊó∂‰∏∫‰∫ÜËß£ÂÜ≥ÈóÆÈ¢ò‰∏çÂæó‰∏ç‰ΩøÁî®‰∏¥Êó∂ÁöÑÊñπÊ°à„ÄÇ ÊÄªÁªìËµ∑Êù•ÂΩíÊ†πÁªìÂ∫ïËøòÊòØÂØπKafka‰∏çÁÜüÊÇâÂØºËá¥ÁöÑÔºåÂä†‰∏äÂπ≥Êó∂Â∑•‰ΩúÁöÑÈúÄË¶ÅÔºå‰πãÂêéÂ∞±Ëä±‰∫õÊó∂Èó¥Áúã‰∫ÜKafkaÁõ∏ÂÖ≥ÁöÑËµÑÊñô„ÄÇ ‰ΩïÊó∂‰ΩøÁî®MQË∞àÂà∞KafkaÂ∞±‰∏çÂæó‰∏çÊèêÂà∞MQÔºåÊòØÂ±û‰∫éÊ∂àÊÅØÈòüÂàóÁöÑ‰∏ÄÁßç„ÄÇ‰Ωú‰∏∫‰∏ÄÁßçÂü∫Á°Ä‰∏≠Èó¥‰ª∂Âú®‰∫íËÅîÁΩëÈ°πÁõÆ‰∏≠ÊúâÁùÄÂ§ßÈáèÁöÑ‰ΩøÁî®„ÄÇ ‰∏ÄÁßçÊäÄÊúØÁöÑ‰∫ßÁîüËá™ÁÑ∂ÊòØ‰∏∫‰∫ÜËß£ÂÜ≥ÊüêÁßçÈúÄÊ±ÇÔºåÈÄöÂ∏∏Êù•ËØ¥ÊòØ‰ª•‰∏ãÂú∫ÊôØÔºö ÈúÄË¶ÅË∑®ËøõÁ®ãÈÄö‰ø°ÔºöBÁ≥ªÁªüÈúÄË¶ÅAÁ≥ªÁªüÁöÑËæìÂá∫‰Ωú‰∏∫ËæìÂÖ•ÂèÇÊï∞„ÄÇ ÂΩìAÁ≥ªÁªüÁöÑËæìÂá∫ËÉΩÂäõËøúËøúÂ§ß‰∫éBÁ≥ªÁªüÁöÑÂ§ÑÁêÜËÉΩÂäõ„ÄÇ ÈíàÂØπ‰∫éÁ¨¨‰∏ÄÁßçÊÉÖÂÜµÊúâ‰∏§ÁßçÊñπÊ°à: ‰ΩøÁî®RPCËøúÁ®ãË∞ÉÁî®,AÁõ¥Êé•Ë∞ÉÁî®B„ÄÇ ‰ΩøÁî®MQ,AÂèëÂ∏ÉÊ∂àÊÅØÂà∞MQ,BËÆ¢ÈòÖËØ•Ê∂àÊÅØ„ÄÇ ÂΩìÊàë‰ª¨ÁöÑÈúÄÊ±ÇÊòØ:AË∞ÉÁî®BÂÆûÊó∂ÂìçÂ∫îÔºåÂπ∂‰∏îÂÆûÊó∂ÂÖ≥ÂøÉÂìçÂ∫îÁªìÊûúÂàô‰ΩøÁî®RPCÔºåËøôÁßçÊÉÖÂÜµÂ∞±Âæó‰ΩøÁî®ÂêåÊ≠•Ë∞ÉÁî®„ÄÇ Âèç‰πãÂΩìÊàë‰ª¨Âπ∂‰∏çÂÖ≥ÂøÉË∞ÉÁî®‰πãÂêéÁöÑÊâßË°åÁªìÊûúÔºåÂπ∂‰∏îÊúâÂèØËÉΩË¢´Ë∞ÉÁî®ÊñπÁöÑÊâßË°åÈùûÂ∏∏ËÄóÊó∂ÔºåËøôÁßçÊÉÖÂÜµÂ∞±ÈùûÂ∏∏ÈÄÇÂêàÁî®MQÊù•ËææÂà∞ÂºÇÊ≠•Ë∞ÉÁî®ÁõÆÁöÑ„ÄÇ ÊØîÂ¶ÇÂ∏∏ËßÅÁöÑÁôªÂΩïÂú∫ÊôØÂ∞±Âè™ËÉΩÁî®ÂêåÊ≠•Ë∞ÉÁî®ÁöÑÊñπÂºèÔºåÂõ†‰∏∫Ëøô‰∏™ËøáÁ®ãÈúÄË¶ÅÂÆûÊó∂ÁöÑÂìçÂ∫îÁªìÊûúÔºåÊÄª‰∏çËÉΩÂú®Áî®Êà∑ÁÇπ‰∫ÜÁôªÂΩï‰πãÂêéÊéíÈô§ÁΩëÁªúÂéüÂõ†‰πãÂ§ñÂÜçÈ¢ùÂ§ñÁöÑÁ≠âÂá†ÁßíÂêß„ÄÇ ‰ΩÜÁ±ª‰ºº‰∫éÁî®Êà∑ÁôªÂΩïÈúÄË¶ÅÂ•ñÂä±ÁßØÂàÜÁöÑÊÉÖÂÜµÂàô‰ΩøÁî®MQ‰ºöÊõ¥Â•ΩÔºåÂõ†‰∏∫ÁôªÂΩïÂπ∂‰∏çÂÖ≥Á≥ªÁßØÂàÜÁöÑÊÉÖÂÜµÔºåÂè™ÈúÄË¶ÅÂèë‰∏™Ê∂àÊÅØÂà∞MQ,Â§ÑÁêÜÁßØÂàÜÁöÑÊúçÂä°ËÆ¢ÈòÖÂ§ÑÁêÜÂç≥ÂèØÔºåËøôÊ†∑ËøòÂèØ‰ª•Ëß£ÂÜ≥ÁßØÂàÜÁ≥ªÁªüÊïÖÈöúÂ∏¶Êù•ÁöÑÈõ™Â¥©ÊïàÂ∫î„ÄÇ MQËøòÊúâ‰∏Ä‰∏™Âü∫Á°ÄÂäüËÉΩÂàôÊòØÈôêÊµÅÂâäÂ≥∞ÔºåËøôÂØπ‰∫éÂ§ßÊµÅÈáèÁöÑÂú∫ÊôØÂ¶ÇÊûúÂ∞ÜËØ∑Ê±ÇÁõ¥Êé•Ë∞ÉÁî®Âà∞BÁ≥ªÁªüÂàôÈùûÂ∏∏ÊúâÂèØËÉΩ‰ΩøBÁ≥ªÁªüÂá∫Áé∞‰∏çÂèØÁî®ÁöÑÊÉÖÂÜµ„ÄÇËøôÁßçÂú∫ÊôØÂ∞±ÈùûÂ∏∏ÈÄÇÂêàÂ∞ÜËØ∑Ê±ÇÊîæÂÖ•MQÔºå‰∏ç‰ΩÜÂèØ‰ª•Âà©Áî®MQÂâäÂ≥∞ËøòÂ∞ΩÂèØËÉΩÁöÑ‰øùËØÅÁ≥ªÁªüÁöÑÈ´òÂèØÁî®„ÄÇ KafkaÁÆÄ‰ªãÊú¨Ê¨°ÈáçÁÇπËÆ®ËÆ∫‰∏ãKafka„ÄÇÁÆÄÂçïÊù•ËØ¥KafkaÊòØ‰∏Ä‰∏™ÊîØÊåÅÊ∞¥Âπ≥Êâ©Â±ïÔºåÈ´òÂêûÂêêÁéáÁöÑÂàÜÂ∏ÉÂºèÊ∂àÊÅØÁ≥ªÁªü„ÄÇ KafkaÁöÑÂ∏∏Áî®Áü•ËØÜ: Topic:Áîü‰∫ßËÄÖÂíåÊ∂àË¥πËÄÖÁöÑ‰∫§‰∫íÈÉΩÊòØÂõ¥ÁªïÁùÄ‰∏Ä‰∏™TopicËøõË°åÁöÑÔºåÈÄöÂ∏∏Êù•ËØ¥ÊòØÁî±‰∏öÂä°Êù•ËøõË°åÂå∫ÂàÜÔºåÁî±Áîü‰∫ßÊ∂àË¥πËÄÖÂçèÂïÜ‰πãÂêéËøõË°åÂàõÂª∫„ÄÇ Partition(ÂàÜÂå∫):ÊòØTopic‰∏ãÁöÑÁªÑÊàêÔºåÈÄöÂ∏∏‰∏Ä‰∏™Topic‰∏ãÊúâ‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂàÜÂå∫ÔºåÊ∂àÊÅØÁîü‰∫ß‰πãÂêé‰ºöÊåâÁÖß‰∏ÄÂÆöÁöÑÁÆóÊ≥ïË¥üËΩΩÂà∞ÊØè‰∏™ÂàÜÂå∫ÔºåÊâÄ‰ª•ÂàÜÂå∫‰πüÊòØKafkaÊÄßËÉΩÁöÑÂÖ≥ÈîÆ„ÄÇÂΩìÂèëÁé∞ÊÄßËÉΩ‰∏çÈ´òÊó∂‰æøÂèØËÄÉËôëÊñ∞Â¢ûÂàÜÂå∫„ÄÇ ÁªìÊûÑÂõæÂ¶Ç‰∏ã: ÂàõÂª∫TopicKafkaÁöÑÂÆâË£ÖÂÆòÁΩëÊúâÈùûÂ∏∏ËØ¶ÁªÜÁöÑËÆ≤Ëß£„ÄÇËøôÈáåË∞à‰∏Ä‰∏ãÂú®Êó•Â∏∏ÂºÄÂèë‰∏≠Â∏∏ËßÅÁöÑ‰∏Ä‰∫õÊìç‰ΩúÔºåÊØîÂ¶ÇÂàõÂª∫TopicÔºö 1sh bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 3 --topic `test` ÂàõÂª∫‰∫Ü‰∏â‰∏™ÂàÜÂå∫ÁöÑtest‰∏ªÈ¢ò„ÄÇ ‰ΩøÁî® 1sh bin/kafka-topics.sh --list --zookeeper localhost:2181 ÂèØ‰ª•ÂàóÂá∫ÊâÄÊúâÁöÑTopic„ÄÇ KafkaÁîü‰∫ßËÄÖ‰ΩøÁî®kafkaÂÆòÊñπÊâÄÊèê‰æõÁöÑJava APIÊù•ËøõË°åÊ∂àÊÅØÁîü‰∫ßÔºåÂÆûÈôÖ‰ΩøÁî®‰∏≠ÁºñÁ†ÅÂÆûÁé∞Êõ¥‰∏∫Â∏∏Áî®: 12345678910111213141516171819202122232425262728293031323334353637383940/** KafkaÁîü‰∫ßËÄÖ * @author crossoverJie */public class Producer &#123; private static final Logger LOGGER = LoggerFactory.getLogger(Producer.class); /** * Ê∂àË¥πÈÖçÁΩÆÊñá‰ª∂ */ private static String consumerProPath; public static void main(String[] args) throws IOException &#123; // set up the producer consumerProPath = System.getProperty("product_path"); KafkaProducer&lt;String, String&gt; producer = null; try &#123; FileInputStream inputStream = new FileInputStream(new File(consumerProPath)); Properties properties = new Properties(); properties.load(inputStream); producer = new KafkaProducer&lt;String, String&gt;(properties); &#125; catch (IOException e) &#123; LOGGER.error("load config error", e); &#125; try &#123; // send lots of messages for (int i=0 ;i&lt;100 ; i++)&#123; producer.send(new ProducerRecord&lt;String, String&gt;( "topic_optimization", i+"", i+"")); &#125; &#125; catch (Throwable throwable) &#123; System.out.printf("%s", throwable.getStackTrace()); &#125; finally &#123; producer.close(); &#125; &#125;&#125; ÂÜçÈÖçÂêà‰ª•‰∏ãÂêØÂä®ÂèÇÊï∞Âç≥ÂèØÂèëÈÄÅÊ∂àÊÅØ:1-Dproduct_path=/xxx/producer.properties ‰ª•ÂèäÁîü‰∫ßËÄÖÁöÑÈÖçÁΩÆÊñá‰ª∂:12345678910#ÈõÜÁæ§Âú∞ÂùÄÔºåÂèØ‰ª•Â§ö‰∏™bootstrap.servers=10.19.13.51:9094acks=allretries=0batch.size=16384auto.commit.interval.ms=1000linger.ms=0key.serializer=org.apache.kafka.common.serialization.StringSerializervalue.serializer=org.apache.kafka.common.serialization.StringSerializerblock.on.buffer.full=true ÂÖ∑‰ΩìÁöÑÈÖçÁΩÆËØ¥ÊòéËØ¶ËßÅÊ≠§Â§Ñ:https://kafka.apache.org/0100/documentation.html#theproducer ÊµÅÁ®ãÈùûÂ∏∏ÁÆÄÂçïÔºåÂÖ∂ÂÆûÂ∞±ÊòØ‰∏Ä‰∫õAPIÁöÑË∞ÉÁî®„ÄÇ Ê∂àÊÅØÂèëÂÆå‰πãÂêéÂèØ‰ª•ÈÄöËøá‰ª•‰∏ãÂëΩ‰ª§Êü•ÁúãÈòüÂàóÂÜÖÁöÑÊÉÖÂÜµ:1sh kafka-consumer-groups.sh --bootstrap-server localhost:9094 --describe --group group1 ÂÖ∂‰∏≠ÁöÑlag‰æøÊòØÈòüÂàóÈáåÁöÑÊ∂àÊÅØÊï∞Èáè„ÄÇ KafkaÊ∂àË¥πËÄÖÊúâ‰∫ÜÁîü‰∫ßËÄÖËá™ÁÑ∂‰πüÂ∞ë‰∏ç‰∫ÜÊ∂àË¥πËÄÖÔºåËøôÈáåÈ¶ñÂÖàÈíàÂØπÂçïÁ∫øÁ®ãÊ∂àË¥π: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106/** * Function:kafkaÂÆòÊñπÊ∂àË¥π * * @author crossoverJie * Date: 2017/10/19 01:11 * @since JDK 1.8 */public class KafkaOfficialConsumer &#123; private static final Logger LOGGER = LoggerFactory.getLogger(KafkaOfficialConsumer.class); /** * Êó•ÂøóÊñá‰ª∂Âú∞ÂùÄ */ private static String logPath; /** * ‰∏ªÈ¢òÂêçÁß∞ */ private static String topic; /** * Ê∂àË¥πÈÖçÁΩÆÊñá‰ª∂ */ private static String consumerProPath ; /** * ÂàùÂßãÂåñÂèÇÊï∞Ê†°È™å * @return */ private static boolean initCheck() &#123; topic = System.getProperty("topic") ; logPath = System.getProperty("log_path") ; consumerProPath = System.getProperty("consumer_pro_path") ; if (StringUtil.isEmpty(topic) || logPath.isEmpty()) &#123; LOGGER.error("system property topic ,consumer_pro_path, log_path is required !"); return true; &#125; return false; &#125; /** * ÂàùÂßãÂåñkafkaÈÖçÁΩÆ * @return */ private static KafkaConsumer&lt;String, String&gt; initKafkaConsumer() &#123; KafkaConsumer&lt;String, String&gt; consumer = null; try &#123; FileInputStream inputStream = new FileInputStream(new File(consumerProPath)) ; Properties properties = new Properties(); properties.load(inputStream); consumer = new KafkaConsumer&lt;String, String&gt;(properties); consumer.subscribe(Arrays.asList(topic)); &#125; catch (IOException e) &#123; LOGGER.error("Âä†ËΩΩconsumer.propsÊñá‰ª∂Âá∫Èîô", e); &#125; return consumer; &#125; public static void main(String[] args) &#123; if (initCheck())&#123; return; &#125; int totalCount = 0 ; long totalMin = 0L ; int count = 0; KafkaConsumer&lt;String, String&gt; consumer = initKafkaConsumer(); long startTime = System.currentTimeMillis() ; //Ê∂àË¥πÊ∂àÊÅØ while (true) &#123; ConsumerRecords&lt;String, String&gt; records = consumer.poll(200); if (records.count() &lt;= 0)&#123; continue ; &#125; LOGGER.debug("Êú¨Ê¨°Ëé∑Âèñ:"+records.count()); count += records.count() ; long endTime = System.currentTimeMillis() ; LOGGER.debug("count=" +count) ; if (count &gt;= 10000 )&#123; totalCount += count ; LOGGER.info("this consumer &#123;&#125; recordÔºåuse &#123;&#125; milliseconds",count,endTime-startTime); totalMin += (endTime-startTime) ; startTime = System.currentTimeMillis() ; count = 0 ; &#125; LOGGER.debug("end totalCount=&#123;&#125;,min=&#123;&#125;",totalCount,totalMin); /*for (ConsumerRecord&lt;String, String&gt; record : records) &#123; record.value() ; JsonNode msg = null; try &#123; msg = mapper.readTree(record.value()); &#125; catch (IOException e) &#123; LOGGER.error("Ê∂àË¥πÊ∂àÊÅØÂá∫Èîô", e); &#125; LOGGER.info("kafka receive = "+msg.toString()); &#125;*/ &#125; &#125;&#125; ÈÖçÂêà‰ª•‰∏ãÂêØÂä®ÂèÇÊï∞:1-Dlog_path=/log/consumer.log -Dtopic=test -Dconsumer_pro_path=consumer.properties ÂÖ∂‰∏≠ÈááÁî®‰∫ÜËΩÆËØ¢ÁöÑÊñπÂºèËé∑ÂèñÊ∂àÊÅØÔºåÂπ∂‰∏îËÆ∞ÂΩï‰∫ÜÊ∂àË¥πËøáÁ®ã‰∏≠ÁöÑÊï∞ÊçÆ„ÄÇ Ê∂àË¥πËÄÖÈááÁî®ÁöÑÈÖçÁΩÆ:1234567891011121314151617bootstrap.servers=192.168.1.2:9094group.id=group1# Ëá™Âä®Êèê‰∫§enable.auto.commit=truekey.deserializer=org.apache.kafka.common.serialization.StringDeserializervalue.deserializer=org.apache.kafka.common.serialization.StringDeserializer# fast session timeout makes it more fun to play with failoversession.timeout.ms=10000# These buffer sizes seem to be needed to avoid consumer switching to# a mode where it processes one bufferful every 5 seconds with multiple# timeouts along the way. No idea why this happens.fetch.min.bytes=50000receive.buffer.bytes=262144max.partition.fetch.bytes=2097152 ‰∏∫‰∫ÜÁÆÄ‰æøÊàëÈááÁî®ÁöÑÊòØËá™Âä®Êèê‰∫§offset„ÄÇ Ê∂àÊÅØÂ≠òÊîæÊú∫Âà∂Ë∞àÂà∞offsetÂ∞±ÂøÖÈ°ªÂæóË∞àË∞àKafkaÁöÑÊ∂àÊÅØÂ≠òÊîæÊú∫Âà∂. KafkaÁöÑÊ∂àÊÅØ‰∏ç‰ºöÂõ†‰∏∫Ê∂àË¥π‰∫ÜÂ∞±‰ºöÁ´ãÂç≥Âà†Èô§ÔºåÊâÄÊúâÁöÑÊ∂àÊÅØÈÉΩ‰ºöÊåÅ‰πÖÂåñÂà∞Êó•ÂøóÊñá‰ª∂ÔºåÂπ∂ÈÖçÁΩÆÊúâËøáÊúüÊó∂Èó¥ÔºåÂà∞‰∫ÜÊó∂Èó¥‰ºöËá™Âä®Âà†Èô§ËøáÊúüÊï∞ÊçÆÔºåÂπ∂‰∏î‰∏ç‰ºöÁÆ°ÂÖ∂‰∏≠ÁöÑÊï∞ÊçÆÊòØÂê¶Ë¢´Ê∂àË¥πËøá„ÄÇ Áî±‰∫éËøôÊ†∑ÁöÑÊú∫Âà∂Â∞±ÂøÖÈ°ªÁöÑÊúâ‰∏Ä‰∏™Ê†áÂøóÊù•Ë°®ÊòéÂì™‰∫õÊï∞ÊçÆÂ∑≤ÁªèË¢´Ê∂àË¥πËøá‰∫ÜÔºåoffset(ÂÅèÁßªÈáè)Â∞±ÊòØËøôÊ†∑ÁöÑ‰ΩúÁî®ÔºåÂÆÉÁ±ª‰ºº‰∫éÊåáÈíàÊåáÂêëÊüê‰∏™Êï∞ÊçÆÔºåÂΩìÊ∂àË¥π‰πãÂêéoffsetÂ∞±‰ºöÁ∫øÊÄßÁöÑÂêëÂâçÁßªÂä®ÔºåËøôÊ†∑‰∏ÄÊù•ÁöÑËØùÊ∂àÊÅØÊòØÂèØ‰ª•Ë¢´‰ªªÊÑèÊ∂àË¥πÁöÑÔºåÂè™Ë¶ÅÊàë‰ª¨‰øÆÊîπoffsetÁöÑÂÄºÂç≥ÂèØ„ÄÇ Ê∂àË¥πËøáÁ®ã‰∏≠ËøòÊúâ‰∏Ä‰∏™ÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØ: Âêå‰∏Ä‰∏™consumer group(group.idÁõ∏Á≠â)‰∏ãÂè™ËÉΩÊúâ‰∏Ä‰∏™Ê∂àË¥πËÄÖÂèØ‰ª•Ê∂àË¥πÔºåËøô‰∏™ÂàöÂºÄÂßãÁ°ÆÂÆû‰ºöËÆ©ÂæàÂ§ö‰∫∫Ë∏©Âùë„ÄÇ Â§öÁ∫øÁ®ãÊ∂àË¥πÈíàÂØπ‰∫éÂçïÁ∫øÁ®ãÊ∂àË¥πÂÆûÁé∞Ëµ∑Êù•Ëá™ÁÑ∂ÊòØÊØîËæÉÁÆÄÂçïÔºå‰ΩÜÊòØÊïàÁéá‰πüÊòØË¶ÅÂ§ßÊâìÊäòÊâ£ÁöÑ„ÄÇ ‰∏∫Ê≠§ÊàëÂÅö‰∫Ü‰∏Ä‰∏™ÊµãËØïÔºå‰ΩøÁî®‰πãÂâçÁöÑÂçïÁ∫øÁ®ãÊ∂àË¥π120009Êù°Êï∞ÊçÆÁöÑÁªìÊûúÂ¶Ç‰∏ã: ÊÄªÂÖ±Ëä±‰∫Ü12450ÊØ´Áßí„ÄÇ ÈÇ£‰πàÊç¢ÊàêÂ§öÁ∫øÁ®ãÊ∂àË¥πÊÄé‰πàÂÆûÁé∞Âë¢Ôºü Êàë‰ª¨ÂèØ‰ª•Âà©Áî®partitionÁöÑÂàÜÂå∫ÁâπÊÄßÊù•ÊèêÈ´òÊ∂àË¥πËÉΩÂäõÔºåÂçïÁ∫øÁ®ãÁöÑÊó∂ÂÄôÁ≠â‰∫éÊòØ‰∏Ä‰∏™Á∫øÁ®ãË¶ÅÊääÊâÄÊúâÂàÜÂå∫ÈáåÁöÑÊï∞ÊçÆÈÉΩÊ∂àË¥π‰∏ÄÈÅçÔºåÂ¶ÇÊûúÊç¢ÊàêÂ§öÁ∫øÁ®ãÂ∞±ÂèØ‰ª•ËÆ©‰∏Ä‰∏™Á∫øÁ®ãÂè™Ê∂àË¥π‰∏Ä‰∏™ÂàÜÂå∫,ËøôÊ†∑ÊïàÁéáËá™ÁÑ∂Â∞±ÊèêÈ´ò‰∫ÜÔºåÊâÄ‰ª•Á∫øÁ®ãÊï∞coreSize&lt;=partition„ÄÇ È¶ñÂÖàÊù•Áúã‰∏ãÂÖ•Âè£: 1234567891011121314151617public class ConsumerThreadMain &#123; private static String brokerList = &quot;localhost:9094&quot;; private static String groupId = &quot;group1&quot;; private static String topic = &quot;test&quot;; /** * Á∫øÁ®ãÊï∞Èáè */ private static int threadNum = 3; public static void main(String[] args) &#123; ConsumerGroup consumerGroup = new ConsumerGroup(threadNum, groupId, topic, brokerList); consumerGroup.execute(); &#125;&#125; ÂÖ∂‰∏≠ÁöÑConsumerGroupÁ±ª:12345678910111213141516171819202122232425262728293031323334353637383940public class ConsumerGroup &#123; private static Logger LOGGER = LoggerFactory.getLogger(ConsumerGroup.class); /** * Á∫øÁ®ãÊ±† */ private ExecutorService threadPool; private List&lt;ConsumerCallable&gt; consumers ; public ConsumerGroup(int threadNum, String groupId, String topic, String brokerList) &#123; ThreadFactory namedThreadFactory = new ThreadFactoryBuilder() .setNameFormat(&quot;consumer-pool-%d&quot;).build(); threadPool = new ThreadPoolExecutor(threadNum, threadNum, 0L, TimeUnit.MILLISECONDS, new LinkedBlockingQueue&lt;Runnable&gt;(1024), namedThreadFactory, new ThreadPoolExecutor.AbortPolicy()); consumers = new ArrayList&lt;ConsumerCallable&gt;(threadNum); for (int i = 0; i &lt; threadNum; i++) &#123; ConsumerCallable consumerThread = new ConsumerCallable(brokerList, groupId, topic); consumers.add(consumerThread); &#125; &#125; /** * ÊâßË°å‰ªªÂä° */ public void execute() &#123; long startTime = System.currentTimeMillis() ; for (ConsumerCallable runnable : consumers) &#123; Future&lt;ConsumerFuture&gt; future = threadPool.submit(runnable) ; &#125; if (threadPool.isShutdown())&#123; long endTime = System.currentTimeMillis() ; LOGGER.info(&quot;main thread use &#123;&#125; Millis&quot; ,endTime -startTime) ; &#125; threadPool.shutdown(); &#125;&#125; ÊúÄÂêéÁúüÊ≠£ÁöÑÊâßË°åÈÄªËæëConsumerCallable:1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980public class ConsumerCallable implements Callable&lt;ConsumerFuture&gt; &#123; private static Logger LOGGER = LoggerFactory.getLogger(ConsumerCallable.class); private AtomicInteger totalCount = new AtomicInteger() ; private AtomicLong totalTime = new AtomicLong() ; private AtomicInteger count = new AtomicInteger() ; /** * ÊØè‰∏™Á∫øÁ®ãÁª¥Êä§KafkaConsumerÂÆû‰æã */ private final KafkaConsumer&lt;String, String&gt; consumer; public ConsumerCallable(String brokerList, String groupId, String topic) &#123; Properties props = new Properties(); props.put(&quot;bootstrap.servers&quot;, brokerList); props.put(&quot;group.id&quot;, groupId); //Ëá™Âä®Êèê‰∫§‰ΩçÁßª props.put(&quot;enable.auto.commit&quot;, &quot;true&quot;); props.put(&quot;auto.commit.interval.ms&quot;, &quot;1000&quot;); props.put(&quot;session.timeout.ms&quot;, &quot;30000&quot;); props.put(&quot;key.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;); props.put(&quot;value.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;); this.consumer = new KafkaConsumer&lt;&gt;(props); consumer.subscribe(Arrays.asList(topic)); &#125; /** * Computes a result, or throws an exception if unable to do so. * * @return computed result * @throws Exception if unable to compute a result */ @Override public ConsumerFuture call() throws Exception &#123; boolean flag = true; int failPollTimes = 0 ; long startTime = System.currentTimeMillis() ; while (flag) &#123; // ‰ΩøÁî®200ms‰Ωú‰∏∫Ëé∑ÂèñË∂ÖÊó∂Êó∂Èó¥ ConsumerRecords&lt;String, String&gt; records = consumer.poll(200); if (records.count() &lt;= 0)&#123; failPollTimes ++ ; if (failPollTimes &gt;= 20)&#123; LOGGER.debug(&quot;ËææÂà∞&#123;&#125;Ê¨°Êï∞ÔºåÈÄÄÂá∫ &quot;,failPollTimes); flag = false ; &#125; continue ; &#125; //Ëé∑ÂèñÂà∞‰πãÂêéÂàôÊ∏ÖÈõ∂ failPollTimes = 0 ; LOGGER.debug(&quot;Êú¨Ê¨°Ëé∑Âèñ:&quot;+records.count()); count.addAndGet(records.count()) ; totalCount.addAndGet(count.get()) ; long endTime = System.currentTimeMillis() ; if (count.get() &gt;= 10000 )&#123; LOGGER.info(&quot;this consumer &#123;&#125; recordÔºåuse &#123;&#125; milliseconds&quot;,count,endTime-startTime); totalTime.addAndGet(endTime-startTime) ; startTime = System.currentTimeMillis() ; count = new AtomicInteger(); &#125; LOGGER.debug(&quot;end totalCount=&#123;&#125;,min=&#123;&#125;&quot;,totalCount,totalTime); /*for (ConsumerRecord&lt;String, String&gt; record : records) &#123; // ÁÆÄÂçïÂú∞ÊâìÂç∞Ê∂àÊÅØ LOGGER.debug(record.value() + &quot; consumed &quot; + record.partition() + &quot; message with offset: &quot; + record.offset()); &#125;*/ &#125; ConsumerFuture consumerFuture = new ConsumerFuture(totalCount.get(),totalTime.get()) ; return consumerFuture ; &#125;&#125; ÁêÜ‰∏Ä‰∏ãÈÄªËæë: ÂÖ∂ÂÆûÂ∞±ÊòØÂàùÂßãÂåñÂá∫‰∏â‰∏™Ê∂àË¥πËÄÖÂÆû‰æãÔºåÁî®‰∫é‰∏â‰∏™Á∫øÁ®ãÊ∂àË¥π„ÄÇÂÖ∂‰∏≠Âä†ÂÖ•‰∫Ü‰∏Ä‰∫õÁªüËÆ°ÔºåÊúÄÂêé‰πüÊòØÊ∂àË¥π120009Êù°Êï∞ÊçÆÁªìÊûúÂ¶Ç‰∏ã„ÄÇ Áî±‰∫éÊòØÂπ∂Ë°åËøêË°åÔºåÂèØËßÅÊ∂àË¥π120009Êù°Êï∞ÊçÆÂèØ‰ª•ÊèêÈ´ò2ÁßíÂ∑¶Âè≥ÔºåÂΩìÊï∞ÊçÆ‰ª•Êõ¥È´òÁöÑÊï∞ÈáèÁ∫ßÊèêÂçáÂêéÊïàÊûú‰ºöÊõ¥Âä†ÊòéÊòæ„ÄÇ ‰ΩÜËøô‰πüÊúâ‰∏Ä‰∫õÂºäÁ´Ø: ÁÅµÊ¥ªÂ∫¶‰∏çÈ´òÔºåÂΩìÂàÜÂå∫Êï∞ÈáèÂèòÊõ¥‰πãÂêé‰∏çËÉΩËá™ÈÄÇÂ∫îË∞ÉÊï¥„ÄÇ Ê∂àË¥πÈÄªËæëÂíåÂ§ÑÁêÜÈÄªËæëÂú®Âêå‰∏Ä‰∏™Á∫øÁ®ãÔºåÂ¶ÇÊûúÂ§ÑÁêÜÈÄªËæëËæÉ‰∏∫Â§çÊùÇ‰ºöÂΩ±ÂìçÊïàÁéáÔºåËÄ¶Âêà‰πüËæÉÈ´ò„ÄÇÂΩìÁÑ∂Ëøô‰∏™Â§ÑÁêÜÈÄªËæëÂèØ‰ª•ÂÜçÈÄöËøá‰∏Ä‰∏™ÂÜÖÈÉ®ÈòüÂàóÂèëÂá∫ÂéªÁî±Âè¶Â§ñÁöÑÁ®ãÂ∫èÊù•Â§ÑÁêÜ‰πüÊòØÂèØ‰ª•ÁöÑ„ÄÇ ÊÄªÁªìKafkaÁöÑÁü•ËØÜÁÇπËøòÊòØËæÉÂ§öÔºåKafkaÁöÑ‰ΩøÁî®‰πüËøú‰∏çËøô‰∫õ„ÄÇ‰πãÂêé‰ºöÁªßÁª≠ÂàÜ‰∫´‰∏Ä‰∫õÂÖ≥‰∫éKafkaÁõëÊéßÁ≠âÁõ∏ÂÖ≥ÂÜÖÂÆπ„ÄÇ È°πÁõÆÂú∞ÂùÄÔºöhttps://github.com/crossoverJie/SSM.git ‰∏™‰∫∫ÂçöÂÆ¢Ôºöhttp://crossoverjie.top„ÄÇ]]></content>
      <categories>
        <category>SSM</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Kafka</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[sbc(‰∫î)Hystrix-ÊúçÂä°ÂÆπÈîô‰∏é‰øùÊä§]]></title>
    <url>%2F2017%2F09%2F20%2Fsbc5%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄÁúãËøá Â∫îÁî®ÈôêÊµÅÁöÑÊúãÂèãÂ∫îËØ•Áü•ÈÅìÔºåÈôêÊµÅÁöÑÊ†πÊú¨ÁõÆÁöÑÂ∞±ÊòØ‰∏∫‰∫Ü‰øùÈöúÊúçÂä°ÁöÑÈ´òÂèØÁî®„ÄÇ Êú¨Ê¨°ÂÜçÂÄüÂä©SpringCloud‰∏≠ÁöÑÈõÜÊàêÁöÑHystrixÁªÑ‰ª∂Êù•Ë∞àË∞àÊúçÂä°ÂÆπÈîô„ÄÇ ÂÖ∂ÂÆû‰∫ßÁîüÊüêÈ°πÈúÄÊ±ÇÁöÑÂéüÂõ†ÈÉΩÊòØ‰∏∫‰∫ÜËß£ÂÜ≥Êüê‰∏™ÈúÄÊ±Ç„ÄÇÂΩìÊàë‰ª¨Â∞ÜÂ∫îÁî®ËøõË°åÂàÜÂ∏ÉÂºèÊ®°ÂùóÈÉ®ÁΩ≤‰πãÂêé,ÂêÑ‰∏™Ê®°Âùó‰πãÈó¥ÈÄöËøáËøúÁ®ãË∞ÉÁî®ÁöÑÊñπÂºèËøõË°å‰∫§‰∫í(RPC)„ÄÇÊãøÊàë‰ª¨Âπ≥Êó∂ÊúÄÂ∏∏ËßÅÁöÑ‰∏ãÂçï‰π∞ÂïÜÂìÅÊù•ËØ¥ÔºåÁÇπÂáª‰∏ãÂçïÊåâÈíÆÁöÑ‰∏ÄÁû¨Èó¥ÂèØËÉΩ‰ºöÂêëÂèëÈÄÅÁöÑËØ∑Ê±ÇÂåÖÂê´Ôºö ËØ∑Ê±ÇËÆ¢ÂçïÁ≥ªÁªüÂàõÂª∫ËÆ¢Âçï„ÄÇ ËØ∑Ê±ÇÂ∫ìÂ≠òÁ≥ªÁªüÊâ£Èô§Â∫ìÂ≠ò„ÄÇ ËØ∑Ê±ÇÁî®Êà∑Á≥ªÁªüÊõ¥Êñ∞Áî®Êà∑‰∫§ÊòìËÆ∞ÂΩï„ÄÇ ËøôÂÖ∂‰∏≠ÁöÑÊØè‰∏ÄÊ≠•ÈÉΩÊúâÂèØËÉΩÂõ†‰∏∫ÁΩëÁªú„ÄÅËµÑÊ∫ê„ÄÅÊúçÂä°Âô®Á≠âÂéüÂõ†ÈÄ†ÊàêÂª∂ËøüÂìçÂ∫îÁîöËá≥ÊòØË∞ÉÁî®Â§±Ë¥•„ÄÇÂΩìÂêéÈù¢ÁöÑËØ∑Ê±ÇÊ∫êÊ∫ê‰∏çÊñ≠ÁöÑËøáÊù•Êó∂Âª∂ËøüÁöÑËµÑÊ∫ê‰πüÊ≤°ÊúâÁöÑÂà∞ÈáäÊîæÔºåËøôÊ†∑ÁöÑÂ†ÜÁßØÂæàÊúâÂèØËÉΩÊääÂÖ∂‰∏≠‰∏Ä‰∏™Ê®°ÂùóÊãñÂûÆÔºåÂÖ∂‰∏≠ÁöÑ‰æùËµñÂÖ≥Á≥ªÂèàÊúâÂèØËÉΩÊääÊï¥‰∏™Ë∞ÉÁî®Èìæ‰∏≠ÁöÑÂ∫îÁî®OverÊúÄÂêéÂØºËá¥Êï¥‰∏™Á≥ªÁªü‰∏çÂèØËÉΩ„ÄÇËøôÊ†∑Â∞±‰ºö‰∫ßÁîü‰∏ÄÁßçÁé∞Ë±°:Èõ™Â¥©ÊïàÂ∫î„ÄÇ ‰πãÂâçËÆ≤Âà∞ÁöÑÈôêÊµÅ‰πüËÉΩËµ∑Âà∞‰∏ÄÂÆöÁöÑ‰øùÊä§‰ΩúÁî®Ôºå‰ΩÜËøòËøúËøú‰∏çÂ§ü„ÄÇÊàë‰ª¨ÈúÄË¶Å‰ªéÂêÑ‰∏™ÊñπÈù¢Êù•‰øùÈöúÊúçÂä°ÁöÑÈ´òÂèØÁî®„ÄÇ ÊØîÂ¶ÇÔºö Ë∂ÖÊó∂ÈáçËØï„ÄÇ Êñ≠Ë∑ØÂô®Ê®°Âºè„ÄÇ ÊúçÂä°ÈôçÁ∫ß„ÄÇÁ≠âÂêÑ‰∏™ÊñπÈù¢Êù•‰øùÈöú„ÄÇ ‰ΩøÁî®HystrixSpringCloud‰∏≠Â∑≤Áªè‰∏∫Êàë‰ª¨ÈõÜÊàê‰∫ÜNetflixÂºÄÊ∫êÁöÑHystrixÊ°ÜÊû∂Ôºå‰ΩøÁî®ËØ•Ê°ÜÊû∂ÂèØ‰ª•ÂæàÂ•ΩÁöÑÂ∏ÆÊàë‰ª¨ÂÅöÂà∞ÊúçÂä°ÂÆπÈîô„ÄÇ HystrixÁÆÄ‰ªã‰∏ãÈù¢ÊòØ‰∏ÄÂº†ÂÆòÊñπÁöÑÊµÅÁ®ãÂõæ: ÁÆÄÂçï‰ªãÁªç‰∏ã: Âú®ËøúÁ®ãË∞ÉÁî®Êó∂ÔºåÂ∞ÜËØ∑Ê±ÇÂ∞ÅË£ÖÂà∞HystrixCommandËøõË°åÂêåÊ≠•ÊàñÊòØÂºÇÊ≠•Ë∞ÉÁî®ÔºåÂú®Ë∞ÉÁî®ËøáÁ®ã‰∏≠Âà§Êñ≠ÁÜîÊñ≠Âô®ÊòØÂê¶ÊâìÂºÄ„ÄÅÁ∫øÁ®ãÊ±†ÊàñÊòØ‰ø°Âè∑ÈáèÊòØÂê¶È•±Âíå„ÄÅÊâßË°åËøáÁ®ã‰∏≠ÊòØÂê¶ÊäõÂá∫ÂºÇÂ∏∏ÔºåÂ¶ÇÊûúÊòØÁöÑËØùÂ∞±‰ºöËøõÂÖ•ÂõûÈÄÄÈÄªËæë„ÄÇÂπ∂‰∏îÊï¥‰∏™ËøáÁ®ã‰∏≠ÈÉΩ‰ºöÊî∂ÈõÜËøêË°åÁä∂ÊÄÅÊù•ÊéßÂà∂Êñ≠Ë∑ØÂô®ÁöÑÁä∂ÊÄÅ„ÄÇ ‰∏ç‰ΩÜÂ¶ÇÊ≠§ËØ•Ê°ÜÊû∂ËøòÊã•ÊúâËá™ÊàëÊÅ¢Â§çÂäüËÉΩÔºåÂΩìÊñ≠Ë∑ØÂô®ÊâìÂºÄÂêéÔºåÊØèÊ¨°ËØ∑Ê±ÇÈÉΩ‰ºöËøõÂÖ•ÂõûÈÄÄÈÄªËæë„ÄÇÂΩìÊàë‰ª¨ÁöÑÂ∫îÁî®ÊÅ¢Â§çÊ≠£Â∏∏Âêé‰πü‰∏çËÉΩÂÜçËøõÂÖ•ÂõûÈÄÄÈÄªËæëÂêß„ÄÇ ÊâÄ‰ª•hystrix‰ºöÂú®Êñ≠Ë∑ØÂô®ÊâìÂºÄÂêéÁöÑ‰∏ÄÂÆöÊó∂Èó¥Â∞ÜËØ∑Ê±ÇÂèëÈÄÅÂà∞ÊúçÂä°Êèê‰æõËÄÖÔºåÂ¶ÇÊûúÊ≠£Â∏∏ÂìçÂ∫îÂ∞±ÂÖ≥Èó≠Êñ≠Ë∑ØÂô®ÔºåÂèç‰πãÂàôÁªßÁª≠ÊâìÂºÄÔºåËøôÊ†∑Â∞±ËÉΩÂæàÁÅµÊ¥ªÁöÑËá™Êàë‰øÆÂ§ç‰∫Ü„ÄÇ FeignÊï¥ÂêàHystrixÂú®‰πãÂâçÁöÑÁ´†ËäÇ‰∏≠Â∑≤Áªè‰ΩøÁî®FeignÊù•ËøõË°åÂ£∞ÊòéÂºèË∞ÉÁî®‰∫ÜÔºåÂπ∂‰∏îÂú®ÂÆûÈôÖÂºÄÂèë‰∏≠‰πüÊòØÂ¶ÇÊ≠§ÔºåÊâÄ‰ª•ËøôÊ¨°Êàë‰ª¨Â∞±Áõ¥Êé•Áî®FeignÊù•Êï¥ÂêàHystrix„ÄÇ ‰ΩøÁî®‰∫ÜÈ°πÁõÆÂéüÊúâÁöÑsbc-user,sbc-orderÊù•ËøõË°åÊºîÁ§∫ÔºåË∞ÉÁî®ÂÖ≥Á≥ªÂ¶Ç‰∏ãÂõæ: UserÂ∫îÁî®ÈÄöËøáOrderÊèê‰æõÂá∫Êù•ÁöÑorder-client‰æùËµñË∞ÉÁî®‰∫ÜOrder‰∏≠ÁöÑÂàõÂª∫ËÆ¢ÂçïÊúçÂä°„ÄÇ ÂÖ∂‰∏≠‰∏ªË¶Å‰øÆÊîπÁöÑÂ∞±ÊòØorder-clientÔºåÂú®‰πãÂâçÁöÑOrderServiceClientÊé•Âè£‰∏≠Â¢ûÂä†‰∫Ü‰ª•‰∏ãÊ≥®Ëß£: 12345678910111213@RequestMapping(value="/orderService")@FeignClient(name="sbc-order", // fallbackFactory = OrderServiceFallbackFactory.class, // FIXME: 2017/9/4 Â¶ÇÊûúÈÖçÁΩÆ‰∫Üfallback ÈÇ£‰πàfallbackFactoryÂ∞Ü‰ºöÊó†Êïà fallback = OrderServiceFallBack.class, configuration = OrderConfig.class)@RibbonClientpublic interface OrderServiceClient extends OrderService&#123; @ApiOperation("Ëé∑ÂèñËÆ¢ÂçïÂè∑") @RequestMapping(value = "/getOrderNo", method = RequestMethod.POST) BaseResponse&lt;OrderNoResVO&gt; getOrderNo(@RequestBody OrderNoReqVO orderNoReq) ;&#125; Áî±‰∫éFeignÂ∑≤ÁªèÈªòËÆ§Êï¥Âêà‰∫ÜHystrixÊâÄ‰ª•‰∏çÈúÄË¶ÅÂÜçÈ¢ùÂ§ñÂä†ÂÖ•‰æùËµñ„ÄÇ ÊúçÂä°ÈôçÁ∫ßÂØπÂ∫îÁöÑ@FeignClient‰∏≠ÁöÑfallbackÂ±ûÊÄßÂàôÊòØÊúçÂä°ÂÆπÈîô‰∏≠ÂæàÂÖ≥ÈîÆÁöÑÊúçÂä°ÈôçÁ∫ßÁöÑÂÖ∑‰ΩìÂÆûÁé∞ÔºåÊù•ÁúãÁúãOrderServiceFallBackÁ±ª: 123456789101112public class OrderServiceFallBack implements OrderServiceClient &#123; @Override public BaseResponse&lt;OrderNoResVO&gt; getOrderNo(@RequestBody OrderNoReqVO orderNoReq) &#123; BaseResponse&lt;OrderNoResVO&gt; baseResponse = new BaseResponse&lt;&gt;() ; OrderNoResVO vo = new OrderNoResVO() ; vo.setOrderId(123456L); baseResponse.setDataBody(vo); baseResponse.setMessage(StatusEnum.FALLBACK.getMessage()); baseResponse.setCode(StatusEnum.FALLBACK.getCode()); return baseResponse; &#125;&#125; ËØ•Á±ªÂÆûÁé∞‰∫ÜOrderServiceClientÊé•Âè£ÔºåÂèØ‰ª•ÂæàÊòéÊòæÁöÑÁúãÂá∫ÂÖ∂‰∏≠ÁöÑgetOrderNo()ÊñπÊ≥ïÂ∞±ÊòØÊúçÂä°ÈôçÁ∫ßÊó∂ÊâÄËß¶ÂèëÁöÑÈÄªËæë„ÄÇ ÂÖâÊúâÂÆûÁé∞Ëøò‰∏çÂ§üÔºåÊàë‰ª¨ÈúÄË¶ÅÂ∞ÜÊîπÁ±ªÂä†ÂÖ•Âà∞Spring‰∏≠ÁÆ°ÁêÜËµ∑Êù•„ÄÇËøôÊ†∑‰∏äÊñá‰∏≠@FeignClientÁöÑconfigurationÂ±ûÊÄßÂ∞±Ëµ∑Âà∞‰ΩúÁî®‰∫ÜÔºåÊù•ÁúãÁúãÂØπÂ∫îÁöÑOrderConfigÁöÑ‰ª£Á†Å: 123456789101112@Configurationpublic class OrderConfig &#123; @Bean public OrderServiceFallBack fallBack()&#123; return new OrderServiceFallBack(); &#125; @Bean public OrderServiceFallbackFactory factory()&#123; return new OrderServiceFallbackFactory(); &#125;&#125; ÂÖ∂‰∏≠new OrderServiceFallBack()Âπ∂Áî®‰∫Ü@BeanÊ≥®Ëß£ÔºåÁ≠âÂêå‰∫é: 12&lt;bean id=&quot;orderServiceFallBack&quot; class=&quot;com.crossoverJie.order.feign.config.OrderServiceFallBack&quot;&gt;&lt;/bean&gt; ËøôÊ†∑ÊØèÂΩìËØ∑Ê±ÇÂ§±Ë¥•Â∞±‰ºöÊâßË°åÂõûÈÄÄÈÄªËæëÔºåÂ¶Ç‰∏ãÂõæ: ÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØÂç≥‰æøÊòØÊâßË°å‰∫ÜÂõûÈÄÄÈÄªËæëÊñ≠Ë∑ØÂô®‰πü‰∏ç‰∏ÄÂÆöÊâìÂºÄ‰∫ÜÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáÂ∫îÁî®ÁöÑhealthÁ´ØÁÇπÊù•Êü•ÁúãHystrixÁöÑÁä∂ÊÄÅ„ÄÇ ps:ÊÉ≥Ë¶ÅÊü•ÁúãËØ•Á´ØÁÇπÈúÄË¶ÅÂä†ÂÖ•‰ª•‰∏ã‰æùËµñ: 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; Â∞±ÊãøÂàöÊâçÁöÑ‰æãÂ≠êÊù•ËØ¥ÔºåÂÖàÂÖ≥Èó≠OrderÂ∫îÁî®ÔºåÂú®SwaggerËÆøÈóÆ‰∏ãÈù¢Ëøô‰∏™Êé•Âè£ÔºåËÇØÂÆöÊòØ‰ºöËøõÂÖ•ÂõûÈÄÄÈÄªËæë: 12345678910@RestController@Api("Áî®Êà∑ÊúçÂä°API")@RequestMapping(value = "/userService")@Validatedpublic interface UserService &#123; @ApiOperation("hystrixÂÆπÈîôË∞ÉÁî®") @RequestMapping(value = "/getUserByHystrix", method = RequestMethod.POST) BaseResponse&lt;OrderNoResVO&gt; getUserByHystrix(@RequestBody UserReqVO userReqVO) ;&#125; Êü•ÁúãhealthÁ´ØÁÇπ: ÂèëÁé∞HystrixÁöÑÁä∂ÊÄÅ‰æùÁÑ∂ÊòØUPÁä∂ÊÄÅÔºåË°®ÊòéÂΩìÂâçÊñ≠Ë∑ØÂô®Âπ∂Ê≤°ÊúâÊâìÂºÄ„ÄÇ ÂèçÂ§çË∞ÉÁî®Â§öÊ¨°Êé•Âè£‰πãÂêéÂÜçÊ¨°Êü•ÁúãhealthÁ´ØÁÇπ: ÂèëÁé∞Ëøô‰∏™Êó∂ÂÄôÊñ≠Ë∑ØÂô®Â∑≤ÁªèÊâìÂºÄ‰∫Ü„ÄÇ ËøôÊòØÂõ†‰∏∫Êñ≠Ë∑ØÂô®Âè™ÊúâÂú®ËææÂà∞‰∫Ü‰∏ÄÂÆöÁöÑÂ§±Ë¥•ÈòàÂÄº‰πãÂêéÊâç‰ºöÊâìÂºÄ„ÄÇ ËæìÂá∫ÂºÇÂ∏∏ËøõÂÖ•ÂõûÈÄÄÈÄªËæë‰πãÂêéËøò‰∏çÁÆóÂÆåÔºåÂ§ßÈÉ®ÂàÜÂú∫ÊôØÊàë‰ª¨ÈÉΩÈúÄË¶ÅËÆ∞ÂΩï‰∏∫‰ªÄ‰πàÂõûÈÄÄÔºå‰πüÂ∞±ÊòØÂÖ∑‰ΩìÁöÑÂºÇÂ∏∏„ÄÇËøô‰∫õ‰ø°ÊÅØÂØπÊàë‰ª¨ÂêéÁª≠ÁöÑÁ≥ªÁªüÁõëÊéßÔºåÂ∫îÁî®Ë∞É‰ºò‰πüÊúâÂæàÂ§ßÂ∏ÆÂä©„ÄÇ ÂÆûÁé∞Ëµ∑Êù•‰πüÂæàÁÆÄÂçï:‰∏äÊñá‰∏≠Âú®@FeignClientÊ≥®Ëß£‰∏≠Âä†ÂÖ•ÁöÑfallbackFactory = OrderServiceFallbackFactory.classÂ±ûÊÄßÂàôÊòØÁî®‰∫éÂ§ÑÁêÜÂõûÈÄÄÈÄªËæë‰ª•ÂèäÂåÖÂê´ÂºÇÂ∏∏‰ø°ÊÅØÔºö 123456789101112131415161718192021222324252627282930/** * Function:Êü•ÁúãfallbackÂéüÂõ† * * @author crossoverJie * Date: 2017/9/4 00:45 * @since JDK 1.8 */public class OrderServiceFallbackFactory implements FallbackFactory&lt;OrderServiceClient&gt;&#123; private final static Logger LOGGER = LoggerFactory.getLogger(OrderServiceFallbackFactory.class); @Override public OrderServiceClient create(Throwable throwable) &#123; return new OrderServiceClient() &#123; @Override public BaseResponse&lt;OrderNoResVO&gt; getOrderNo(@RequestBody OrderNoReqVO orderNoReq) &#123; LOGGER.error("fallback:" + throwable); BaseResponse&lt;OrderNoResVO&gt; baseResponse = new BaseResponse&lt;&gt;() ; OrderNoResVO vo = new OrderNoResVO() ; vo.setOrderId(123456L); baseResponse.setDataBody(vo); baseResponse.setMessage(StatusEnum.FALLBACK.getMessage()); baseResponse.setCode(StatusEnum.FALLBACK.getCode()); return baseResponse; &#125; &#125;; &#125;&#125; ‰ª£Á†ÅÂæàÁÆÄÂçïÔºåÂÆûÁé∞‰∫ÜFallbackFactoryÊé•Âè£‰∏≠ÁöÑcreate()ÊñπÊ≥ïÔºåËØ•ÊñπÊ≥ïÁöÑÂÖ•ÂèÇÂ∞±ÊòØÂºÇÂ∏∏‰ø°ÊÅØÔºåÂèØ‰ª•ÊåâÁÖßÊàë‰ª¨ÁöÑÈúÄË¶ÅËá™Ë°åÂ§ÑÁêÜÔºåÂêéÈù¢ÂàôÊòØÂíå‰πãÂâç‰∏ÄÊ†∑ÁöÑÂõûÈÄÄÂ§ÑÁêÜ„ÄÇ 2017-09-21 13:22:30.307 ERROR 27838 --- [rix-sbc-order-1] c.c.o.f.f.OrderServiceFallbackFactory : fallback:java.lang.RuntimeException: com.netflix.client.ClientException: Load balancer does not have available server for client: sbc-order„ÄÇ Note: fallbackFactoryÂíåfallbackÂ±ûÊÄß‰∏çÂèØÂÖ±Áî®„ÄÇ HystrixÁõëÊéßHystrixËøòËá™Â∏¶‰∫Ü‰∏ÄÂ•óÁõëÊéßÁªÑ‰ª∂ÔºåÂè™Ë¶Å‰æùËµñ‰∫Üspring-boot-starter-actuatorÂç≥ÂèØÈÄöËøá/hystrix.streamÁ´ØÁÇπÊù•Ëé∑ÂæóÁõëÊéß‰ø°ÊÅØ„ÄÇ ÂÜ∞ÂÜ∑ÁöÑÊï∞ÊçÆËÇØÂÆöÊ≤°ÊúâÂÆûÊó∂ÁöÑÂõæË°®Êù•ÁöÑÁõ¥ËßÇÔºåÊâÄ‰ª•Hystrix‰πüËá™Â∏¶Dashboard„ÄÇ Hystrix‰∏éTurbineËÅöÂêàÁõëÊéß‰∏∫Ê≠§Êàë‰ª¨Êñ∞Âª∫‰∫Ü‰∏Ä‰∏™Â∫îÁî®sbc-hystrix-turbineÊù•ÊòæÁ§∫hystrix-dashboard„ÄÇÁõÆÂΩïÁªìÊûÑÂíåÊôÆÈÄöÁöÑspringbootÂ∫îÁî®Ê≤°ÊúâÂ∑ÆÂºÇÔºåÁúãÁúã‰∏ªÁ±ª: 1234567891011//ÂºÄÂêØEnableTurbine@EnableTurbine@SpringBootApplication@EnableHystrixDashboardpublic class SbcHystrixTurbineApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(SbcHystrixTurbineApplication.class, args); &#125;&#125; ÂÖ∂‰∏≠‰ΩøÁî®@EnableHystrixDashboardÂºÄÂêØDashboard @EnableTurbineÂºÄÂêØTurbineÊîØÊåÅ„ÄÇ ‰ª•‰∏äËøô‰∫õÊ≥®Ëß£ÈúÄË¶Å‰ª•‰∏ãËøô‰∫õ‰æùËµñ:12345678910111213141516&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-turbine&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-netflix-turbine&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-hystrix-dashboard&lt;/artifactId&gt;&lt;/dependency&gt; ÂÆûÈôÖÈ°πÁõÆ‰∏≠ÔºåÊàë‰ª¨ÁöÑÂ∫îÁî®ÈÉΩÊòØÂ§öËäÇÁÇπÈÉ®ÁΩ≤‰ª•ËææÂà∞È´òÂèØÁî®ÁöÑÁõÆÁöÑÔºåÂçï‰∏™ÁõëÊéßÊòæÁÑ∂‰∏çÁé∞ÂÆûÔºåÊâÄ‰ª•ÈúÄË¶Å‰ΩøÁî®TurbineÊù•ËøõË°åËÅöÂêàÁõëÊéß„ÄÇ ÂÖ≥ÈîÆÁöÑapplication.propertiesÈÖçÁΩÆÊñá‰ª∂: 123456789101112# È°πÁõÆÈÖçÁΩÆspring.application.name=sbc-hystrix-trubineserver.context-path=/server.port=8282# eurekaÂú∞ÂùÄeureka.client.serviceUrl.defaultZone=http://node1:8888/eureka/eureka.instance.prefer-ip-address=true# ÈúÄË¶ÅÂä†ÂÖ•ÁöÑÂÆû‰æãturbine.appConfig=sbc-user,sbc-orderturbine.cluster-name-expression=&quot;default&quot; ÂÖ∂‰∏≠turbine.appConfigÈÖçÁΩÆÊàë‰ª¨ÈúÄË¶ÅÁõëÊéßÁöÑÂ∫îÁî®ÔºåËøôÊ†∑ÂΩìÂ§öËäÇÁÇπÈÉ®ÁΩ≤ÁöÑÊó∂ÂÄôÂ∞±ÈùûÂ∏∏Êñπ‰æø‰∫Ü(Âêå‰∏Ä‰∏™Â∫îÁî®ÁöÑÂ§ö‰∏™ËäÇÁÇπspring.application.nameÂÄºÊòØÁõ∏ÂêåÁöÑ)„ÄÇ Â∞ÜËØ•Â∫îÁî®ÂêØÂä®ËÆøÈóÆhttp://ip:port/hystrix.streamÔºö Áî±‰∫éÊàë‰ª¨ÁöÑturbineÂíåDashboardÊòØ‰∏Ä‰∏™Â∫îÁî®ÊâÄ‰ª•ËæìÂÖ•http://localhost:8282/turbine.streamÂç≥ÂèØ„ÄÇ ËØ¶ÁªÜÊåáÊ†áÂ¶ÇÂÆòÊñπÊèèËø∞: ÈÄöËøáËØ•Èù¢ÊùøÊàë‰ª¨Â∞±ÂèØ‰ª•ÂèäÊó∂ÁöÑ‰∫ÜËß£Âà∞Â∫îÁî®ÂΩìÂâçÁöÑÂêÑ‰∏™Áä∂ÊÄÅÔºåÂ¶ÇÊûúÂÜçÂä†‰∏ä‰∏Ä‰∫õÊä•Ë≠¶Êé™ÊñΩÂ∞±ËÉΩÂ∏ÆÊàë‰ª¨ÂèäÊó∂ÁöÑÂìçÂ∫îÁîü‰∫ßÈóÆÈ¢ò„ÄÇ ÊÄªÁªìÊúçÂä°ÂÆπÈîôÁöÑÊï¥‰∏™ËøòÊòØÊØîËæÉÂ§ßÁöÑ,Âçö‰∏ª‰πüÊòØÊë∏ÁùÄÁü≥Â§¥ËøáÊ≤≥ÔºåÂÖ≥‰∫éÊú¨Ê¨°ÁöÑHystrixÂè™ÊòØ‰∏Ä‰∏™ÂÖ•Èó®ÁâàÔºåÂêéÈù¢‰ºöÊåÅÁª≠ÂàÜÊûêÂÆÉÁöÑÁ∫øÁ®ãÈöîÁ¶ª„ÄÅ‰ø°Âè∑ÈáèÈöîÁ¶ªÁ≠âÂéüÁêÜ„ÄÇ È°πÁõÆÔºöhttps://github.com/crossoverJie/springboot-cloud ÂçöÂÆ¢Ôºöhttp://crossoverjie.top„ÄÇ]]></content>
      <categories>
        <category>sbc</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>SpringBoot</tag>
        <tag>SpringCloud</tag>
        <tag>Hystrix</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SSM(ÂçÅÂÖ≠) Êõ≤Á∫øÊïëÂõΩ-KafkaÊ∂àË¥πÂºÇÂ∏∏]]></title>
    <url>%2F2017%2F09%2F05%2FSSM16%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄÊúÄËøëÁ∫ø‰∏äÈÅáÂà∞‰∏Ä‰∏™ÈóÆÈ¢ò:Âú®Ê∂àË¥πkafkaÊ∂àÊÅØÁöÑÊó∂ÂÄôÂ¶ÇÊûúÈïøÊó∂Èó¥(Â§ßÊ¶ÇÂçäÂ§©Âà∞‰∏ÄÂ§©ÁöÑÊó∂Èó¥)ÈòüÂàóÈáåÊ≤°ÊúâÊ∂àÊÅØÂ∞±ÂèØËÉΩÂÜç‰πüÊ∂àË¥π‰∏ç‰∫Ü„ÄÇÈíàÂØπËøô‰∏™ÈóÆÈ¢òÊàë‰ª¨ÂèçÂ§çË∞ÉËØïÂ§öÊ¨°„ÄÇÁ∫ø‰∏ãÊ®°ÊãüÔºåË∞ÉÊï¥‰ª£Á†ÅÔºå‰ΩÜË≤å‰ººËøòÊòØÊ≤°ÊúâÊâæÂà∞ÂéüÂõ†„ÄÇ‰ΩÜÊòØÂè™Ë¶ÅÈáçÂêØÊ∂àË¥πËøõÁ®ãÂ∞±ÂèàÂèØ‰ª•ÁªßÁª≠Ê∂àË¥π„ÄÇ Ëß£ÂÜ≥ÊñπÊ°àÁî±‰∫éÁ∫ø‰∏ä‰∏öÂä°ÈùûÂ∏∏‰æùËµñkafkaÁöÑÊ∂àË¥πÔºå‰ΩÜ‰∏ÄÊó∂Âçä‰ºö‰πüÊ≤°ÊúâÊâæÂà∞ÂéüÂõ†ÔºåÊâÄ‰ª•ÊúÄÂêéÂè™ËÉΩÊÉ≥‰∏Ä‰∏™‰∏¥Êó∂ÁöÑÊõøÊç¢ÊñπÊ°àÔºö Âü∫‰∫éÈáçÂêØÂ∞±ÂèØ‰ª•Ê∂àË¥πËøô‰∏™ÁâπÁÇπÔºåÊàë‰ª¨Âú®ÊØèÊ¨°Ê∂àË¥πÁöÑÊó∂ÂÄôÈÉΩËÆ∞‰∏ãÂΩìÂâçÁöÑÊó∂Èó¥ÁÇπÔºåÂΩìËøô‰∏™Êó∂Èó¥ÁÇπÂú®ÂçÅÂàÜÈíü‰πãÂÜÖÈÉΩÊ≤°ÊúâÊõ¥Êñ∞Êàë‰ª¨Â∞±ËÆ§‰∏∫ÂΩìÂâçÈòüÂàó‰∏≠Ê≤°ÊúâÊ∂àÊÅØ‰∫ÜÔºåÂ∞±ÈúÄË¶ÅÈáçÂêØ‰∏ãÊ∂àË¥πËøõÁ®ã„ÄÇ Êó¢ÁÑ∂ÊòØÈúÄË¶ÅÈáçÂêØÔºåÁî±‰∫éÁõÆÂâçËøòÊ≤°Êúâ‰∏äÂàÜÂ∏ÉÂºèË∞ÉÂ∫¶‰∏≠ÂøÉÊâÄ‰ª•ÈúÄË¶ÅcrontabÊù•ÈÖçÂêàË∞ÉÂ∫¶ÔºöÊØèÈöî‰∏ÄÂàÜÈíü‰ºöË∞ÉÁî®‰∏Ä‰∏™shellËÑöÊú¨ÔºåËØ•ËÑöÊú¨‰ºöÂà§Êñ≠ÂΩìÂâçËøõÁ®ãÊòØÂê¶Â≠òÂú®ÔºåÂ¶ÇÊûúÂ≠òÂú®Âàô‰ªÄ‰πàÈÉΩ‰∏ç‰ΩúÔºå‰∏çÂ≠òÂú®ÂàôÂêØÂä®Ê∂àË¥πËøõÁ®ã„ÄÇ ÂÖ∑‰ΩìÂÆûÁé∞Ê∂àË¥πÁ®ãÂ∫è:123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106/** * kafkaÊ∂àË¥π * * @author crossoverJie * @date 2017Âπ¥6Êúà19Êó• ‰∏ãÂçà3:15:16 */public class KafkaMsgConsumer &#123; private static final Logger LOGGER = LoggerFactory.getLogger(KafkaMsgConsumer.class); private static final int CORE_POOL_SIZE = 4; private static final int MAXIMUM_POOL_SIZE = 4; private static final int BLOCKING_QUEUE_CAPACITY = 4000; private static final String KAFKA_CONFIG = "kafkaConfig"; private static final ExecutorService fixedThreadPool = new ThreadPoolExecutor(CORE_POOL_SIZE, MAXIMUM_POOL_SIZE, 0L, TimeUnit.MILLISECONDS, new ArrayBlockingQueue&lt;Runnable&gt;(BLOCKING_QUEUE_CAPACITY)); //ÊúÄÂêéÊõ¥Êñ∞Êó∂Èó¥ private static AtomicLong LAST_MESSAGE_TIME = new AtomicLong(DateUtil.getLongTime()); private static MsgIterator iter = null; private static String topic;//‰∏ªÈ¢òÂêçÁß∞ static &#123; Properties properties = new Properties(); String path = System.getProperty(KAFKA_CONFIG); checkArguments(!StringUtils.isBlank(path), "ÂêØÂä®ÂèÇÊï∞‰∏≠Ê≤°ÊúâÈÖçÁΩÆkafka_easyframe_msgÂèÇÊï∞Êù•ÊåáÂÆökafkaÂêØÂä®ÂèÇÊï∞ÔºåËØ∑‰ΩøÁî®-DkafkaConfig=/path/fileName/easyframe-msg.properties"); try &#123; properties.load(new FileInputStream(new File(path))); &#125; catch (IOException e) &#123; LOGGER.error("IOException" ,e); &#125; EasyMsgConfig.setProperties(properties); &#125; private static void iteratorTopic() &#123; if (iter == null) &#123; iter = MsgUtil.consume(topic); &#125; long i = 0L; while (iter.hasNext()) &#123; i++; if (i % 10000 == 0) &#123; LOGGER.info("consume i:" + i); &#125; try &#123; String message = iter.next(); if (StringUtils.isEmpty(message)) &#123; continue; &#125; LAST_MESSAGE_TIME = new AtomicLong(DateUtil.getLongTime()); //Â§ÑÁêÜÊ∂àÊÅØ LOGGER.debug("msg = " + JSON.toJSONString(message)); &#125; catch (Exception e) &#123; LOGGER.error("KafkaMsgConsumer err:", e); try &#123; Thread.sleep(1000); &#125; catch (InterruptedException e1) &#123; LOGGER.error("Thread InterruptedException", e1); &#125; break; &#125; &#125; &#125; public static void main(String[] args) &#123; topic = System.getProperty("topic"); checkArguments(!StringUtils.isBlank(topic), "system property topic or log_path is must!"); while (true) &#123; try &#123; iteratorTopic(); &#125; catch (Exception e) &#123; MsgUtil.shutdownConsummer(); iter = null; LOGGER.error("KafkaMsgConsumer err:", e); try &#123; Thread.sleep(1000); &#125; catch (InterruptedException e1) &#123; LOGGER.error("Thread InterruptedException", e1); &#125; &#125; finally &#123; //Ê≠§Â§ÑÂÖ≥Èó≠‰πãÂêéÔºåÁî±crontabÊØèÂàÜÈíüÊ£ÄÊü•‰∏ÄÊ¨°ÔºåÊåÇÊéâÁöÑËØù‰ºöÈáçÊñ∞ÊãâËµ∑Êù• if (DateUtil.getLongTime() - LAST_MESSAGE_TIME.get() &gt; 10 * 60) &#123; //10ÂàÜÈíü fixedThreadPool.shutdown(); LOGGER.info("Á∫øÁ®ãÊ±†ÊòØÂê¶ÂÖ≥Èó≠Ôºö" + fixedThreadPool.isShutdown()); try &#123; //ÂΩìÂâçÁ∫øÁ®ãÈòªÂ°û10msÂêéÔºåÂéªÊ£ÄÊµãÁ∫øÁ®ãÊ±†ÊòØÂê¶ÁªàÊ≠¢ÔºåÁªàÊ≠¢ÂàôËøîÂõûtrue while (!fixedThreadPool.awaitTermination(10, TimeUnit.MILLISECONDS)) &#123; LOGGER.info("Ê£ÄÊµãÁ∫øÁ®ãÊ±†ÊòØÂê¶ÁªàÊ≠¢Ôºö" + fixedThreadPool.isTerminated()); &#125; &#125; catch (InterruptedException e) &#123; LOGGER.error("Á≠âÂæÖÁ∫øÁ®ãÊ±†ÂÖ≥Èó≠ÈîôËØØ", e); &#125; LOGGER.info("Á∫øÁ®ãÊ±†ÊòØÂê¶ÁªàÊ≠¢Ôºö" + fixedThreadPool.isTerminated()); LOGGER.info("in 10 min dont have data break"); break; &#125; &#125; &#125; LOGGER.info("app shutdown"); System.exit(0); &#125;&#125; Âú®Á∫ø‰ª£Á†Å ÈúÄË¶ÅÈÖçÂêà‰ª•‰∏ãËøô‰∏™shellËÑöÊú¨ËøêË°å: 1234567891011121314151617181920#!/bin/sh#crontab# * * * * * sh /data/schedule/kafka/run-kafka-consumer.sh &gt;&gt;/data/schedule/kafka/run-sms-log.log# Â¶ÇÊûúËøõÁ®ãÂ≠òÂú®Â∞±‰∏çÂêØÂä®a1=`ps -ef|grep &apos;KafkaMsgConsumer&apos;|grep -v grep|wc -l`if [ $a1 -gt 0 ];then echo &quot;======= `date +&apos;%Y-%m-%d %H:%M:%S&apos;` KafkaMsgConsumer is EXIT...======= &quot; exitfiLANG=&quot;zh_CN.UTF-8&quot;nohup /opt/java/jdk1.7.0_80/bin/java -d64 -Djava.security.egd=file:/dev/./urandom-Djava.ext.dirs=/opt/tomcat/webapps/ROOT/WEB-INF/lib-Dtopic=TOPIC_A-Dlogback.configurationFile=/data/schedule/kafka/logback.xml-DkafkaConfig=/opt/tomcat/iopconf/easyframe-msg.properties-classpath /opt/tomcat/webapps/ROOT/WEB-INF/classes com.crossoverJie.kafka.SMSMsgConsumer &gt;&gt; /data/schedule/kafka/smslog/kafka.log 2&gt;&amp;1 &amp;echo &quot;`date +&apos;%Y-%m-%d %H:%M:%S&apos;` KafkaMsgConsumer running....&quot; Âú®Á∫ø‰ª£Á†Å ÂÜçÈÖçÂêàcrontabÁöÑË∞ÉÂ∫¶:1* * * * * sh /data/schedule/kafka/run-kafka-consumer.sh &gt;&gt;/data/schedule/kafka/run-sms-log.log Âç≥ÂèØ„ÄÇ ÊÄªÁªìËôΩËØ¥Â§ÑÁêÜËµ∑Êù•ÂæàÁÆÄÂçïÔºå‰ΩÜ‰æùÁÑ∂ÊòØÊ≤ªÊ†á‰∏çÊ≤ªÊú¨Ôºå‰æùËµñÁöÑ‰∏úË•øÊØîËæÉÂ§ö(shellËÑöÊú¨ÔºåË∞ÉÂ∫¶)„ÄÇÊâÄ‰ª•‰πüÈóÆÈóÆÂêÑ‰ΩçÊúâÊ≤°Êúâ‰ªÄ‰πàÊÄùË∑ØÔºö Ê∂àË¥πÁ®ãÂ∫èÁî®ÁöÑ:https://github.com/linzhaoming/easyframe-msg Áîü‰∫ßÈÖçÁΩÆ: ‰∏âÂè∞kafka„ÄÅZKÁªÑÊàêÁöÑÈõÜÁæ§„ÄÇ ÂÖ∂‰∏≠‰πüÊúâÂÖ∂‰ªñÂõ¢ÈòüÁöÑÊ∂àË¥πÁ®ãÂ∫èÂú®Ê≠£Â∏∏ËøêË°åÔºåÂ∫îËØ•ÂíåkafkaÁöÑÈÖçÁΩÆÊ≤°ÊúâÂÖ≥Á≥ª„ÄÇ È°πÁõÆÂú∞ÂùÄÔºöhttps://github.com/crossoverJie/SSM.git ‰∏™‰∫∫ÂçöÂÆ¢Ôºöhttp://crossoverjie.top„ÄÇ]]></content>
      <categories>
        <category>SSM</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Kafka</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[sbc(Âõõ)Â∫îÁî®ÈôêÊµÅ]]></title>
    <url>%2F2017%2F08%2F11%2Fsbc4%2F</url>
    <content type="text"><![CDATA[ÂâçË®Ä Âú®‰∏Ä‰∏™È´òÂπ∂ÂèëÁ≥ªÁªü‰∏≠ÂØπÊµÅÈáèÁöÑÊääÊéßÊòØÈùûÂ∏∏ÈáçË¶ÅÁöÑÔºåÂΩìÂ∑®Â§ßÁöÑÊµÅÈáèÁõ¥Êé•ËØ∑Ê±ÇÂà∞Êàë‰ª¨ÁöÑÊúçÂä°Âô®‰∏äÊ≤°Â§ö‰πÖÂ∞±ÂèØËÉΩÈÄ†ÊàêÊé•Âè£‰∏çÂèØÁî®Ôºå‰∏çÂ§ÑÁêÜÁöÑËØùÁîöËá≥‰ºöÈÄ†ÊàêÊï¥‰∏™Â∫îÁî®‰∏çÂèØÁî®„ÄÇ ÊØîÂ¶ÇÊúÄËøëÂ∞±Êúâ‰∏™ËøôÊ†∑ÁöÑÈúÄÊ±ÇÔºåÊàë‰Ωú‰∏∫ÂÆ¢Êà∑Á´ØË¶ÅÂêëkafkaÁîü‰∫ßÊï∞ÊçÆÔºåËÄåkafkaÁöÑÊ∂àË¥πËÄÖÂàôÂÜçÊ∫êÊ∫ê‰∏çÊñ≠ÁöÑÊ∂àË¥πÊï∞ÊçÆÔºåÂπ∂Â∞ÜÊ∂àË¥πÁöÑÊï∞ÊçÆÂÖ®ÈÉ®ËØ∑Ê±ÇÂà∞webÊúçÂä°Âô®ÔºåËôΩËØ¥ÂÅö‰∫ÜË¥üËΩΩ(Êúâ4Âè∞webÊúçÂä°Âô®)‰ΩÜ‰∏öÂä°Êï∞ÊçÆÁöÑÈáè‰πüÊòØÂ∑®Â§ßÁöÑÔºåÊØèÁßíÈíüÂèØËÉΩÊúâ‰∏ä‰∏áÊù°Êï∞ÊçÆ‰∫ßÁîü„ÄÇÂ¶ÇÊûúÁîü‰∫ßËÄÖÁõ¥Êé•Áîü‰∫ßÊï∞ÊçÆÁöÑËØùÊûÅÊúâÂèØËÉΩÊääwebÊúçÂä°Âô®ÊãñÂûÆ„ÄÇ ÂØπÊ≠§Â∞±ÂøÖÈ°ªË¶ÅÂÅöÈôêÊµÅÂ§ÑÁêÜÔºåÊØèÁßíÈíüÁîü‰∫ß‰∏ÄÂÆöÈôêÈ¢ùÁöÑÊï∞ÊçÆÂà∞kafkaÔºåËøôÊ†∑Â∞±ËÉΩÊûÅÂ§ßÁ®ãÂ∫¶ÁöÑ‰øùËØÅwebÁöÑÊ≠£Â∏∏ËøêËΩ¨„ÄÇ ÂÖ∂ÂÆû‰∏çÁÆ°Â§ÑÁêÜ‰ΩïÁßçÂú∫ÊôØÔºåÊú¨Ë¥®ÈÉΩÊòØÈôç‰ΩéÊµÅÈáè‰øùËØÅÂ∫îÁî®ÁöÑÈ´òÂèØÁî®„ÄÇ Â∏∏ËßÅÁÆóÊ≥ïÂØπ‰∫éÈôêÊµÅÂ∏∏ËßÅÊúâ‰∏§ÁßçÁÆóÊ≥ï: ÊºèÊ°∂ÁÆóÊ≥ï ‰ª§ÁâåÊ°∂ÁÆóÊ≥ï ÊºèÊ°∂ÁÆóÊ≥ïÊØîËæÉÁÆÄÂçïÔºåÂ∞±ÊòØÂ∞ÜÊµÅÈáèÊîæÂÖ•Ê°∂‰∏≠ÔºåÊºèÊ°∂ÂêåÊó∂‰πüÊåâÁÖß‰∏ÄÂÆöÁöÑÈÄüÁéáÊµÅÂá∫ÔºåÂ¶ÇÊûúÊµÅÈáèËøáÂø´ÁöÑËØùÂ∞±‰ºöÊ∫¢Âá∫(ÊºèÊ°∂Âπ∂‰∏ç‰ºöÊèêÈ´òÊµÅÂá∫ÈÄüÁéá)„ÄÇÊ∫¢Âá∫ÁöÑÊµÅÈáèÂàôÁõ¥Êé•‰∏¢ÂºÉ„ÄÇ Â¶Ç‰∏ãÂõæÊâÄÁ§∫: ËøôÁßçÂÅöÊ≥ïÁÆÄÂçïÁ≤óÊö¥„ÄÇ ÊºèÊ°∂ÁÆóÊ≥ïËôΩËØ¥ÁÆÄÂçïÔºå‰ΩÜÂç¥‰∏çËÉΩÂ∫îÂØπÂÆûÈôÖÂú∫ÊôØÔºåÊØîÂ¶ÇÁ™ÅÁÑ∂Êö¥Â¢ûÁöÑÊµÅÈáè„ÄÇ ËøôÊó∂Â∞±ÈúÄË¶ÅÁî®Âà∞‰ª§ÁâåÊ°∂ÁÆóÊ≥ï: ‰ª§ÁâåÊ°∂‰ºö‰ª•‰∏Ä‰∏™ÊÅíÂÆöÁöÑÈÄüÁéáÂêëÂõ∫ÂÆöÂÆπÈáèÂ§ßÂ∞èÊ°∂‰∏≠ÊîæÂÖ•‰ª§ÁâåÔºåÂΩìÊúâÊµÅÈáèÊù•Êó∂ÂàôÂèñËµ∞‰∏Ä‰∏™ÊàñÂ§ö‰∏™‰ª§Áâå„ÄÇÂΩìÊ°∂‰∏≠Ê≤°Êúâ‰ª§ÁâåÂàôÂ∞ÜÂΩìÂâçËØ∑Ê±Ç‰∏¢ÂºÉÊàñÈòªÂ°û„ÄÇ Áõ∏ÊØî‰πã‰∏ã‰ª§ÁâåÊ°∂ÂèØ‰ª•Â∫îÂØπ‰∏ÄÂÆöÁöÑÁ™ÅÂèëÊµÅÈáè. RateLimiterÂÆûÁé∞ÂØπ‰∫é‰ª§ÁâåÊ°∂ÁöÑ‰ª£Á†ÅÂÆûÁé∞ÔºåÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®GuavaÂåÖ‰∏≠ÁöÑRateLimiter„ÄÇ 12345678910111213141516171819202122232425@Overridepublic BaseResponse&lt;UserResVO&gt; getUserByFeignBatch(@RequestBody UserReqVO userReqVO) &#123; //Ë∞ÉÁî®ËøúÁ®ãÊúçÂä° OrderNoReqVO vo = new OrderNoReqVO() ; vo.setReqNo(userReqVO.getReqNo()); RateLimiter limiter = RateLimiter.create(2.0) ; //ÊâπÈáèË∞ÉÁî® for (int i = 0 ;i&lt; 10 ; i++)&#123; double acquire = limiter.acquire(); logger.debug("Ëé∑Âèñ‰ª§ÁâåÊàêÂäü!,Ê∂àËÄó=" + acquire); BaseResponse&lt;OrderNoResVO&gt; orderNo = orderServiceClient.getOrderNo(vo); logger.debug("ËøúÁ®ãËøîÂõû:"+JSON.toJSONString(orderNo)); &#125; UserRes userRes = new UserRes() ; userRes.setUserId(123); userRes.setUserName("Âº†‰∏â"); userRes.setReqNo(userReqVO.getReqNo()); userRes.setCode(StatusEnum.SUCCESS.getCode()); userRes.setMessage("ÊàêÂäü"); return userRes ;&#125; ËØ¶ËßÅÊ≠§„ÄÇ Ë∞ÉÁî®ÁªìÊûúÂ¶Ç‰∏ã: ‰ª£Á†ÅÂèØ‰ª•ÁúãÂá∫‰ª•ÊØèÁßíÂêëÊ°∂‰∏≠ÊîæÂÖ•‰∏§‰∏™‰ª§ÁâåÔºåËØ∑Ê±Ç‰∏ÄÊ¨°Ê∂àËÄó‰∏Ä‰∏™‰ª§Áâå„ÄÇÊâÄ‰ª•ÊØèÁßíÈíüÂè™ËÉΩÂèëÈÄÅ‰∏§‰∏™ËØ∑Ê±Ç„ÄÇÊåâÁÖßÂõæ‰∏≠ÁöÑÊó∂Èó¥Êù•Áúã‰πüÁ°ÆÂÆûÂ¶ÇÊ≠§(ËøîÂõûÂÄºÊòØËé∑ÂèñÊ≠§‰ª§ÁâåÊâÄÊ∂àËÄóÁöÑÊó∂Èó¥ÔºåÂ∑Æ‰∏çÂ§ö‰πüÊòØÊØè500ms‰∏Ä‰∏™)„ÄÇ ‰ΩøÁî®RateLimiterÊúâÂá†‰∏™ÂÄºÂæóÊ≥®ÊÑèÁöÑÂú∞Êñπ: ÂÖÅËÆ∏ÂÖàÊ∂àË¥πÔºåÂêé‰ªòÊ¨æÔºåÊÑèÊÄùÂ∞±ÊòØÂÆÉÂèØ‰ª•Êù•‰∏Ä‰∏™ËØ∑Ê±ÇÁöÑÊó∂ÂÄô‰∏ÄÊ¨°ÊÄßÂèñËµ∞Âá†‰∏™ÊàñËÄÖÊòØÂâ©‰∏ãÊâÄÊúâÁöÑ‰ª§ÁâåÁîöËá≥Â§öÂèñÔºå‰ΩÜÊòØÂêéÈù¢ÁöÑËØ∑Ê±ÇÂ∞±Âæó‰∏∫‰∏ä‰∏ÄÊ¨°ËØ∑Ê±Ç‰π∞ÂçïÔºåÂÆÉÈúÄË¶ÅÁ≠âÂæÖÊ°∂‰∏≠ÁöÑ‰ª§ÁâåË°•ÈΩê‰πãÂêéÊâçËÉΩÁªßÁª≠Ëé∑Âèñ‰ª§Áâå„ÄÇ ÊÄªÁªìÈíàÂØπ‰∫éÂçï‰∏™Â∫îÁî®ÁöÑÈôêÊµÅ RateLimiter Â§üÁî®‰∫ÜÔºåÂ¶ÇÊûúÊòØÂàÜÂ∏ÉÂºèÁéØÂ¢ÉÂèØ‰ª•ÂÄüÂä© Redis Êù•ÂÆåÊàê„ÄÇ ÊúÄËøë‰πüÊÄº‰∫Ü‰∏Ä‰∏™ÔºåÂèØ‰ª•ÂèÇËÄÉ„ÄÇ È°πÁõÆÔºöhttps://github.com/crossoverJie/springboot-cloud ÂçöÂÆ¢Ôºöhttp://crossoverjie.top„ÄÇ]]></content>
      <categories>
        <category>sbc</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>SpringBoot</tag>
        <tag>SpringCloud</tag>
        <tag>RateLimiter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[sbc(‰∏â)Ëá™ÂÆö‰πâStarter-SpringBootÈáçÊûÑÂéªÈáçÊèí‰ª∂]]></title>
    <url>%2F2017%2F08%2F01%2Fsbc3%2F</url>
    <content type="text"><![CDATA[ÂâçË®Ä‰πãÂâçÁúãËøáSSM(ÂçÅÂõõ) Âü∫‰∫éannotationÁöÑhttpÈò≤ÈáçÊèí‰ª∂ÁöÑÊúãÂèãÂ∫îËØ•ËÆ∞ÂæóÊàëÂêéÊñáËØ¥Ëøá‰πãÂêéË¶ÅÁî®SpringBootÊù•ËøõË°åÈáçÊûÑ„ÄÇ ËøôÊ¨°ÈááÁî®Ëá™ÂÆö‰πâÁöÑstarterÁöÑÊñπÂºèÊù•ËøõË°åÈáçÊûÑ„ÄÇ ÂÖ≥‰∫éstarter(Ëµ∑Ê≠•‰æùËµñ)ÂÖ∂ÂÆûÂú®Á¨¨‰∏ÄÊ¨°‰ΩøÁî®SpringBootÁöÑÊó∂ÂÄôÂ∞±Â∑≤ÁªèÁî®Âà∞‰∫ÜÔºåÊØîÂ¶ÇÂÖ∂‰∏≠ÁöÑ: 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&lt;/dependency&gt; Êàë‰ª¨Âè™ÈúÄË¶ÅÂºïÂÖ•Ëøô‰∏Ä‰∏™‰æùËµñSpringBootÂ∞±‰ºöÊääÁõ∏ÂÖ≥ÁöÑ‰æùËµñÈÉΩÂä†ÂÖ•ËøõÊù•ÔºåËá™Â∑±‰πü‰∏çÈúÄË¶ÅÂÜçÂéªÊãÖÂøÉÂêÑ‰∏™ÁâàÊú¨‰πãÈó¥ÁöÑÂÖºÂÆπÈóÆÈ¢ò(ÂÖ∑‰Ωì‰ΩøÁî®Âì™‰∏™ÁâàÊú¨Áî±‰ΩøÁî®ÁöÑspring-boot-starter-parentÁâàÊú¨ÂÜ≥ÂÆö)ÔºåËøô‰∫õSpringBootÈÉΩÂ∑≤ÁªèÂ∏ÆÊàë‰ª¨ÂÅöÂ•Ω‰∫Ü„ÄÇ SpringËá™Âä®ÂåñÈÖçÁΩÆÂÖàÂä†ÂÖ•ÈúÄË¶ÅÁöÑ‰∏Ä‰∫õ‰æùËµñ: 123456789101112131415161718192021222324252627282930&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;&lt;/dependency&gt;&lt;!--aopÁõ∏ÂÖ≥--&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;&lt;/dependency&gt;&lt;!--redisÁõ∏ÂÖ≥--&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-redis&lt;/artifactId&gt;&lt;/dependency&gt;&lt;!--ÈÖçÁΩÆÁõ∏ÂÖ≥--&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt;&lt;/dependency&gt;&lt;!--ÈÄöÁî®‰æùËµñ--&gt;&lt;dependency&gt; &lt;groupId&gt;com.crossoverJie&lt;/groupId&gt; &lt;artifactId&gt;sbc-common&lt;/artifactId&gt; &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;&lt;/dependency&gt; ÂàõÂª∫‰∫ÜCheckReqConfÈÖçÁΩÆÁ±ªÁî®‰∫éÂú®Â∫îÁî®ÂêØÂä®ÁöÑÊó∂ÂÄôËá™Âä®ÈÖçÁΩÆ„ÄÇÂΩìÁÑ∂ÂâçÊèêËøòÂæóÂú®resourcesÁõÆÂΩï‰∏ãÂàõÂª∫META-INF/spring.factoriesÈÖçÁΩÆÊñá‰ª∂Áî®‰∫éÊåáÂêëÂΩìÂâçÁ±ªÔºåÊâçËÉΩÂú®Â∫îÁî®ÂêØÂä®Êó∂ËøõË°åËá™Âä®ÈÖçÁΩÆ„ÄÇ spring.factories: 12org.springframework.boot.autoconfigure.EnableAutoConfiguration=\com.crossoverJie.request.check.conf.CheckReqConf ‰ΩøÁî®Êù°‰ª∂ÂåñÈÖçÁΩÆËØïÁùÄËÄÉËôë‰∏ãÂ¶Ç‰∏ãÊÉÖÂÜµ: Âõ†‰∏∫ËØ•Êèí‰ª∂ÊòØ‰ΩøÁî®redisÊù•Â≠òÂÇ®ËØ∑Ê±Ç‰ø°ÊÅØÁöÑÔºåÂ§ñÈÉ®Â∞±‰æùËµñ‰∫Üredis„ÄÇÂ¶ÇÊûú‰ΩøÁî®‰∫ÜËØ•Êèí‰ª∂ÁöÑÂ∫îÁî®Ê≤°ÊúâÈÖçÁΩÆÊàñËÄÖÂøò‰∫ÜÈÖçÁΩÆredisÁöÑ‰∏Ä‰∫õÁõ∏ÂÖ≥ËøûÊé•ÔºåÈÇ£‰πàÂú®Â∫îÁî®‰ΩøÁî®ËøáÁ®ã‰∏≠ËÇØÂÆö‰ºöÂá∫Áé∞ÂÜôÂÖ•redisÂºÇÂ∏∏„ÄÇ Â¶ÇÊûúÂºÇÂ∏∏Ê≤°ÊúâÊéßÂà∂Â•ΩÁöÑËØùËøòÊúâÂèØËÉΩÂΩ±ÂìçÈ°πÁõÆÁöÑÊ≠£Â∏∏ËøêË°å„ÄÇ ÈÇ£‰πàÊÄé‰πàËß£ÂÜ≥Ëøô‰∏™ÊÉÖÂÜµÂë¢ÔºåÂèØ‰ª•‰ΩøÁî®Spring4.0Êñ∞Â¢ûÁöÑÊù°‰ª∂ÂåñÈÖçÁΩÆÊù•Ëß£ÂÜ≥„ÄÇ Ëß£ÂÜ≥ÊÄùË∑ØÊòØ:ÂèØ‰ª•ÁÆÄÂçïÁöÑÈÄöËøáÂà§Êñ≠Â∫îÁî®‰∏≠ÊòØÂê¶ÈÖçÁΩÆÊúâspring.redis.hostredisËøûÊé•ÔºåÂ¶ÇÊûúÊ≤°ÊúâÊàë‰ª¨ÁöÑËøô‰∏™ÈÖçÁΩÆÂ∞±‰ºöË¢´ÂøΩÁï•Êéâ„ÄÇ ÂÆûÁé∞‰ª£Á†Å: 1234567891011import org.springframework.context.annotation.ComponentScan;import org.springframework.context.annotation.Conditional;import org.springframework.context.annotation.Configuration;@Configuration@ComponentScan("com.crossoverJie.request.check.interceptor,com.crossoverJie.request.check.properties")//ÊòØÂê¶ÊúâredisÈÖçÁΩÆÁöÑÊ†°È™åÔºåÂ¶ÇÊûúÊ≤°ÊúâÈÖçÁΩÆÂàô‰∏ç‰ºöÂä†ËΩΩÊîπÈÖçÁΩÆÔºå‰πüÂ∞±ÊòØÂΩìÂâçÊèí‰ª∂Âπ∂‰∏ç‰ºöÁîüÊïà@Conditional(CheckReqCondition.class)public class CheckReqConf &#123;&#125; ÂÖ∑‰ΩìÊ†°È™åÁöÑ‰ª£Á†ÅCheckReqCondition: 12345678910111213141516171819public class CheckReqCondition implements Condition &#123; private static Logger logger = LoggerFactory.getLogger(CheckReqCondition.class); @Override public boolean matches(ConditionContext context, AnnotatedTypeMetadata annotatedTypeMetadata) &#123; //Â¶ÇÊûúÊ≤°ÊúâÂä†ÂÖ•redisÈÖçÁΩÆÁöÑÂ∞±ËøîÂõûfalse String property = context.getEnvironment().getProperty("spring.redis.host"); if (StringUtils.isEmpty(property))&#123; logger.warn("Need to configure redis!"); return false ; &#125;else &#123; return true; &#125; &#125;&#125; Âè™ÈúÄË¶ÅÂÆûÁé∞org.springframework.context.annotation.ConditionÂπ∂ÈáçÂÜômatches()ÊñπÊ≥ï,Âç≥ÂèØÂÆûÁé∞‰∏™‰∫∫ÈÄªËæë„ÄÇ ÂèØ‰ª•Âú®‰ΩøÁî®‰∫ÜËØ•‰æùËµñÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏≠ÈÖçÁΩÆÊàñËÄÖÊòØ‰∏çÈÖçÁΩÆspring.redis.hostËøô‰∏™ÈÖçÁΩÆ,Êù•ÁúãÊàë‰ª¨ÁöÑÂàáÈù¢Á±ª(ReqNoDrcAspect)‰∏≠53Ë°åÁöÑÊó•ÂøóÊòØÂê¶ÊúâÊâìÂç∞Êù•Âà§Êñ≠ÊòØÂê¶ÁîüÊïà„ÄÇ ËøôÊ†∑Âè™ÊúâÂú®Â≠òÂú®ËØ•keyÁöÑÊÉÖÂÜµ‰∏ãÊâç‰ºöÂ∫îÁî®Ëøô‰∏™ÈÖçÁΩÆ„ÄÇ ÂΩìÁÑ∂ÊúÄÂ•ΩÁöÑÂÅöÊ≥ïÊòØÁõ¥Êé•Â∞ùËØïËØª„ÄÅÂÜôredis,ÁúãÊòØÂê¶ËøûÊé•ÁïÖÈÄöÊù•ËøõË°åÂà§Êñ≠„ÄÇ AOPÂàáÈù¢ÊúÄÊ†∏ÂøÉÁöÑÂÖ∂ÂÆûÂ∞±ÊòØËøô‰∏™ÂàáÈù¢Á±ªÔºåÈáåËæπ‰∏ªË¶ÅÈÄªËæëÂíå‰πãÂâçÊòØ‰∏ÄÊ®°‰∏ÄÊ†∑ÁöÑÂ∞±‰∏çÂú®Â§öËØ¥,Âè™ÊòØËøôÈáåÂ∫îÁî®Âà∞‰∫ÜËá™ÂÆö‰πâÈÖçÁΩÆ„ÄÇ ÂàáÈù¢Á±ªReqNoDrcAspect: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172//ÂàáÈù¢Ê≥®Ëß£@Aspect//Êâ´Êèè@Component//ÂºÄÂêØcglib‰ª£ÁêÜ@EnableAspectJAutoProxy(proxyTargetClass = true)public class ReqNoDrcAspect &#123; private static Logger logger = LoggerFactory.getLogger(ReqNoDrcAspect.class); @Autowired private CheckReqProperties properties ; private String prefixReq ; private long day ; @Autowired private RedisTemplate&lt;String, String&gt; redisTemplate; @PostConstruct public void init() throws Exception &#123; prefixReq = properties.getRedisKey() == null ? "reqNo" : properties.getRedisKey() ; day = properties.getRedisTimeout() == null ? 1L : properties.getRedisTimeout() ; logger.info("sbc-request-check init......"); logger.info(String.format("redis prefix is [%s],timeout is [%s]", prefixReq, day)); &#125; /** * ÂàáÈù¢ËØ•Ê≥®Ëß£ */ @Pointcut("@annotation(com.crossoverJie.request.check.anotation.CheckReqNo)") public void checkRepeat()&#123; &#125; @Before("checkRepeat()") public void before(JoinPoint joinPoint) throws Exception &#123; BaseRequest request = getBaseRequest(joinPoint); if(request != null)&#123; final String reqNo = request.getReqNo(); if(StringUtil.isEmpty(reqNo))&#123; throw new SBCException(StatusEnum.REPEAT_REQUEST); &#125;else&#123; try &#123; String tempReqNo = redisTemplate.opsForValue().get(prefixReq +reqNo); logger.debug("tempReqNo=" + tempReqNo); if((StringUtil.isEmpty(tempReqNo)))&#123; redisTemplate.opsForValue().set(prefixReq + reqNo, reqNo, day, TimeUnit.DAYS); &#125;else&#123; throw new SBCException("ËØ∑Ê±ÇÂè∑ÈáçÂ§ç,"+ prefixReq +"=" + reqNo); &#125; &#125; catch (RedisConnectionFailureException e)&#123; logger.error("redisÊìç‰ΩúÂºÇÂ∏∏",e); throw new SBCException("need redisService") ; &#125; &#125; &#125; &#125; public static BaseRequest getBaseRequest(JoinPoint joinPoint) throws Exception &#123; BaseRequest returnRequest = null; Object[] arguments = joinPoint.getArgs(); if(arguments != null &amp;&amp; arguments.length &gt; 0)&#123; returnRequest = (BaseRequest) arguments[0]; &#125; return returnRequest; &#125;&#125; ËøôÈáåÊàë‰ª¨ÁöÑÂÜôÂÖ•rediskeyÁöÑÂâçÁºÄÂíåËøáÊúüÊó∂Èó¥Êîπ‰∏∫‰ªéCheckReqPropertiesÁ±ª‰∏≠ËØªÂèñ: 12345678910111213141516171819202122232425262728293031@Component//ÂÆö‰πâÈÖçÁΩÆÂâçÁºÄ@ConfigurationProperties(prefix = "sbc.request.check")public class CheckReqProperties &#123; private String redisKey ;//ÂÜôÂÖ•redis‰∏≠ÁöÑÂâçÁºÄ private Long redisTimeout ;//redisÁöÑËøáÊúüÊó∂Èó¥ ÈªòËÆ§ÊòØÂ§© public String getRedisKey() &#123; return redisKey; &#125; public void setRedisKey(String redisKey) &#123; this.redisKey = redisKey; &#125; public Long getRedisTimeout() &#123; return redisTimeout; &#125; public void setRedisTimeout(Long redisTimeout) &#123; this.redisTimeout = redisTimeout; &#125; @Override public String toString() &#123; return "CheckReqProperties&#123;" + "redisKey='" + redisKey + '\'' + ", redisTimeout=" + redisTimeout + '&#125;'; &#125;&#125; ËøôÊ†∑Â¶ÇÊûúÊòØÈúÄË¶ÅÂæàÂ§öÈÖçÁΩÆÁöÑÊÉÖÂÜµ‰∏ãÂ∞±ÂèØ‰ª•Â∞ÜÂÜÖÂÆπÂ∞ÅË£ÖÂà∞ËØ•ÂØπË±°‰∏≠ÔºåÊñπ‰æøÁª¥Êä§ÂíåËØªÂèñ„ÄÇ ‰ΩøÁî®ÁöÑÊó∂ÂÄôÂè™ÈúÄË¶ÅÂú®Ëá™Â∑±Â∫îÁî®ÁöÑapplication.properties‰∏≠Âä†ÂÖ• 123# ÂéªÈáçÈÖçÁΩÆsbc.request.check.redis-key = reqsbc.request.check.redis-timeout= 2 Â∫îÁî®Êèí‰ª∂‰ΩøÁî®ÊñπÊ≥ï‰πüÂíå‰πãÂâçÂ∑Æ‰∏çÂ§ö(Âú®sbc-orderÂ∫îÁî®)Ôºö Âä†ÂÖ•‰æùËµñÔºö 123456&lt;!--Èò≤ÈáçÊèí‰ª∂--&gt;&lt;dependency&gt; &lt;groupId&gt;com.crossoverJie.request.check&lt;/groupId&gt; &lt;artifactId&gt;request-check&lt;/artifactId&gt; &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;&lt;/dependency&gt; Âú®Êé•Âè£‰∏äÂä†‰∏äÊ≥®Ëß£: 12345678910111213141516171819202122@RestController@Api(value = "orderApi", description = "ËÆ¢ÂçïAPI", tags = &#123;"ËÆ¢ÂçïÊúçÂä°"&#125;)public class OrderController implements OrderService&#123; private final static Logger logger = LoggerFactory.getLogger(OrderController.class); @Override @CheckReqNo public BaseResponse&lt;OrderNoResVO&gt; getOrderNo(@RequestBody OrderNoReqVO orderNoReq) &#123; BaseResponse&lt;OrderNoResVO&gt; res = new BaseResponse(); res.setReqNo(orderNoReq.getReqNo()); if (null == orderNoReq.getAppId())&#123; throw new SBCException(StatusEnum.FAIL); &#125; OrderNoResVO orderNoRes = new OrderNoResVO() ; orderNoRes.setOrderId(DateUtil.getLongTime()); res.setCode(StatusEnum.SUCCESS.getCode()); res.setMessage(StatusEnum.SUCCESS.getMessage()); res.setDataBody(orderNoRes); return res ; &#125;&#125; ‰ΩøÁî®ÊïàÊûúÂ¶Ç‰∏ã: ÊÄªÁªìÊ≥®ÊÑè‰∏ÄÁÇπÊòØspring.factoriesÁöÑË∑ØÂæÑ‰∏çË¶ÅÊêûÈîô‰∫Ü,‰πãÂâçÂ∞±ÊòØÂõ†‰∏∫Ë∑ØÂæÑÂÜôÈîô‰∫ÜÔºåÂØºËá¥Ëá™Âä®ÈÖçÁΩÆÊ≤°ÊúâÂä†ËΩΩÔºåAOP‰πüÂ∞±Ê≤°ÊúâÁîüÊïàÔºåÊéíÊü•‰∫ÜÂ•Ω‰πÖ„ÄÇ„ÄÇ È°πÁõÆÔºöhttps://github.com/crossoverJie/springboot-cloud ÂçöÂÆ¢Ôºöhttp://crossoverjie.top„ÄÇ]]></content>
      <categories>
        <category>sbc</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ÈáçÊûÑ</tag>
        <tag>AOP</tag>
        <tag>SpringBoot</tag>
        <tag>SpringCloud</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[sbc(‰∫å)È´òÂèØÁî®Eureka+Â£∞ÊòéÂºèÊúçÂä°Ë∞ÉÁî®]]></title>
    <url>%2F2017%2F07%2F19%2Fsbc2%2F</url>
    <content type="text"><![CDATA[ÂâçË®Ä ‰∏ä‰∏ÄÁØáÁÆÄÂçïÂÖ•Èó®‰∫ÜSpringBoot+SpringCloud ÊûÑÂª∫ÂæÆÊúçÂä°„ÄÇ‰ΩÜÂè™ËÉΩÁÆóÊòØ‰∏Ä‰∏™demoÁ∫ßÂà´ÁöÑÂ∫îÁî®„ÄÇËøôÊ¨°‰ºöÊåâÁÖßÂÆûÈôÖÁîü‰∫ßË¶ÅÊ±ÇÊù•Êê≠Âª∫ËøôÂ•óÊúçÂä°„ÄÇ SwaggerÂ∫îÁî®‰∏äÊ¨°ÊèêÂà∞Êàë‰ª¨Ë∞ÉÁî®Ëá™Â∑±ÁöÑhttpÊé•Âè£ÁöÑÊó∂ÂÄôÈááÁî®ÁöÑÊòØPostManÊù•Ê®°ÊãüËØ∑Ê±ÇÔºåËøô‰∏™Âú®Âπ≥Êó∂Ë∞ÉËØïÊó∂Ëá™ÁÑ∂Ê≤°Êúâ‰ªÄ‰πàÈóÆÈ¢òÔºå‰ΩÜÂΩìÊàë‰ª¨ÈúÄË¶ÅÂíåÂâçÁ´ØËÅîË∞ÉÂºÄÂèëÁöÑÊó∂ÂÄôÊïàÁéáÂ∞±ÊØîËæÉ‰Ωé‰∫Ü„ÄÇ ÈÄöÂ∏∏Êù•ËØ¥Áé∞Âú®ÂâçÂêéÁ´ØÂàÜÁ¶ªÁöÑÈ°πÁõÆ‰∏ÄËà¨ÈÉΩÊòØÂêéÁ´ØÊé•Âè£ÂÖàË°å„ÄÇ ÂêéÁ´ØÂ§ßÂ§ß‰ª¨ÂÖàÊääÊé•Âè£ÂÆö‰πâÂ•Ω(ÂÖ•ÂèÇÂíåÂá∫ÂèÇ),ÂâçÁ´ØÂ§ßÂ§ß‰ª¨Êù•Á°ÆÂÆöÊòØÂê¶Êª°Ë∂≥Ë¶ÅÊ±ÇÔºåÂèØ‰ª•‰∫Ü‰πãÂêéÂêéÁ´ØÊâçÂºÄÂßãÁùÄÊâãÂÜôÂÆûÁé∞ÔºåËøôÊ†∑Êï¥‰ΩìÊïàÁéáË¶ÅÈ´ò‰∏äËÆ∏Â§ö„ÄÇ ‰ΩÜ‰πü‰ºöÂ∏¶Êù•‰∏Ä‰∏™ÈóÆÈ¢ò:Âú®Êé•Âè£ÂÆö‰πâÈò∂ÊÆµÈ¢ëÁπÅÂèòÊõ¥Êé•Âè£ÂÆö‰πâËÄåÊ≤°Êúâ‰∏Ä‰∏™ÊñáÊ°£ÊàñÁ±ª‰ººÁöÑ‰∏úË•øÊù•ËÆ∞ÂΩïÔºåÈÇ£‰πàÂèåÊñπÁöÑÊ≤üÈÄöÂä†‰∏äÂâçÁ´ØÁöÑË∞ÉËØïÈÉΩÊòØÊØîËæÉÂõ∞ÈöæÁöÑ„ÄÇ Âü∫‰∫éËøô‰∏™ÈúÄÊ±ÇÁΩë‰∏äÊúâÂêÑÁßçËß£ÂÜ≥ÊñπÊ°àÔºåÊØîÂ¶ÇÈòøÈáåÁöÑrapÂ∞±ÊòØ‰∏Ä‰∏™‰∏çÈîôÁöÑ‰æãÂ≠ê„ÄÇ ‰ΩÜÊòØspringCould‰∏∫Êàë‰ª¨Âú®Êèê‰æõ‰∫Ü‰∏ÄÁßçÂú®ÂºÄÂèëspringCloudÈ°πÁõÆ‰∏ãÊõ¥Êñπ‰æøÁöÑÂ∑•ÂÖ∑swagger„ÄÇ ÂÆûÈôÖÊïàÊûúÂ¶Ç‰∏ã: ÈÖçÁΩÆswagger‰ª•sbc-order‰∏∫‰æãÊàëÂ∞ÜÈ°πÁõÆÂàÜ‰∏∫‰∫Ü‰∏â‰∏™Ê®°Âùó: 123456789‚îú‚îÄ‚îÄ order // OrderÊúçÂä°ÂÆûÁé∞ ‚îÇ ‚îú‚îÄ‚îÄ src/main‚îú‚îÄ‚îÄ order-api // ÂØπÂÜÖAPI‚îÇ ‚îú‚îÄ‚îÄ src/main‚îú‚îÄ‚îÄ order-client // ÂØπÂ§ñÁöÑclientAPI‚îÇ ‚îú‚îÄ‚îÄ src/main‚îú‚îÄ‚îÄ .gitignore ‚îú‚îÄ‚îÄ LICENSE ‚îú‚îÄ‚îÄ README.md Âõ†‰∏∫ÂÆûÁé∞ÈÉΩÂÜôÂú®orderÊ®°Âùó‰∏≠ÔºåÊâÄ‰ª•Âè™ÈúÄË¶ÅÂú®ËØ•Ê®°Âùó‰∏≠ÈÖçÁΩÆÂç≥ÂèØ„ÄÇ È¶ñÂÖàÈúÄË¶ÅÂä†ÂÖ•‰æùËµñÔºåÁî±‰∫éÊàëÂú®orderÊ®°Âùó‰∏≠‰æùËµñ‰∫Ü: 12345&lt;dependency&gt; &lt;groupId&gt;com.crossoverJie&lt;/groupId&gt; &lt;artifactId&gt;order-api&lt;/artifactId&gt; &lt;version&gt;$&#123;target.version&#125;&lt;/version&gt;&lt;/dependency&gt; order-apiÂèà‰æùËµñ‰∫ÜÔºö 12345678910&lt;dependency&gt; &lt;groupId&gt;io.springfox&lt;/groupId&gt; &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt; &lt;scope&gt;compile&lt;/scope&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;io.springfox&lt;/groupId&gt; &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt; &lt;scope&gt;compile&lt;/scope&gt;&lt;/dependency&gt; Êé•ÁùÄÈúÄË¶ÅÈÖçÁΩÆ‰∏Ä‰∏™SwaggerConfig 12345678910111213141516171819202122232425262728@Configuration@EnableSwagger2/** ÊòØÂê¶ÊâìÂºÄswagger **/@ConditionalOnExpression(&quot;&apos;$&#123;swagger.enable&#125;&apos; == &apos;true&apos;&quot;)public class SwaggerConfig &#123; @Bean public Docket createRestApi() &#123; return new Docket(DocumentationType.SWAGGER_2) .apiInfo(apiInfo()) .select() .apis(RequestHandlerSelectors.basePackage(&quot;com.crossoverJie.sbcorder.controller&quot;)) .paths(PathSelectors.any()) .build(); &#125; private ApiInfo apiInfo() &#123; return new ApiInfoBuilder() .title(&quot;sbc order api&quot;) .description(&quot;sbc order api&quot;) .termsOfServiceUrl(&quot;http://crossoverJie.top&quot;) .contact(&quot;crossoverJie&quot;) .version(&quot;1.0.0&quot;) .build(); &#125; &#125; ÂÖ∂ÂÆûÂ∞±ÊòØÈÖçÁΩÆswaggerÁöÑ‰∏Ä‰∫õÂü∫Êú¨‰ø°ÊÅØ„ÄÇ‰πãÂêéÂêØÂä®È°πÁõÆÔºåÂú®Âú∞ÂùÄÊ†èËæìÂÖ•http://ip:port/swagger-ui.html#/Âç≥ÂèØËøõÂÖ•„ÄÇÂèØ‰ª•ÁúãÂà∞Â¶Ç‰∏äÂõæÊâÄÁ§∫ÁöÑÊé•Âè£ÂàóË°®,ÁÇπÂáªÂ¶Ç‰∏ãÂõæÊâÄÁ§∫ÁöÑÂèÇÊï∞‰æãÂ≠êÂç≥ÂèØËøõË°åÊé•Âè£Ë∞ÉÁî®„ÄÇ Ëá™ÂÆö‰πâÂºÄÂÖ≥Swagger swaggerÁöÑ‰æøÂà©ËÉΩÁªôÊàë‰ª¨Â∏¶Êù•ÂæàÂ§öÂ•ΩÂ§ÑÔºå‰ΩÜÁ®çÊúâ‰∏çÊÖé‰πüÂèØËÉΩÂá∫Áé∞ÈóÆÈ¢ò„ÄÇ ÊØîÂ¶ÇÂ¶ÇÊûúÂú®Áîü‰∫ßÁéØÂ¢ÉËøòËÉΩÈÄöËøáIPËÆøÈóÆswaggerÁöÑËØùÈÇ£ÂêéÊûúÂèØÊòØ‰∏çÂ†™ËÆæÊÉ≥ÁöÑ„ÄÇÊâÄ‰ª•Êàë‰ª¨ÈúÄË¶ÅÁÅµÊ¥ªÊéßÂà∂swaggerÁöÑÂºÄÂÖ≥„ÄÇ ËøôÁÇπÂèØ‰ª•Âà©Áî®springÁöÑÊù°‰ª∂ÂåñÈÖçÁΩÆ(Êù°‰ª∂ÂåñÈÖçÁΩÆÂèØ‰ª•ÈÖçÁΩÆÂ≠òÂú®‰∫éÂ∫îÁî®‰∏≠,‰∏ÄÊó¶Êª°Ë∂≥‰∏Ä‰∫õÁâπÂÆöÁöÑÊù°‰ª∂Êó∂Â∞±ÂèñÊ∂àËøô‰∫õÈÖçÁΩÆ)Êù•ÂÆûÁé∞Ëøô‰∏ÄÂäüËÉΩ: 1@ConditionalOnExpression("'$&#123;swagger.enable&#125;' == 'true'") ËØ•Ê≥®Ëß£ÁöÑÊÑèÊÄùÊòØÁªôÂÆöÁöÑSpELË°®ËææÂºèËÆ°ÁÆóÁªìÊûú‰∏∫trueÊó∂Êâç‰ºöÂàõÂª∫swaggerÁöÑbean„ÄÇ swagger.enableËøô‰∏™ÈÖçÁΩÆÂàôÊòØÈÖçÁΩÆÂú®application.properties‰∏≠: 12# ÊòØÂê¶ÊâìÂºÄswaggerswagger.enable = true ËøôÊ†∑ÂΩìÊàë‰ª¨Âú®Áîü‰∫ßÁéØÂ¢ÉÊó∂Âè™ÈúÄË¶ÅÂ∞ÜËØ•ÈÖçÁΩÆÊîπ‰∏∫falseÂç≥ÂèØ„ÄÇ ps:Êõ¥Â§öspringÊù°‰ª∂ÂåñÈÖçÁΩÆ: 123456789101112@ConditionalOnBean //ÈÖçÁΩÆ‰∫ÜÊüê‰∏™ÁâπÂÆöBean@ConditionalOnMissingBean //Ê≤°ÊúâÈÖçÁΩÆÁâπÂÆöÁöÑBean@ConditionalOnClass //ClasspathÈáåÊúâÊåáÂÆöÁöÑÁ±ª@ConditionalOnMissingClass //ClasspathÈáåÁº∫Â∞ëÊåáÂÆöÁöÑÁ±ª@ConditionalOnExpression //ÁªôÂÆöÁöÑSpring Expression Language(SpEL)Ë°®ËææÂºèËÆ°ÁÆóÁªìÊûú‰∏∫true@ConditionalOnJava //JavaÁöÑÁâàÊú¨ÂåπÈÖçÁâπÂÆöÂÄºÊàñËÄÖ‰∏Ä‰∏™ËåÉÂõ¥ÂÄº@ConditionalOnJndi //ÂèÇÊï∞‰∏≠ÁªôÂÆöÁöÑJNDI‰ΩçÁΩÆÂøÖÈ°ªÂ≠òÂú®‰∏Ä‰∏™ÔºåÂ¶ÇÊûúÊ≤°ÊúâÁªôÂèÇÊï∞ÔºåÂàôË¶ÅÊúâJNDI InitialContext@ConditionalOnProperty //ÊåáÂÆöÁöÑÈÖçÁΩÆÂ±ûÊÄßË¶ÅÊúâ‰∏Ä‰∏™ÊòéÁ°ÆÁöÑÂÄº@ConditionalOnResource //ClasspathÈáåÊúâÊåáÂÆöÁöÑËµÑÊ∫ê@ConditionalOnWebApplication //ËøôÊòØ‰∏Ä‰∏™WebÂ∫îÁî®Á®ãÂ∫è@ConditionalOnNotWebApplication //Ëøô‰∏çÊòØ‰∏Ä‰∏™WebÂ∫îÁî®Á®ãÂ∫è(ÂèÇËÄÉSpringBootÂÆûÊàò) È´òÂèØÁî®EurekaÂú®‰∏ä‰∏ÄÁØá‰∏≠ÊòØÁî®EurekaÊù•ÂÅö‰∫ÜÊúçÂä°Ê≥®ÂÜå‰∏≠ÂøÉÔºåÊâÄÊúâÁöÑÁîü‰∫ßËÄÖÈÉΩÂæÄÂÆÉÊ≥®ÂÜåÊúçÂä°ÔºåÊ∂àË¥πËÄÖÂèàÈÄöËøáÂÆÉÊù•Ëé∑ÂèñÊúçÂä°„ÄÇ ‰ΩÜÊòØ‰πãÂâçËÆ≤Âà∞ÁöÑÈÉΩÊòØÂçïËäÇÁÇπÔºåËøôÂú®Áîü‰∫ßÁéØÂ¢ÉÈ£éÈô©Â∑®Â§ßÔºåÊàë‰ª¨ÂøÖÈ°ªÂÅöÂà∞Ê≥®ÂÜå‰∏≠ÂøÉÁöÑÈ´òÂèØÁî®ÔºåÊê≠Âª∫EurekaÈõÜÁæ§„ÄÇ ËøôÈáåÁÆÄÂçïËµ∑ËßÅÂ∞±Êê≠Âª∫‰∏§‰∏™Eureka,ÊÄùË∑ØÂàôÊòØËøô‰∏§‰∏™EurekaÈÉΩÊääËá™Â∑±ÂΩìÊàêÂ∫îÁî®ÂêëÂØπÊñπÊ≥®ÂÜåÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ÊûÑÊàê‰∏Ä‰∏™È´òÂèØÁî®ÁöÑÊúçÂä°Ê≥®ÂÜå‰∏≠ÂøÉ„ÄÇ Âú®ÂÆûÈôÖÁîü‰∫ßÁéØËäÇ‰∏≠‰ºöÊòØÊØè‰∏™Ê≥®ÂÜå‰∏≠ÂøÉ‰∏ÄÂè∞ÊúçÂä°Âô®Ôºå‰∏∫‰∫ÜÊºîÁ§∫Ëµ∑ËßÅÔºåÊàëÂ∞±Âú®Êú¨Âú∞ÂêØÂä®‰∏§‰∏™Ê≥®ÂÜå‰∏≠ÂøÉÔºå‰ΩÜÊòØÁ´ØÂè£‰∏ç‰∏ÄÊ†∑„ÄÇ È¶ñÂÖàÈúÄË¶ÅÂú®Êú¨Âú∞ÈÖçÁΩÆ‰∏Ä‰∏™host: 1127.0.0.1 node1 node2 ËøôÊ†∑‰∏çËÆ∫ÊòØËÆøÈóÆnode1ËøòÊòØnode2ÈÉΩÂèØ‰ª•Âú®Êú¨Êú∫Ë∞ÉÁî®ÁöÑÂà∞(ÂΩìÁÑ∂‰∏çÈÖçÁΩÆhost‰πüÂèØ‰ª•ÔºåÂè™ÊòØÈúÄË¶ÅÈÄöËøáIPÊù•ËÆøÈóÆÔºåËøôÊ†∑ÁúãËµ∑Êù•‰∏çÊòØÈÇ£‰πàÊòéÊòæ)„ÄÇ Âπ∂Áªôsbc-serviceÊñ∞Â¢û‰∫Ü‰∏§‰∏™ÈÖçÁΩÆÊñá‰ª∂: application-node1.properties: 12345678910spring.application.name=sbc-serviceserver.port=8888eureka.instance.hostname=node1## ‰∏çÂêëÊ≥®ÂÜå‰∏≠ÂøÉÊ≥®ÂÜåËá™Â∑±#eureka.client.register-with-eureka=false### ‰∏çÈúÄË¶ÅÊ£ÄÁ¥¢ÊúçÂä°#eureka.client.fetch-registry=falseeureka.client.serviceUrl.defaultZone=http://node2:9999/eureka/ application-node2.properties: 12345678910spring.application.name=sbc-serviceserver.port=9999eureka.instance.hostname=node2## ‰∏çÂêëÊ≥®ÂÜå‰∏≠ÂøÉÊ≥®ÂÜåËá™Â∑±#eureka.client.register-with-eureka=false### ‰∏çÈúÄË¶ÅÊ£ÄÁ¥¢ÊúçÂä°#eureka.client.fetch-registry=falseeureka.client.serviceUrl.defaultZone=http://node1:8888/eureka/ ÂÖ∂‰∏≠ÊúÄÈáçË¶ÅÁöÑÂ∞±ÊòØ: 12eureka.client.serviceUrl.defaultZone=http://node2:9999/eureka/eureka.client.serviceUrl.defaultZone=http://node1:8888/eureka/ ‰∏§‰∏™Â∫îÁî®‰∫íÁõ∏Ê≥®ÂÜå„ÄÇ ÂêØÂä®ÁöÑÊó∂ÂÄôÊàë‰ª¨ÊåâÁÖß:java -jar sbc-service-1.0.0-SNAPSHOT.jar --spring.profiles.active=node1ÂêØÂä®ÔºåÂ∞±‰ºöÊåâÁÖß‰º†ÂÖ•ÁöÑnode1ÊàñËÄÖÊòØnode2ÂéªËØªÂèñapplication-node1.properties,application-node2.propertiesËøô‰∏§‰∏™ÈÖçÁΩÆÊñá‰ª∂(ÈÖçÁΩÆÊñá‰ª∂ÂøÖÈ°ªÊåâÁÖßapplication-{name}.propertiesÁöÑÊñπÂºèÂëΩÂêç)„ÄÇ ÂàÜÂà´ÂêØÂä®‰∏§‰∏™Ê≥®ÂÜå‰∏≠ÂøÉÂèØ‰ª•ÁúãÂà∞‰ª•‰∏ã: ÂèØ‰ª•ÁúãÂà∞‰∏§‰∏™Ê≥®ÂÜå‰∏≠ÂøÉ‰ª•Âèä‰∫íÁõ∏Ê≥®ÂÜå‰∫Ü„ÄÇÂú®ÊúçÂä°Ê≥®ÂÜåÁöÑÊó∂ÂÄôÂè™ÈúÄË¶ÅÂ∞Ü‰∏§‰∏™Âú∞ÂùÄÈÉΩÂä†‰∏äÂç≥ÂèØ:eureka.client.serviceUrl.defaultZone=http://node1:8888/eureka/,http://node2:9999/eureka/ Âú®ÊúçÂä°Ë∞ÉÁî®ÁöÑÊó∂ÂÄôÂèØ‰ª•Â∞ùËØïÂÖ≥Èó≠ÂÖ∂‰∏≠‰∏Ä‰∏™ÔºåÊ≠£Â∏∏ÊÉÖÂÜµ‰∏ã‰æùÁÑ∂ÊòØÂèØ‰ª•Ë∞ÉÁî®Âà∞ÊúçÂä°ÁöÑ„ÄÇ FeignÂ£∞ÊòéÂºèË∞ÉÁî®Êé•‰∏ãÊù•Ë∞àË∞àÊúçÂä°Ë∞ÉÁî®Ôºå‰∏äÊ¨°ÊèêÂà∞ÂèØ‰ª•Áî®ribbonÊù•ËøõË°åÊúçÂä°Ë∞ÉÁî®Ôºå‰ΩÜÊòØÊòéÊòæÂæà‰∏çÊñπ‰æøÔºå‰∏çÂ¶ÇÂÉè‰πãÂâçrpcË∞ÉÁî®ÈÇ£Ê†∑ÁÆÄÂçïÁõ¥Êé•„ÄÇ ‰∏∫Ê≠§ËøôÊ¨°‰ΩøÁî®FeignÊù•ËøõË°åÂ£∞ÊòéÂºèË∞ÉÁî®ÔºåÂ∞±ÂÉèË∞ÉÁî®‰∏Ä‰∏™ÊôÆÈÄöÊñπÊ≥ïÈÇ£Ê†∑ÁÆÄÂçï„ÄÇ order-clientÁâáÂ§¥ËØ¥Âà∞ÊàëÂ∞ÜÂ∫îÁî®ÂàÜÊàê‰∫Ü‰∏â‰∏™Ê®°Âùóorder„ÄÅorder-api„ÄÅorder-clientÔºåÂÖ∂‰∏≠ÁöÑclientÊ®°ÂùóÂ∞±ÊòØÂÖ≥ÈîÆ„ÄÇ Êù•ÁúãÁúãÂÖ∂‰∏≠ÁöÑÂÜÖÂÆπ,Âè™Êúâ‰∏Ä‰∏™Êé•Âè£: 12345678910@RequestMapping(value="/orderService")@FeignClient(name="sbc-order")@RibbonClientpublic interface OrderServiceClient extends OrderService&#123; @ApiOperation("Ëé∑ÂèñËÆ¢ÂçïÂè∑") @RequestMapping(value = "/getOrderNo", method = RequestMethod.POST) BaseResponse&lt;OrderNoResVO&gt; getOrderNo(@RequestBody OrderNoReqVO orderNoReq) ;&#125; @FeignClientËøô‰∏™Ê≥®Ëß£Ë¶ÅÊ≥®ÊÑè‰∏ãÔºåÂÖ∂‰∏≠ÁöÑnameÁöÑÊòØËá™Â∑±Â∫îÁî®ÁöÑÂ∫îÁî®ÂêçÁß∞ÔºåÂú®application.properties‰∏≠ÁöÑspring.application.nameÈÖçÁΩÆ„ÄÇ ÂÖ∂‰∏≠ÁªßÊâø‰∫Ü‰∏Ä‰∏™OrderServiceÂú®order-apiÊ®°Âùó‰∏≠ÔºåÊù•ÁúãÁúãorder-api‰∏≠ÁöÑÂÜÖÂÆπ„ÄÇ order-apiÂÖ∂‰∏≠‰πüÂè™Êúâ‰∏Ä‰∏™Êé•Âè£: 12345678910@RestController@Api("ËÆ¢ÂçïÊúçÂä°API")@RequestMapping(value = "/orderService")@Validatedpublic interface OrderService &#123; @ApiOperation("Ëé∑ÂèñËÆ¢ÂçïÂè∑") @RequestMapping(value = "/getOrderNo", method = RequestMethod.POST) BaseResponse&lt;OrderNoResVO&gt; getOrderNo(@RequestBody OrderNoReqVO orderNoReq) ;&#125; Ëøô‰∏™Êé•Âè£Êúâ‰∏§‰∏™ÁõÆÁöÑ„ÄÇ ÁªôÁúüÊ≠£ÁöÑcontrollerÊù•ËøõË°åÂÆûÁé∞„ÄÇ ÁªôclientÊé•Âè£ËøõË°åÁªßÊâø„ÄÇ Á±ªÂÖ≥Á≥ªÂ¶Ç‰∏ã: Ê≥®Ëß£Ëøô‰∫õÈÉΩÊ≤°‰ªÄ‰πàÂ•ΩËØ¥ÁöÑÔºå‰∏ÄÁúãÂ∞±ÊáÇ„ÄÇ orderorderÂàôÊòØÂÖ∑‰ΩìÊé•Âè£ÂÆûÁé∞ÁöÑÊ®°ÂùóÔºåÂ∞±ÂíåÂπ≥Êó∂ÂÜôcontroller‰∏ÄÊ†∑„ÄÇÊù•ÁúãÁúãÂ¶Ç‰Ωï‰ΩøÁî®clientËøõË°åÂ£∞ÊòéÂºèË∞ÉÁî®: ËøôÊ¨°ÁúãÁúãsbc-userËøô‰∏™È°πÁõÆÔºåÂú®ÈáåËæπË∞ÉÁî®‰∫Üsbc-orderÁöÑÊúçÂä°„ÄÇÂÖ∂‰∏≠ÁöÑuserÊ®°Âùó‰æùËµñ‰∫Üorder-client: 1234&lt;dependency&gt; &lt;groupId&gt;com.crossoverJie&lt;/groupId&gt; &lt;artifactId&gt;order-client&lt;/artifactId&gt;&lt;/dependency&gt; ÂÖ∑‰ΩìË∞ÉÁî®: 12345678910111213141516171819202122@Autowiredprivate OrderServiceClient orderServiceClient ;@Overridepublic BaseResponse&lt;UserResVO&gt; getUserByFeign(@RequestBody UserReqVO userReq) &#123; //Ë∞ÉÁî®ËøúÁ®ãÊúçÂä° OrderNoReqVO vo = new OrderNoReqVO() ; vo.setReqNo(userReq.getReqNo()); BaseResponse&lt;OrderNoResVO&gt; orderNo = orderServiceClient.getOrderNo(vo); logger.info("ËøúÁ®ãËøîÂõû:"+JSON.toJSONString(orderNo)); UserRes userRes = new UserRes() ; userRes.setUserId(123); userRes.setUserName("Âº†‰∏â"); userRes.setReqNo(userReq.getReqNo()); userRes.setCode(StatusEnum.SUCCESS.getCode()); userRes.setMessage("ÊàêÂäü"); return userRes ;&#125; ÂèØ‰ª•ÁúãÂà∞Âè™ÈúÄË¶ÅÂ∞Üorder-clientÂåÖ‰∏≠ÁöÑOrderÊúçÂä°Ê≥®ÂÖ•ËøõÊù•Âç≥ÂèØ„ÄÇ Âú®sbc-clientÁöÑswagger‰∏≠ËøõË°åË∞ÉÁî®: Áî±‰∫éÊàëÂπ∂Ê≤°‰º†appIdÊâÄ‰ª•orderÊúçÂä°ËøîÂõûÁöÑÈîôËØØ„ÄÇ ÊÄªÁªì ÂΩì‰∏Ä‰∏™Â∫îÁî®ÈúÄË¶ÅÂØπÂ§ñÊö¥Èú≤Êé•Âè£Êó∂ÁùÄÈúÄË¶ÅÊåâÁÖß‰ª•‰∏äÊñπÂºèÊèê‰æõ‰∏Ä‰∏™clientÂåÖÊõ¥Ê∂àË¥πËÄÖ‰ΩøÁî®„ÄÇ ÂÖ∂ÂÆûÂ∫îÁî®Êú¨Ë∫´‰πüÊòØÈúÄË¶ÅÂÅöÈ´òÂèØÁî®ÁöÑÔºåÂíåEurekaÈ´òÂèØÁî®‰∏ÄÊ†∑ÔºåÂÜç‰∏çÂêåÁöÑÊúçÂä°Âô®‰∏äÂÜçÂêØ‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÊúçÂä°Âπ∂Ê≥®ÂÜåÂà∞EurekaÈõÜÁæ§‰∏≠Âç≥ÂèØ„ÄÇ ÂêéÁª≠Ëøò‰ºöÁªßÁª≠Ë∞àÂà∞zuulÁΩëÂÖ≥ÔºåÂÆπÈîôÔºåÊñ≠Ë∑ØÂô®Á≠âÂÜÖÂÆπÔºåÊ¨¢ËøéÊãçÁ†ñËÆ®ËÆ∫„ÄÇ È°πÁõÆÔºöhttps://github.com/crossoverJie/springboot-cloud ÂçöÂÆ¢Ôºöhttp://crossoverjie.top„ÄÇ]]></content>
      <categories>
        <category>sbc</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>SpringBoot</tag>
        <tag>SpringCloud</tag>
        <tag>swagger</tag>
        <tag>Eureka</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SSM(ÂçÅ‰∫î) ‰πêËßÇÈîÅ‰∏éÊÇ≤ËßÇÈîÅÁöÑÂÆûÈôÖÂ∫îÁî®]]></title>
    <url>%2F2017%2F07%2F09%2FSSM15%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄÈöèÁùÄ‰∫íËÅîÁΩëÁöÑÂÖ¥Ëµ∑ÔºåÁé∞Âú®‰∏âÈ´ò(È´òÂèØÁî®„ÄÅÈ´òÊÄßËÉΩ„ÄÅÈ´òÂπ∂Âèë)È°πÁõÆÊòØË∂äÊù•Ë∂äÊµÅË°å„ÄÇ Êú¨Ê¨°Êù•Ë∞àË∞àÈ´òÂπ∂Âèë„ÄÇÈ¶ñÂÖàÂÅáËÆæ‰∏Ä‰∏™‰∏öÂä°Âú∫ÊôØÔºöÊï∞ÊçÆÂ∫ì‰∏≠Êúâ‰∏ÄÊù°Êï∞ÊçÆÔºåÈúÄË¶ÅËé∑ÂèñÂà∞ÂΩìÂâçÁöÑÂÄºÔºåÂú®ÂΩìÂâçÂÄºÁöÑÂü∫Á°Ä‰∏ä+10ÔºåÁÑ∂ÂêéÂÜçÊõ¥Êñ∞ÂõûÂéª„ÄÇÂ¶ÇÊûúÊ≠§Êó∂Êúâ‰∏§‰∏™Á∫øÁ®ãÂêåÊó∂Âπ∂ÂèëÂ§ÑÁêÜÔºåÁ¨¨‰∏Ä‰∏™Á∫øÁ®ãÊãøÂà∞Êï∞ÊçÆÊòØ10Ôºå+10=20Êõ¥Êñ∞ÂõûÂéª„ÄÇÁ¨¨‰∫å‰∏™Á∫øÁ®ãÂéüÊú¨ÊòØË¶ÅÂú®Á¨¨‰∏Ä‰∏™Á∫øÁ®ãÁöÑÂü∫Á°Ä‰∏äÂÜç+20=40,ÁªìÊûúÁî±‰∫éÂπ∂ÂèëËÆøÈóÆÂèñÂà∞Êõ¥Êñ∞ÂâçÁöÑÊï∞ÊçÆ‰∏∫10Ôºå+20=30„ÄÇ ËøôÂ∞±ÊòØÂÖ∏ÂûãÁöÑÂ≠òÂú®‰∏≠Èó¥Áä∂ÊÄÅÔºåÂØºËá¥Êï∞ÊçÆ‰∏çÊ≠£Á°Æ„ÄÇÊù•Áúã‰ª•‰∏ãÁöÑ‰æãÂ≠êÔºö Âπ∂ÂèëÊâÄÂ∏¶Êù•ÁöÑÈóÆÈ¢òÂíå‰∏äÊñáÊèêÂà∞ÁöÑÁ±ª‰ººÔºåËøôÈáåÊúâ‰∏ÄÂº†priceË°®ÔºåË°®ÁªìÊûÑÂ¶Ç‰∏ãÔºö 1234567CREATE TABLE `price` ( `id` int(11) NOT NULL AUTO_INCREMENT COMMENT &apos;‰∏ªÈîÆ&apos;, `total` decimal(12,2) DEFAULT &apos;0.00&apos; COMMENT &apos;ÊÄªÂÄº&apos;, `front` decimal(12,2) DEFAULT &apos;0.00&apos; COMMENT &apos;Ê∂àË¥πÂâç&apos;, `end` decimal(12,2) DEFAULT &apos;0.00&apos; COMMENT &apos;Ê∂àË¥πÂêé&apos;, PRIMARY KEY (`id`)) ENGINE=InnoDB AUTO_INCREMENT=1268 DEFAULT CHARSET=utf8 ÊàëËøôÈáåÂÜô‰∫Ü‰∏Ä‰∏™ÂçïÊµãÔºöÂ∞±‰∏Ä‰∏™‰∏ªÁ∫øÁ®ãÔºåÂæ™ÁéØ100Ê¨°ÔºåÊØèÊ¨°ÊääfrontÁöÑÂÄºÂáèÂéª10ÔºåÂÜçÂÜôÂÖ•‰∏ÄÊ¨°ÊµÅÊ∞¥ËÆ∞ÂΩïÔºåÊ≠£Â∏∏ÊÉÖÂÜµÊòØÂÜôÂÖ•ÁöÑÊØèÊù°ËÆ∞ÂΩïÈÉΩ‰ºöÊØèÊ¨°ÂáèÂéª10„ÄÇ 12345678910111213141516171819/** * ÂçïÁ∫øÁ®ãÊ∂àË¥π */@Testpublic void singleCounsumerTest1()&#123; for (int i=0 ;i&lt;100 ;i++)&#123; Price price = priceMapper.selectByPrimaryKey(1); int ron = 10 ; price.setFront(price.getFront().subtract(new BigDecimal(ron))); price.setEnd(price.getEnd().add(new BigDecimal(ron))); price.setTotal(price.getFront().add(price.getEnd())); priceMapper.updateByPrimaryKey(price) ; price.setId(null); priceMapper.insertSelective(price) ; &#125;&#125; ÊâßË°åÁªìÊûúÂ¶Ç‰∏ãÔºö ÂèØ‰ª•ÁúãÂà∞Á°ÆÂÆûÊòØÊØèÊ¨°ÈÉΩÈÄíÂáè10„ÄÇ ‰ΩÜÊòØÂ¶ÇÊûúÊòØÂ§öÁ∫øÁ®ãÁöÑÊÉÖÂÜµ‰∏ã‰ºöÊòØÂ¶Ç‰ΩïÂë¢Ôºö ÊàëËøôÈáåÊñ∞Âª∫‰∫Ü‰∏Ä‰∏™PriceController 1234567891011121314151617181920212223242526272829303132333435363738394041424344 /** * Á∫øÁ®ãÊ±† Êó†ÈîÅ * @param redisContentReq * @return */@RequestMapping(value = "/threadPrice",method = RequestMethod.POST)@ResponseBodypublic BaseResponse&lt;NULLBody&gt; threadPrice(@RequestBody RedisContentReq redisContentReq)&#123; BaseResponse&lt;NULLBody&gt; response = new BaseResponse&lt;NULLBody&gt;() ; try &#123; for (int i=0 ;i&lt;10 ;i++)&#123; Thread t = new Thread(new Runnable() &#123; @Override public void run() &#123; Price price = priceMapper.selectByPrimaryKey(1); int ron = 10 ; price.setFront(price.getFront().subtract(new BigDecimal(ron))); price.setEnd(price.getEnd().add(new BigDecimal(ron))); priceMapper.updateByPrimaryKey(price) ; price.setId(null); priceMapper.insertSelective(price) ; &#125; &#125;); config.submit(t); &#125; response.setReqNo(redisContentReq.getReqNo()); response.setCode(StatusEnum.SUCCESS.getCode()); response.setMessage(StatusEnum.SUCCESS.getMessage()); &#125;catch (Exception e)&#123; logger.error("system error",e); response.setReqNo(response.getReqNo()); response.setCode(StatusEnum.FAIL.getCode()); response.setMessage(StatusEnum.FAIL.getMessage()); &#125; return response ;&#125; ÂÖ∂‰∏≠‰∏∫‰∫ÜËäÇÁúÅËµÑÊ∫ê‰ΩøÁî®‰∫Ü‰∏Ä‰∏™Á∫øÁ®ãÊ±†: 1234567891011121314151617@Componentpublic class ThreadPoolConfig &#123; private static final int MAX_SIZE = 10 ; private static final int CORE_SIZE = 5; private static final int SECOND = 1000; private ThreadPoolExecutor executor ; public ThreadPoolConfig()&#123; executor = new ThreadPoolExecutor(CORE_SIZE,MAX_SIZE,SECOND, TimeUnit.MICROSECONDS,new LinkedBlockingQueue&lt;Runnable&gt;()) ; &#125; public void submit(Thread thread)&#123; executor.submit(thread) ; &#125;&#125; ÂÖ≥‰∫éÁ∫øÁ®ãÊ±†ÁöÑ‰ΩøÁî®‰ªäÂêé‰ºö‰ªîÁªÜÊé¢ËÆ®„ÄÇËøôÈáåÂ∞±ÁÆÄÂçïÁêÜËß£‰∏∫Êúâ10‰∏™Á∫øÁ®ãÂπ∂ÂèëÂéªÂ§ÑÁêÜ‰∏äÈù¢ÂçïÁ∫øÁ®ãÁöÑÈÄªËæëÔºåÊù•ÁúãÁúãÁªìÊûúÊÄé‰πàÊ†∑Ôºö ‰ºöÁúãÂà∞ÊòéÊòæÁöÑÊï∞ÊçÆÈîôËØØÔºåÂØºËá¥ÈîôËØØÁöÑÂéüÂõ†Ëá™ÁÑ∂Â∞±ÊòØÊúâÁ∫øÁ®ãËØªÂèñÂà∞‰∫Ü‰∏≠Èó¥Áä∂ÊÄÅËøõË°å‰∫ÜÈîôËØØÁöÑÊõ¥Êñ∞„ÄÇ ËøõËÄåÊúâ‰∫Ü‰ª•‰∏ã‰∏§ÁßçËß£ÂÜ≥ÊñπÊ°àÔºöÊÇ≤ËßÇÈîÅÂíå‰πêËßÇÈîÅ„ÄÇ ÊÇ≤ËßÇÈîÅÁÆÄÂçïÁêÜËß£‰∏ãÊÇ≤ËßÇÈîÅÔºöÂΩì‰∏Ä‰∏™‰∫ãÂä°ÈîÅÂÆö‰∫Ü‰∏Ä‰∫õÊï∞ÊçÆ‰πãÂêéÔºåÂè™ÊúâÂΩìÂΩìÂâçÈîÅÊèê‰∫§‰∫Ü‰∫ãÂä°ÔºåÈáäÊîæ‰∫ÜÈîÅÔºåÂÖ∂‰ªñ‰∫ãÂä°ÊâçËÉΩËé∑ÂæóÈîÅÂπ∂ÊâßË°åÊìç‰Ωú„ÄÇ ‰ΩøÁî®ÊñπÂºèÂ¶Ç‰∏ãÔºöÈ¶ñÂÖàË¶ÅÂÖ≥Èó≠MySQLÁöÑËá™Âä®Êèê‰∫§Ôºöset autocommit = 0; 123456bigen --ÂºÄÂêØ‰∫ãÂä°select id, total, front, end from price where id=1 for update insert into price values(?,?,?,?,?)commit --Êèê‰∫§‰∫ãÂä° ËøôÈáå‰ΩøÁî®select for updateÁöÑÊñπÂºèÂà©Áî®Êï∞ÊçÆÂ∫ìÂºÄÂêØ‰∫ÜÊÇ≤ËßÇÈîÅÔºåÈîÅÂÆö‰∫Üid=1ÁöÑËøôÊù°Êï∞ÊçÆ(Ê≥®ÊÑè:ËøôÈáåÈô§ÈùûÊòØ‰ΩøÁî®‰∫ÜÁ¥¢Âºï‰ºöÂêØÁî®Ë°åÁ∫ßÈîÅÔºå‰∏çÁÑ∂ÊòØ‰ºö‰ΩøÁî®Ë°®ÈîÅÔºåÂ∞ÜÊï¥Âº†Ë°®ÈÉΩÈîÅ‰Ωè„ÄÇ)„ÄÇ‰πãÂêé‰ΩøÁî®commitÊèê‰∫§‰∫ãÂä°Âπ∂ÈáäÊîæÈîÅÔºåËøôÊ†∑‰∏ã‰∏Ä‰∏™Á∫øÁ®ãËøáÊù•ÊãøÂà∞ÁöÑÂ∞±ÊòØÊ≠£Á°ÆÁöÑÊï∞ÊçÆ„ÄÇ ÊÇ≤ËßÇÈîÅ‰∏ÄËà¨ÊòØÁî®‰∫éÂπ∂Âèë‰∏çÊòØÂæàÈ´òÔºåÂπ∂‰∏î‰∏çÂÖÅËÆ∏ËÑèËØªÁ≠âÊÉÖÂÜµ„ÄÇ‰ΩÜÊòØÂØπÊï∞ÊçÆÂ∫ìËµÑÊ∫êÊ∂àËÄóËæÉÂ§ß„ÄÇ ‰πêËßÇÈîÅÈÇ£‰πàÊúâÊ≤°ÊúâÊÄßËÉΩÂ•ΩÔºåÊîØÊåÅÁöÑÂπ∂Âèë‰πüÊõ¥Â§öÁöÑÊñπÂºèÂë¢Ôºü ÈÇ£Â∞±ÊòØ‰πêËßÇÈîÅ„ÄÇ ‰πêËßÇÈîÅÊòØÈ¶ñÂÖàÂÅáËÆæÊï∞ÊçÆÂÜ≤Á™ÅÂæàÂ∞ëÔºåÂè™ÊúâÂú®Êï∞ÊçÆÊèê‰∫§‰øÆÊîπÁöÑÊó∂ÂÄôÊâçËøõË°åÊ†°È™åÔºåÂ¶ÇÊûúÂÜ≤Á™Å‰∫ÜÂàô‰∏ç‰ºöËøõË°åÊõ¥Êñ∞„ÄÇ ÈÄöÂ∏∏ÁöÑÂÆûÁé∞ÊñπÂºèÂ¢ûÂä†‰∏Ä‰∏™versionÂ≠óÊÆµÔºå‰∏∫ÊØè‰∏ÄÊù°Êï∞ÊçÆÂä†‰∏äÁâàÊú¨„ÄÇÊØèÊ¨°Êõ¥Êñ∞ÁöÑÊó∂ÂÄôversion+1ÔºåÂπ∂‰∏îÊõ¥Êñ∞Êó∂ÂÄôÂ∏¶‰∏äÁâàÊú¨Âè∑„ÄÇÂÆûÁé∞ÊñπÂºèÂ¶Ç‰∏ãÔºö Êñ∞Âª∫‰∫Ü‰∏ÄÂº†price_versionË°®Ôºö 12345678CREATE TABLE `price_version` ( `id` int(11) NOT NULL AUTO_INCREMENT COMMENT &apos;‰∏ªÈîÆ&apos;, `total` decimal(12,2) DEFAULT &apos;0.00&apos; COMMENT &apos;ÊÄªÂÄº&apos;, `front` decimal(12,2) DEFAULT &apos;0.00&apos; COMMENT &apos;Ê∂àË¥πÂâç&apos;, `end` decimal(12,2) DEFAULT &apos;0.00&apos; COMMENT &apos;Ê∂àË¥πÂêé&apos;, `version` int(11) DEFAULT &apos;0&apos; COMMENT &apos;Âπ∂ÂèëÁâàÊú¨ÊéßÂà∂&apos;, PRIMARY KEY (`id`)) ENGINE=InnoDB AUTO_INCREMENT=1268 DEFAULT CHARSET=utf8 Êõ¥Êñ∞Êï∞ÊçÆÁöÑSQLÔºö 1234567&lt;update id="updateByVersion" parameterType="com.crossoverJie.pojo.PriceVersion"&gt; UPDATE price_version SET front = #&#123;front,jdbcType=DECIMAL&#125;, version= version + 1 WHERE id = #&#123;id,jdbcType=INTEGER&#125; AND version = #&#123;version,jdbcType=INTEGER&#125; &lt;/update&gt; Ë∞ÉÁî®ÊñπÂºèÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647/** * Á∫øÁ®ãÊ±†Ôºå‰πêËßÇÈîÅ * @param redisContentReq * @return */@RequestMapping(value = "/threadPriceVersion",method = RequestMethod.POST)@ResponseBodypublic BaseResponse&lt;NULLBody&gt; threadPriceVersion(@RequestBody RedisContentReq redisContentReq)&#123; BaseResponse&lt;NULLBody&gt; response = new BaseResponse&lt;NULLBody&gt;() ; try &#123; for (int i=0 ;i&lt;3 ;i++)&#123; Thread t = new Thread(new Runnable() &#123; @Override public void run() &#123; PriceVersion priceVersion = priceVersionMapper.selectByPrimaryKey(1); int ron = new Random().nextInt(20); logger.info("Êú¨Ê¨°Ê∂àË¥π="+ron); priceVersion.setFront(new BigDecimal(ron)); int count = priceVersionMapper.updateByVersion(priceVersion); if (count == 0)&#123; logger.error("Êõ¥Êñ∞Â§±Ë¥•"); &#125;else &#123; logger.info("Êõ¥Êñ∞ÊàêÂäü"); &#125; &#125; &#125;); config.submit(t); &#125; response.setReqNo(redisContentReq.getReqNo()); response.setCode(StatusEnum.SUCCESS.getCode()); response.setMessage(StatusEnum.SUCCESS.getMessage()); &#125;catch (Exception e)&#123; logger.error("system error",e); response.setReqNo(response.getReqNo()); response.setCode(StatusEnum.FAIL.getCode()); response.setMessage(StatusEnum.FAIL.getMessage()); &#125; return response ;&#125; Â§ÑÁêÜÈÄªËæëÔºöÂºÄ‰∫Ü‰∏â‰∏™Á∫øÁ®ãÁîüÊàê‰∫Ü20‰ª•ÂÜÖÁöÑÈöèÊú∫Êï∞Êõ¥Êñ∞Âà∞frontÂ≠óÊÆµ„ÄÇ ÂΩìË∞ÉÁî®ËØ•Êé•Âè£Êó∂Êó•ÂøóÂ¶Ç‰∏ãÔºö ÂèØ‰ª•ÁúãÂà∞Á∫øÁ®ã1„ÄÅ4„ÄÅ5ÂàÜÂà´ÁîüÊàê‰∫Ü15Ôºå2Ôºå11‰∏â‰∏™ÈöèÊú∫Êï∞„ÄÇÊúÄÂêéÁ∫øÁ®ã4„ÄÅ5ÈÉΩÊõ¥Êñ∞Â§±Ë¥•‰∫ÜÔºåÂè™ÊúâÁ∫øÁ®ã1Êõ¥Êñ∞ÊàêÂäü‰∫Ü„ÄÇ Êü•ÁúãÊï∞ÊçÆÂ∫ìÔºö ÂèëÁé∞‰πüÁ°ÆÂÆûÊòØÊõ¥Êñ∞ÁöÑ15„ÄÇ ‰πêËßÇÈîÅÂú®ÂÆûÈôÖÂ∫îÁî®Áõ∏ÂØπËæÉÂ§öÔºåÂÆÉÂèØ‰ª•Êèê‰æõÊõ¥Â•ΩÁöÑÂπ∂ÂèëËÆøÈóÆÔºåÂπ∂‰∏îÊï∞ÊçÆÂ∫ìÂºÄÈîÄËæÉÂ∞ëÔºå‰ΩÜÊòØÊúâÂèØËÉΩÂ≠òÂú®ËÑèËØªÁöÑÊÉÖÂÜµ„ÄÇ ÊÄªÁªì‰ª•‰∏ä‰∏§ÁßçÂêÑÊúâ‰ºòÂä£ÔºåÂ§ßÂÆ∂ÂèØ‰ª•Ê†πÊçÆÂÖ∑‰ΩìÁöÑ‰∏öÂä°Âú∫ÊôØÊù•Âà§Êñ≠ÂÖ∑‰Ωì‰ΩøÁî®Âì™ÁßçÊñπÂºèÊù•‰øùËØÅÊï∞ÊçÆÁöÑ‰∏ÄËá¥ÊÄß„ÄÇ È°πÁõÆÂú∞ÂùÄÔºöhttps://github.com/crossoverJie/SSM.git ‰∏™‰∫∫ÂçöÂÆ¢Ôºöhttp://crossoverjie.top„ÄÇ]]></content>
      <categories>
        <category>SSM</category>
      </categories>
      <tags>
        <tag>lock</tag>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[sbc(‰∏Ä)SpringBoot+SpringCloudÂàùÊé¢]]></title>
    <url>%2F2017%2F06%2F15%2Fsbc1%2F</url>
    <content type="text"><![CDATA[ÂâçË®Ä ÊúâÁúãËøáÊàë‰πãÂâçÁöÑSSMÁ≥ªÂàóÁöÑÊúãÂèãÂ∫îËØ•Êúâ‰∏ÄÁÇπÂç∞Ë±°ÊòØÈùûÂ∏∏Ê∑±ÂàªÁöÑ„ÄÇ ÈÇ£Â∞±ÊòØÈúÄË¶ÅÈÖçÁΩÆÁöÑÈÖçÁΩÆÊñá‰ª∂ÈùûÂ∏∏Â§öÔºå‰ªÄ‰πàSpring„ÄÅmybatis„ÄÅredis„ÄÅmq‰πãÁ±ªÁöÑÈÖçÁΩÆÊñá‰ª∂ÈùûÂ∏∏Â§öÔºåÂπ∂‰∏îËøòÂ≠òÂú®ÂêÑÁßçÁâàÊú¨ÔºåÁîöËá≥Êúâ‰∫õÁâàÊú¨Ëøò‰∫í‰∏çÂÖºÂÆπ„ÄÇÂÖ∂‰∏≠ÊúâÂæàÂ§öÂèØËÉΩÂ∞±ÊòØÂàöÂºÄÂßãÊï¥ÂêàÁöÑÊó∂ÂÄôÈúÄË¶ÅÈÖçÁΩÆÔºå‰πãÂêéÂéãÊ†πÂ∞±‰∏ç‰ºöÂÜçÂä®‰∫Ü„ÄÇ Èâ¥‰∫éÊ≠§ÔºåSpringÂèàÊé®Âá∫‰∫ÜÂèà‰∏ÄÁ•ûÂô®SpringBoot. ÂÆÉÂèØ‰ª•ËÆ©Êàë‰ª¨Êõ¥Âä†Âø´ÈÄüÁöÑÂºÄÂèëSpringÂ∫îÁî®ÔºåÁîöËá≥ÂÅöÂà∞‰∫ÜÂºÄÁÆ±Âç≥Áî®„ÄÇÁî±‰∫éÂú®ÂÆûÈôÖÂºÄÂèë‰∏≠Êàë‰ª¨‰ΩøÁî®SpringBoot+SpringCloudËøõË°å‰∫Ü‰∏ÄÊÆµÊó∂Èó¥ÁöÑÊåÅÁª≠‰∫§‰ªòÔºåÂπ∂Âú®Áîü‰∫ßÁéØÂ¢ÉÂæóÂà∞‰∫ÜÈ™åËØÅÔºåÂÖ∂‰∏≠‰πüÊúâ‰∏çÂ∞ëË∏©ÂùëÁöÑÂú∞ÊñπÔºåÂÄüÊ≠§Êú∫‰ºöÂíåÂ§ßÂÆ∂ÂàÜ‰∫´‰∫§ÊµÅ‰∏Ä‰∏ã„ÄÇ Êú¨ÁØáÊàë‰ª¨È¶ñÂÖà‰ºöÁî®Âà©Áî®SpringBootÊûÑÂª∫Âá∫‰∏Ä‰∏™ÁÆÄÂçïÁöÑREST API.Êé•ÁùÄ‰ºöÂàõÂª∫Âè¶‰∏Ä‰∏™SpringBootÈ°πÁõÆÔºåÂü∫‰∫éSpringCloudÈÉ®ÁΩ≤ÔºåÂπ∂Âú®‰∏§‰∏™Â∫îÁî®‰πãÈó¥ËøõË°åË∞ÉÁî®„ÄÇ ‰ΩøÁî®SpringBootÊûÑÂª∫REST APIÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®SpringÂÆòÊñπÊèê‰æõÁöÑÂàùÂßãÂåñÂ∑•ÂÖ∑Â∏ÆÊàë‰ª¨ÁîüÊàê‰∏Ä‰∏™Âü∫Á°ÄÈ°πÁõÆÔºöhttp://start.spring.io/,Â¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö Â°´ÂÖ•Áõ∏Â∫î‰ø°ÊÅØÂç≥ÂèØ„ÄÇÁî±‰∫éÂè™ÊòØË¶ÅÂÆûÁé∞REST APIÊâÄ‰ª•ËøôÈáåÂè™ÈúÄË¶ÅÂºïÁî®web‰æùËµñÂç≥ÂèØ„ÄÇ Â∞ÜÁîüÊàêÂ•ΩÁöÑÈ°πÁõÆÂØºÂÖ•IDE(Êàë‰ΩøÁî®ÁöÑÊòØidea)‰∏≠,ÁõÆÂΩïÁªìÊûÑÂ¶Ç‰∏ã; ÂÖ∂‰∏≠ÁöÑSbcUserApplicationÊòØÊï¥‰∏™Â∫îÁî®ÁöÑÂÖ•Âè£„ÄÇ resource/application.propertiesËøôÈáåÊòØÂ≠òÊîæÊï¥‰∏™Â∫îÁî®ÁöÑÈÖçÁΩÆÊñá‰ª∂„ÄÇ ÂÖ∂‰∏≠ÁöÑstaticÂíåtemplatesÊòØÂ≠òÊîæÈùôÊÄÅËµÑÊ∫ê‰ª•ÂèäÂâçÁ´ØÊ®°ÊùøÁöÑÂú∞ÊñπÔºåÁî±‰∫éÊàë‰ª¨ÈááÁî®‰∫ÜÂâçÂêéÁ´ØÂàÜÁ¶ªÔºåÊâÄ‰ª•Ëøô‰∫õÁõÆÂΩïÂü∫Êú¨‰∏äÁî®‰∏ç‰∏ä‰∫Ü„ÄÇ ÈÄöËøáËøêË°åSbcUserApplicationÁ±ªÁöÑmainÊñπÊ≥ïÂèØ‰ª•ÂêØÂä®SpringBootÈ°πÁõÆ„ÄÇ Êé•ÁùÄÂú®PostMan‰∏≠ËøõË°åË∞ÉÁî®ÔºåÁúãÂà∞‰ª•‰∏ãÁªìÊûúË°®ÊòéÂêØÂä®ÊàêÂäü‰∫ÜÔºö ËøôÊ†∑‰∏ÄÁúãÊòØ‰∏çÊòØË¶ÅÊØî‰πãÂâçÁî®Spring+SpringMVCÊù•Êï¥ÂêàË¶ÅÊñπ‰æøÂø´Êç∑ÂæàÂ§ö„ÄÇ ÂàõÂª∫Âè¶‰∏Ä‰∏™SpringBootÈ°πÁõÆÂΩìÊàë‰ª¨ÁöÑÈ°πÁõÆÈááÁî®ÂæÆÊúçÂä°ÊûÑÂª∫‰πãÂêéËá™ÁÑ∂Â∞±‰ºöË¢´ÊãÜÂàÜÊàêNÂ§ö‰∏™Áã¨Á´ãÁöÑÂ∫îÁî®„ÄÇÊØîÂ¶Ç‰∏äÊñá‰∏≠ÁöÑsbc-userÁî®‰∫éÁî®Êà∑ÁÆ°ÁêÜ„ÄÇËøôÈáåÂÜçÂàõÂª∫‰∏Ä‰∏™sbc-orderÁî®Êà∑ÁîüÊàêËÆ¢Âçï„ÄÇ ‰∏∫‰∫ÜÊñπ‰æø‰πãÂêéÁöÑ‰ª£Á†ÅÂ§çÁî®ÔºåÊàëÂ∞ÜcommonÂåÖ‰∏≠ÁöÑ‰∏Ä‰∫õÊûö‰∏æÂÄº„ÄÅÂ∑•ÂÖ∑Á±ªÂçïÁã¨ÊèêÂà∞sbc-commonÂ∫îÁî®‰∏≠‰∫ÜÔºåËøôÊ†∑ÊúâÂÖ∂‰ªñÂ∫îÁî®Ë¶Å‰ΩøÁî®Ëøô‰∫õÂü∫Á°ÄÁ±ªÁõ¥Êé•ÂºïÂÖ•Ëøô‰∏™‰æùËµñÂç≥ÂèØ„ÄÇ 12345&lt;dependency&gt; &lt;groupId&gt;com.crossoverJie&lt;/groupId&gt; &lt;artifactId&gt;sbc-common&lt;/artifactId&gt; &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;&lt;/dependency&gt; ÂàõÂª∫Ê≠•È™§Âíå‰∏äÊñáÂ∑Æ‰∏çÂ§öÔºåËøôÈáåÂ∞±‰∏çÂÜçËµòËø∞‰∫Ü„ÄÇÂÖ∂‰∏≠Êúâ‰∏Ä‰∏™order/getOrderNoÁöÑÊúçÂä°ÔºåË∞ÉÁî®ÁªìÊûúÂ¶Ç‰∏ãÔºö ‰πãÂêé‰ºöÂà©Áî®SpringCloudÊù•Â∞Ü‰∏§‰∏™ÊúçÂä°ÂÖ≥ËÅîËµ∑Êù•ÔºåÂπ∂ÂèØ‰ª•‰∫íÁõ∏Ë∞ÉÁî®„ÄÇ ‰ΩøÁî®SpringCloudËøõË°åÂàÜÂ∏ÉÂºèË∞ÉÁî®Êê≠Âª∫eurekaÊ≥®ÂÜå‰∏≠ÂøÉÊó¢ÁÑ∂ÊòØË¶ÅÊê≠Âª∫ÂæÆÊúçÂä°ÈÇ£Ëá™ÁÑ∂Â∞ë‰∏ç‰∫ÜÊ≥®ÂÜå‰∏≠ÂøÉ‰∫ÜÔºå‰πãÂâçËÆ≤ÁöÑdubboÈááÁî®ÁöÑÊòØzookeeper‰Ωú‰∏∫Ê≥®ÂÜå‰∏≠ÂøÉÔºåSpringCloudÂàôÈááÁî®ÁöÑÊòØNetflix EurekaÊù•ÂÅöÊúçÂä°ÁöÑÊ≥®ÂÜå‰∏éÂèëÁé∞„ÄÇ Êñ∞Âª∫‰∏Ä‰∏™È°πÁõÆsbc-service,ÁõÆÂΩïÁªìÊûÑÂ¶Ç‰∏ãÔºö Ê†∏ÂøÉÁöÑpom.xml 123456789101112131415161718192021222324&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-eureka-server&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt; &lt;artifactId&gt;logback-classic&lt;/artifactId&gt; &lt;version&gt;1.2.1&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt;&lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt; &lt;version&gt;Brixton.RELEASE&lt;/version&gt; &lt;type&gt;pom&lt;/type&gt; &lt;scope&gt;import&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/dependencyManagement&gt; ÈùûÂ∏∏easyÔºåÂè™ÈúÄË¶ÅÂºïÂÖ•eurekaÁöÑ‰æùËµñÂç≥ÂèØ„ÄÇÁÑ∂ÂêéÂú®ÂÖ•Âè£Á±ªÂä†ÂÖ•‰∏Ä‰∏™Ê≥®Ëß£@EnableEurekaServerÔºåÂç≥ÂèØÂ∞ÜËØ•È°πÁõÆ‰Ωú‰∏∫ÊúçÂä°Ê≥®ÂÜå‰∏≠ÂøÉÔºö 12345678910111213141516171819package com.crossoverJie.service;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;@EnableEurekaServer@SpringBootApplicationpublic class EurekaApplication &#123; private final static Logger logger = LoggerFactory.getLogger(EurekaApplication.class); public static void main(String[] args) &#123; SpringApplication.run(EurekaApplication.class, args); logger.info("SpringBoot Start Success"); &#125;&#125; Êé•ÁùÄ‰øÆÊîπÈÖçÁΩÆÊñá‰ª∂application.properties: 123456789server.port=8888# ‰∏çÂêëÊ≥®ÂÜå‰∏≠ÂøÉÊ≥®ÂÜåËá™Â∑±eureka.client.register-with-eureka=false# ‰∏çÈúÄË¶ÅÊ£ÄÁ¥¢ÊúçÂä°eureka.client.fetch-registry=falseeureka.client.serviceUrl.defaultZone=http://localhost:$&#123;server.port&#125;/eureka/ ÈÖçÁΩÆ‰∏Ä‰∏ãÁ´ØÂè£‰ª•ÂèäÊ≥®ÂÜå‰∏≠ÂøÉÁöÑÂú∞ÂùÄÂç≥ÂèØ„ÄÇÁÑ∂ÂêéÊåâÁÖßÊ≠£Â∏∏ÂêØÂä®springBootÈ°πÁõÆ‰∏ÄÊ†∑ÂêØÂä®Âç≥ÂèØ„ÄÇ Âú®Âú∞ÂùÄÊ†èËæìÂÖ•http://localhost:8888ÁúãÂà∞‰∏Ä‰∏ãÁïåÈù¢Ôºö ÂΩìÁÑ∂Áé∞Âú®Âú®Ê≥®ÂÜå‰∏≠ÂøÉËøòÁúã‰∏çÂà∞‰ªª‰Ωï‰∏Ä‰∏™Â∫îÁî®Ôºå‰∏ãÈù¢ÈúÄË¶ÅÂ∞Ü‰∏äÊñáÁöÑsbc-user,sbc-orderÊ≥®ÂÜåËøõÊù•„ÄÇ ÂêëÊ≥®ÂÜå‰∏≠ÂøÉÊ≥®ÂÜåÊúçÂä°Êèê‰æõËÄÖÂè™ÈúÄË¶ÅÂú®application.propertiesÈÖçÁΩÆÊñá‰ª∂‰∏≠Âä†‰∏äÊ≥®ÂÜå‰∏≠ÂøÉÁöÑÈÖçÁΩÆÔºö 1eureka.client.serviceUrl.defaultZone=http://localhost:8888/eureka/ Âπ∂Âú®sbc-orderÁöÑ‰∏ªÁ±ª‰∏≠Âä†ÂÖ•@EnableDiscoveryClientÊ≥®Ëß£Âç≥ÂèØÂÆåÊàêÊ≥®ÂÜåÊúçÂä°„ÄÇ ÂêØÂä®Ê≥®ÂÜå‰∏≠ÂøÉ‰ª•ÂèäÂ∫îÁî®ÔºåÂú®Ê≥®ÂÜå‰∏≠ÂøÉÁúãÂà∞‰∏Ä‰∏ãÁïåÈù¢ÂàôÊàêÂäüÊ≥®ÂÜå: Ê∂àË¥πÊ≥®ÂÜå‰∏≠ÂøÉÁöÑÊúçÂä°ÊúçÂä°ÊòØÊ≥®ÂÜå‰∏äÂéª‰∫ÜÔºåËá™ÁÑ∂ÊòØÈúÄË¶ÅÊ∂àË¥π‰∫ÜÔºåËøôÈáåÂ∞±ÁÆÄÂçïÊ®°Êãü‰∫ÜÂú®Ë∞ÉÁî®http://localhost:8080/user/getUserËøô‰∏™Êé•Âè£ÁöÑÊó∂ÂÄôgetUserÊé•Âè£‰ºöÂéªË∞ÉÁî®orderÁöÑgetOrderÊúçÂä°„ÄÇ ËøôÈáå‰ºöÁî®Âà∞Âè¶‰∏Ä‰∏™‰æùËµñ: 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-ribbon&lt;/artifactId&gt;&lt;/dependency&gt; ‰ªñÂèØ‰ª•Â∏ÆÊàë‰ª¨ÂÅöÂà∞ÂÆ¢Êà∑Á´ØË¥üËΩΩÔºåÂÖ∑‰Ωì‰ΩøÁî®Â¶Ç‰∏ãÔºö Âä†ÂÖ•ribbon‰æùËµñ„ÄÇ Âú®‰∏ªÁ±ª‰∏≠ÂºÄÂêØ@LoadBalancedÂÆ¢Êà∑Á´ØË¥üËΩΩ„ÄÇ ÂàõÂª∫restTemplateÁ±ªÁöÑÂÆû‰æã 12345@Bean @LoadBalanced public RestTemplate restTemplate() &#123; return new RestTemplate(); &#125; ‰ΩøÁî®restTemplateË∞ÉÁî®ËøúÁ®ãÊúçÂä°: 123456789101112131415161718192021222324@Autowired private RestTemplate restTemplate; @RequestMapping(value = "/getUser",method = RequestMethod.POST) public UserRes getUser(@RequestBody UserReq userReq)&#123; OrderNoReq req = new OrderNoReq() ; req.setReqNo("1213"); //Ë∞ÉÁî®ËøúÁ®ãÊúçÂä° ResponseEntity&lt;Object&gt; res = restTemplate.postForEntity("http://sbc-order/order/getOrderNo", req, Object.class); logger.info("res="+JSON.toJSONString(res)); logger.debug("ÂÖ•ÂèÇ="+ JSON.toJSONString(userReq)); UserRes userRes = new UserRes() ; userRes.setUserId(123); userRes.setUserName("Âº†‰∏â"); userRes.setReqNo(userReq.getReqNo()); userRes.setCode(StatusEnum.SUCCESS.getCode()); userRes.setMessage("ÊàêÂäü"); return userRes ; &#125; Áî±‰∫éÊàëÁöÑËøúÁ®ãÊé•Âè£ÊòØpost,ÊâÄ‰ª•‰ΩøÁî®‰∫ÜpostForEntity()ÊñπÊ≥ïÔºåÂ¶ÇÊûúÊòØgetÂ∞±Êç¢ÊàêgetForEntity()Âç≥ÂèØ„ÄÇ Ê≥®ÊÑèËøôÈáåÊòØ‰ΩøÁî®Â∫îÁî®Âêçsbc-order(ÈÖçÁΩÆ‰∫ésbc-orderÁöÑapplication.properties‰∏≠)Êù•ËøõË°åË∞ÉÁî®ÁöÑÔºåÂπ∂‰∏çÊòØ‰∏Ä‰∏™IPÂú∞ÂùÄ„ÄÇ ÂêØÂä®Ê≥®ÂÜå‰∏≠ÂøÉ„ÄÅ‰∏§‰∏™Â∫îÁî®„ÄÇÁî®PostManË∞ÉÁî®getUserÊé•Âè£Êó∂ÊéßÂà∂Âè∞ÊâìÂç∞: 12017-06-27 00:18:04.534 INFO 63252 --- [nio-8080-exec-3] c.c.sbcuser.controller.UserController : res=&#123;&quot;body&quot;:&#123;&quot;code&quot;:&quot;4000&quot;,&quot;message&quot;:&quot;appID‰∏çËÉΩ‰∏∫Á©∫&quot;,&quot;reqNo&quot;:&quot;1213&quot;&#125;,&quot;headers&quot;:&#123;&quot;X-Application-Context&quot;:[&quot;sbc-order:8181&quot;],&quot;Content-Type&quot;:[&quot;application/xml;charset=UTF-8&quot;],&quot;Transfer-Encoding&quot;:[&quot;chunked&quot;],&quot;Date&quot;:[&quot;Mon, 26 Jun 2017 16:18:04 GMT&quot;]&#125;,&quot;statusCode&quot;:&quot;OK&quot;,&quot;statusCodeValue&quot;:200&#125; Áî±‰∫éÂπ∂Ê≤°Êúâ‰º†ÈÄíappIdÊâÄ‰ª•orderÊúçÂä°ËøîÂõû‰∫Ü‰∏Ä‰∏™ÈîôËØØÔºå‰πüÊ≠£ËØ¥ÊòéÊòØËøúÁ®ãË∞ÉÁî®Âà∞‰∫ÜËØ•ÊúçÂä°„ÄÇ ÊÄªÁªì ps:ËøôÈáåÂè™ÊòØÁÆÄÂçï‰ΩøÁî®‰∫ÜribbonÊù•ËøõË°åÊúçÂä°Ë∞ÉÁî®Ôºå‰ΩÜÂú®ÂÆûÈôÖÁöÑÂºÄÂèë‰∏≠ËøòÊòØÊØîËæÉÂ∞ëÁöÑ‰ΩøÁî®ËøôÁßçÊñπÂºèÊù•Ë∞ÉÁî®ËøúÁ®ãÊúçÂä°ÔºåËÄåÊòØ‰ΩøÁî®FeignËøõË°åÂ£∞ÊòéÂºèË∞ÉÁî®ÔºåÂèØ‰ª•ÁÆÄÂåñÂÆ¢Êà∑Á´Ø‰ª£Á†ÅÔºåÂÖ∑‰Ωì‰ΩøÁî®ÊñπÂºèËØ∑ÊåÅÁª≠ÂÖ≥Ê≥®„ÄÇ Êú¨Ê¨°ÁÆóÊòØspringBoot+springCloudÁöÑÂÖ•Èó®ÔºåËøòÊúâÂæàÂ§ö‰∏úË•øÊ≤°ÊúâËÆ≤Âà∞Ôºå‰πãÂêéÊàëÂ∞Ü‰ºöÊ†πÊçÆÂÆûÈôÖ‰ΩøÁî®ÁöÑ‰∏Ä‰∫õÁªèÈ™åÁªßÁª≠ÂàÜ‰∫´SpringCloudËøô‰∏™Êñ∞ÂÖ¥Ê°ÜÊû∂„ÄÇ È°πÁõÆÔºöhttps://github.com/crossoverJie/springboot-cloud ÂçöÂÆ¢Ôºöhttp://crossoverjie.top„ÄÇ]]></content>
      <categories>
        <category>sbc</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>SpringBoot</tag>
        <tag>SpringCloud</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SSM(ÂçÅÂõõ) Âü∫‰∫éannotationÁöÑhttpÈò≤ÈáçÊèí‰ª∂]]></title>
    <url>%2F2017%2F05%2F24%2FSSM14%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄÈíàÂØπ‰∫éÊàë‰ª¨Áé∞Âú®Â∏∏Áî®ÁöÑRESTful APIÈÄöÂ∏∏Êàë‰ª¨ÈúÄË¶ÅÂØπËØ∑Ê±ÇËøõË°åÂîØ‰∏ÄÊ†áËØÜÔºå‰πüÂ∞±ÊòØÊØèÊ¨°ÈÉΩË¶ÅÂ∏¶‰∏ä‰∏Ä‰∏™ËØ∑Ê±ÇÂè∑,Â¶ÇreqNO„ÄÇ ÂØπ‰∫éÂÖ•Â∫ìËøôÁßçÊìç‰ΩúÊï∞ÊçÆÂ∫ìÁöÑËØ∑Ê±ÇÊàë‰ª¨‰∏ÄËà¨Ë¶Å‰øùËØÅ‰ªñÁöÑÂîØ‰∏ÄÊÄßÔºå‰∏Ä‰∏™ËØ∑Ê±ÇÂè∑ÈÄöÂ∏∏Âè™ËÉΩÁî®‰∏ÄÊ¨°ÔºåÊâÄ‰ª•ÈúÄË¶ÅÊàë‰ª¨ÂØπËøôÁßçËØ∑Ê±ÇÂä†‰∏äÊ†°È™åÊú∫Âà∂„ÄÇ ËØ•ÈúÄÊ±ÇÁöÑÂÆûÁé∞ÊÄùË∑ØÊòØÈÄöËøáËá™ÂÆö‰πâannotationÔºåÂè™ÁªôÈúÄË¶ÅËøõË°åÊ†°È™åÁöÑÊé•Âè£Âä†‰∏äÊ≥®Ëß£„ÄÇÁÑ∂ÂêéÈÄöËøáÂàáÈù¢‰ΩøÁî®‰∫ÜÊ≥®Ëß£ÁöÑÊé•Âè£Â∞ÜÊØèÊ¨°ËØ∑Ê±ÇÂè∑Â≠òËøõRedisÔºåÊØèÊ¨°ÈÉΩËøõË°åÂà§Êñ≠ÊòØÂê¶Â≠òÂú®Ëøô‰∏™ËØ∑Ê±ÇÂè∑Âç≥ÂèØ„ÄÇ Êù•Áúã‰∏ãÂä†‰∏äÊú¨Ê¨°Êèí‰ª∂ÁöÑÂÆûÈôÖÊïàÊûúÔºö Ëá™ÂÆö‰πâÊ≥®Ëß£È¶ñÂÖàÊàë‰ª¨Ë¶ÅËá™ÂÆö‰πâ‰∏Ä‰∏™Ê≥®Ëß£Ôºö 1234567@Target(ElementType.METHOD)@Retention(RetentionPolicy.RUNTIME)@Documentedpublic @interface CheckReqNo &#123; String desc() default "";&#125; (ps:ËøôÈáåÂπ∂‰∏çËøáÂ§öÁöÑËÆ≤Ëß£Ê≥®Ëß£Áõ∏ÂÖ≥ÁöÑÁü•ËØÜ)„ÄÇ È¶ñÂÖà‰ΩøÁî®@interfaceÊù•Â£∞Êòé‰∏Ä‰∏™Ê≥®Ëß£„ÄÇÊé•ÁùÄÂà©Áî®Java‰∏∫Êàë‰ª¨Êèê‰æõÁöÑ‰∏â‰∏™ÂÖÉÊ≥®Ëß£Êù•ÂÆö‰πâCheckReqNoÊ≥®Ëß£„ÄÇ ÂÖ∂‰∏≠@TargetË°®ÊòéËøô‰∏™Ê≥®Ëß£Ë¢´Áî®‰∫é‰ªÄ‰πàÂú∞ÊñπÔºå‰ΩøÁî®ElementType.METHODË°®ÊòéË¢´Â∫îÁî®Âà∞ÊñπÊ≥ï‰∏äÔºåËøòÊúâ‰∏Ä‰∫õÂÖ∂‰ªñÂÄºÂèØ‰ª•Êü•Áúãjava.lang.annotation.ElementTypeËøô‰∏™Êûö‰∏æÁ±ªÂûã„ÄÇ @RetentionÊ≥®Ëß£Ë°®ÊòéÊàë‰ª¨ÁöÑÊ≥®Ëß£Âú®‰ªÄ‰πàËåÉÂõ¥ÂÜÖÊúâÊïàÔºåËøôÈáåÈÖçÁΩÆÁöÑRetentionPolicy.RUNTIMEË°®ÊòéÂú®ËøêË°åÊó∂ÂèØ‰ª•ÈÄöËøáÂèçÂ∞ÑÊù•Ëé∑Âèñ„ÄÇ @DocumentedÁúãÂ≠óÈù¢ÊÑèÊÄùÂ∫îËØ•‰πüËÉΩÁåúÂà∞ÊòØÁî®‰∫éÁîüÊàêJavaDocÊñáÊ°£ÁöÑ„ÄÇ ÂÖ∂‰∏≠ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™desc()ÁöÑÊñπÊ≥ïÂÖ∂ÂÆûÂπ∂Ê≤°ÊúâÁî®Âà∞Ôºå‰ΩÜÂ¶ÇÊûúÈúÄË¶ÅÂú®‰ΩøÁî®Ê≥®Ëß£ÁöÑÊó∂ÂÄôÈúÄË¶ÅËá™ÂÆö‰πâ‰∏Ä‰∫õfiled(Âüü)ÁöÑÈúÄÊ±ÇÂèØ‰ª•ÊåâÁÖßËøôÊ†∑ÁöÑÊñπÂºèÂÜôÂà∞ËøôÈáåÔºåÈÄöËøáÂèçÂ∞ÑÈÉΩÂèØ‰ª•Ëé∑ÂèñÂà∞ÂÖ∑‰ΩìÁöÑÂÄº„ÄÇÂ¶ÇÔºö@CheckReqNo(desc = &quot;abc&quot;)Â∞±ÂèØ‰ª•Ëé∑ÂèñÂà∞&quot;abc&quot;ÁöÑÂÄº„ÄÇ ÂàáÈù¢Ê≥®Ëß£ÊåâÁÖß‰πãÂâçÁöÑÊÉ≥Ê≥ïÊòØÂú®ÂØπÊâÄÊúâ‰ΩøÁî®‰∫ÜËØ•Ê≥®Ëß£ÁöÑÊñπÊ≥ïËøõË°åÂàáÈù¢Ôºö12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364@Aspect@Componentpublic class ReqNoDrcAspect &#123; private static Logger logger = LoggerFactory.getLogger(ReqNoDrcAspect.class); @Value("$&#123;redis.prefixReq:reqNo&#125;") private String prefixReq ; @Value("$&#123;redis.day:1&#125;") private long day ; @Autowired private RedisTemplate&lt;String, String&gt; redisTemplate; @PostConstruct public void init() throws Exception &#123; logger.info("SSM-REQUEST-CHECK init......"); &#125; @Pointcut("@annotation(com.crossoverJie.request.anotation.CheckReqNo)") public void checkRepeat()&#123; &#125; @Before("checkRepeat()") public void before(JoinPoint joinPoint) throws Exception &#123; BaseRequest request; request = getBaseRequest(joinPoint); if(request != null)&#123; final String reqNo = request.getReqNo(); if(StringUtil.isEmpty(reqNo))&#123; throw new RuntimeException("reqNo‰∏çËÉΩ‰∏∫Á©∫"); &#125;else&#123; try &#123; String tempReqNo = redisTemplate.opsForValue().get(prefixReq +reqNo); logger.debug("tempReqNo="+tempReqNo); if((StringUtil.isEmpty(tempReqNo)))&#123; redisTemplate.opsForValue().set(prefixReq + reqNo, reqNo, day, TimeUnit.DAYS); &#125;else&#123; throw new RuntimeException("ËØ∑Ê±ÇÂè∑ÈáçÂ§ç,reqNo="+reqNo); &#125; &#125; catch (RedisConnectionFailureException e)&#123; logger.error("redisÊìç‰ΩúÂºÇÂ∏∏",e); throw new RuntimeException("need redisService") ; &#125; &#125; &#125; &#125; public static BaseRequest getBaseRequest(JoinPoint joinPoint) throws Exception &#123; BaseRequest returnRequest = null; Object[] arguments = joinPoint.getArgs(); if(arguments != null &amp;&amp; arguments.length &gt; 0)&#123; returnRequest = (BaseRequest) arguments[0]; &#125; return returnRequest; &#125;&#125; ‰ΩøÁî®@AspectÊù•ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ÂàáÈù¢„ÄÇÂÖ∂‰∏≠prefixReq,dayÂüüÂèØ‰ª•Ëá™ÂÆö‰πâÁºìÂ≠òËØ∑Ê±ÇÂè∑Êó∂ÁöÑkeyÂâçÁºÄ‰ª•ÂèäÁºìÂ≠òÁöÑÊó∂Èó¥„ÄÇ ÊúÄÂÖ≥ÈîÆÁöÑ‰∏ÄÁÇπÊòØÁî®@Pointcut(&quot;@annotation(com.crossoverJie.request.anotation.CheckReqNo)&quot;)ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ÂàáÂÖ•ÁÇπÔºåËøôÊ†∑ÊâÄÊúâ‰ΩøÁî®@CheckReqNoÁöÑÊ≥®Ëß£ÈÉΩ‰ºöË¢´Êã¶Êà™„ÄÇ Êé•‰∏ãÊù•ÁöÑÈÄªËæëÂ∞±ÊØîËæÉÁÆÄÂçï‰∫ÜÔºåÂú®ÊØèÊ¨°ËØ∑Ê±Ç‰πãÂâçËøõË°åÊã¶Êà™„ÄÇ ÂÖàÂéªRedis‰∏≠Êü•ÁúãËøô‰∏™ËØ∑Ê±ÇÂè∑(ps:ÂèçÂ∞ÑËé∑Âèñ)ÊòØÂê¶Â≠òÂú®ÔºåÂ¶ÇÊûú‰∏çÂ≠òÂú®ÂàôÈÄöËøáÂπ∂Â∞ÜÊú¨Ê¨°ÁöÑËØ∑Ê±ÇÂè∑ÁºìÂ≠òËµ∑Êù•„ÄÇÂ¶ÇÊûúÂ≠òÂú®ÂàôÊäõÂá∫ÂºÇÂ∏∏„ÄÇ ‰ΩøÁî®Ê≥®Ëß£ÂèØ‰ª•Âú®jdbc.propertiesÈÖçÁΩÆÊñá‰ª∂‰∏≠Ëá™ÂÆö‰πâÂâçÁºÄÂíåÁºìÂ≠òÊó∂Èó¥ 1234#redisÂâçÁºÄredis.prefixReq=reqNo#redisÁºìÂ≠òÊó∂Èó¥ ÈªòËÆ§Âçï‰Ωç‰∏∫Â§©redis.day=1 ‰∏çÂÆö‰πâ‰πüÂèØ‰ª•Ôºå‰ºö‰ΩøÁî®ÈªòËÆ§ÂÄº„ÄÇ Áî±‰∫éËØ•Ê≥®Ëß£ÊòØÈúÄË¶ÅÂä†Âà∞controllerÂ±Ç,Âõ†Ê≠§Êàë‰ª¨Âæó‰ΩøÁî®CGLIB‰ª£ÁêÜ„ÄÇËøôÈáåÊúâ‰∏Ä‰∏™ÂùëÔºåÈúÄË¶ÅÂ∞ÜÂºÄÂêØCGLIBÁöÑÈÖçÁΩÆÈÖçÁΩÆÂà∞Êàë‰ª¨web.xml‰∏≠ÁöÑ 1234567891011&lt;!-- Spring MVC servlet --&gt; &lt;servlet&gt; &lt;servlet-name&gt;SpringMVC&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:spring-mvc.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &lt;async-supported&gt;true&lt;/async-supported&gt; &lt;/servlet&gt; ËøôÈáåÊâÄÂÆö‰πâÁöÑspring-mvc.xmlÊñá‰ª∂‰∏≠Ôºå‰∏çÁÑ∂springMVCÊâÄÂú®ÁöÑÂ≠êÂÆπÂô®ÊòØÊó†Ê≥ïË¢´Áà∂ÂÆπÂô®ÊâÄÂä†ËΩΩÁöÑ„ÄÇ ‰ΩøÁî®ÂÆû‰æãÔºö 1234567891011121314151617181920212223@CheckReqNo@RequestMapping(value = "/createRedisContent",method = RequestMethod.POST)@ResponseBodypublic BaseResponse&lt;NULLBody&gt; createRedisContent(@RequestBody RedisContentReq redisContentReq)&#123; BaseResponse&lt;NULLBody&gt; response = new BaseResponse&lt;NULLBody&gt;() ; Rediscontent rediscontent = new Rediscontent() ; try &#123; CommonUtil.setLogValueModelToModel(redisContentReq,rediscontent); rediscontentMapper.insertSelective(rediscontent) ; response.setReqNo(redisContentReq.getReqNo()); response.setCode(StatusEnum.SUCCESS.getCode()); response.setMessage(StatusEnum.SUCCESS.getMessage()); &#125;catch (Exception e)&#123; logger.error("system error",e); response.setReqNo(response.getReqNo()); response.setCode(StatusEnum.FAIL.getCode()); response.setMessage(StatusEnum.FAIL.getMessage()); &#125; return response ;&#125; Áªü‰∏ÄÂºÇÂ∏∏controller1234567891011121314151617181920212223242526272829/** * * ClassName: ErrorController &lt;br/&gt; * Function: ÈîôËØØÂºÇÂ∏∏Áªü‰∏ÄÂ§ÑÁêÜ. &lt;br/&gt; * @author crossoverJie * @version * @since JDK 1.7 */@ControllerAdvicepublic class ErrorController &#123; private Logger logger = LoggerFactory.getLogger(this.getClass()); @ExceptionHandler(Exception.class) @ResponseStatus(HttpStatus.OK) @ResponseBody public Object processUnauthenticatedException(NativeWebRequest request, Exception e) &#123; logger.error("ËØ∑Ê±ÇÂá∫Áé∞ÂºÇÂ∏∏:", e); BaseResponse&lt;NULLBody&gt; response = new BaseResponse&lt;NULLBody&gt;(); response.setCode(StatusEnum.FAIL.getCode()); if (e instanceof RuntimeException)&#123; response.setMessage(e.getMessage()); &#125; else &#123; response.setMessage(StatusEnum.FAIL.getMessage()); &#125; return response ; &#125;&#125; ËøôÊ†∑ÂΩìcontrollerÂ±ÇÂá∫Áé∞ÂºÇÂ∏∏‰πãÂêéÈÉΩ‰ºöËøõÂÖ•ËøôÈáåËøõË°åÁªü‰∏ÄÁöÑËøîÂõû„ÄÇ ÊÄªÁªìËá≥Ê≠§Êï¥‰∏™Êèí‰ª∂ÁöÑÊµÅÁ®ãÂ∑≤ÁªèÂÖ®ÈÉ®OKÔºå‰ªé‰∏≠ÂèØ‰ª•ÁúãÂá∫Spring AOPÂú®ÂÆûÈôÖÂºÄÂèë‰∏≠ÁöÑÂêÑÁßçÂ•ΩÂ§Ñ„ÄÇ‰πãÂâçÁöÑÂá†ÁØáÊñáÁ´†‰πüÊúâÂ∫îÁî®Âà∞Ôºö Âú®JavaWebÂ∫îÁî®‰∏≠‰ΩøÁî®Redis Âä®ÊÄÅÂàáÊç¢Êï∞ÊçÆÊ∫ê ‰∏çÁü•‰∏çËßâËøô‰∏™Â∞èÁôΩÂÖ•Èó®ÁöÑSSMÁ≥ªÂàóÂ∑≤ÁªèÊõ¥Êñ∞‰∫Ü14ÁØá‰∫ÜÔºåÂú®GitHub‰πüÊúâ‰∫Ü500Â§öÈ¢óÊòü‰∫ÜÔºåÊúüÈó¥‰πüÂíå‰∏çÂ∞ëÊúãÂèãÊúâËøá‰∫§ÊµÅ„ÄÅÊé¢ËÆ®ÔºåÊÑüË∞¢Â§ßÂÆ∂ÁöÑÊîØÊåÅ„ÄÇ Êé•‰∏ãÊù•ÂèØËÉΩ‰∏çÂ§™‰ºöÊõ¥Êñ∞Ëøô‰∏™Á≥ªÂàó‰∫ÜÔºåÁî±‰∫éÂçö‰∏ªÁé∞Âú®ÊâÄÂú®ÁöÑÈ°πÁõÆÁªÑÈááÁî®ÁöÑÊòØÁõÆÂâçÊØîËæÉÊµÅË°åÁöÑSpringBoot+SpringCloudÂíåDockerÁöÑÊñπÂºèÊù•ËøõË°åÊû∂ÊûÑÁöÑÔºåÊâÄ‰ª•‰πãÂêéÁöÑÈáçÂøÉËÇØÂÆö‰ºöÁßªÂà∞ËøôÊñπÈù¢ÔºåÁî®ËøáSpringBoot‰πãÂêéÁõ∏‰ø°Â§ßÂÆ∂ËÇØÂÆö‰πüÂõû‰∏çÂéª‰∫Ü„ÄÇ ÊâÄ‰ª•‰πãÂêéÊàë‰ºöÁªßÁª≠Êõ¥Êñ∞SpringBoot+SpringCloudÁõ∏ÂÖ≥ÁöÑÊñáÁ´†ÔºåÊ¨¢ËøéÊåÅÁª≠ÂÖ≥Ê≥®ÔºåÊåÅÁª≠ÊãçÁ†ñ(ps:Ëøô‰∏™Êèí‰ª∂‰πü‰ºöÁî®springBootÈáçÂÜô‰∏ÄÈÅç) Êèí‰ª∂Âú∞ÂùÄÔºöhttps://github.com/crossoverJie/SSM-REQUEST-CHECK.git È°πÁõÆÂú∞ÂùÄÔºöhttps://github.com/crossoverJie/SSM.git ‰∏™‰∫∫ÂçöÂÆ¢Âú∞ÂùÄÔºöhttp://crossoverjie.top„ÄÇ]]></content>
      <categories>
        <category>SSM</category>
      </categories>
      <tags>
        <tag>HTTP</tag>
        <tag>annotation</tag>
        <tag>AOP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÁßëÊôÆ-‰∏∫Ëá™Â∑±ÁöÑÂçöÂÆ¢ÂÖçË¥πÂä†‰∏äÂ∞èÁªøÈîÅ]]></title>
    <url>%2F2017%2F05%2F07%2Fhttps%2F</url>
    <content type="text"><![CDATA[Âú®Â¶Ç‰ªäÁöÑHTTPSÂ§ßÂΩìÂÖ∂ÈÅìÁöÑÊÉÖÂÜµ‰∏ãËá™Â∑±ÁöÑÂçöÂÆ¢Ë¶ÅÊòØËøòÊ≤°ÊúâÁî®‰∏ä„ÄÇ‰Ωú‰∏∫‰∫íËÅîÁΩëÁöÑËû∫‰∏ùÈíâ(Á†ÅÂÜú)Â≤Ç‰∏çÊòØÂæàÊ≤°Èù¢Â≠ê„ÄÇ ‰ΩøÁî®CLOUDFLAREËøôÈáå‰ΩøÁî®CLOUDFLAREÊù•Êèê‰æõHTTPSÊúçÂä°„ÄÇ Âú®ÂÖ∂ÂÆòÁΩëËøõË°åÊ≥®ÂÜåÔºåÊåâÁÖßÊèêÁ§∫Ê∑ªÂä†Â•ΩËá™Â∑±ÁöÑÂüüÂêçÂç≥ÂèØ„ÄÇ ‰πãÂêéÈúÄË¶ÅÂú®Ëá™Â∑±ÂüüÂêçÁöÑÊèê‰æõÂïÜÂ§Ñ‰øÆÊîπDNSÊúçÂä°Âô®ÔºåÊàëÊòØÂú®‰∏áÁΩëË¥≠‰π∞ÁöÑ‰øÆÊîπÂêéÂ¶Ç‰∏ãÂõæÔºöÂÖ∂‰∏≠ÁöÑDNSÊúçÂä°Âô®Âú∞ÂùÄÁî±CLOUDFLAREÊòØÊèê‰æõÁöÑ„ÄÇ‰øÆÊîπÂÆåÊàê‰πãÂêéÈÄöÂ∏∏ÈúÄË¶ÅÁ≠âÂæÖ‰∏ÄÊÆµÊó∂Èó¥ÊâçËÉΩÁîüÊïà„ÄÇ Êé•ÁùÄÂú®CLOUDFLAREÈÖçÁΩÆDNSËß£ÊûêÔºöÁÇπÂáªCLOUDFLAREÈ°∂ÈÉ®ÁöÑDNSËøõË°åÂ¶ÇÊàë‰∏äÂõæ‰∏≠ÁöÑÈÖçÁΩÆÔºåÂíå‰πãÂâçÁöÑÈÖçÁΩÆÊ≤°Êúâ‰ªÄ‰πàÂå∫Âà´„ÄÇ Á≠âÂæÖ‰∏ÄÊÆµÊó∂Èó¥‰πãÂêéÂèëÁé∞‰ΩøÁî®HTTP,HTTPSÈÉΩËÉΩËÆøÈóÆÔºå‰ΩÜÊòØÊúÄÂ•ΩËøòÊòØËÉΩÂú®ËÆøÈóÆHTTPÁöÑÊó∂ÂÄôËÉΩÂº∫Âà∂Ë∑≥ËΩ¨Âà∞HTTPS. Âú®CLOUDFLAREËèúÂçïÊ†èÁÇπÂáªpage-rules‰πãÂêéÊñ∞Âª∫‰∏Ä‰∏™page ruleÔºöËøôÊ†∑Êï¥‰∏™ÁΩëÁ´ôÁöÑËØ∑Ê±ÇÈÉΩ‰ºöÂº∫Âà∂Âà∞ËØ∑Ê±ÇÂà∞HTTPS. ‰∏ªÈ¢òÈÖçÁΩÆÁî±‰∫éÊàëÊâçÁî®ÁöÑÊòØHexo‰∏≠ÁöÑNext‰∏ªÈ¢òÔºåÂÖ∂‰∏≠ÈÖçÁΩÆ‰∫ÜCNZZÁ´ôÈïøÁªüËÆ°„ÄÇÂÖ∂‰∏≠ÈÖçÁΩÆÁöÑCNZZÁªüËÆ°JSÊòØÊâçÁî®ÁöÑHTTP„ÄÇÂØºËá¥Âú®È¶ñÈ°µÁöÑÊó∂ÂÄôchrome‰∏ÄÁõ¥ÊèêÁ§∫ÊÑüÂèπÂè∑„ÄÇ‰øÆÊîπÁ´ôÁÇπthemes/next/layout/_scripts/third-party/analyticsÁõÆÂΩï‰∏ãÁöÑcnzz-analytics.swigÊñá‰ª∂1234567&#123;% if theme.cnzz_siteid %&#125; &lt;div style=&quot;display: none;&quot;&gt; &lt;script src=&quot;https://s6.cnzz.com/stat.php?id=&#123;&#123; theme.cnzz_siteid &#125;&#125;&amp;web_id=&#123;&#123; theme.cnzz_siteid &#125;&#125;&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt; &lt;/div&gt;&#123;% endif %&#125; ‰πãÂêéÂÜçËøõË°åÊûÑÂª∫ÁöÑÊó∂ÂÄôÂ∞±‰ºö‰ΩøÁî®HTTPS. ÂÄºÂæóÊ≥®ÊÑè‰∏ÄÁÇπÁöÑÊòØ‰πãÂêéÊñáÁ´†‰∏≠ÊâÄ‰ΩøÁî®ÁöÑÂõæÁâáÈÉΩË¶ÅÁî®HTTPSÁöÑÂú∞ÂùÄ‰∫ÜÔºå‰∏çÁÑ∂chrome‰ºöÊèêÁ§∫ÊÑüÂèπÂè∑„ÄÇ ‰∏™‰∫∫ÂçöÂÆ¢Âú∞ÂùÄÔºöhttp://crossoverjie.top„ÄÇ GitHubÂú∞ÂùÄÔºöhttps://github.com/crossoverJie„ÄÇ]]></content>
      <categories>
        <category>ÁßëÊôÆ</category>
      </categories>
      <tags>
        <tag>HTTP</tag>
        <tag>HTTPS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SSM(ÂçÅ‰∏â) Â∞ÜdubboÊö¥Èú≤Âá∫HTTPÊúçÂä°]]></title>
    <url>%2F2017%2F05%2F07%2FSSM13%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄÈÄöÂ∏∏Êù•ËØ¥‰∏Ä‰∏™dubboÊúçÂä°ÈÉΩÊòØÂØπÂÜÖÁªôÂÜÖÈÉ®Ë∞ÉÁî®ÁöÑÔºå‰ΩÜ‰πüÊúâÂèØËÉΩ‰∏Ä‰∏™ÊúçÂä°Â∞±ÊòØÈúÄË¶ÅÊèê‰æõÁªôÂ§ñÈÉ®‰ΩøÁî®ÔºåÂπ∂‰∏îËøò‰∏çËÉΩÊúâ‰ΩøÁî®ËØ≠Ë®ÄÁöÑÂ±ÄÈôêÊÄß„ÄÇ ÊØîËæÉÊ†áÂáÜÁöÑÂÅöÊ≥ïÊòØÂØπÂ§ñÁöÑÊúçÂä°Êàë‰ª¨Áªü‰∏ÄÊèê‰æõ‰∏Ä‰∏™openAPIÔºåËøôÊ†∑ÁöÑË∞ÉÁî®ÊñπÈúÄË¶ÅÊåâÁÖßÊ†áÂáÜÊèê‰æõÁõ∏Â∫îÁöÑappID‰ª•ÂèäÂØÜÈí•Êù•ËøõË°åÈ™åÁ≠æÊâçËÉΩ‰ΩøÁî®„ÄÇËøôÊ†∑Âõ∫ÁÑ∂ÊòØÊØîËæÉËßÑËåÉÂíåÂÆâÂÖ®Ôºå‰ΩÜÂ§çÊùÇÂ∫¶‰πü‰∏ç‰∫ö‰∫éÂºÄÂèë‰∏Ä‰∏™ÂçïÁã¨ÁöÑÁ≥ªÁªü‰∫Ü„ÄÇ ËøôÈáåÊâÄËÆ≤Âà∞ÁöÑÊ≤°ÊúâÈÇ£‰πàÂ§çÊùÇÔºåÂ∞±Âè™ÊòØÊää‰∏Ä‰∏™‰∏çÈúÄË¶ÅÂêÑÁßçÊùÉÈôêÊ£ÄÈ™åÁöÑdubboÊúçÂä°ÂØπÂ§ñÊèê‰æõ‰∏∫HTTPÊúçÂä°„ÄÇ Ë∞ÉÁî®Á§∫‰æã: ÂáÜÂ§áÂ∑•‰Ωú‰ª•‰∏ãÊòØÊú¨ÊñáÊâÄÊ∂âÂèäÂà∞ÁöÑ‰∏Ä‰∫õÁü•ËØÜÁÇπÔºö SpringÁõ∏ÂÖ≥Áü•ËØÜ„ÄÇ JavaÂèçÂ∞ÑÁõ∏ÂÖ≥Áü•ËØÜ„ÄÇ SpringMVCÁõ∏ÂÖ≥Áü•ËØÜ„ÄÇ ÂÖ∂ÂÆûÊÄùË∑ØÂæàÁÆÄÂçïÔºåÂ∞±ÊòØÂà©Áî®SpringMVCÊèê‰æõ‰∏Ä‰∏™HTTPÊé•Âè£„ÄÇÂú®ËØ•Êé•Âè£‰∏≠ÈÄöËøáÂÖ•ÂèÇËøõË°åÂèçÂ∞ÑÊâæÂà∞ÂÖ∑‰ΩìÁöÑdubboÊúçÂä°ÂÆûÁé∞ËøõË°åË∞ÉÁî®„ÄÇ HttpProviderConfÈÖçÁΩÆÁ±ªÈ¶ñÂÖàÈúÄË¶ÅÂÆö‰πâ‰∏Ä‰∏™HttpProviderConfÁ±ªÁî®‰∫é‰øùÂ≠òÂ£∞ÊòéÈúÄË¶ÅÂØπÂ§ñÊèê‰æõÊúçÂä°ÁöÑÂåÖÂêçÔºåÊØïÁ´üÊàë‰ª¨ÂèçÂ∞ÑÊó∂ÈúÄË¶ÅÁî®Âà∞‰∏Ä‰∏™Á±ªÁöÑÂÖ®ÈôêÂÆöÂêçÔºö 12345678public class HttpProviderConf &#123; /** * Êèê‰æõhttpËÆøÈóÆÁöÑÂåÖ */ private List&lt;String&gt; usePackage ; //ÁúÅÁï•getter setterÊñπÊ≥ï&#125; Â∞±Âè™Êúâ‰∏Ä‰∏™usePackageÊàêÂëòÂèòÈáèÔºåÁî®‰∫éÂ≠òÊîæÈúÄË¶ÅÂåÖÂêç„ÄÇËá≥‰∫éÁî®ListÁöÑÂéüÂõ†ÊòØÂÖÅËÆ∏ÊúâÂ§ö‰∏™„ÄÇ ËØ∑Ê±ÇÂìçÂ∫îÂÖ•ÂèÇ„ÄÅÂá∫ÂèÇHttpRequestÂÖ•ÂèÇ123456public class HttpRequest &#123; private String param ;//ÂÖ•ÂèÇ private String service ;//ËØ∑Ê±Çservice private String method ;//ËØ∑Ê±ÇÊñπÊ≥ï //ÁúÅÁï•getter setterÊñπÊ≥ï&#125; ÂÖ∂‰∏≠paramÊòØÁî®‰∫éÂ≠òÊîæÁúüÊ≠£Ë∞ÉÁî®dubboÊúçÂä°Êó∂ÁöÑÂÖ•ÂèÇÔºå‰º†ÂÖ•jsonÂú®Ë∞ÉÁî®ÁöÑÊó∂ÂÄôËß£ÊûêÊàêÂÖ∑‰ΩìÁöÑÂèÇÊï∞ÂØπË±°„ÄÇ serviceÂ≠òÊîædubboÊúçÂä°Â£∞ÊòéÁöÑinterface APIÁöÑÂåÖÂêç„ÄÇ methodÂàôÊòØÁúüÊ≠£Ë∞ÉÁî®ÁöÑÊñπÊ≥ïÂêçÁß∞„ÄÇ HttpResponse ÂìçÂ∫î1234567891011public class HttpResponse implements Serializable&#123; private static final long serialVersionUID = -552828440320737814L; private boolean success;//ÊàêÂäüÊ†áÂøó private String code;//‰ø°ÊÅØÁ†Å private String description;//ÊèèËø∞ //ÁúÅÁï•getter setterÊñπÊ≥ï&#125; ËøôÈáåÂè™ÊòØÂ∞ÅË£Ö‰∫ÜÂ∏∏Áî®ÁöÑHTTPÊúçÂä°ÁöÑÂìçÂ∫îÊï∞ÊçÆ„ÄÇ Êö¥Èú≤ÊúçÂä°controllerÊúÄÈáçË¶ÅÁöÑÂàôÊòØcontrollerÈáåÁöÑÂÆûÁé∞‰ª£Á†Å‰∫Ü„ÄÇ ÂÖàË¥¥‰ª£Á†ÅÔºö123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155@Controller@RequestMapping("/dubboAPI")public class DubboController implements ApplicationContextAware&#123; private final static Logger logger = LoggerFactory.getLogger(DubboController.class); @Autowired private HttpProviderConf httpProviderConf; //ÁºìÂ≠ò‰ΩúÁî®ÁöÑmap private final Map&lt;String, Class&lt;?&gt;&gt; cacheMap = new HashMap&lt;String, Class&lt;?&gt;&gt;(); protected ApplicationContext applicationContext; @ResponseBody @RequestMapping(value = "/&#123;service&#125;/&#123;method&#125;",method = RequestMethod.POST) public String api(HttpRequest httpRequest, HttpServletRequest request, @PathVariable String service, @PathVariable String method) &#123; logger.debug("ip:&#123;&#125;-httpRequest:&#123;&#125;",getIP(request), JSON.toJSONString(httpRequest)); String invoke = invoke(httpRequest, service, method); logger.debug("callback :"+invoke) ; return invoke ; &#125; private String invoke(HttpRequest httpRequest,String service,String method)&#123; httpRequest.setService(service); httpRequest.setMethod(method); HttpResponse response = new HttpResponse() ; logger.debug("input param:"+JSON.toJSONString(httpRequest)); if (!CollectionUtils.isEmpty(httpProviderConf.getUsePackage()))&#123; boolean isPac = false ; for (String pac : httpProviderConf.getUsePackage()) &#123; if (service.startsWith(pac))&#123; isPac = true ; break ; &#125; &#125; if (!isPac)&#123; //Ë∞ÉÁî®ÁöÑÊòØÊú™ÁªèÈÖçÁΩÆÁöÑÂåÖ logger.error("service is not correct,service="+service); response.setCode("2"); response.setSuccess(false); response.setDescription("service is not correct,service="+service); &#125; &#125; try &#123; Class&lt;?&gt; serviceCla = cacheMap.get(service); if (serviceCla == null)&#123; serviceCla = Class.forName(service) ; logger.debug("serviceCla:"+JSON.toJSONString(serviceCla)); //ËÆæÁΩÆÁºìÂ≠ò cacheMap.put(service,serviceCla) ; &#125; Method[] methods = serviceCla.getMethods(); Method targetMethod = null ; for (Method m : methods) &#123; if (m.getName().equals(method))&#123; targetMethod = m ; break ; &#125; &#125; if (method == null)&#123; logger.error("method is not correct,method="+method); response.setCode("2"); response.setSuccess(false); response.setDescription("method is not correct,method="+method); &#125; Object bean = this.applicationContext.getBean(serviceCla); Object result = null ; Class&lt;?&gt;[] parameterTypes = targetMethod.getParameterTypes(); if (parameterTypes.length == 0)&#123; //Ê≤°ÊúâÂèÇÊï∞ result = targetMethod.invoke(bean); &#125;else if (parameterTypes.length == 1)&#123; Object json = JSON.parseObject(httpRequest.getParam(), parameterTypes[0]); result = targetMethod.invoke(bean,json) ; &#125;else &#123; logger.error("Can only have one parameter"); response.setSuccess(false); response.setCode("2"); response.setDescription("Can only have one parameter"); &#125; return JSON.toJSONString(result) ; &#125;catch (ClassNotFoundException e)&#123; logger.error("class not found",e); response.setSuccess(false); response.setCode("2"); response.setDescription("class not found"); &#125; catch (InvocationTargetException e) &#123; logger.error("InvocationTargetException",e); response.setSuccess(false); response.setCode("2"); response.setDescription("InvocationTargetException"); &#125; catch (IllegalAccessException e) &#123; logger.error("IllegalAccessException",e); response.setSuccess(false); response.setCode("2"); response.setDescription("IllegalAccessException"); &#125; return JSON.toJSONString(response) ; &#125; /** * Ëé∑ÂèñIP * @param request * @return */ private String getIP(HttpServletRequest request) &#123; if (request == null) return null; String s = request.getHeader("X-Forwarded-For"); if (s == null || s.length() == 0 || "unknown".equalsIgnoreCase(s)) &#123; s = request.getHeader("Proxy-Client-IP"); &#125; if (s == null || s.length() == 0 || "unknown".equalsIgnoreCase(s)) &#123; s = request.getHeader("WL-Proxy-Client-IP"); &#125; if (s == null || s.length() == 0 || "unknown".equalsIgnoreCase(s)) &#123; s = request.getHeader("HTTP_CLIENT_IP"); &#125; if (s == null || s.length() == 0 || "unknown".equalsIgnoreCase(s)) &#123; s = request.getHeader("HTTP_X_FORWARDED_FOR"); &#125; if (s == null || s.length() == 0 || "unknown".equalsIgnoreCase(s)) &#123; s = request.getRemoteAddr(); &#125; if ("127.0.0.1".equals(s) || "0:0:0:0:0:0:0:1".equals(s)) try &#123; s = InetAddress.getLocalHost().getHostAddress(); &#125; catch (UnknownHostException unknownhostexception) &#123; return ""; &#125; return s; &#125; public void setApplicationContext(ApplicationContext applicationContext) throws BeansException &#123; this.applicationContext = applicationContext; &#125; ÂÖà‰∏ÄÊ≠•‰∏ÄÊ≠•ÁöÑÁúãÔºö È¶ñÂÖàÊòØÂÆö‰πâ‰∫Ü‰∏Ä‰∏™DubboController,Âπ∂‰ΩøÁî®‰∫ÜSpringMVCÁöÑÊ≥®Ëß£ÂØπÂ§ñÊö¥Èú≤HTTPÊúçÂä°„ÄÇ ÂÆûÁé∞‰∫Üorg.springframework.context.ApplicationContextAwareÁ±ªÔºåÂÆûÁé∞‰∫ÜsetApplicationContext()ÊñπÊ≥ïÁî®‰∫éÂàùÂßãÂåñSpring‰∏ä‰∏ãÊñáÂØπË±°ÔºåÂú®‰πãÂêéÂèØ‰ª•Ëé∑ÂèñÂà∞ÂÆπÂô®ÈáåÁöÑÁõ∏Â∫îÂØπË±°„ÄÇ Ê†∏ÂøÉÁöÑinvoke()ÊñπÊ≥ï„ÄÇ Ë∞ÉÁî®Êó∂Ôºöhttp://127.0.0.1:8080/SSM-SERVICE/dubboAPI/com.crossoverJie.api.UserInfoApi/getUserInfo„ÄÇ ÂÖ∑‰ΩìÂ¶Ç‰∏äÊñáÁöÑË∞ÉÁî®ÂÆû‰æã„ÄÇÂÖàÂ∞Ücom.crossoverJie.api.UserInfoApi„ÄÅgetUserInfoËµãÂÄºÂà∞httpRequestÂÖ•ÂèÇ‰∏≠„ÄÇ Âà§Êñ≠‰º†ÂÖ•ÁöÑÂåÖÊòØÂê¶ÊòØÂØπÂ§ñÊèê‰æõÁöÑ„ÄÇÂ¶Ç‰∏ãÈÖçÁΩÆÔºö1234567891011&lt;!--dubboÊúçÂä°Êö¥Èú≤‰∏∫httpÊúçÂä°--&gt;&lt;bean class="com.crossoverJie.dubbo.http.conf.HttpProviderConf"&gt; &lt;property name="usePackage"&gt; &lt;list&gt; &lt;!--ÈúÄË¶ÅÊö¥Èú≤ÊúçÂä°ÁöÑÊé•Âè£ÂåÖÂêçÔºåÂèØÂ§ö‰∏™--&gt; &lt;value&gt;com.crossoverJie.api&lt;/value&gt; &lt;/list&gt; &lt;/property&gt;&lt;/bean&gt;&lt;!--Êâ´ÊèèÊö¥Èú≤ÂåÖ--&gt;&lt;context:component-scan base-package="com.crossoverJie.dubbo.http"/&gt; ÂÖ∂‰∏≠ÁöÑcom.crossoverJie.apiÂ∞±ÊòØËá™Â∑±ÈúÄË¶ÅÊö¥Èú≤ÁöÑÂåÖÂêçÔºåÂèØ‰ª•Â§ö‰∏™„ÄÇ Êé•ÁùÄÂú®ÁºìÂ≠òmap‰∏≠ÂèñÂá∫ÂèçÂ∞ÑËé∑ÂèñÂà∞ÁöÑÊé•Âè£Á±ªÁ±ªÂûãÔºåÂ¶ÇÊûúËé∑Âèñ‰∏çÂà∞ÂàôÈÄöËøáÂèçÂ∞ÑËé∑ÂèñÔºåÂπ∂Â∞ÜÂÄºËÆæÁΩÆÂà∞ÁºìÂ≠òmap‰∏≠ÔºåËøôÊ†∑‰∏çÁî®ÊØèÊ¨°ÈÉΩÂèçÂ∞ÑËé∑ÂèñÔºåÂèØ‰ª•ËäÇÁúÅÁ≥ªÁªüÂºÄÈîÄ(ÂèçÂ∞ÑÂæàËÄóÁ≥ªÁªüËµÑÊ∫ê)„ÄÇ Êé•ÁùÄ‰πüÊòØÂà§Êñ≠ËØ•Êé•Âè£‰∏≠ÊòØÂê¶Êúâ‰º†ÂÖ•ÁöÑgetUserInfoÊñπÊ≥ï„ÄÇ ÂèñÂá∫ËØ•ÊñπÊ≥ïÁöÑÂèÇÊï∞ÂàóË°®ÔºåÂ¶ÇÊûúÊ≤°ÊúâÂèÇÊï∞ÂàôÁõ¥Êé•Ë∞ÉÁî®„ÄÇ Â¶ÇÊûúÊúâÂèÇÊï∞ÔºåÂà§Êñ≠‰∏™Êï∞„ÄÇËøôÈáåÊúÄÂ§öÂè™ËøêË°å‰∏Ä‰∏™ÂèÇÊï∞„ÄÇ‰πüÂ∞±ÊòØËØ¥Âú®ÁúüÊ≠£ÁöÑdubboË∞ÉÁî®ÁöÑÊó∂ÂÄôÂè™ËÉΩ‰º†ÈÄí‰∏Ä‰∏™BOÁ±ªÂûãÔºåÂÖ∑‰ΩìÁöÑÂèÇÊï∞ÂàóË°®ÂèØ‰ª•ÂÜôÂà∞BO‰∏≠„ÄÇÂõ†‰∏∫Â¶ÇÊûúÊúâÂ§ö‰∏™Âú®ËøõË°åjsonËß£ÊûêÁöÑÊó∂ÂÄôÊòØÊó†Ê≥ïËµãÂÄºÂà∞‰∏§‰∏™ÂèÇÊï∞ÂØπË±°‰∏≠ÂéªÁöÑ„ÄÇ ‰πãÂêéËøõË°åË∞ÉÁî®ÔºåÂ∞ÜË∞ÉÁî®ËøîÂõûÁöÑÊï∞ÊçÆËøõË°åËøîÂõûÂç≥ÂèØ„ÄÇ ÊÄªÁªìÈÄöÂ∏∏Êù•ËØ¥ËøôÊ†∑Êèê‰æõÁöÑHTTPÊé•Âè£ÂÜçÂÆûÈôÖ‰∏≠Áî®ÁöÑ‰∏çÂ§öÔºå‰ΩÜÊòØÂæàÊñπ‰æøË∞ÉËØï„ÄÇ ÊØîÂ¶ÇÂÜô‰∫Ü‰∏Ä‰∏™dubboÁöÑÊü•ËØ¢Êé•Âè£ÔºåÂú®ÊµãËØïÁéØÂ¢ÉÊàñËÄÖÊòØÈ¢ÑÂèëÂ∏ÉÁéØÂ¢É‰∏≠Â∞±ÂèØ‰ª•Áõ¥Êé•ÈÄöËøáHTTPËØ∑Ê±ÇÁöÑÊñπÂºèËøõË°åÁÆÄÂçïÁöÑÊµãËØïÔºåÊàñËÄÖÂ∞±ÊòØÊü•ËØ¢Êï∞ÊçÆ„ÄÇÊØîÂú®Java‰∏≠ÂÜôÂçïÊµãÊù•ÊµãËØïÊàñÊü•ËØ¢Âø´ÁöÑÂæàÂ§ö„ÄÇ ÂÆâË£Ö1git clone https://github.com/crossoverJie/SSM-DUBBO-HTTP.git 1cd SSM-DUBBO-HTTP 1mvn clean 1mvn install ‰ΩøÁî®12345&lt;dependency&gt; &lt;groupId&gt;com.crossoverJie&lt;/groupId&gt; &lt;artifactId&gt;SSM-HTTP-PROVIDER&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt;&lt;/dependency&gt; springÈÖçÁΩÆ1234567891011&lt;!--dubboÊúçÂä°Êö¥Èú≤‰∏∫httpÊúçÂä°--&gt;&lt;bean class="com.crossoverJie.dubbo.http.conf.HttpProviderConf"&gt; &lt;property name="usePackage"&gt; &lt;list&gt; &lt;!--ÈúÄË¶ÅÊö¥Èú≤ÊúçÂä°ÁöÑÊé•Âè£ÂåÖÂêçÔºåÂèØÂ§ö‰∏™--&gt; &lt;value&gt;com.crossoverJie.api&lt;/value&gt; &lt;/list&gt; &lt;/property&gt;&lt;/bean&gt;&lt;!--Êâ´ÊèèÊö¥Èú≤ÂåÖ--&gt;&lt;context:component-scan base-package="com.crossoverJie.dubbo.http"/&gt; Êèí‰ª∂Âú∞ÂùÄÔºöhttps://github.com/crossoverJie/SSM-DUBBO-HTTP È°πÁõÆÂú∞ÂùÄÔºöhttps://github.com/crossoverJie/SSM.git ‰∏™‰∫∫ÂçöÂÆ¢Âú∞ÂùÄÔºöhttp://crossoverjie.top„ÄÇ GitHubÂú∞ÂùÄÔºöhttps://github.com/crossoverJie„ÄÇ]]></content>
      <categories>
        <category>SSM</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>dubbo</tag>
        <tag>HTTP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SSM(ÂçÅ‰∫å) dubboÊó•ÂøóÊèí‰ª∂]]></title>
    <url>%2F2017%2F04%2F25%2FSSM12%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄÂú®‰πãÂâçdubboÂàÜÂ∏ÉÂºèÊ°ÜÊû∂‰∏≠ËÆ≤Âà∞‰∫ÜÂ¶Ç‰ΩïÂà©Áî®dubboÊù•Êê≠Âª∫‰∏Ä‰∏™ÂæÆÊúçÂä°È°πÁõÆ„ÄÇÂÖ∂‰∏≠ËøòÊúâ‰∏Ä‰∫õÂÄºÂæó‰ºòÂåñÊèêÈ´òÂºÄÂèëÊïàÁéáÁöÑÂú∞ÊñπÔºåÊØîÂ¶ÇÊó•ÂøóÔºö ÂΩìÊàë‰ª¨‰∏Ä‰∏™È°πÁõÆÊãÜÂàÜ‰∏∫NÂ§ö‰∏™ÂæÆÊúçÂä°‰πãÂêéÔºåÂΩìÂÖ∂‰∏≠‰∏Ä‰∏™Ë∞ÉÁî®Âè¶‰∏Ä‰∏™ÊúçÂä°Âá∫Áé∞‰∫ÜÈóÆÈ¢òÔºåÈ¶ñÂÖàÁ¨¨‰∏ÄÊ≠•Ëá™ÁÑ∂ÊòØÊü•ÁúãÊó•Âøó„ÄÇ Âá∫Áé∞ÈóÆÈ¢òÁöÑÊúâÂæàÂ§öÊÉÖÂÜµÔºåÂ¶ÇÊèê‰æõÊñπËá™Ë∫´‰ª£Á†ÅÁöÑÈóÆÈ¢òÔºåË∞ÉÁî®ÊñπÁöÑÂßøÂäø‰∏çÂØπÁ≠â„ÄÇ Ëá™Ë∫´ÁöÑÈóÆÈ¢òËøô‰∏™ÁÆ°‰∏ç‰∫ÜÔºå‰ΩÜÊòØÊàë‰ª¨ÂèØ‰ª•ÂØπÊØè‰∏Ä‰∏™ÂÖ•ÂèÇ„ÄÅËøîÂõûÈÉΩÂä†‰∏äÊó•ÂøóÔºåËøôÊ†∑È¶ñÂÖàÂ∞±ÂèØ‰ª•Âà§Êñ≠Ë∞ÉÁî®ÊñπÊòØÂê¶ÂßøÂäø‰∏çÂØπ‰∫Ü„ÄÇ ‰∏∫‰∫ÜËßÑËåÉÊó•ÂøóÂ∑≤ÁªèÂêéÁª≠ÁöÑÂèØÊâ©Â±ïÔºåÊàë‰ª¨ÂèØ‰ª•ÂçïÁã¨Êèê‰æõ‰∏Ä‰∏™Êèí‰ª∂ÁªôÊØè‰∏™È°πÁõÆ‰ΩøÁî®Âç≥ÂèØ„ÄÇ ÊïàÊûúÂ¶Ç‰∏ãÔºö 123456789101112132017-04-25 15:15:38,968 DEBUG [com.alibaba.dubbo.remoting.transport.DecodeHandler] - [DUBBO] Decode decodeable message com.alibaba.dubbo.rpc.protocol.dubbo.DecodeableRpcInvocation, dubbo version: 2.5.3, current host: 127.0.0.12017-04-25 15:15:39,484 DEBUG [com.crossoverJie.dubbo.filter.DubboTraceFilter] - dubboËØ∑Ê±ÇÊï∞ÊçÆ:&#123;&quot;args&quot;:[1],&quot;interfaceName&quot;:&quot;com.crossoverJie.api.UserInfoApi&quot;,&quot;methodName&quot;:&quot;getUserInfo&quot;&#125;2017-04-25 15:15:39,484 INFO [com.crossoverJie.api.impl.UserInfoApiImpl] - Áî®Êà∑Êü•ËØ¢Id=12017-04-25 15:15:39,505 DEBUG [org.mybatis.spring.SqlSessionUtils] - Creating a new SqlSession2017-04-25 15:15:39,525 DEBUG [org.mybatis.spring.SqlSessionUtils] - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f56b29] was not registered for synchronization because synchronization is not active2017-04-25 15:15:39,549 DEBUG [org.mybatis.spring.transaction.SpringManagedTransaction] - JDBC Connection [com.alibaba.druid.proxy.jdbc.ConnectionProxyImpl@778b3121] will not be managed by Spring2017-04-25 15:15:39,555 DEBUG [com.crossoverJie.api.dubbo.dao.T_userDao.selectByPrimaryKey] - ==&gt; Preparing: select id, username, password,roleId from t_user where id = ? 2017-04-25 15:15:39,591 DEBUG [com.crossoverJie.api.dubbo.dao.T_userDao.selectByPrimaryKey] - ==&gt; Parameters: 1(Integer)2017-04-25 15:15:39,616 DEBUG [com.crossoverJie.api.dubbo.dao.T_userDao.selectByPrimaryKey] - &lt;== Total: 12017-04-25 15:15:39,616 DEBUG [com.alibaba.druid.pool.PreparedStatementPool] - &#123;conn-10003, pstmt-20000&#125; enter cache2017-04-25 15:15:39,617 DEBUG [org.mybatis.spring.SqlSessionUtils] - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f56b29]2017-04-25 15:15:45,473 INFO [com.crossoverJie.dubbo.filter.DubboTraceFilter] - dubboÊâßË°åÊàêÂäü2017-04-25 15:15:45,476 DEBUG [com.crossoverJie.dubbo.filter.DubboTraceFilter] - dubboËøîÂõûÊï∞ÊçÆ&#123;&quot;args&quot;:[&#123;&quot;id&quot;:1,&quot;password&quot;:&quot;123456&quot;,&quot;roleId&quot;:1,&quot;userName&quot;:&quot;crossoverJie&quot;&#125;],&quot;interfaceName&quot;:&quot;com.crossoverJie.api.UserInfoApi&quot;,&quot;methodName&quot;:&quot;getUserInfo&quot;&#125; dubbo filterÊãìÂ±ïÂèÇËÄÉÂÆòÊñπÊñáÊ°£ÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøá1234567891011## ÂÆö‰πâÂÆû‰ΩìÈ¶ñÂÖàÂÆö‰πâ‰∏Ä‰∏™ÂÆû‰ΩìÁ±ªÁî®‰∫é‰øùÂ≠òË∞ÉÁî®ËøáÁ®ã‰∏≠ÁöÑ‰∏Ä‰∫õÊï∞ÊçÆÔºö```javapublic class FilterDesc &#123; private String interfaceName ;//Êé•Âè£Âêç private String methodName ;//ÊñπÊ≥ïÂêç private Object[] args ;//ÂèÇÊï∞ //ÁúÅÁï•getter setter&#125; DubboTraceFilterÂÖ∑‰ΩìÊã¶Êà™ÈÄªËæë1234567891011121314151617181920212223242526272829303132333435363738@Activate(group = Constants.PROVIDER, order = -999)public class DubboTraceFilter implements Filter&#123; private static final Logger logger = LoggerFactory.getLogger(DubboTraceFilter.class); public Result invoke(Invoker&lt;?&gt; invoker, Invocation invocation) throws RpcException &#123; try &#123; FilterDesc filterReq = new FilterDesc() ; filterReq.setInterfaceName(invocation.getInvoker().getInterface().getName()); filterReq.setMethodName(invocation.getMethodName()) ; filterReq.setArgs(invocation.getArguments()); logger.debug("dubboËØ∑Ê±ÇÊï∞ÊçÆ:"+JSON.toJSONString(filterReq)); Result result = invoker.invoke(invocation); if (result.hasException() &amp;&amp; invoker.getInterface() != GenericService.class)&#123; logger.error("dubboÊâßË°åÂºÇÂ∏∏",result.getException()); &#125;else &#123; logger.info("dubboÊâßË°åÊàêÂäü"); FilterDesc filterRsp = new FilterDesc() ; filterRsp.setMethodName(invocation.getMethodName()); filterRsp.setInterfaceName(invocation.getInvoker().getInterface().getName()); filterRsp.setArgs(new Object[]&#123;result.getValue()&#125;); logger.debug("dubboËøîÂõûÊï∞ÊçÆ"+JSON.toJSONString(filterRsp)); &#125; return result ; &#125;catch (RuntimeException e)&#123; logger.error("dubboÊú™Áü•ÂºÇÂ∏∏" + RpcContext.getContext().getRemoteHost() + ". service: " + invoker.getInterface().getName() + ", method: " + invocation.getMethodName() + ", exception: " + e.getClass().getName() + ": " + e.getMessage(), e); throw e ; &#125; &#125;&#125; ÈÄªËæëÈùûÂ∏∏ÁÆÄÂçïÔºåÂè™ÊòØÂØπË∞ÉÁî®ËøáÁ®ã„ÄÅÂºÇÂ∏∏„ÄÅÊàêÂäü‰πãÂêéÊâìÂç∞Áõ∏Â∫îÁöÑÊó•ÂøóËÄåÂ∑≤„ÄÇ ‰ΩÜÊòØÊúâ‰∏™Âú∞ÊñπË¶ÅÊ≥®ÊÑè‰∏Ä‰∏ãÔºöÈúÄË¶ÅÂú®resourceÁõÆÂΩï‰∏ãÂä†‰∏äMETA-INF.dubbo/com.alibaba.dubbo.rpc.FilterÊñá‰ª∂„ÄÇ1dubboTraceFilter=com.crossoverJie.dubbo.filter.DubboTraceFilter ÁõÆÂΩïÁªìÊûÑÂ¶Ç‰∏ãÔºö12345678910src |-main |-java |-com |-xxx |-XxxFilter.java (ÂÆûÁé∞FilterÊé•Âè£) |-resources |-META-INF |-dubbo |-com.alibaba.dubbo.rpc.Filter (Á∫ØÊñáÊú¨Êñá‰ª∂ÔºåÂÜÖÂÆπ‰∏∫Ôºöxxx=com.xxx.XxxFilter) ÊÄªÁªìËØ•È°πÁõÆÂ∑≤ÁªèÊâòÁÆ°Âà∞GitHubÔºöhttps://github.com/crossoverJie/SSM-DUBBO-FILTER ‰ΩøÁî®ÊñπÊ≥ïÂÆâË£Ö1cd /SSM-DUBBO-FILTER 1mvn clean 1mvn install ‰ΩøÁî®Âú®ÊúçÂä°Êèê‰æõÁöÑÈ°πÁõÆ‰∏≠Âä†‰∏ä‰æùËµñÔºåËøôÊ†∑ÊØèÊ¨°Ë∞ÉÁî®ÈÉΩ‰ºöÊâì‰∏äÊó•Âøó„ÄÇ12345&lt;dependency&gt; &lt;groupId&gt;com.crossoverJie&lt;/groupId&gt; &lt;artifactId&gt;SSM-TRACE-FILTER&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt;&lt;/dependency&gt; Âú®Êã¶Êà™Âô®‰∏≠ÊúÄÂ•Ω‰∏çË¶ÅÂä†‰∏ä‰∏Ä‰∫õËÄóÊó∂‰ªªÂä°ÔºåÈúÄË¶ÅËÄÉËôëÂà∞ÊÄßËÉΩÈóÆÈ¢ò„ÄÇ È°πÁõÆÂú∞ÂùÄÔºöhttps://github.com/crossoverJie/SSM.git ‰∏™‰∫∫ÂçöÂÆ¢Âú∞ÂùÄÔºöhttp://crossoverjie.top„ÄÇ GitHubÂú∞ÂùÄÔºöhttps://github.com/crossoverJie„ÄÇ]]></content>
      <categories>
        <category>SSM</category>
      </categories>
      <tags>
        <tag>dubbo</tag>
        <tag>Êó•Âøó</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SSM(ÂçÅ‰∏Ä) Âü∫‰∫édubboÁöÑÂàÜÂ∏ÉÂºèÊû∂ÊûÑ]]></title>
    <url>%2F2017%2F04%2F07%2FSSM11%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄÁé∞Âú®Ë∂äÊù•Ë∂äÂ§öÁöÑ‰∫íËÅîÁΩëÂÖ¨Âè∏ËøòÊòØÂ∞ÜËá™Â∑±ÂÖ¨Âè∏ÁöÑÈ°πÁõÆËøõË°åÊúçÂä°ÂåñÔºåËøôÁ°ÆÂÆûÊòØ‰ªäÂêéÈ°πÁõÆÂºÄÂèëÁöÑ‰∏Ä‰∏™Ë∂ãÂäøÔºåÂ∞±Ëøô‰∏™ÁÇπÂÜçÂá≠ÂÄü‰πãÂâçÁöÑSSMÈ°πÁõÆÊù•ËÆ©Á¨¨‰∏ÄÊ¨°Êé•Ëß¶ÁöÑÂêåÂ≠¶ËÉΩÂø´ÈÄü‰∏äÊâã„ÄÇ ÊµÖË∞àÂàÜÂ∏ÉÂºèÊû∂ÊûÑÂàÜÂ∏ÉÂºèÊû∂ÊûÑÂçïÁúãËøô‰∏™ÂêçÂ≠óÁªô‰∫∫ÁöÑÊÑüËßâÂ∞±ÊòØÈ´òÈÄºÊ†ºÔºå‰ΩÜÂÖ∂ÂÆû‰ªéÂéÜÂè≤ÁöÑËßíÂ∫¶Êù•ÂàÜÊûê‰∏Ä‰∏ãÂ∞±ÊØîËæÉÊòé‰∫Ü‰∫Ü„ÄÇ Êàë‰ª¨Êãø‰∏Ä‰∏™ÁîµÂïÜÁ≥ªÁªüÊù•ËØ¥Ôºö ÂçïÁ≥ªÁªüÂØπ‰∫é‰∏Ä‰∏™ÂàöËµ∑Ê≠•ÁöÑÂàõ‰∏öÂÖ¨Âè∏È°πÁõÆËÇØÂÆöÊòØËøΩÊ±ÇË∂äÂø´ÂÆåÊàêÂäüËÉΩË∂äÂ•ΩÔºåÂπ∂‰∏îÁî®Êà∑Èáè‰πü‰∏çÂ§ß„ÄÇ ËøôÊó∂ÂÄôÊâÄÊúâÁöÑ‰∏öÂä°ÈÄªËæëÈÉΩÊòØÂú®‰∏Ä‰∏™È°πÁõÆ‰∏≠Â∞±ÂèØ‰ª•Êª°Ë∂≥„ÄÇ ÂûÇÁõ¥ÊãÜÂàÜ-Â§öÂ∫îÁî®ÂΩì‰∏öÂä°ÈáèÂíåÁî®Êà∑ÈáèÂèëÂ±ïÂà∞‰∏ÄÂÆöÂú∞Ê≠•ÁöÑÊó∂ÂÄôÔºåËøôÊó∂‰∏ÄËà¨‰ºöÂ∞ÜÂ∫îÁî®ÂêåÊó∂ÈÉ®ÁΩ≤Âà∞Âá†Âè∞ÊúçÂä°Âô®‰∏äÔºåÂú®Áî®Êà∑ËÆøÈóÆÁöÑÊó∂ÂÄô‰ΩøÁî®NginxËøõË°åÂèçÂêë‰ª£ÁêÜÂíåÁÆÄÂçïÁöÑË¥üËΩΩÂùáË°°„ÄÇ SOAÊúçÂä°ÂåñÂΩìÊï¥‰∏™Á≥ªÁªü‰ª•ÂèäÂèëÂ±ïÁöÑË∂≥Â§üÂ§ßÁöÑÊó∂ÂÄôÔºåÊØîÂ¶Ç‰∏Ä‰∏™ÁîµÂïÜÁ≥ªÁªü‰∏≠Â≠òÂú®ÊúâÔºö Áî®Êà∑Á≥ªÁªü ËÆ¢ÂçïÁ≥ªÁªü ÊîØ‰ªòÁ≥ªÁªü Áâ©ÊµÅÁ≥ªÁªü Á≠âÁ≥ªÁªü„ÄÇÂ¶ÇÊûúÊØèÊ¨°‰øÆÊîπ‰∫ÜÂÖ∂‰∏≠‰∏Ä‰∏™Á≥ªÁªüÂ∞±Ë¶ÅÈáçÊñ∞ÂèëÂ∏É‰∏äÁ∫øÁöÑËØùÈÇ£‰πàËÄ¶ÂêàÂ∞±Â§™‰∏•Èáç‰∫Ü„ÄÇ ÊâÄ‰ª•ÈúÄË¶ÅÂ∞ÜÊï¥‰∏™È°πÁõÆÊãÜÂàÜÊàêËã•Âπ≤‰∏™Áã¨Á´ãÁöÑÂ∫îÁî®ÔºåÂèØ‰ª•ËøõË°åÁã¨Á´ãÁöÑÂºÄÂèë‰∏äÁ∫øÂÆûÁé∞Âø´ÈÄüËø≠‰ª£„ÄÇ Â¶Ç‰∏äÂõæÊâÄÁ§∫ÊØè‰∏™Â∫îÁî®‰πãÈó¥Áõ∏‰∫íÁã¨Á´ã,ÊØè‰∏™Â∫îÁî®ÂèØ‰ª•Ê∂àË¥πÂÖ∂‰ªñÂ∫îÁî®Êö¥Èú≤Âá∫Êù•ÁöÑÊúçÂä°ÔºåÂêåÊó∂‰πüÂØπÂ§ñÊèê‰æõÊúçÂä°„ÄÇ ‰ªéÊû∂ÊûÑÁöÑÂ±ÇÈù¢ÁÆÄÂçïÁöÑÁêÜËß£‰∫ÜÔºåÊé•‰∏ãÊù•ÁúãÁúãÂ¶Ç‰ΩïÁºñÁ†ÅÂÆûÁé∞„ÄÇ Âü∫‰∫édubboÁöÑÂÆûÁé∞dubboÂ∫îËØ•ÁÆóÊòØÂõΩÂÜÖ‰ΩøÁî®ÊúÄÂ§öÁöÑÂàÜÂ∏ÉÂºèÊúçÂä°Ê°ÜÊû∂ÔºåÂü∫‰∫éÊ≠§Êù•ÂÆûÁé∞ÂØπÊñ∞ÂÖ•Èó®ÁöÑÂêåÂ≠¶Â∫îËØ•ÂæàÊúâÂ∏ÆÂä©„ÄÇ ÂÖ∂‰∏≠ÊúâÊ∂âÂèäÂà∞ÂÆâË£ÖdubboÊúçÂä°ÁöÑÊ≥®ÂÜå‰∏≠ÂøÉzookeeperÁ≠âÁõ∏ÂÖ≥Áü•ËØÜÁÇπÂèØ‰ª•Ëá™Ë°åÊü•ÁúãÂÆòÊñπÊñáÊ°£ÔºåËøôÈáåÂ∞±‰∏çÂçïÁã¨ËÆ≤‰∫Ü„ÄÇ ÂØπÂ§ñÊèê‰æõÊúçÂä°È¶ñÂÖàÁ¨¨‰∏ÄÊ≠•ÈúÄË¶ÅÂú®SSM-APIÊ®°Âùó‰∏≠ÂÆö‰πâ‰∏Ä‰∏™Êé•Âè£ÔºåËøôÈáåÂ∞±Êêû‰∫Ü‰∏Ä‰∏™Áî®Êà∑Êü•ËØ¢ÁöÑÊé•Âè£12345678910111213141516/** * Function:Áî®Êà∑API * @author chenjiec * Date: 2017/4/4 ‰∏ãÂçà9:46 * @since JDK 1.7 */public interface UserInfoApi &#123; /** * Ëé∑ÂèñÁî®Êà∑‰ø°ÊÅØ * @param userId * @return * @throws Exception */ public UserInfoRsp getUserInfo(int userId) throws Exception;&#125; Êé•ÁùÄÂú®SSM-SERVICEÊ®°Âùó‰∏≠ËøõË°åÂÆûÁé∞Ôºö123456789101112131415161718192021222324252627282930313233343536373839404142434445464748import com.alibaba.dubbo.config.annotation.Service;/** * Function: * @author chenjiec * Date: 2017/4/4 ‰∏ãÂçà9:51 * @since JDK 1.7 */@Servicepublic class UserInfoApiImpl implements UserInfoApi &#123; private static Logger logger = LoggerFactory.getLogger(UserInfoApiImpl.class); @Autowired private T_userService t_userService ; /** * Ëé∑ÂèñÁî®Êà∑‰ø°ÊÅØ * * @param userId * @return * @throws Exception */ @Override public UserInfoRsp getUserInfo(int userId) throws Exception &#123; logger.info("Áî®Êà∑Êü•ËØ¢Id="+userId); //ËøîÂõûÂØπË±° UserInfoRsp userInfoRsp = new UserInfoRsp() ; T_user t_user = t_userService.selectByPrimaryKey(userId) ; //ÊûÑÂª∫ buildUserInfoRsp(userInfoRsp,t_user) ; return userInfoRsp; &#125; /** * ÊûÑÂª∫ËøîÂõû * @param userInfoRsp * @param t_user */ private void buildUserInfoRsp(UserInfoRsp userInfoRsp, T_user t_user) &#123; if (t_user == null)&#123; t_user = new T_user() ; &#125; CommonUtil.setLogValueModelToModel(t_user,userInfoRsp); &#125;&#125; Ëøô‰∫õÈÉΩÊòØÈÄöÁî®ÁöÑ‰ª£Á†ÅÔºå‰ΩÜÂÄºÂæóÊ≥®ÊÑèÁöÑ‰∏ÄÁÇπÊòØËøôÈáå‰ΩøÁî®ÁöÑdubboÊ°ÜÊû∂ÊâÄÊèê‰æõÁöÑ@serviceÊ≥®Ëß£„ÄÇ‰ΩúÁî®ÊòØÂ£∞ÊòéÈúÄË¶ÅÊö¥Èú≤ÁöÑÊúçÂä°Êé•Âè£„ÄÇ ÂÜç‰πãÂêéÂ∞±ÊòØÂá†‰∏™dubboÁõ∏ÂÖ≥ÁöÑÈÖçÁΩÆÊñá‰ª∂‰∫Ü„ÄÇ spring-dubbo-config.xml12345678910111213&lt;dubbo:application name="ssm-service" owner="crossoverJie" organization="ssm-crossoverJie" logger="slf4j"/&gt;&lt;dubbo:registry id="dubbo-registry" address="zookeeper://192.168.0.188:2181" file="/tmp/dubbo.cachr" /&gt;&lt;dubbo:monitor protocol="registry" /&gt;&lt;dubbo:protocol name="dubbo" port="20880" /&gt;&lt;dubbo:provider timeout="15000" retries="0" delay="-1" /&gt;&lt;dubbo:consumer check="false" timeout="15000" /&gt; ÂÖ∂ÂÆûÂ∞±ÊòØÈÖçÁΩÆÊàë‰ª¨ÊúçÂä°Ê≥®ÂÜåÁöÑzkÂú∞ÂùÄÔºå‰ª•ÂèäÊúçÂä°ÂêçÁß∞„ÄÅË∂ÖÊó∂Êó∂Èó¥Á≠âÈÖçÁΩÆ„ÄÇ spring-dubbo-provider.xml1&lt;dubbo:annotation package="com.crossoverJie.api.impl" /&gt; Ëøô‰∏™ÈÖçÁΩÆÊâ´ÊèèÊ≥®Ëß£ÂåÖÁöÑ‰ΩçÁΩÆÔºå‰∏ÄËà¨ÈÖçÁΩÆÂà∞Êé•Âè£ÂÆûÁé∞ÂåÖÂç≥ÂèØ„ÄÇ spring-dubbo-consumer.xmlËøô‰∏™ÊòØÊ∂àË¥πËÄÖÈÖçÁΩÆÈ°πÔºåË°®ÊòéÊàë‰ª¨ÈúÄË¶Å‰æùËµñÁöÑÂÖ∂‰ªñÂ∫îÁî®„ÄÇËøôÈáåÊàë‰ª¨Âú®SSM-BOOTÈ°πÁõÆ‰∏≠ËøõË°åÈÖçÁΩÆÔºö12&lt;dubbo:reference id="userInfoApi" interface="com.crossoverJie.api.UserInfoApi" /&gt; Áõ¥Êé•Â∞±ÊòØÈÖçÁΩÆÁöÑÂàöÊâçÊàë‰ª¨Êèê‰æõÁöÑÈÇ£‰∏™Áî®Êà∑Êü•ËØ¢ÁöÑÊé•Âè£ÔºåËøôÊ†∑ÂΩìÊàë‰ª¨Ëá™Â∑±ÁöÑÂÜÖÈÉ®È°πÁõÆÈúÄË¶Å‰ΩøÁî®Âà∞Ëøô‰∏™ÊúçÂä°Âè™ÈúÄË¶Å‰æùËµñSSM-BOOTÂç≥ÂèØÔºå‰∏çÈúÄË¶ÅÂçïÁã¨ÁöÑÂÜçÂéªÈÖçÁΩÆconsumer„ÄÇËøô‰∏™ÊàëÊúâÂú®‰∏ä‰∏ÄÁØáSSM(ÂçÅ) È°πÁõÆÈáçÊûÑ-‰∫íËÅîÁΩëÈ°πÁõÆÁöÑMavenÁªìÊûÑ‰∏≠‰πüÊúâÊèêÂà∞„ÄÇ ÂÆâË£ÖÁÆ°ÁêÜÊéßÂà∂Âè∞ËøòÊúâ‰∏Ä‰∏™ÈúÄË¶ÅÂÅöÁöÑÂ∞±ÊòØÂÆâË£ÖÁÆ°ÁêÜÊéßÂà∂Âè∞ÔºåËøôÈáåÂèØ‰ª•ÁúãÂà∞Êàë‰ª¨ÊúâÂ§öÂ∞ëÊúçÂä°„ÄÅË∞ÉÁî®ÊÉÖÂÜµÊòØÊÄé‰πàÊ†∑Á≠â‰ΩúÁî®„ÄÇ ËøôÈáåÊàë‰ª¨ÂèØ‰ª•Â∞ÜdubboÁöÑÂÆòÊñπÊ∫êÁ†Å‰∏ãËΩΩ‰∏ãÊù•ÔºåÂØπÂÖ∂‰∏≠ÁöÑdubbo-adminÊ®°ÂùóËøõË°åÊâìÂåÖÔºåÂ∞ÜÁîüÊàêÁöÑWARÂåÖÊîæÂà∞Tomcat‰∏≠ËøêË°åËµ∑Êù•Âç≥ÂèØ„ÄÇ ‰ΩÜÊòØÈúÄË¶ÅÊ≥®ÊÑè‰∏ÄÁÇπÁöÑÊòØÔºöÈúÄË¶ÅÂ∞ÜÂÖ∂‰∏≠ÁöÑdubbo.propertiesÁöÑzkÂú∞ÂùÄ‰øÆÊîπ‰∏∫Ëá™Â∑±ÁöÑÂç≥ÂèØ„ÄÇ123dubbo.registry.address=zookeeper://127.0.0.1:2181dubbo.admin.root.password=rootdubbo.admin.guest.password=guest Âà∞Êó∂ÂÄôÁôªÈôÜÁöÑËØù‰ΩøÁî®rootÔºåÂØÜÁ†Å‰πüÊòØroot„ÄÇ‰ΩøÁî®guestÔºåÂØÜÁ†Å‰πüÊòØguest„ÄÇ ÁôªÈôÜÁïåÈù¢Â¶Ç‰∏ãÂõæÔºö ÂÖ∂‰∏≠Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞Êúâ‰∏§‰∏™ÊúçÂä°‰ª•ÂèäÊ≥®ÂÜå‰∏äÂéª‰∫ÜÔºå‰ΩÜÊòØÊ≤°ÊúâÊ∂àË¥πËÄÖ„ÄÇ Ê∂àË¥πÊúçÂä°‰∏∫‰∫ÜËÉΩÂ§üÊõ¥Áõ¥ËßÇÁöÑ‰ΩìÈ™åÂà∞Ê∂àË¥πÊúçÂä°ÔºåÊàëÊñ∞Âª∫‰∫Ü‰∏Ä‰∏™È°πÁõÆÔºöhttps://github.com/crossoverJie/SSM-CONSUMER„ÄÇ ÂÖ∂‰∏≠Âú®SSM-CONSUMER-API‰∏≠Êàë‰πüÂÆö‰πâ‰∫Ü‰∏Ä‰∏™Êé•Âè£Ôºö12345678910111213141516/** * Function:Ëñ™ËµÑAPI * @author chenjiec * Date: 2017/4/4 ‰∏ãÂçà9:46 * @since JDK 1.7 */public interface SalaryInfoApi &#123; /** * Ëé∑ÂèñËñ™ËµÑ * @param userId * @return * @throws Exception */ public SalaryInfoRsp getSalaryInfo(int userId) throws Exception;&#125; Âõ†‰∏∫‰Ωú‰∏∫Ê∂àË¥πËÄÖÁöÑÂêåÊó∂Êàë‰ª¨‰πüÂØπÂ§ñÊèê‰æõ‰∫Ü‰∏Ä‰∏™Ëé∑ÂèñËñ™ËµÑÁöÑ‰∏Ä‰∏™ÊúçÂä°„ÄÇ Âú®SSM-CONSUMER-SERVICEÊ®°Âùó‰∏≠ËøõË°å‰∫ÜÂÆûÁé∞Ôºö12345678910111213141516171819202122232425262728293031323334353637/** * Function: * @author chenjiec * Date: 2017/4/4 ‰∏ãÂçà9:51 * @since JDK 1.7 */@Servicepublic class SalaryInfoApiImpl implements SalaryInfoApi &#123; private static Logger logger = LoggerFactory.getLogger(SalaryInfoApiImpl.class); @Autowired UserInfoApi userInfoApi ; /** * Ëé∑ÂèñÁî®Êà∑‰ø°ÊÅØ * * @param userId * @return * @throws Exception */ @Override public SalaryInfoRsp getSalaryInfo(int userId) throws Exception &#123; logger.info("Ëñ™ËµÑÊü•ËØ¢Id="+userId); //ËøîÂõûÂØπË±° SalaryInfoRsp salaryInfoRsp = new SalaryInfoRsp() ; //Ë∞ÉÁî®ËøúÁ®ãÊúçÂä° UserInfoRsp userInfo = userInfoApi.getUserInfo(userId); salaryInfoRsp.setUsername(userInfo.getUserName()); return salaryInfoRsp; &#125;&#125; ÂÖ∂‰∏≠Â∞±ÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®userInfoApiË∞ÉÁî®‰πãÂâçÁöÑ‰∏™‰∫∫‰ø°ÊÅØÊúçÂä°„ÄÇ ÂÜçË∞ÉÁî®‰πãÂâçÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊúâÁÇπÊòØÔºåÊàë‰ª¨Âè™ÈúÄË¶Å‰æùËµñSSM-BOOTËøô‰∏™Ê®°ÂùóÂç≥ÂèØËøõË°åË∞ÉÁî®ÔºåÂõ†‰∏∫SSM-BOOTÊ®°ÂùóÂ∑≤Áªè‰∏∫Êàë‰ª¨ÈÖçÁΩÆ‰∫ÜÊ∂àË¥πËÄÖ‰πãÁ±ªÁöÑÊìç‰Ωú‰∫ÜÔºö1234&lt;dependency&gt; &lt;groupId&gt;com.crossoverJie&lt;/groupId&gt; &lt;artifactId&gt;SSM-BOOT&lt;/artifactId&gt;&lt;/dependency&gt; ËøòÊúâ‰∏ÄÁÇπÊòØÂú®ÈÖçÁΩÆSSM-BOOT‰∏≠ÁöÑspring-dubbo-cosumer.xmlÈÖçÁΩÆÊñá‰ª∂ÁöÑÊó∂ÂÄôÔºåË∑ØÂæÑË¶ÅÂíåÊàë‰ª¨ÂàùÂßãÂåñspringÈÖçÁΩÆÊñá‰ª∂Êó∂ÁöÑË∑ØÂæÑ‰∏ÄËá¥Ôºö12345&lt;!-- SpringÂíåmybatisÁöÑÈÖçÁΩÆÊñá‰ª∂ --&gt;&lt;context-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath*:spring/*.xml&lt;/param-value&gt;&lt;/context-param&gt; Êé•‰∏ãÊù•Ë∑ë‰∏™ÂçïÊµãËØï‰∏Ä‰∏ãËÉΩÂê¶Ë∞ÉÈÄöÔºö123456789101112131415161718192021/** * Function: * * @author chenjiec * Date: 2017/4/5 ‰∏ãÂçà10:41 * @since JDK 1.7 */@RunWith(SpringJUnit4ClassRunner.class)@ContextConfiguration(locations = &#123; "classpath*:/spring/*.xml" &#125;)public class SalaryInfoApiImplTest &#123; @Autowired private SalaryInfoApi salaryInfoApi ; @Test public void getSalaryInfo() throws Exception &#123; SalaryInfoRsp salaryInfo = salaryInfoApi.getSalaryInfo(1); System.out.println(JSON.toJSONString(salaryInfo)); &#125;&#125; Ê∂àË¥πËÄÖ Êèê‰æõËÄÖÂèØ‰ª•ÁúãÂà∞Á°ÆÂÆûÊòØË∞ÉÁî®ÊàêÂäü‰∫ÜÁöÑ„ÄÇ Êé•‰∏ãÊù•Â∞ÜÊ∂àË¥πËÄÖÈ°πÁõÆ‰πüÂêåÊó∂ÂêØÂä®Âú®Êù•ËßÇÂØüÁÆ°ÁêÜÊéßÂà∂Âè∞Êúâ‰ªÄ‰πà‰∏ç‰∏ÄÊ†∑Ôºö‰ºöÁúãÂà∞Â§ö‰∫Ü‰∏Ä‰∏™Ê∂àË¥πËÄÖÊâÄÊèê‰æõÁöÑÊúçÂä°com.crossoverjie.consumer.api.SalaryInfoApi,ÂêåÊó∂com.crossoverJie.api.UserInfoApiÊúçÂä°Â∑≤ÁªèÊ≠£Â∏∏ÔºåËØ¥ÊòéÂ∑≤ÁªèÊúâÊ∂àË¥πËÄÖ‰∫Ü„ÄÇ ÁÇπËøõÂéª‰æøÂèØÊü•ÁúãÂÖ∑‰ΩìÁöÑÊ∂àË¥πËÄÖ„ÄÇ ÊÄªÁªìËøôÊ†∑‰∏Ä‰∏™Âü∫‰∫édubboÁöÑÂàÜÂ∏ÉÂºèÊúçÂä°Â∑≤ÁªèËÆ≤ÁöÑÂ∑Æ‰∏çÂ§ö‰∫ÜÔºåÂú®ÂÆûÈôÖÁöÑÂºÄÂèë‰∏≠Êàë‰ª¨‰æø‰ºöÂºÄÂèë‰∏Ä‰∏™Â§ßÁ≥ªÁªü‰∏≠ÁöÑÊüê‰∏Ä‰∏™Â≠êÂ∫îÁî®ÔºåËøôÊ†∑Â∞±ÁÆó‰∏Ä‰∏™Â≠êÂ∫îÁî®Âá∫ÈóÆÈ¢ò‰∫Ü‰πü‰∏ç‰ºöÂΩ±ÂìçÂà∞Êï¥‰∏™Â§ßÁöÑÈ°πÁõÆ„ÄÇ ÂÜçÊèê‰∏ÄÁÇπÔºöÂú®ÂÆûÈôÖÁöÑÁîü‰∫ßÁéØÂ¢É‰∏ÄËà¨Âêå‰∏Ä‰∏™ÊúçÂä°Êàë‰ª¨ÈÉΩ‰ºöÊúâ‰∏Ä‰∏™master,slaveÁöÑ‰∏ª‰ªéÊúçÂä°ÔºåËøôÊ†∑Âú®‰∏äÁ∫øÁöÑËøáÁ®ã‰∏≠‰∏çËá≥‰∫éÊï¥‰∏™Â∫îÁî®Âá∫Áé∞Êó†Ê≥ï‰ΩøÁî®ÁöÑÂ∞¥Â∞¨ÊÉÖÂÜµ„ÄÇ Ë∞àÂà∞‰∫ÜSOAÁöÑÂ•ΩÂ§ÑÔºåÈÇ£‰πàËá™ÁÑ∂‰πüÊúâÁõ∏ÂØπ‰∫é‰º†ÁªüÊ®°ÂºèÁöÑ‰∏çÊñπ‰æø‰πãÂ§ÑÔºö ÊãÜÂàÜ‰∏Ä‰∏™Â§ßÁöÑÈ°πÁõÆ‰∏∫ÊàêÁôæ‰∏äÂçÉÁöÑÂ≠êÂ∫îÁî®Â∞±‰∏çÂèØËÉΩÊâãÂä®‰∏äÁ∫ø‰∫ÜÔºåÂç≥ÈúÄË¶ÅËá™Âä®ÂåñÁöÑÈÉ®ÁΩ≤‰∏äÁ∫øÔºåÂ¶ÇJenkins„ÄÇ ËøòÊúâ‰∏Ä‰∏™ÈúÄË¶ÅÂÅöÂà∞ÁöÑÂ∞±ÊòØÁõëÊéßÔºåÈúÄË¶Å‰∏Ä‰∏™ÂçïÁã¨ÁöÑÁõëÊéßÂπ≥Âè∞Êù•Â∏ÆÊàë‰ª¨ÂÆûÊó∂Êü•ÁúãÂêÑ‰∏™ÊúçÂä°ÁöÑËøêË°åÊÉÖÂÜµ‰ª•‰æø‰∫éÂèäÊó∂ÂÆö‰ΩçÂíåËß£ÂÜ≥ÈóÆÈ¢ò„ÄÇ Êó•ÂøóÊü•ÁúãÂàÜÊûêÔºåÊãÜÂàÜ‰πãÂêé‰∏çÂèØËÉΩÂÜçÂéªÊØèÂè∞ÊúçÂä°Âô®‰∏äÊü•ÁúãÊó•ÂøóÔºåÈúÄË¶Å‰∏Ä‰∏™ÂçïÁã¨ÁöÑÊó•ÂøóÊü•ÁúãÂàÜÊûêÂ∑•ÂÖ∑Â¶Çelk„ÄÇ ‰ª•‰∏äÂ∞±ÊòØÊàëÁêÜËß£ÁöÑÔºåÂ¶ÇÊúâÂ∑ÆÈîôÊ¨¢ËøéÊåáÊ≠£„ÄÇ È°πÁõÆÂú∞ÂùÄÔºöhttps://github.com/crossoverJie/SSM.git ‰∏™‰∫∫ÂçöÂÆ¢Âú∞ÂùÄÔºöhttp://crossoverjie.top„ÄÇ GitHubÂú∞ÂùÄÔºöhttps://github.com/crossoverJie„ÄÇ]]></content>
      <categories>
        <category>SSM</category>
      </categories>
      <tags>
        <tag>dubbo</tag>
        <tag>ÂàÜÂ∏ÉÂºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SSM(ÂçÅ) È°πÁõÆÈáçÊûÑ-‰∫íËÅîÁΩëÈ°πÁõÆÁöÑMavenÁªìÊûÑ]]></title>
    <url>%2F2017%2F03%2F04%2FSSM10%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄÂæà‰πÖÊ≤°ÊúâÊõ¥Êñ∞ÂçöÂÆ¢‰∫ÜÔºå‰πãÂâçÂÆö‰∏ãÂë®Êõ¥ÈÄêÊ∏êÊàê‰∫ÜÊúàÊõ¥„ÄÇÊÄé‰πàÊÑüËßâÂÉèÊàëËøΩËøáÁöÑ‰∏ÄÈÉ®Âä®Êº´„ÄÇËøô‰∏™ÂçöÊñáÂÖ∂ÂÆûÂæàÊó©Â∞±ÊÉ≥ÂÜô‰∫Ü„ÄÇ‰πãÂâçÊâÄÊúâÁöÑ‰ª£Á†ÅÈÉΩÊòØÂú®‰∏Ä‰∏™Ê®°ÂùóÈáåÈù¢ËøõË°åÂºÄÂèëÔºåËøôÂíåmavenÁöÑÁêÜÂøµÊòØÂÆåÂÖ®‰∏çÁõ∏Á¨¶ÁöÑÔºåÊúÄËøëÁ°¨ÊòØÊäΩ‰∫Ü‰∏Ä‰∏™Êó∂Èó¥Êù•ÂØπÈ°πÁõÆÁöÑÁªìÊûÑËøõË°å‰∫Ü‰∏ÄÊ¨°ÈáçÊûÑ„ÄÇ ÂÖàÊù•ÁúãÁúãËøôÊ¨°ÈáçÊûÑ‰πãÂêéÁöÑÁõÆÂΩïÁªìÊûÑ ‰∏∫‰ªÄ‰πàÈúÄË¶ÅÂàÜÊ®°Âùó Ëá≥‰∫é‰∏∫‰ªÄ‰πàË¶ÅÂàÜÊ®°ÂùóÂë¢Ôºü Êàë‰ª¨ËÆæÊÉ≥‰∏Ä‰∏™ËøôÊ†∑ÁöÑÂú∫ÊôØÔºöÂú®Áé∞Âú®ÁöÑ‰∫íËÅîÁΩëÂºÄÂèë‰∏≠Ôºå‰ºöÊää‰∏Ä‰∏™ÂæàÂ§ßÁöÑÁ≥ªÁªüÊãÜÂàÜÊàêÂêÑ‰∏™Â≠êÁ≥ªÁªüÁî®‰∫éÈôç‰Ωé‰ªñ‰ª¨‰πãÈó¥ÁöÑËÄ¶ÂêàÂ∫¶„ÄÇ Âú®‰∏Ä‰∏™Â≠êÈ°πÁõÆ‰∏≠ÈÄöÂ∏∏ÈÉΩ‰ºö‰∏∫API„ÄÅWEB„ÄÅServiceÁ≠âÊ®°Âùó„ÄÇËÄå‰∏îÂΩìÈ°πÁõÆÂ§üÂ§ßÊó∂ÔºåËøô‰∫õÈÄöÂ∏∏ÈÉΩ‰∏çÊòØ‰∏Ä‰∏™‰∫∫ËÉΩÂÆåÊàêÁöÑÂ∑•‰ΩúÔºåÈúÄË¶Å‰∏Ä‰∏™Âõ¢ÈòüÊù•ÂêÑÂè∏ÂÖ∂ËÅå„ÄÇ ÊÉ≥Ë±°‰∏Ä‰∏ãÔºöÂΩì‰πãÂâçÊâÄÊúâÁöÑÈ°πÁõÆÈÉΩÂú®‰∏Ä‰∏™Ê®°ÂùóÁöÑÊó∂ÂÄôÔºåAÊîπÂä®‰∫ÜAPIÔºåÈúÄË¶ÅDeploy‰ª£Á†Å„ÄÇËÄåB‰πüÊîπÂä®‰∫ÜserviceÁöÑ‰ª£Á†ÅÔºå‰ΩÜÂπ∂Ê≤°ÊúâÂÆåÂÖ®ÂÅöÂÆå„ÄÇÊâÄ‰ª•AÂú®Êèê‰∫§buildÁöÑÊó∂ÂÄôÂ∞±‰ºöÊä•Èîô ËÄå‰∏îÂú®Êï¥‰∏™È°πÁõÆË∂≥Â§üÂ§ßÁöÑÊó∂ÂÄôÔºåËøô‰∏™buildÁöÑÊó∂Èó¥‰πüÊòØÂæàÂΩ±ÂìçÊïàÁéáÁöÑ„ÄÇ ‰ΩÜËÆ©ÊàëÂ∞ÜÂêÑ‰∏™Ê®°Âùó‰πãÈó¥ÂàÜÂºÄ‰πãÂêéÊïàÊûúÂ∞±‰∏ç‰∏ÄÊ†∑‰∫Ü„ÄÇÊàë‰øÆÊîπ‰∫ÜAPIÊàëÂ∞±Âè™ÈúÄË¶ÅÁÆ°ÊàëÁöÑÂ∞±Ë°åÔºå‰∏çÈúÄË¶ÅÊï¥‰∏™È°πÁõÆËøõË°åbuild„ÄÇ ËÄå‰∏îÂΩìÊúâÂÖ∂‰ªñÈ°πÁõÆÈúÄË¶Å‰æùËµñÊàëËøô‰∏™APIÁöÑÊó∂ÂÄô‰πüÂè™ÈúÄË¶Å‰æùËµñAPIÂç≥ÂèØÔºå‰∏çÁî®Êï¥‰∏™È°πÁõÆÈÉΩ‰æùËµñËøáÂéª„ÄÇ ÂêÑ‰∏™Ê®°ÂùóÁöÑ‰ΩúÁî®Êù•Áúã‰∏ãËøôÊ¨°ÊàëÊâÄÂàÜÁöÑÊ®°Âùó„ÄÇ ROOTËøôÊòØÊï¥‰∏™È°πÁõÆÁöÑÊ†πËäÇÁÇπ„ÄÇÂÖàÁúã‰∏Ä‰∏ãÂÖ∂‰∏≠ÁöÑpom.xmlÔºö 123456789101112131415161718192021222324252627282930&lt;groupId&gt;com.crossoverJie&lt;/groupId&gt; &lt;artifactId&gt;SSM&lt;/artifactId&gt; &lt;packaging&gt;pom&lt;/packaging&gt; &lt;version&gt;2.0.0&lt;/version&gt; &lt;modules&gt; &lt;module&gt;SSM-API&lt;/module&gt; &lt;module&gt;SSM-BOOT&lt;/module&gt; &lt;module&gt;SSM-SERVICE&lt;/module&gt; &lt;module&gt;SSM-WEB&lt;/module&gt; &lt;/modules&gt; &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;spring.version&gt;4.1.4.RELEASE&lt;/spring.version&gt; &lt;jackson.version&gt;2.5.0&lt;/jackson.version&gt; &lt;lucene.version&gt;6.0.1&lt;/lucene.version&gt; &lt;/properties&gt; &lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;com.crossoverJie&lt;/groupId&gt; &lt;artifactId&gt;SSM-API&lt;/artifactId&gt; &lt;version&gt;2.0.0&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;/dependencyManagement&gt; ÊàëÊà™Âèñ‰∫ÜÂÖ∂‰∏≠ÊØîËæÉÈáçÁÇπÁöÑÈÖçÁΩÆ„ÄÇ Áî±‰∫éËøôÊòØÁà∂ËäÇÁÇπÔºåÊâÄ‰ª•ÊàëÁöÑpackagÁ±ªÂûã‰ΩøÁî®ÁöÑÊòØpom„ÄÇÂÖ∂‰∏≠ÂàÜÂà´ÊúâÁùÄÂõõ‰∏™Â≠êÊ®°Âùó„ÄÇ ÂÖ∂‰∏≠ÈáçÁÇπÁúã‰∏ã&lt;dependencyManagement&gt;Ëøô‰∏™Ê†áÁ≠æ„ÄÇÂ¶ÇÊûú‰ΩøÁî®ÁöÑÊòØIDEAËøô‰∏™ÂºÄÂèëÂ∑•ÂÖ∑ÁöÑËØùÊòØÂèØ‰ª•ÁúãÂà∞Â¶Ç‰∏ãÂõæÔºö Ê†áÁ∫¢ÁöÑÊúâ‰∏Ä‰∏™Âêë‰∏ãÁöÑÁÆ≠Â§¥ÔºåÁÇπ‰∏Ä‰∏ãÂ∞±ÂèØ‰ª•ËøõÂÖ•Â≠êÊ®°Âùó‰∏≠Áõ∏ÂêåÁöÑ‰æùËµñ„ÄÇËøôÊ†∑Â≠êÊ®°ÂùóÂ∞±‰∏çÈúÄË¶ÅÈÖçÁΩÆÂÖ∑‰ΩìÁöÑÁâàÊú¨‰∫ÜÔºåÁªü‰∏ÄÁî±Áà∂Ê®°ÂùóÊù•ËøõË°åÁª¥Êä§ÔºåÂØπ‰πãÂêéÁöÑÁâàÊú¨ÂçáÁ∫ß‰πüÂ∏¶Êù•‰∫ÜÂ•ΩÂ§Ñ„ÄÇ SSM-APIÊé•‰∏ãÊù•Áúã‰∏ãAPIËøô‰∏™Ê®°ÂùóÔºö ÈÄöÂ∏∏Ëøô‰∏™Ê®°ÂùóÈÉΩÊòØÁî®‰∫éÂÆö‰πâÂ§ñÈÉ®Êé•Âè£ÁöÑÔºå‰ª•ÂèäÊîπÊé•Âè£ÊâÄ‰æùËµñÁöÑ‰∏Ä‰∫õDTOÁ±ª„ÄÇ‰∏ÄËà¨Ëøô‰∏™Ê®°ÂùóÈÉΩÊòØÊãøÊù•ÁªôÂÖ∂‰ªñÈ°πÁõÆËøõË°å‰æùËµñÔºåÂπ∂ÂíåÊú¨È°πÁõÆËøõË°åÊï∞ÊçÆ‰∫§‰∫íÁöÑ„ÄÇ SSM-BOOTBOOTËøô‰∏™Ê®°ÂùóÊØîËæÉÁâπÊÆä„ÄÇÂèØ‰ª•ÁúãÂà∞ËøôÈáåÊ≤°Êúâ‰ªª‰Ωï‰ª£Á†ÅÔºåÂè™Êúâ‰∏Ä‰∏™rpcÁöÑÈÖçÁΩÆÊñá‰ª∂„ÄÇÈÄöÂ∏∏Ëøô‰∏™Ê®°ÂùóÊòØÁî®‰∫éÁªôÊàë‰ª¨ÂÜÖÈÉ®È°πÁõÆËøõË°å‰æùËµñÁöÑÔºåÂπ∂‰∏çÂÉè‰∏äÈù¢ÁöÑAPIÊ®°Âùó‰∏ÄÊ†∑ÁªôÂÖ∂‰ªñÈÉ®Èó®ÊàñËÄÖÊòØÈ°πÁõÆËøõË°å‰æùËµñÁöÑ„ÄÇ Âõ†‰∏∫Âú®Êàë‰ª¨ÁöÑRPCË∞ÉÁî®ÁöÑÊó∂ÂÄôÔºåÁî®dubboÊù•‰∏æ‰æãÔºåÊòØÈúÄË¶ÅÈÖçÁΩÆÊâÄ‰æùËµñÁöÑconsumer„ÄÇ ‰ΩÜÂ¶ÇÊûúÊòØÊàë‰ª¨Ëá™Â∑±ÂÜÖÈÉ®Ë∞ÉÁî®ÁöÑËØùÊàë‰ª¨Â∞±ÂèØ‰ª•ÊääÈúÄË¶ÅË∞ÉÁî®Ëá™Â∑±ÁöÑdubboÊúçÂä°Êèê‰æõËÄÖÈÖçÁΩÆÂú®ËøôÈáåÔºåËøôÊ†∑ÁöÑËØùÊàë‰ª¨Ëá™Â∑±Ë∞ÉÁî®Â∞±Âè™ÈúÄË¶Å‰æùËµñËøô‰∏™BOOTÂ∞±ÂèØ‰ª•ËøõË°åË∞ÉÁî®‰∫Ü„ÄÇ Âì¶ÂØπ‰∫ÜÔºåBOOTÂêåÊó∂Ëøò‰ºö‰æùËµñAPIÔºåËøôÊ†∑ÊâçÂÆûÁé∞‰∫ÜÂè™‰æùËµñBOOTÂ∞±ÂèØ‰ª•Ë∞ÉÁî®Ëá™Â∑±ÂÜÖÈÉ®ÁöÑdubboÊúçÂä°‰∫Ü„ÄÇÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö12345678910111213&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.crossoverJie&lt;/groupId&gt; &lt;artifactId&gt;SSM-API&lt;/artifactId&gt; &lt;/dependency&gt;&lt;/dependencies&gt; SSM-SERVICESERVICEÊ®°ÂùóÂ∞±ÊØîËæÉÂ•ΩÁêÜËß£‰∫Ü„ÄÇÊòØÂ§ÑÁêÜÂÖ∑‰Ωì‰∏öÂä°ÈÄªËæëÁöÑÂú∞ÊñπÔºå‰πüÊòØÂØπ‰πãÂâçÁöÑAPIÁöÑÂÆûÁé∞„ÄÇ ÈÄöÂ∏∏Ëøô‰πüÊòØ‰∏Ä‰∏™webÊ®°ÂùóÔºåÊâÄ‰ª•ÊàëÁöÑpomÁ±ªÂûãÊòØWAR„ÄÇ SSM-WEBÂÖ∂ÂÆûWEBÊ®°ÂùóÂíåSERVICEÊ®°ÂùóÊúâÁÇπÈáçÂêà‰∫Ü„ÄÇÈÄöÂ∏∏Êù•ËØ¥Ëøô‰∏™Ê®°Âùó‰∏ÄËà¨Âú®‰∏Ä‰∏™ÂØπÂ§ñÊèê‰æõhttpËÆøÈóÆÊé•Âè£ÁöÑÈ°πÁõÆ‰∏≠„ÄÇ ËøôÈáåÂè™ÊòØ‰∏∫‰∫ÜÂ±ïÁ§∫È°πÁõÆÁªìÊûÑÔºåÊâÄ‰ª•‰πüÂÜôÂú®‰∫ÜËøôÈáå„ÄÇ ‰ªñÁöÑ‰ΩúÁî®ÂíåserviceÂ∑Æ‰∏çÂ§öÔºåÈÉΩÊòØWARÁöÑÁ±ªÂûã„ÄÇ ÊÄªÁªìËøôÊ¨°Ê≤°ÊúâÂÆûÁé∞‰ªÄ‰πàÁâπÂà´ÁöÑÂäüËÉΩÔºåÂè™ÊòØÂØπ‰∏Ä‰∫õËøòÊ≤°ÊúâÊé•Ëß¶ËøáËøôÁßçÈ°πÁõÆÁªìÊûÑÂºÄÂèëÁöÑÁ´•ÈûãËÉΩËµ∑Âà∞‰∏Ä‰∫õÂºïÂØº‰ΩúÁî®„ÄÇ ÂÖ∑‰ΩìÊ∫êÁ†ÅËøòËØ∑ÂÖ≥Ê≥®ÊàëÁöÑgithub„ÄÇ È°πÁõÆÂú∞ÂùÄÔºöhttps://github.com/crossoverJie/SSM.git ‰∏™‰∫∫ÂçöÂÆ¢Âú∞ÂùÄÔºöhttp://crossoverjie.top„ÄÇ GitHubÂú∞ÂùÄÔºöhttps://github.com/crossoverJie„ÄÇ]]></content>
      <categories>
        <category>SSM</category>
      </categories>
      <tags>
        <tag>Maven</tag>
        <tag>ÈáçÊûÑ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SSM(‰πù) ÂèçÂ∞ÑÁöÑÂÆûÈôÖÂ∫îÁî® - ÊûÑÂª∫Êó•ÂøóÂØπË±°]]></title>
    <url>%2F2017%2F01%2F19%2FSSM9%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄÁõ∏‰ø°ÂÅöJavaÁöÑÁ´•ÈûãÊàñÂ§öÊàñÂ∞ëÈÉΩÂê¨ËøáÂèçÂ∞ÑÔºåËøô‰πüÂ∫îËØ•ÊòØJava‰ªéÂÖ•Èó®Âà∞ËøõÈò∂ÁöÑÂøÖÁªè‰πãË∑Ø„ÄÇ ‰ΩÜÊòØÂú®Êàë‰ª¨ÁöÑÂÆûÈôÖÂºÄÂèë‰∏≠Áõ¥Êé•‰ΩøÁî®ÂÆÉ‰ª¨ÁöÑÂá†ÁéáË≤å‰ººËøòÊòØÊØîËæÉÂ∞ëÁöÑÔºåÔºàÈô§‰∫ÜÈÄ†ËΩÆÂ≠êÊàñËÄÖÊòØSpring MybatisËøô‰∫õÊ°ÜÊû∂Â§ñÔºâ„ÄÇ ÊâÄ‰ª•ËøôÈáå‰ªãÁªç‰∏Ä‰∏™Âú®ÂÆûÈôÖÂºÄÂèë‰∏≠ËøòÊòØÂ∞èÊúâÁî®Â§ÑÁöÑÂèçÂ∞ÑÂÆû‰æã„ÄÇ ‰º†ÁªüÊó•ÂøóÊúâÂÖ≥ÂèçÂ∞ÑÁöÑ‰∏Ä‰∫õÂü∫Êú¨Áü•ËØÜÂ∞±‰∏çËØ¥‰∫ÜÔºåÂèØ‰ª•Ëá™Ë°åGoogleÔºå‰πüÂèØ‰ª•Áúã‰∏ãÂèçÂ∞ÑÂÖ•Èó®„ÄÇ Êó•ÂøóÁõ∏‰ø°Â§ßÂÆ∂ÈÉΩ‰∏çÈôåÁîüÔºåÂú®ÂÆûÈôÖÂºÄÂèë‰∏≠‰∏Ä‰∫õÊØîËæÉÊïèÊÑüÁöÑÊï∞ÊçÆË°®Êàë‰ª¨ÈúÄË¶ÅÂØπÂÆÉÁöÑÊØè‰∏ÄÊ¨°Êìç‰ΩúÈÉΩËÆ∞ÂΩï‰∏ãÊù•„ÄÇ ÂÖàÊù•ÁúãÁúã‰º†ÁªüÁöÑÂÜôÊ≥ïÔºö1234567891011121314@Testpublic void insertSelective() throws Exception &#123; Content content = new Content() ; content.setContent("asdsf"); content.setCreatedate("2016-12-09"); contentService.insertSelective(content) ; ContentLog log = new ContentLog(); log.setContentid(content.getContentid()); log.setContent("asdsf"); log.setCreatedate("2016-12-09"); contentLogService.insertSelective(log);&#125; ÈùûÂ∏∏ÁÆÄÂçïÔºåÂ∞±ÊòØÂú®‰øùÂ≠òÂÆåÊï∞ÊçÆË°®‰πãÂêéÂÜçÊääÁõ∏ÂêåÁöÑÊï∞ÊçÆ‰øùÂ≠òÂà∞Êó•ÂøóË°®‰∏≠„ÄÇ‰ΩÜÊòØËøôÊ†∑Êúâ‰ª•‰∏ãÂá†‰∏™ÈóÆÈ¢òÔºö Â¶ÇÊûúÊï∞ÊçÆË°®ÁöÑÂ≠óÊÆµËæÉÂ§öÁöÑËØùÔºåÊØîÂ¶ÇÂá†Áôæ‰∏™„ÄÇÈÇ£‰πàÊó•ÂøóË°®ÁöÑsetter()ÊñπÊ≥ïÂ∞±ÂæóÂÜôÂá†ÁôæÊ¨°ÔºåËøòÂæóÊòØÈÉΩÂÜôÂØπÁöÑÊÉÖÂÜµ‰∏ã„ÄÇ Â¶ÇÊûúÂì™Â§©Êï∞ÊçÆË°®ÁöÑÂ≠óÊÆµÂèëÁîü‰∫ÜÂ¢ûÂä†ÔºåÈÇ£‰πàÊØè‰∏™ÂÜôÊó•ÂøóÁöÑÂú∞ÊñπÈÉΩÂæóÂ¢ûÂä†ËØ•Â≠óÊÆµÔºåÊèêÈ´ò‰∫ÜÁª¥Êä§ÁöÑÊàêÊú¨„ÄÇ ÈíàÂØπ‰ª•‰∏äÁöÑÊÉÖÂÜµÂ∞±ÂæóÈúÄË¶ÅÂèçÂ∞ÑËøô‰∏™‰∏ªËßíÊù•Ëß£ÂÜ≥‰∫Ü„ÄÇ Âà©Áî®ÂèçÂ∞ÑÊûÑÂª∫Êó•ÂøóÊàë‰ª¨ÂÖàÊù•ÂÖàÊù•Áúã‰∏ã‰ΩøÁî®ÂèçÂ∞Ñ‰πãÂêéÂØπ‰ª£Á†ÅÊâÄÂ∏¶Êù•ÁöÑÊîπÂèòÔºö12345678910111213@Testpublic void insertSelective2() throws Exception &#123; Content content = new Content(); content.setContent("‰Ω†Â•Ω"); content.setContentname("1"); content.setCreatedate("2016-09-23"); contentService.insertSelective(content); ContentLog log = new ContentLog(); CommonUtil.setLogValueModelToModel(content, log); contentLogService.insertSelective(log);&#125; ÂêåÊ†∑ÁöÑ‰øùÂ≠òÊó•ÂøóÔºå‰∏çÁÆ°Â§öÂ∞ëÂ≠óÊÆµÔºåÂè™ÈúÄË¶Å‰∏âË°å‰ª£Á†ÅÂç≥ÂèØËß£ÂÜ≥„ÄÇËÄå‰∏îÂ∞±ÁÆó‰πãÂêéÂ≠óÊÆµÂèëÁîüÊîπÂèòÂÜôÊó•ÂøóËøôÊÆµ‰ª£Á†Å‰ªçÁÑ∂‰∏çÈúÄË¶ÅÊîπÂä®„ÄÇ ÂÖ∂ÂÆûËøôÈáåÊúÄ‰∏ªË¶ÅÁöÑ‰∏Ä‰∏™ÊñπÊ≥ïÂ∞±ÊòØCommonUtil.setLogValueModelToModel(content, log); Êù•Áúã‰∏ãÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑ;12345678910111213141516171819202122232425262728293031323334353637/** * ÁîüÊàêÊó•ÂøóÂÆû‰ΩìÂ∑•ÂÖ∑ * * @param objectFrom * @param objectTo */ public static void setLogValueModelToModel(Object objectFrom, Object objectTo) &#123; Class&lt;? extends Object&gt; clazzFrom = objectFrom.getClass(); Class&lt;? extends Object&gt; clazzTo = objectTo.getClass(); for (Method toSetMethod : clazzTo.getMethods()) &#123; String mName = toSetMethod.getName(); if (mName.startsWith("set")) &#123; //Â≠óÊÆµÂêç String field = mName.substring(3); //Ëé∑Âèñfrom ÂÄº Object value; try &#123; if ("LogId".equals(field)) &#123; continue; &#125; Method fromGetMethod = clazzFrom.getMethod("get" + field); value = fromGetMethod.invoke(objectFrom); //ËÆæÁΩÆÂÄº toSetMethod.invoke(objectTo, value); &#125; catch (NoSuchMethodException e) &#123; throw new RuntimeException(e); &#125; catch (InvocationTargetException e) &#123; throw new RuntimeException(e); &#125; catch (IllegalAccessException e) &#123; throw new RuntimeException(e); &#125; &#125; &#125; &#125; ÂÜç‰ΩøÁî®‰πãÂâçÊàë‰ª¨È¶ñÂÖàÈúÄË¶ÅÊûÑÂª∫Â•Ω‰∏ªÁöÑÊï∞ÊçÆË°®ÔºåÁÑ∂Âêénew‰∏Ä‰∏™Êó•ÂøóË°®ÁöÑÂØπË±°„ÄÇ Âú®setLogValueModelToModel()ÊñπÊ≥ï‰∏≠Ôºö ÂàÜÂà´Ëé∑ÂæóÊï∞ÊçÆË°®ÂíåÊó•ÂøóË°®ÂØπË±°ÁöÑÁ±ªÁ±ªÂûã„ÄÇ Ëé∑ÂèñÂà∞Êó•ÂøóÂØπË±°ÁöÑÊâÄÊúâÊñπÊ≥ïÈõÜÂêà„ÄÇ ÈÅçÂéÜËØ•ÈõÜÂêàÔºåÂπ∂ÊãøÂà∞ËØ•ÊñπÊ≥ïÁöÑÂêçÁß∞„ÄÇ Âè™ÂèñÂÖ∂‰∏≠setÂºÄÂ§¥ÁöÑÊñπÊ≥ïÔºå‰πüÂ∞±ÊòØsetÊñπÊ≥ï„ÄÇÂõ†‰∏∫Êàë‰ª¨ÈúÄË¶ÅÂú®Âæ™ÁéØ‰∏≠‰∏∫Êó•ÂøóÂØπË±°ÁöÑÊØè‰∏Ä‰∏™Â≠óÊÆµËµãÂÄº„ÄÇ ‰πãÂêéÊà™ÂèñÊñπÊ≥ïÂêçÁß∞Ëé∑ÂæóÂÖ∑‰ΩìÁöÑÂ≠óÊÆµÂêçÁß∞„ÄÇ Áî®‰πãÂâçÊà™ÂèñÁöÑÂ≠óÊÆµÂêçÁß∞ÔºåÈÄöËøágetMethod()ÊñπÊ≥ïËøîÂõûÊï∞ÊçÆË°®‰∏≠ÁöÑËØ•Â≠óÊÆµÁöÑgetterÊñπÊ≥ï„ÄÇ Áõ∏ÂΩì‰∫éÊâßË°å‰∫ÜString content = content.getContent(); ÊâßË°åËØ•ÊñπÊ≥ïËé∑ÂæóËØ•Â≠óÊÆµÂÖ∑‰ΩìÁöÑÂÄº„ÄÇ Âà©Áî®ÂΩìÂâçÂæ™ÁéØÁöÑsetterÊñπÊ≥ï‰∏∫Êó•ÂøóÂØπË±°ÁöÑÊØè‰∏Ä‰∏™Â≠óÊÆµËµãÂÄº„ÄÇ Áõ∏ÂΩì‰∫éÊâßË°å‰∫Ülog.setContent(&quot;asdsf&quot;); ÂÖ∂‰∏≠Â≠óÊÆµÂêçÁß∞‰∏∫LogIdÊó∂Ë∑≥Âá∫‰∫ÜÂΩìÂâçÂæ™ÁéØÔºåÂõ†‰∏∫LogIdÊòØÊó•ÂøóË°®ÁöÑ‰∏ªÈîÆÔºåÊòØ‰∏çÈúÄË¶ÅËµãÂÄºÁöÑ„ÄÇ ÂΩìÂæ™ÁéØÁªìÊùüÊó∂ÔºåÊó•ÂøóÂØπË±°‰πüÂ∞±ÊûÑÂª∫ÂÆåÊàê‰∫Ü„ÄÇ‰πãÂêéÂè™ÈúÄË¶Å‰øùÂ≠òÂà∞Êï∞ÊçÆÂ∫ì‰∏≠Âç≥ÂèØ„ÄÇ ÊÄªÁªìÂèçÂ∞ÑÂÖ∂ÂÆûÊòØÈùûÂ∏∏ËÄóËµÑÊ∫êÁöÑÔºåÂÜç‰ΩøÁî®ËøáÁ®ã‰∏≠ËøòÊòØË¶ÅÊÖéÁî®„ÄÇÂÖ∂‰∏≠ÂØπmethod„ÄÅfield„ÄÅconstructorÁ≠âÂØπË±°ÂÅöÁºìÂ≠ò‰πüÊòØÂæàÊúâÂøÖË¶ÅÁöÑ„ÄÇ È°πÁõÆÂú∞ÂùÄÔºöhttps://github.com/crossoverJie/SSM.git ‰∏™‰∫∫ÂçöÂÆ¢Âú∞ÂùÄÔºöhttp://crossoverjie.top„ÄÇ GitHubÂú∞ÂùÄÔºöhttps://github.com/crossoverJie„ÄÇ]]></content>
      <categories>
        <category>SSM</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Reflect</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SSM(ÂÖ´)Âä®ÊÄÅÂàáÊç¢Êï∞ÊçÆÊ∫ê]]></title>
    <url>%2F2017%2F01%2F05%2FSSM8%2F</url>
    <content type="text"><![CDATA[ÂâçË®Ä Âú®Áé∞Âú®ÂºÄÂèëÁöÑËøáÁ®ã‰∏≠Â∫îËØ•Â§ßÂ§öÊï∞ÊúãÂèãÈÉΩÊúâÈÅáÂà∞ËøáÂàáÊç¢Êï∞ÊçÆÊ∫êÁöÑÈúÄÊ±Ç„ÄÇÊØîÂ¶ÇÁé∞Âú®Â∏∏Áî®ÁöÑÊï∞ÊçÆÂ∫ìËØªÂÜôÂàÜÁ¶ªÔºåÊàñËÄÖÂ∞±ÊòØÊúâ‰∏§‰∏™Êï∞ÊçÆÂ∫ìÁöÑÊÉÖÂÜµÔºåËøô‰∫õÈÉΩÈúÄË¶ÅÁî®Âà∞ÂàáÊç¢Êï∞ÊçÆÊ∫ê„ÄÇ ÊâãÂä®ÂàáÊç¢Êï∞ÊçÆÊ∫ê‰ΩøÁî®SpringÁöÑAbstractRoutingDataSourceÁ±ªÊù•ËøõË°åÊãìÂ±ïÂ§öÊï∞ÊçÆÊ∫ê„ÄÇ ËØ•Á±ªÂ∞±Áõ∏ÂΩì‰∫é‰∏Ä‰∏™dataSourceÁöÑË∑ØÁî±ÔºåÁî®‰∫éÊ†πÊçÆkeyÂÄºÊù•ËøõË°åÂàáÊç¢ÂØπÂ∫îÁöÑdataSource„ÄÇ ‰∏ãÈù¢ÁÆÄÂçïÊù•Áúã‰∏ãAbstractRoutingDataSourceÁ±ªÁöÑÂá†ÊÆµÂÖ≥ÈîÆÊ∫êÁ†ÅÔºö123456789101112131415161718192021222324252627282930313233343536373839@Overridepublic Connection getConnection() throws SQLException &#123; return determineTargetDataSource().getConnection();&#125;@Overridepublic Connection getConnection(String username, String password) throws SQLException &#123; return determineTargetDataSource().getConnection(username, password);&#125;/** * Retrieve the current target DataSource. Determines the * &#123;@link #determineCurrentLookupKey() current lookup key&#125;, performs * a lookup in the &#123;@link #setTargetDataSources targetDataSources&#125; map, * falls back to the specified * &#123;@link #setDefaultTargetDataSource default target DataSource&#125; if necessary. * @see #determineCurrentLookupKey() */protected DataSource determineTargetDataSource() &#123; Assert.notNull(this.resolvedDataSources, "DataSource router not initialized"); Object lookupKey = determineCurrentLookupKey(); DataSource dataSource = this.resolvedDataSources.get(lookupKey); if (dataSource == null &amp;&amp; (this.lenientFallback || lookupKey == null)) &#123; dataSource = this.resolvedDefaultDataSource; &#125; if (dataSource == null) &#123; throw new IllegalStateException("Cannot determine target DataSource for lookup key [" + lookupKey + "]"); &#125; return dataSource;&#125;/** * Determine the current lookup key. This will typically be * implemented to check a thread-bound transaction context. * &lt;p&gt;Allows for arbitrary keys. The returned key needs * to match the stored lookup key type, as resolved by the * &#123;@link #resolveSpecifiedLookupKey&#125; method. */protected abstract Object determineCurrentLookupKey(); ÂèØ‰ª•ÁúãÂà∞ÂÖ∂‰∏≠Ëé∑ÂèñÈìæÊé•ÁöÑÊñπÊ≥ïgetConnection()Ë∞ÉÁî®ÁöÑdetermineTargetDataSourceÂàôÊòØÂÖ≥ÈîÆÊñπÊ≥ï„ÄÇËØ•ÊñπÊ≥ïÁî®‰∫éËøîÂõûÊàë‰ª¨‰ΩøÁî®ÁöÑÊï∞ÊçÆÊ∫ê„ÄÇ ÂÖ∂‰∏≠Âë¢ÂèàÊòØdetermineCurrentLookupKey()ÊñπÊ≥ïÊù•ËøîÂõûÂΩìÂâçÊï∞ÊçÆÊ∫êÁöÑkeyÂÄº„ÄÇ‰πãÂêéÈÄöËøáËØ•keyÂÄºÂú®resolvedDataSourcesËøô‰∏™map‰∏≠ÊâæÂà∞ÂØπÂ∫îÁöÑvalue(ËØ•valueÂ∞±ÊòØÊï∞ÊçÆÊ∫ê)„ÄÇ resolvedDataSourcesËøô‰∏™mapÂàôÊòØÂú®Ôºö123456789101112131415@Overridepublic void afterPropertiesSet() &#123; if (this.targetDataSources == null) &#123; throw new IllegalArgumentException("Property 'targetDataSources' is required"); &#125; this.resolvedDataSources = new HashMap&lt;Object, DataSource&gt;(this.targetDataSources.size()); for (Map.Entry&lt;Object, Object&gt; entry : this.targetDataSources.entrySet()) &#123; Object lookupKey = resolveSpecifiedLookupKey(entry.getKey()); DataSource dataSource = resolveSpecifiedDataSource(entry.getValue()); this.resolvedDataSources.put(lookupKey, dataSource); &#125; if (this.defaultTargetDataSource != null) &#123; this.resolvedDefaultDataSource = resolveSpecifiedDataSource(this.defaultTargetDataSource); &#125;&#125; Ëøô‰∏™ÊñπÊ≥ïÈÄöËøátargetDataSourcesËøô‰∏™mapÊù•ËøõË°åËµãÂÄºÁöÑ„ÄÇtargetDataSourcesÂàôÊòØÊàë‰ª¨Âú®ÈÖçÁΩÆÊñá‰ª∂‰∏≠ËøõË°åËµãÂÄºÁöÑÔºå‰∏ãÈù¢‰ºöËÆ≤Âà∞„ÄÇ ÂÜçÊù•ÁúãÁúãdetermineCurrentLookupKey()ÊñπÊ≥ïÔºå‰ªéprotectedÊù•‰øÆÈ•∞Â∞±ÂèØ‰ª•ÁúãÂá∫ÊòØÈúÄË¶ÅÊàë‰ª¨Êù•ËøõË°åÈáçÂÜôÁöÑ„ÄÇ DynamicDataSource Âíå DataSourceHolder‰∫éÊòØÊàëÊñ∞Â¢û‰∫ÜDynamicDataSourceÁ±ªÔºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö1234567891011121314151617package com.crossoverJie.util;import org.springframework.jdbc.datasource.lookup.AbstractRoutingDataSource;/** * Function: * * @author chenjiec * Date: 2017/1/2 ‰∏äÂçà12:22 * @since JDK 1.7 */public class DynamicDataSource extends AbstractRoutingDataSource &#123; @Override protected Object determineCurrentLookupKey() &#123; return DataSourceHolder.getDataSources(); &#125;&#125; ‰ª£Á†ÅÂæàÁÆÄÂçïÔºåÁªßÊâø‰∫ÜAbstractRoutingDataSourceÁ±ªÂπ∂ÈáçÂÜô‰∫ÜÂÖ∂‰∏≠ÁöÑdetermineCurrentLookupKey()ÊñπÊ≥ï„ÄÇ ËøôÈáåÁõ¥Êé•Áî®DataSourceHolderËøîÂõû‰∫Ü‰∏Ä‰∏™Êï∞ÊçÆÊ∫ê„ÄÇ DataSourceHolder‰ª£Á†ÅÂ¶Ç‰∏ãÔºö1234567891011121314151617181920package com.crossoverJie.util;/** * Function:Âä®ÊÄÅÊï∞ÊçÆÊ∫ê * * @author chenjiec * Date: 2017/1/2 ‰∏äÂçà12:19 * @since JDK 1.7 */public class DataSourceHolder &#123; private static final ThreadLocal&lt;String&gt; dataSources = new ThreadLocal&lt;String&gt;(); public static void setDataSources(String dataSource) &#123; dataSources.set(dataSource); &#125; public static String getDataSources() &#123; return dataSources.get(); &#125;&#125; ËøôÈáåÊàë‰ΩøÁî®‰∫ÜThreadLocalÊù•‰øùÂ≠ò‰∫ÜÊï∞ÊçÆÊ∫êÔºåÂÖ≥‰∫éThreadLocalÁöÑÁü•ËØÜÁÇπÂèØ‰ª•Êü•Áúã‰ª•‰∏ãËøôÁØáÊñáÁ´†ÔºöËß£ÂØÜThreadLocal ‰πãÂêéÂú®SpringÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏≠ÈÖçÁΩÆÊàë‰ª¨ÁöÑÊï∞ÊçÆÊ∫êÔºåÂ∞±ÊòØ‰∏äÊñáËÆ≤Âà∞ÁöÑ‰∏∫targetDataSourcesËµãÂÄºÔºö123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566&lt;bean id="ssm1DataSource" class="com.alibaba.druid.pool.DruidDataSource" init-method="init" destroy-method="close"&gt; &lt;!-- ÊåáÂÆöËøûÊé•Êï∞ÊçÆÂ∫ìÁöÑÈ©±Âä® --&gt; &lt;property name="driverClassName" value="$&#123;jdbc.driverClass&#125;" /&gt; &lt;property name="url" value="$&#123;jdbc.url&#125;" /&gt; &lt;property name="username" value="$&#123;jdbc.user&#125;" /&gt; &lt;property name="password" value="$&#123;jdbc.password&#125;" /&gt; &lt;!-- ÈÖçÁΩÆÂàùÂßãÂåñÂ§ßÂ∞è„ÄÅÊúÄÂ∞è„ÄÅÊúÄÂ§ß --&gt; &lt;property name="initialSize" value="3" /&gt; &lt;property name="minIdle" value="3" /&gt; &lt;property name="maxActive" value="20" /&gt; &lt;!-- ÈÖçÁΩÆËé∑ÂèñËøûÊé•Á≠âÂæÖË∂ÖÊó∂ÁöÑÊó∂Èó¥ --&gt; &lt;property name="maxWait" value="60000" /&gt; &lt;!-- ÈÖçÁΩÆÈó¥ÈöîÂ§ö‰πÖÊâçËøõË°å‰∏ÄÊ¨°Ê£ÄÊµãÔºåÊ£ÄÊµãÈúÄË¶ÅÂÖ≥Èó≠ÁöÑÁ©∫Èó≤ËøûÊé•ÔºåÂçï‰ΩçÊòØÊØ´Áßí --&gt; &lt;property name="timeBetweenEvictionRunsMillis" value="60000" /&gt; &lt;!-- ÈÖçÁΩÆ‰∏Ä‰∏™ËøûÊé•Âú®Ê±†‰∏≠ÊúÄÂ∞èÁîüÂ≠òÁöÑÊó∂Èó¥ÔºåÂçï‰ΩçÊòØÊØ´Áßí --&gt; &lt;property name="minEvictableIdleTimeMillis" value="300000" /&gt; &lt;property name="validationQuery" value="SELECT 'x'" /&gt; &lt;property name="testWhileIdle" value="true" /&gt; &lt;property name="testOnBorrow" value="false" /&gt; &lt;property name="testOnReturn" value="false" /&gt; &lt;!-- ÊâìÂºÄPSCacheÔºåÂπ∂‰∏îÊåáÂÆöÊØè‰∏™ËøûÊé•‰∏äPSCacheÁöÑÂ§ßÂ∞è --&gt; &lt;property name="poolPreparedStatements" value="true" /&gt; &lt;property name="maxPoolPreparedStatementPerConnectionSize" value="20" /&gt; &lt;!-- ÈÖçÁΩÆÁõëÊéßÁªüËÆ°Êã¶Êà™ÁöÑfiltersÔºåÂéªÊéâÂêéÁõëÊéßÁïåÈù¢sqlÊó†Ê≥ïÁªüËÆ° --&gt; &lt;property name="filters" value="stat" /&gt; &lt;/bean&gt; &lt;bean id="ssm2DataSource" class="com.alibaba.druid.pool.DruidDataSource" init-method="init" destroy-method="close"&gt; &lt;!-- ÊåáÂÆöËøûÊé•Êï∞ÊçÆÂ∫ìÁöÑÈ©±Âä® --&gt; &lt;property name="driverClassName" value="$&#123;jdbc.driverClass&#125;"/&gt; &lt;property name="url" value="$&#123;jdbc.url2&#125;"/&gt; &lt;property name="username" value="$&#123;jdbc.user2&#125;"/&gt; &lt;property name="password" value="$&#123;jdbc.password2&#125;"/&gt; &lt;property name="initialSize" value="3"/&gt; &lt;property name="minIdle" value="3"/&gt; &lt;property name="maxActive" value="20"/&gt; &lt;!-- ÈÖçÁΩÆËé∑ÂèñËøûÊé•Á≠âÂæÖË∂ÖÊó∂ÁöÑÊó∂Èó¥ --&gt; &lt;property name="maxWait" value="60000"/&gt; &lt;!-- ÈÖçÁΩÆÈó¥ÈöîÂ§ö‰πÖÊâçËøõË°å‰∏ÄÊ¨°Ê£ÄÊµãÔºåÊ£ÄÊµãÈúÄË¶ÅÂÖ≥Èó≠ÁöÑÁ©∫Èó≤ËøûÊé•ÔºåÂçï‰ΩçÊòØÊØ´Áßí --&gt; &lt;property name="timeBetweenEvictionRunsMillis" value="60000"/&gt; &lt;!-- ÈÖçÁΩÆ‰∏Ä‰∏™ËøûÊé•Âú®Ê±†‰∏≠ÊúÄÂ∞èÁîüÂ≠òÁöÑÊó∂Èó¥ÔºåÂçï‰ΩçÊòØÊØ´Áßí --&gt; &lt;property name="minEvictableIdleTimeMillis" value="300000"/&gt; &lt;property name="validationQuery" value="SELECT 'x'"/&gt; &lt;property name="testWhileIdle" value="true"/&gt; &lt;property name="testOnBorrow" value="false"/&gt; &lt;property name="testOnReturn" value="false"/&gt; &lt;!-- ÊâìÂºÄPSCacheÔºåÂπ∂‰∏îÊåáÂÆöÊØè‰∏™ËøûÊé•‰∏äPSCacheÁöÑÂ§ßÂ∞è --&gt; &lt;property name="poolPreparedStatements" value="true"/&gt; &lt;property name="maxPoolPreparedStatementPerConnectionSize" value="20"/&gt; &lt;!-- ÈÖçÁΩÆÁõëÊéßÁªüËÆ°Êã¶Êà™ÁöÑfiltersÔºåÂéªÊéâÂêéÁõëÊéßÁïåÈù¢sqlÊó†Ê≥ïÁªüËÆ° --&gt; &lt;property name="filters" value="stat"/&gt; &lt;/bean&gt; &lt;bean id="dataSource" class="com.crossoverJie.util.DynamicDataSource"&gt; &lt;property name="targetDataSources"&gt; &lt;map key-type="java.lang.String"&gt; &lt;entry key="ssm1DataSource" value-ref="ssm1DataSource"/&gt; &lt;entry key="ssm2DataSource" value-ref="ssm2DataSource"/&gt; &lt;/map&gt; &lt;/property&gt; &lt;!--ÈªòËÆ§Êï∞ÊçÆÊ∫ê--&gt; &lt;property name="defaultTargetDataSource" ref="ssm1DataSource"/&gt; &lt;/bean&gt; ËøôÈáåÂàÜÂà´ÈÖçÁΩÆ‰∫Ü‰∏§‰∏™Êï∞ÊçÆÊ∫êÔºössm1DataSourceÂíåssm2DataSource„ÄÇ‰πãÂêéÂÜçÈÄöËøáSpringÁöÑ‰æùËµñÊ≥®ÂÖ•ÊñπÂºèÂ∞Ü‰∏§‰∏™Êï∞ÊçÆÊ∫êËÆæÁΩÆËøõtargetDataSources„ÄÇ Êé•‰∏ãÊù•ÁöÑÁî®Ê≥ïÁõ∏ÊØîÂ§ßÂÆ∂‰πüÂ∫îËØ•ÁåúÂà∞‰∫Ü„ÄÇ Â∞±ÊòØÂú®ÊØèÊ¨°Ë∞ÉÁî®Êï∞ÊçÆÂ∫ì‰πãÂâçÊàë‰ª¨ÈÉΩË¶ÅÂÖàÈÄöËøáDataSourceHolderÊù•ËÆæÁΩÆÂΩìÂâçÁöÑÊï∞ÊçÆÊ∫ê„ÄÇÁúã‰∏ãdemoÔºö123456@Testpublic void selectByPrimaryKey() throws Exception &#123; DataSourceHolder.setDataSources(Constants.DATASOURCE_TWO); Datasource datasource = dataSourceService.selectByPrimaryKey(7); System.out.println(JSON.toJSONString(datasource));&#125; ËØ¶ËßÅÊàëÁöÑÂçïÊµã„ÄÇ ‰ΩøÁî®Ëµ∑Êù•‰πüÊòØÈùûÂ∏∏ÁÆÄÂçï„ÄÇ‰ΩÜÊòØ‰∏çÁü•ÈÅìÂ§ßÂÆ∂Ê≥®ÊÑèÂà∞Ê≤°ÊúâÔºåËøôÊ†∑ÁöÑÂÅöÊ≥ïÊßΩÁÇπÂæàÂ§öÔºö ÊØèÊ¨°‰ΩøÁî®ÈúÄË¶ÅÊâãÂä®ÂàáÊç¢ÔºåÊÄªÊúâ‰∏Ä‰∫õ‰∫∫‰ºöÂøòËÆ∞ÂÜô(ÊØîÂ¶ÇÊàë)„ÄÇ Â¶ÇÊûúÊòØÂêéÊúüÈúÄÊ±ÇÂèò‰∫ÜÔºåÊü•ËØ¢ÂÖ∂‰ªñÁöÑË°®‰∫ÜËøòÂæó‰∏Ä‰∏™‰∏™ÊîπÂõûÊù•„ÄÇ ÈÇ£ÊúâÊ≤°Êúâ‰ªÄ‰πàÊñπÊ≥ïÂèØ‰ª•Ëá™Âä®ÁöÑÂ∏ÆÊàë‰ª¨ÂàáÊç¢Âë¢Ôºü ËÇØÂÆöÊòØÊúâÁöÑÔºåÂ§ßÂÆ∂Â∫îËØ•‰πüÊÉ≥ÂæóÂà∞„ÄÇÂ∞±ÊòØÂà©Áî®SpringÁöÑAOP‰∫Ü„ÄÇ Ëá™Âä®ÂàáÊç¢Êï∞ÊçÆÊ∫êÈ¶ñÂÖàË¶ÅÂÆö‰πâÂ•ΩÊàë‰ª¨ÁöÑÂàáÈù¢Á±ªDataSourceExchange:1234567891011121314151617181920212223242526272829303132333435363738394041package com.crossoverJie.util;import org.aspectj.lang.JoinPoint;/** * Function:Êã¶Êà™Âô®ÊñπÊ≥ï * * @author chenjiec * Date: 2017/1/3 ‰∏äÂçà12:34 * @since JDK 1.7 */public class DataSourceExchange &#123; /** * * @param point */ public void before(JoinPoint point) &#123; //Ëé∑ÂèñÁõÆÊ†áÂØπË±°ÁöÑÁ±ªÁ±ªÂûã Class&lt;?&gt; aClass = point.getTarget().getClass(); //Ëé∑ÂèñÂåÖÂêçÁî®‰∫éÂå∫ÂàÜ‰∏çÂêåÊï∞ÊçÆÊ∫ê String whichDataSource = aClass.getName().substring(25, aClass.getName().lastIndexOf(".")); if ("ssmone".equals(whichDataSource)) &#123; DataSourceHolder.setDataSources(Constants.DATASOURCE_ONE); &#125; else &#123; DataSourceHolder.setDataSources(Constants.DATASOURCE_TWO); &#125; &#125; /** * ÊâßË°åÂêéÂ∞ÜÊï∞ÊçÆÊ∫êÁΩÆ‰∏∫Á©∫ */ public void after() &#123; DataSourceHolder.setDataSources(null); &#125;&#125; ÈÄªËæë‰πüÊØîËæÉÁÆÄÂçïÔºåÂ∞±ÊòØÂú®ÊâßË°åÊï∞ÊçÆÂ∫ìÊìç‰Ωú‰πãÂâçÂÅö‰∏Ä‰∏™ÂàáÈù¢„ÄÇ ÈÄöËøáJoinPointÂØπË±°Ëé∑ÂèñÁõÆÊ†áÂØπË±°„ÄÇ Âú®ÁõÆÊ†áÂØπË±°‰∏≠Ëé∑ÂèñÂåÖÂêçÊù•Âå∫ÂàÜ‰∏çÂêåÁöÑÊï∞ÊçÆÊ∫ê„ÄÇ Ê†πÊçÆ‰∏çÂêåÊï∞ÊçÆÊ∫êÊù•ËøõË°åËµãÂÄº„ÄÇ ÊâßË°åÂÆåÊØï‰πãÂêéÂ∞ÜÊï∞ÊçÆÊ∫êÊ∏ÖÁ©∫„ÄÇ ÂÖ≥‰∫é‰∏Ä‰∫õJoinPointÁöÑAPIÔºö1234567891011121314package org.aspectj.lang;import org.aspectj.lang.reflect.SourceLocation;public interface JoinPoint &#123; String toString(); //ËøûÊé•ÁÇπÊâÄÂú®‰ΩçÁΩÆÁöÑÁõ∏ÂÖ≥‰ø°ÊÅØ String toShortString(); //ËøûÊé•ÁÇπÊâÄÂú®‰ΩçÁΩÆÁöÑÁÆÄÁü≠Áõ∏ÂÖ≥‰ø°ÊÅØ String toLongString(); //ËøûÊé•ÁÇπÊâÄÂú®‰ΩçÁΩÆÁöÑÂÖ®ÈÉ®Áõ∏ÂÖ≥‰ø°ÊÅØ Object getThis(); //ËøîÂõûAOP‰ª£ÁêÜÂØπË±° Object getTarget(); //ËøîÂõûÁõÆÊ†áÂØπË±° Object[] getArgs(); //ËøîÂõûË¢´ÈÄöÁü•ÊñπÊ≥ïÂèÇÊï∞ÂàóË°® Signature getSignature(); //ËøîÂõûÂΩìÂâçËøûÊé•ÁÇπÁ≠æÂêç SourceLocation getSourceLocation();//ËøîÂõûËøûÊé•ÁÇπÊñπÊ≥ïÊâÄÂú®Á±ªÊñá‰ª∂‰∏≠ÁöÑ‰ΩçÁΩÆ String getKind(); //ËøûÊé•ÁÇπÁ±ªÂûã StaticPart getStaticPart(); //ËøîÂõûËøûÊé•ÁÇπÈùôÊÄÅÈÉ®ÂàÜ&#125; ‰∏∫‰∫ÜÈÄöËøáÂåÖÂêçÊù•Âå∫ÂàÜ‰∏çÂêåÊï∞ÊçÆÊ∫êÔºåÊàëÂ∞ÜÁõÆÂΩïÁªìÊûÑÁ®çÂæÆË∞ÉÊï¥‰∫Ü‰∏ãÔºö Â∞Ü‰∏§‰∏™‰∏çÂêåÁöÑÊï∞ÊçÆÊ∫êÁöÑÂÆûÁé∞Á±ªÊîæÂà∞‰∏çÂêåÁöÑÂåÖ‰∏≠ÔºåËøôÊ†∑‰ªäÂêéÂ¶ÇÊûúËøòÈúÄË¶ÅÊñ∞Â¢ûÂÖ∂‰ªñÊï∞ÊçÆÊ∫ê‰πüÂèØ‰ª•ÁÅµÊ¥ªÁöÑÂàáÊç¢„ÄÇ Áúã‰∏ãSpringÁöÑÈÖçÁΩÆÔºö123456789101112131415161718192021&lt;bean id="dataSourceExchange" class="com.crossoverJie.util.DataSourceExchange"/&gt;&lt;!--ÈÖçÁΩÆÂàáÈù¢Êã¶Êà™ÊñπÊ≥ï --&gt;&lt;aop:config proxy-target-class="false"&gt; &lt;!--Â∞Ücom.crossoverJie.serviceÂåÖ‰∏ãÁöÑÊâÄÊúâselectÂºÄÂ§¥ÁöÑÊñπÊ≥ïÂä†ÂÖ•Êã¶Êà™ ÂéªÊéâselectÂàôÂä†ÂÖ•ÊâÄÊúâÊñπÊ≥ï --&gt; &lt;aop:pointcut id="controllerMethodPointcut" expression=" execution(* com.crossoverJie.service.*.select*(..))"/&gt; &lt;aop:pointcut id="selectMethodPointcut" expression=" execution(* com.crossoverJie.dao..*Mapper.select*(..))"/&gt; &lt;aop:advisor advice-ref="methodCacheInterceptor" pointcut-ref="controllerMethodPointcut"/&gt; &lt;!--ÊâÄÊúâÊï∞ÊçÆÂ∫ìÊìç‰ΩúÁöÑÊñπÊ≥ïÂä†ÂÖ•ÂàáÈù¢--&gt; &lt;aop:aspect ref="dataSourceExchange"&gt; &lt;aop:pointcut id="dataSourcePointcut" expression="execution(* com.crossoverJie.service.*.*(..))"/&gt; &lt;aop:before pointcut-ref="dataSourcePointcut" method="before"/&gt; &lt;aop:after pointcut-ref="dataSourcePointcut" method="after"/&gt; &lt;/aop:aspect&gt;&lt;/aop:config&gt; ËøôÊòØÂú®Êàë‰ª¨‰∏ä‰∏ÄÁØáÊï¥ÂêàredisÁºìÂ≠òÁöÑÂü∫Á°Ä‰∏äËøõË°å‰øÆÊîπÁöÑ„ÄÇËøôÊ†∑ÁºìÂ≠òÂíåÂ§öÊï∞ÊçÆÊ∫êÈÉΩÊª°Ë∂≥‰∫Ü„ÄÇ ÂÆûÈôÖ‰ΩøÁî®Ôºö12345@Testpublic void selectByPrimaryKey() throws Exception &#123; Rediscontent rediscontent = rediscontentService.selectByPrimaryKey(30); System.out.println(JSON.toJSONString(rediscontent));&#125; ËøôÊ†∑ÁúãËµ∑Êù•Â∞±Âíå‰ΩøÁî®‰∏Ä‰∏™Êï∞ÊçÆÊ∫êËøôÊ†∑ÁÆÄÂçïÔºåÂÜç‰πü‰∏çÁî®ÂÖ≥ÂøÉÂàáÊç¢ÁöÑÈóÆÈ¢ò‰∫Ü„ÄÇ ÊÄªÁªì‰∏çËøáÊåâÁÖßËøôÊ†∑ÁöÑÂÜôÊ≥ïÊòØÊó†Ê≥ïÂÅöÂà∞Âú®‰∏Ä‰∏™‰∫ãÂä°ÈáåÊéßÂà∂‰∏§‰∏™Êï∞ÊçÆÊ∫êÁöÑ„ÄÇËøô‰∏™ÊàëËøòÂú®Â≠¶‰π†‰∏≠ÔºåÊúâÁõ∏ÂÖ≥ÁªèÈ™åÁöÑÂ§ßÁâõ‰∏çÂ¶®ÊåáÁÇπ‰∏Ä‰∏ã„ÄÇ È°πÁõÆÂú∞ÂùÄÔºöhttps://github.com/crossoverJie/SSM.git ‰∏™‰∫∫ÂçöÂÆ¢Âú∞ÂùÄÔºöhttp://crossoverjie.top„ÄÇ GitHubÂú∞ÂùÄÔºöhttps://github.com/crossoverJie„ÄÇ]]></content>
      <categories>
        <category>SSM</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>AOP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GoodBye 2016,Welcome 2017 | Á†ÅÂÜúÁ†åÂ¢ôËÆ∞]]></title>
    <url>%2F2016%2F12%2F31%2FGoodBye%202016%2CWelcome%202017%20%7C%20%E7%A0%81%E5%86%9C%E7%A0%8C%E5%A2%99%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[ÂâçË®Ä Êó©Âú®Ëøô‰∏™ÊúàÂàùÁöÑÊó∂ÂÄôÊàëÂ∞±ÂæàÊÉ≥ÂÜô‰∏ÄÁØáÂπ¥ÁªàÊÄªÁªì‰∫ÜÔºåÂõ†‰∏∫Ëøô‰∏ÄÂπ¥Áõ∏ÂØπ‰∫éÂéªÂπ¥Á°ÆÂÆûÊòØÁªèÂéÜÁöÑÂ§™Â§ö‰∫Ü„ÄÇÁªìÊûú‰∏ÄÁõ¥Á≠âÂà∞31Âè∑ÔºåÂú®ÂÆ∂ÈáåÂíåÂ™≥Â¶áÂêÉÂÆåÊôöÈ•≠Â∞±È©¨‰∏äÊâìÂºÄÁîµËÑëÂºÄÁ†Å„ÄÇ ‰∫îÊúà‰∫åÂçÅ‰∏â-Á¨¨‰∏ÄÊ¨°Ë∑≥ÊßΩ Ê†πÊçÆÊï¥Âπ¥ÁöÑÊó∂Èó¥Á∫øÂºÄÂßãÁ¨¨‰∏Ä‰ª∂Â§ß‰∫ãËá™ÁÑ∂Â∞±ÊòØÊç¢ÂÖ¨Âè∏‰∫Ü„ÄÇ ÂÖàÊù•ÁÇπÂâçÊôØÊèêË¶Å:ÊàëÊòØ14Âπ¥11Êúà‰ªΩÂèÇÂä†Â∑•‰ΩúÁöÑ„ÄÇÂΩìÊó∂ÂÖ∂ÂÆûËøòÊ≤°ÊúâÊØï‰∏öÂ∞±Âú®‰∏ÄÂÆ∂ÁªôÂ§ßÂûã‰ºÅ‰∏öÂÅöÂÆöÂà∂ËΩØ‰ª∂ÂºÄÂèëÁöÑÂÖ¨Âè∏ÂÆû‰π†„ÄÇÂàöÂºÄÂßãÂ∑•‰ΩúÁöÑÊó∂ÂÄô‰ªÄ‰πà‰∫ãÊÉÖÈÉΩËßâÂæóÈùûÂ∏∏Êñ∞Â•áÔºå‰∏Ä‰∏™Âú®Â≠¶Ê†°Â≠¶ÁöÑ‰∏úË•øËÉΩËøêÁî®Âà∞ÂÆûÈôÖÂºÄÂèë‰∏≠Âπ∂ËÉΩÁªôÁî®Êà∑Â∏¶Êù•‰æøÂà©ËÆ©ÊàëËßâÂæóÂÅöÁ†ÅÂÜúÁúüÊòØ‰∏Ä‰ª∂ÈùûÂ∏∏Ê≠£Á°ÆÁöÑÈÄâÊã©Âïä(psÂΩìÊó∂ÁúüÊòØÂ§™Âπ¥ËΩª)„ÄÇ ÂêéÊù•ÁúüÊòØÈÄ†ÂåñÂºÑ‰∫∫ÔºåÂΩìÊó∂Ë¥üË¥£ÊàëÂèÇ‰∏éÁöÑËøô‰∏™È°πÁõÆÁöÑË¥üË¥£‰∫∫Ë∑≥ÊßΩ‰∫ÜÔºåÊàëËá™ÁÑ∂Â∞±Êàê‰∫ÜÊï¥‰∏™ÂÖ¨Âè∏ÊúÄÁÜüÊÇâÊ≠§È°πÁõÆÁöÑ‰∫∫‰∫Ü„ÄÇÁé∞Âú®‰∏çÂæó‰∏ç‰Ω©ÊúçÂÖ¨Âè∏ËÄÅÊùøÁúüÊòØÂøÉÂ§ßÂïäÔºåÂ±ÖÁÑ∂ËÆ©‰∏Ä‰∏™ÂÆû‰π†ÁîüÊù•Ë¥üË¥£Ëøô‰∏™È°πÁõÆ„ÄÇÂ∞±ËøôÊ†∑ÊàëÊàê‰∫ÜÊï¥‰∏™È°πÁõÆÁöÑË¥üË¥£‰∫∫Ôºå‰ªé‰πãÂêéÁöÑÂºÄÂèëÂà∞ÊµãËØïÂà∞‰∏äÁ∫øÂà∞ÂêéÈù¢ÁöÑÁª¥Êä§Âá†‰πéÈÉΩÊòØÊàë‰∏Ä‰∏™‰∫∫Âú®Ë¥üË¥£„ÄÇÊù•‰∏ÄÂº†ÂΩìÊó∂‰∏äÁ∫øÁöÑÊà™ÂõæÔºö Áî±‰∫éËøôÊ¨°È°πÁõÆÁöÑÈ°∫Âà©È™åÊî∂ÔºåÂÖ¨Âè∏‰πüÂØπÊàëË∂äÊù•Ë∂ä‰ø°‰ªª„ÄÇ‰πãÂêé‰πüÂ∞±ÁêÜÊâÄÂΩìÁÑ∂ÁöÑÂèàË¥üË¥£‰∫ÜÂá†‰∏™È°πÁõÆ„ÄÇ ËôΩÁÑ∂Á¶ªÂºÄ‰∫Ü‰ΩÜÁúüÁöÑÈùûÂ∏∏ÊÑüË∞¢ÂÖ¨Âè∏ÂΩìÊó∂ÂØπ‰∏Ä‰∏™‰ªÄ‰πàÈÉΩ‰∏çÊáÇÁöÑÊñ∞‰∫∫Áªô‰∫à‰ø°‰ªª„ÄÇ ‰πãÂêéÈöèÁùÄÊäÄÊúØÁöÑÊèêÂçáÊàëÊé•Ëß¶‰∫Ügithub„ÄÅvÁ´ôËøôÊ†∑ÁöÑÊäÄÊúØËÆ∫ÂùõÔºåÈÄêÊ∏êÁöÑÂèëÁé∞Â§©Â§ñÊúâÂ§©ÔºåÊàëËøôÁÇπÈõïËô´Â∞èÊäÄÁúüÁöÑÂÆåÂÖ®‰∏çÁÆó‰ªÄ‰πàÔºåÁúüÊ≠£Êú∫ÈÅá‰∏éÊåëÊàòÂπ∂Â≠òÁöÑÂú∞ÊñπÊòØ‰∫íËÅîÁΩë„ÄÇ ‰ΩÜÊòØÊ≠§Êó∂ÊàëÂ∑≤ÁªèÂú®ËøôÂÆ∂ÂÖ¨Âè∏ÂÅö‰∫Ü‰∏ÄÂπ¥Â§ö‰∫ÜÔºåÁ™ÅÁÑ∂Á¶ªÂºÄËøô‰∏™ËàíÈÄÇÂúàÊù•Âà∞‰∏Ä‰∏™ÈôåÁîüÁöÑÁéØÂ¢ÉÊòØÈúÄË¶ÅÂæàÂ§ßÂãáÊ∞îÁöÑÔºåÊàñËÄÖËØ¥ÈúÄË¶Å‰∏Ä‰∏™Âà∫ÊøÄÁÇπ„ÄÇ Ê≠£Â•Ω@ÂòüÁà∑Êàê‰∫ÜËøô‰∏™ÂØºÁÅ´Á¥¢„ÄÇÈÇ£‰∏™Êó∂ÂÄôÊàëÊ≠£Âú®Êê≠ÊàëÁöÑ‰∏™‰∫∫ÂçöÂÆ¢Ê≠£Â•ΩÁúãÂà∞‰∫Ü‰ªñÁöÑÊñáÁ´†ÔºåËßâÂæóÂÜôÂæóÈùûÂ∏∏Â•Ω„ÄÇËÄå‰∏îÊ≠£Â•Ω‰ªñ‰πüÊ≠£ÂáÜÂ§áËΩ¨Âêë‰∫íËÅîÁΩëÔºå‰∫éÊòØÊàëÁªô‰ªñÂÜô‰∫Ü‰∏ÄÂ∞ÅÂæàÈïøÁöÑÈÇÆ‰ª∂ËØ¥‰∫ÜÊàëÂøÉ‰∏≠ÁöÑ‰∏Ä‰∫õÁñëÊÉë‰∏éÈ°æËôëËÆ©‰ªñÁªôÁÇπÂª∫ËÆÆ„ÄÇ Âú®‰ªñÁöÑÂª∫ËÆÆ‰πã‰∏ãÊàëÊâçÂºÄÂßãÊäïÈÄíÁÆÄÂéÜÂáÜÂ§áÊç¢‰∏ÄÂÆ∂‰∫íËÅîÁΩëÂÖ¨Âè∏ÔºåÊÑüË∞¢ÂòüÁà∑Áªô‰∫ÜÊàë‰∏Ä‰∏™Ëøô‰πàÊ≠£Á°ÆÁöÑÂª∫ËÆÆ„ÄÇ ‰πãÂêéÊàëÈ°∫Âà©ÁöÑËøõÂÖ•‰∫Ü‰∏Ä‰∏™Âàõ‰∏öÂÖ¨Âè∏ÔºåÂºÄÂßã‰∫ÜÁã≠‰πâÁöÑ‰∫íËÅîÁΩëÂºÄÂèëÈÅìË∑ØÔºå‰∏∫‰ªÄ‰πàÊòØÁã≠‰πâËØ∑Êé•ÁùÄÂæÄÂêéÁúã„ÄÇ Êê≠Âª∫‰∏™‰∫∫ÂçöÂÆ¢ Êê≠Âª∫ÂçöÂÆ¢Ëøô‰∫ã‰πüÊòØÂøÖÈ°ªÁöÑÊãøÂá∫Êù•ËØ¥‰∏ÄËØ¥ÁöÑ„ÄÇ ‰∏äÈù¢ËØ¥Âà∞ÊàëÁúã‰∫ÜÂòüÁà∑ÁöÑÂçöÂÆ¢ÊâçÂºÄÂßãÊê≠Âª∫Ëá™Â∑±ÁöÑÂçöÂÆ¢ÔºåÂà∞Áé∞Âú®‰∏∫Ê≠¢Áî±‰∫éÊàëÁöÑÊãñÂª∂Áóá(Âä†‰∏äÊòØÁúüÁöÑÊáí)‰∏ÄÂÖ±ÂÜô‰∫Ü20ÁØá„ÄÇ‰∏çËÉΩËØ¥ÂÜôÁöÑÊúâÂ§öÂ•ΩÔºå‰ΩÜÁ°ÆÂÆûÊòØÊàëÂú®Â∑•‰ΩúÂíåÂ≠¶‰π†‰∏≠ÁöÑ‰∏Ä‰∫õÊÄªÁªì„ÄÇ ËÆ©ÊàëÊÑèÂ§ñÁöÑÊòØÊàëÂçöÂÆ¢ÁöÑËÆøÈóÆÈáèÔºå‰∏ãÂõæÊòØÊàëcnzzÁöÑÁªüËÆ°Êà™ÂõæÔºö ÂÖ≠Êúà‰∫åÂçÅ‰∏Ä-ÂºÄÊ∫êÈ°πÁõÆÂÖ≥‰∫éÂºÄÊ∫êÈ°πÁõÆÔºå‰πãÂâçÊàëÂú®github‰∏äÈù¢ÁúãÂæàÂ§ö‰ºòÁßÄÁöÑÂºÄÊ∫êÈ°πÁõÆÔºå‰πüÂæà‰Ω©ÊúçÈÇ£‰∫õ‰ΩúËÄÖÔºå‰∫éÊòØÂ∞±ÊÉ≥ÁùÄËá™Â∑±ËÉΩ‰∏çËÉΩ‰πüÊêû‰∏Ä‰∏™Ôºå‰ΩÜÊòØ‰∏ÄÊù•Â∞±ÈÄ†‰∏™ËΩÆÂ≠êÂØπÊàëÊù•ËØ¥Á°ÆÂÆûÊúâÁÇπ‰∏çÁé∞ÂÆû„ÄÇ ‰∫éÊòØÊàëÊç¢‰∫Ü‰∏Ä‰∏™ÊÄùË∑ØÔºåÁî±‰∫éÁé∞Âú®ÊàëÂãâÂº∫‰πü‰∏çÁÆóÊòØÊñ∞ÂÖ•Èó®ÁöÑËèúÈ∏ü‰∫ÜÔºå‰ΩÜÊàëÊòØ‰ªéËèúÈ∏üËøáÊù•ÁöÑÔºåÊ∑±Áü•ÂàöÂºÄÂßãÁöÑÊó∂ÂÄôÊâæËµÑÊñôÁöÑÁóõËã¶„ÄÇ‰∏çÊòØËµÑÊñôÂ§™ËÄÅÂ∞±ÊòØÊ≤°Êúâ‰ΩìÁ≥ªÔºåËÆ≤‰∏ÄÁÇπÊòØ‰∏ÄÁÇπÁöÑÈÇ£Áßç„ÄÇ ‰∫éÊòØÂ∞±Êúâ‰∫ÜÁé∞Âú®Ëøô‰∏™È°πÁõÆ:‰ºö‰∏çÂÆöÊúüÊõ¥Êñ∞‰∏Ä‰∫õÂú®ÂÆûÈôÖÂºÄÂèë‰∏≠‰ΩøÁî®ÁöÑÊäÄÂ∑ß(ps:ÁõÆÂâç‰∏çÊòØÂæàÂøôÂü∫Êú¨‰∏ä‰∏ÄÂë®‰∏ÄÊõ¥)„ÄÇ Ê≤°ÊúâÂ§çÊùÇÁöÑ‰∏öÂä°ÊµÅÁ®ãÔºåÊõ¥‰∏çÊòØXXXXÁ≥ªÁªüÔºåÂè™Êúâ‰∏Ä‰∫õÊäÄÊúØÁöÑÂàÜ‰∫´„ÄÇ ‰ªéÂÖ≠Êúà‰∫åÂçÅ‰∏ÄÂè∑Âà∞Áé∞Âú®ËøòÊòØÊúâ100Â§öÈ¢óÊòü‰∫ÜÔºö ‰πùÊúà‰∫åÂçÅ‰∏â-Á¨¨‰∫åÊ¨°Ë∑≥ÊßΩÁúãÂà∞ËøôÈáåÊòØ‰∏çÊòØËßâÂæóÊàëÊúâÁóÖÂïäÔºåÊÄé‰πàÂèàÊòØË∑≥ÊßΩ„ÄÇ„ÄÇ„ÄÇ ÂÖ∂ÂÆûÊàë‰πü‰∏çÊÉ≥ÔºåÊàëÂú®‰∏äÈù¢ËØ¥Âà∞ÂºÄÂßã‰∫ÜÊàëÁöÑÁã≠‰πâ‰∫íËÅîÁΩëÂºÄÂèëÔºå‰∏∫‰ªÄ‰πàÊòØÁã≠‰πâÂë¢Ôºü Âõ†‰∏∫ÂÅö‰∫Ü‰∏ÄÊÆµÊó∂Èó¥ÊâçÂèëÁé∞Ëøô‰∏™È°πÁõÆÈô§‰∫ÜÊòØÈÉ®ÁΩ≤Âú®‰∫ëÊúçÂä°Âô®‰∏äÂíåÊúâ‰∏Ä‰∏™ÂæÆ‰ø°Á´Ø‰πãÂ§ñÂíåÊàë‰πãÂâçÊâÄÂÅöÁöÑÈ°πÁõÆË≤å‰ººÊ≤°ÊúâÊú¨Ë¥®‰∏äÁöÑÂå∫Âà´ÔºåËøòÊòØ‰∏Ä‰∏™ÁÆ°ÁêÜÁ≥ªÁªü„ÄÇ ËøôÈáåÊàë‰∏çËØÑ‰ª∑ÂÖ¨Âè∏ÁöÑ‰∏öÂä°Ôºå‰ΩÜÊòØÂÖ¨Âè∏ÁöÑÊäÄÊúØÊÄªÁõëÂú®‰øÆÊîπÈóÆÈ¢òÁöÑÊó∂ÂÄôÊòØÁõ¥Êé•Âú®‰∫ëÊúçÂä°Âô®‰∏äÁôªÈôÜÊï∞ÊçÆÂ∫ìÂà†Èô§Êï∞ÊçÆÔºå‰ºö‰∏ç‰ºöËßâÂæóÂæàÂ•áËë©„ÄÇÊúÄÂ•áËë©ÁöÑÊòØÂà†Èô§ÁöÑÊó∂ÂÄôÂøò‰∫ÜÂÜôwhereÊù°‰ª∂ÂØºËá¥ÊääÊï¥Âº†Ë°®ÁöÑÊï∞ÊçÆÈÉΩÂà†‰∫ÜÔºåËøô‰∏™Êó∂ÂÄôÂ¶ÇÊûúÊòØ‰Ω†‰Ω†‰ºö‰∏ç‰ºöÊÄÄÁñëÈÇ£Âï•„ÄÇ„ÄÇ Èô§Ê≠§‰πãÂ§ñÊäÄÊúØÊÄªÁõëÊú¨‰∫∫ËøòÊòØÊå∫Â•ΩÁöÑÔºå‰∏çËøáÊàëÊõ¥ËßâÂæó‰ªñÈÄÇÂêàÂÅöÈîÄÂîÆÊÄªÁõë„ÄÇ Âä†‰∏äÂêéÊù•ÂÖ¨Âè∏ÁöÑ‰∏öÂä°Ê≤°ÊúâÂèëÂ±ïËµ∑Êù•ÔºåÊâÄÂÅöÁöÑÁ≥ªÁªüÂèàËÄÅÊòØÂá∫ÈóÆÈ¢ò(ËÅîÊÉ≥‰∏äÊñá)ÔºåÂä†‰∏äËøòÂú®ÊµÅ‰º†Êàë‰ª¨ÊäÄÊúØÈÉ®Ë¶ÅË£Å‰∫∫„ÄÇÈÇ£ÊàëËøò‰∏çÂ¶ÇËá™Â∑±Ëµ∞(Áé∞Âú®VÁ´ôÈÄõÂ§ö‰∫ÜÁ™ÅÁÑ∂ËßâÂæóÂ•Ω‰∫è)„ÄÇ ‰∫éÊòØÊàëÂºÄÂßã‰∫ÜÊàëÁöÑÁ¨¨‰∫åÊ¨°Ë∑≥ÊßΩÔºåÂâçÂêéÊó∂Èó¥ÊâçÈó¥Èöî4‰∏™ÊúàÔºå‰∏çÂæó‰∏çÊÑüÊÖ®ÂëΩËøêÂºÑ‰∫∫Âïä„ÄÇ ‰πãÂêéÊàëÊù•Âà∞Áé∞Âú®ËøôÂÆ∂ÂëòÂ∑•5000‰Ωô‰∫∫ÁöÑÁúüÊ≠£ÁöÑ‰∫íËÅîÁΩëÂÖ¨Âè∏ÔºåÂºÄÂßã‰∫ÜÁúüÊ≠£ÊÑè‰πâÁöÑ‰∫íËÅîÁΩëÂºÄÂèë„ÄÇËøôÈáåÂøÖÈ°ªÂæóÊÑüË∞¢ÊàëÁöÑÈù¢ËØïÂÆò‰πüÊòØÊàëÁé∞Âú®Ëøô‰∏™È°πÁõÆÁöÑleaderÔºåÁªô‰∫ÜÊàëËøô‰∏™‰∫íËÅîÁΩëËèúÈ∏üÊú∫‰ºö„ÄÇ ‰∏çËøáÂëΩËøêÊÄªÊòØÂ¶ÇÊ≠§ÁöÑÁõ∏ËØÜÔºåÊòéÂπ¥‰πüÂ∞±ÊòØ‰∏ãÂë®‰ªñÂ∞±Êç¢ÈÉ®Èó®‰∫ÜÔºåÊÑèÂë≥ÁùÄÁé∞Âú®Ëøô‰∏™È°πÁõÆÊàëÂèàÊàêË¥üË¥£‰∫∫‰∫Ü„ÄÇÂ∏åÊúõ‰∏ÄÂàáÈ°∫Âà©Âêß„ÄÇ ÊäÄÊúØÁõ∏ÂÖ≥ÂâçÈù¢ËØ¥Âà∞ÊàëÊòØ‰πùÊúà‰ªΩÁöÑÊó∂ÂÄôÊâçËøõÂÖ•ËøôÂÆ∂Ê≠£ÁúüÊÑè‰πâÁöÑ‰∫íËÅîÁΩëÂÖ¨Âè∏ÁöÑÔºåÊâÄ‰ª•‰ΩìÊúØÊèêÂçáÊúÄÊòéÊòæ‰πüÊòØÂú®ËøôÊÆµÊó∂Èó¥„ÄÇ ËøôÊÆµÊó∂Èó¥ÊâÄÂ≠¶ÁöÑËµ∑Á†ÅÊòØÊàëÂú®ÂâçÈù¢‰∏§ÂÆ∂ÂÖ¨Âè∏‰∏ÄÂπ¥ÈÉΩÂ≠¶‰∏çÂà∞ÁöÑÔºåËøôÈáåÊàëÂ§ßËá¥Âàó‰∫Ü‰∏Ä‰∏ãÔºö ÁÜüÊÇâ‰∫Ü‰∏Ä‰∏™‰∫íËÅîÁΩë‰∫ßÂìÅÁöÑÁîüÂëΩÂë®Êúü(ÂÖ≥‰∫éÂºÄÂèë„ÄÅÊµãËØï„ÄÅÈ¢ÑÂèëÂ∏É„ÄÅÁÅ∞Â∫¶‰ª•Âèä‰∏äÁ∫ø) ÁÜüÊÇâ‰∫Ü‰∏Ä‰∫õÂÖ≥‰∫éÂπ∂Âèë„ÄÅ‰∏ª‰ªé„ÄÅÁºìÂ≠ò„ÄÅË∞ÉÂ∫¶„ÄÅÂÆπÂô®Ëøô‰∫õ‰∏ªÊµÅÁöÑÊäÄÊúØ„ÄÇ ÊúÄÈáçË¶ÅÁöÑ‰∏ÄÁÇπÔºåÂ≠¶‰ºö‰∫Ü‰∏çÂä†Áè≠‰∏çËàíÊúçÊñØÂü∫„ÄÇ Ë∫´‰ΩìÁõ∏ÂÖ≥‰∏çÁü•ÊòØÈîôËßâËøòÊòØ‰ªÄ‰πàÔºåÊÑüËßâ‰ªäÂπ¥ÁúãÂà∞ITË°å‰∏öÁåùÊ≠ªÊàñËÄÖÊòØÂá∫‰∫ãÁöÑÊñ∞ÈóªË∂äÊù•Ë∂äÂ§öÔºåÂä†‰∏äÊàëËøô‰∏™‰ªäÂπ¥Êâç22Â≤ÅÁöÑÈùíÂπ¥ÊúâÊó∂ÂÄô‰πü‰ºöËÖ∞ÁñºËÑñÂ≠êÈÖ∏ÔºåÂØºËá¥ÊàëÂØπ‰∫éË∫´‰Ωì‰πüÊòØË∂äÊù•Ë∂äÊãÖÂøß„ÄÇ ÂÖ∂ÂÆûÊàë‰ªéÂàù‰∏≠ÁöÑÊó∂ÂÄôÂ∞±ÂºÄÂßãÊâìÁØÆÁêÉÔºåÂú®Â∑•‰Ωú‰πãÂâç‰πüÊòØÂØπÁØÆÁêÉÂÆåÂÖ®ÊòØÁó¥Ëø∑ÁöÑÁä∂ÊÄÅÔºåÊØèÂ§©‰∏çÊâìÁêÉÂ∞±ÊµëË∫´ÈöæÂèó„ÄÇÂàöÂ∑•‰ΩúÁöÑÈÇ£ÊÆµÊó∂Èó¥ËøòËÉΩÂùöÊåÅÊØèÂë®Êú´ÂéªÊâìÁêÉÔºå‰ΩÜÊòØ‰ªäÂπ¥ËÉΩÂÅöÂà∞‰∏Ä‰∏™ÊúàÊâì‰∏ÄÊ¨°ÈÉΩÈùûÂ∏∏ÈöæÂæó‰∫Ü„ÄÇ„ÄÇ ÂÜçÊ≠§ÔºåÊàëÁ´ã‰∏™flagÔºåÊòéÂ§©‰∏ãÂçàÂá∫ÂéªÊâìÁêÉÔºåÊòéÂπ¥ÂùöÊåÅËá≥Â∞ëÊØè‰∏§Âë®Êâì‰∏ÄÊ¨°ÁêÉ„ÄÇ 2017Â∞èÁõÆÊ†áÂà∞ËøôÈáå‰πüÂü∫Êú¨‰∏äÊÄªÁªìÁöÑÂ∑Æ‰∏çÂ§ö‰∫ÜÔºåËøòÊúâÂçä‰∏™Â∞èÊó∂Â∞±ÊòØ17Âπ¥‰∫Ü„ÄÇ ËøòÊòØÂÆö‰∏Ä‰∏™17Âπ¥ÁöÑÂ∞èÁõÆÊ†áÂêßÔºö ÂçöÂÆ¢ÂùöÊåÅÂÜôÔºåËá≥Â∞ë‰øùÊåÅ‰∏§Âë®‰∏ÄÊõ¥„ÄÇ ÂºÄÊ∫êÈ°πÁõÆÂùöÊåÅÁª¥Êä§Ôºå‰∫âÂèñÈÄ†‰∏Ä‰∏™ËΩÆÂ≠êÂá∫Êù•„ÄÇ ÂùöÊåÅÈîªÁÇºÔºåÊàëËøòÂæóÂÖªÂÆ∂Á≥äÂè£„ÄÇ ÊúÄÂêéÂ∏åÊúõÂÆ∂‰∫∫ÊúãÂèãÈÉΩÂπ≥Âπ≥ÂÆâÂÆâ„ÄÇ]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>ÊÄªÁªì</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SSM(‰∏É)Âú®JavaWebÂ∫îÁî®‰∏≠‰ΩøÁî®Redis]]></title>
    <url>%2F2016%2F12%2F18%2FSSM7%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄÁî±‰∫éÊúÄËøëÊç¢(mang)‰∫Ü(de)ÂÆ∂(yi)ÂÖ¨(bi)Âè∏Êé•Ëß¶‰∫ÜÊñ∞ÁöÑ‰∏úË•øÊâÄ‰ª•Âæà‰πÖÊ≤°ÊúâÊõ¥Êñ∞‰∫Ü„ÄÇËøôÊ¨°Ë∞àË∞àRedisÔºåÂÖ≥‰∫éRedisÂ∫îËØ•ÂæàÂ§öÊúãÂèãÂ∞±ÁÆóÊ≤°ÊúâÁî®Ëøá‰πüÂê¨ËøáÔºåÁÆóÊòØËøôÂá†Âπ¥ÊúÄÊµÅË°åÁöÑNoSql‰πã‰∏Ä‰∫Ü„ÄÇRedisÁöÑÂ∫îÁî®Âú∫ÊôØÈùûÂ∏∏Â§öËøôÈáåÂ∞±‰∏ç‰∏Ä‰∏ÄÂàó‰∏æ‰∫ÜÔºåËøôÊ¨°Â∞±‰ª•‰∏Ä‰∏™ÊúÄÁÆÄÂçïÁöÑ‰πüÊúÄÂ∏∏Áî®ÁöÑ ÁºìÂ≠òÊï∞ÊçÆ Êù•‰∏æ‰æã„ÄÇÂÖàÊù•Áúã‰∏ÄÂº†ÊïàÊûúÂõæÔºö ‰ΩúÁî®Â∞±ÊòØÂú®ÊØèÊ¨°Êü•ËØ¢Êé•Âè£ÁöÑÊó∂ÂÄôÈ¶ñÂÖàÂà§Êñ≠Redis‰∏≠ÊòØÂê¶ÊúâÁºìÂ≠òÔºåÊúâÁöÑËØùÂ∞±ËØªÂèñÔºåÊ≤°ÊúâÂ∞±Êü•ËØ¢Êï∞ÊçÆÂ∫ìÂπ∂‰øùÂ≠òÂà∞Redis‰∏≠Ôºå‰∏ãÊ¨°ÂÜçÊü•ËØ¢ÁöÑËØùÂ∞±‰ºöÁõ¥Êé•‰ªéÁºìÂ≠ò‰∏≠ËØªÂèñ‰∫Ü„ÄÇRedis‰∏≠ÁöÑÁªìÊûúÔºö‰πãÂêéÊü•ËØ¢redisÂèëÁé∞Á°ÆÂÆûÊòØÂ≠òËøõÊù•‰∫Ü„ÄÇ RedisÂÆâË£Ö‰∏é‰ΩøÁî®È¶ñÂÖàÁ¨¨‰∏ÄÊ≠•Ëá™ÁÑ∂ÊòØÂÆâË£ÖRedis„ÄÇÊàëÊòØÂú®ÊàëVPS‰∏äËøõË°åÂÆâË£ÖÁöÑÔºåÊìç‰ΩúÁ≥ªÁªüÊòØCentOS6.5„ÄÇ ‰∏ãËΩΩRedishttps://redis.io/downloadÔºåÊàëÊú∫Âô®‰∏äÂÆâË£ÖÁöÑÊòØ3.2.5 Â∞Ü‰∏ãËΩΩ‰∏ãÊù•ÁöÑ‚Äôreidis-3.2.5-tar.gz‚Äô‰∏ä‰º†Âà∞usr/localËøô‰∏™ÁõÆÂΩïËøõË°åËß£Âéã„ÄÇ ËøõÂÖ•ËØ•ÁõÆÂΩï„ÄÇ ÁºñËØëÂÆâË£Ö 12makemake install ‰øÆÊîπredis.confÈÖçÁΩÆÊñá‰ª∂„ÄÇ ËøôÈáåÊàëÂè™ÊòØÁÆÄÂçïÁöÑÂä†‰∏äÂØÜÁ†ÅËÄåÂ∑≤„ÄÇ12vi redis.confrequirepass ‰Ω†ÁöÑÂØÜÁ†Å ÂêØÂä®Redis ÂêØÂä®Êó∂ÂÄôË¶ÅÈÄâÊã©Êàë‰ª¨‰πãÂâç‰øÆÊîπÁöÑÈÖçÁΩÆÊñá‰ª∂ÊâçËÉΩ‰ΩøÈÖçÁΩÆÊñá‰ª∂ÁîüÊïà„ÄÇ1234ËøõÂÖ•srcÁõÆÂΩïcd /usr/local/redis-3.2.5/srcÂêØÂä®ÊúçÂä°./redis-server ../redis.conf ÁôªÈôÜredis1./redis-cli -a ‰Ω†ÁöÑÂØÜÁ†Å SpringÊï¥ÂêàRedisËøôÈáåÊàëÂ∞±Áõ¥Êé•ÂºÄÂßãÁî®SpringÊï¥ÂêàÊØïÁ´üÂú®ÂÆûÈôÖ‰ΩøÁî®‰∏≠ÈÉΩÊòØÂíåSpring‰∏ÄËµ∑‰ΩøÁî®ÁöÑ„ÄÇ ‰øÆÊîπSpringÈÖçÁΩÆÊñá‰ª∂Âä†ÂÖ•‰ª•‰∏ãÂÜÖÂÆπÔºö12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970&lt;!-- jedis ÈÖçÁΩÆ --&gt; &lt;bean id="poolConfig" class="redis.clients.jedis.JedisPoolConfig"&gt; &lt;property name="maxIdle" value="$&#123;redis.maxIdle&#125;"/&gt; &lt;property name="maxWaitMillis" value="$&#123;redis.maxWait&#125;"/&gt; &lt;property name="testOnBorrow" value="$&#123;redis.testOnBorrow&#125;"/&gt; &lt;/bean&gt; &lt;!-- redisÊúçÂä°Âô®‰∏≠ÂøÉ --&gt; &lt;bean id="connectionFactory" class="org.springframework.data.redis.connection.jedis.JedisConnectionFactory"&gt; &lt;property name="poolConfig" ref="poolConfig"/&gt; &lt;property name="port" value="$&#123;redis.port&#125;"/&gt; &lt;property name="hostName" value="$&#123;redis.host&#125;"/&gt; &lt;property name="password" value="$&#123;redis.password&#125;"/&gt; &lt;property name="timeout" value="$&#123;redis.timeout&#125;"&gt;&lt;/property&gt; &lt;/bean&gt; &lt;bean id="redisTemplate" class="org.springframework.data.redis.core.RedisTemplate"&gt; &lt;property name="connectionFactory" ref="connectionFactory"/&gt; &lt;property name="keySerializer"&gt; &lt;bean class="org.springframework.data.redis.serializer.StringRedisSerializer"/&gt; &lt;/property&gt; &lt;property name="valueSerializer"&gt; &lt;bean class="org.springframework.data.redis.serializer.JdkSerializationRedisSerializer"/&gt; &lt;/property&gt; &lt;/bean&gt; &lt;!-- cacheÈÖçÁΩÆ --&gt; &lt;bean id="methodCacheInterceptor" class="com.crossoverJie.intercept.MethodCacheInterceptor"&gt; &lt;property name="redisUtil" ref="redisUtil"/&gt; &lt;/bean&gt; &lt;bean id="redisUtil" class="com.crossoverJie.util.RedisUtil"&gt; &lt;property name="redisTemplate" ref="redisTemplate"/&gt; &lt;/bean&gt; &lt;!--ÈÖçÁΩÆÂàáÈù¢Êã¶Êà™ÊñπÊ≥ï --&gt; &lt;aop:config proxy-target-class="true"&gt; &lt;!--Â∞Ücom.crossoverJie.serviceÂåÖ‰∏ãÁöÑÊâÄÊúâselectÂºÄÂ§¥ÁöÑÊñπÊ≥ïÂä†ÂÖ•Êã¶Êà™ ÂéªÊéâselectÂàôÂä†ÂÖ•ÊâÄÊúâÊñπÊ≥ïw --&gt; &lt;aop:pointcut id="controllerMethodPointcut" expression=" execution(* com.crossoverJie.service.*.select*(..))"/&gt; &lt;aop:pointcut id="selectMethodPointcut" expression=" execution(* com.crossoverJie.dao..*Mapper.select*(..))"/&gt; &lt;aop:advisor advice-ref="methodCacheInterceptor" pointcut-ref="controllerMethodPointcut"/&gt; &lt;/aop:config&gt;``` Êõ¥Â§öÁöÑÈÖçÁΩÆÂèØ‰ª•Áõ¥Êé•Âú®Ê∫êÁ†ÅÈáåÈù¢Êü•ÁúãÔºö[https://github.com/crossoverJie/SSM/blob/master/src/main/resources/spring-mybatis.xml](https://github.com/crossoverJie/SSM/blob/master/src/main/resources/spring-mybatis.xml)„ÄÇ‰ª•‰∏äÈÉΩÂÜôÊúâÊ≥®ÈáäÔºå‰πüÈÉΩÊòØ‰∏Ä‰∫õÁÆÄÂçïÁöÑÈÖçÁΩÆÁõ∏‰ø°ÈÉΩËÉΩÁúãÊáÇ„ÄÇ‰∏ãÈù¢Êàë‰ºöÁùÄÈáçËØ¥‰∏ãÂ¶Ç‰ΩïÈÖçÁΩÆÁºìÂ≠òÁöÑ„ÄÇ# SpringÂàáÈù¢‰ΩøÁî®ÁºìÂ≠òSpringÁöÑ`AOP`ÁúüÊòØÊòØ‰∏Ä‰∏™Â•Ω‰∏úË•øÔºåËøò‰∏çÂ§™Ê∏ÖÊ•öÊòØ‰ªÄ‰πàÁöÑÂêåÂ≠¶Âª∫ËÆÆÂÖàËá™Ë°å`Google`‰∏ãÂêß„ÄÇÂú®‰∏ç‰ΩøÁî®ÂàáÈù¢ÁöÑÊó∂ÂÄôÂ¶ÇÊûúÊàë‰ª¨ÊÉ≥ÁªôÊüê‰∏™ÊñπÊ≥ïÂä†ÂÖ•ÁºìÂ≠òÁöÑËØùËÇØÂÆöÊòØÂú®ÊñπÊ≥ïËøîÂõû‰πãÂâçÂ∞±Ë¶ÅÂä†ÂÖ•Áõ∏Â∫îÁöÑÈÄªËæëÂà§Êñ≠ÔºåÂè™Êúâ‰∏Ä‰∏™ÊàñÂá†‰∏™ÂÄíËøòÂ•ΩÔºåÂ¶ÇÊûúÊúâÂá†ÂçÅ‰∏äÁôæ‰∏™ÁöÑËØùÈÇ£GG‰∫ÜÔºåËÄå‰∏îÁª¥Êä§Ëµ∑Êù•‰πüÁâπÂà´È∫ªÁÉ¶„ÄÇ&gt; Â•ΩÂú®SpringÁöÑAOPÂèØ‰ª•Â∏ÆÊàë‰ª¨Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò„ÄÇ&gt; ËøôÊ¨°Â∞±Âú®Êàë‰ª¨ÈúÄË¶ÅÂä†ÂÖ•ÁºìÂ≠òÊñπÊ≥ïÁöÑÂàáÈù¢Âä†ÂÖ•Ëøô‰∏™ÈÄªËæëÔºåÂπ∂‰∏îÂè™ÈúÄË¶Å‰∏Ä‰∏™ÈÖçÁΩÆÂç≥ÂèØÊêûÂÆöÔºåÂ∞±ÊòØ‰∏äÊñá‰∏≠ÊâÄÊèêÂà∞ÁöÑÈÖçÁΩÆÊñá‰ª∂ÔºåÂ¶Ç‰∏ãÔºö```xml &lt;!--ÈÖçÁΩÆÂàáÈù¢Êã¶Êà™ÊñπÊ≥ï --&gt; &lt;aop:config proxy-target-class="true"&gt; &lt;!--Â∞Ücom.crossoverJie.serviceÂåÖ‰∏ãÁöÑÊâÄÊúâselectÂºÄÂ§¥ÁöÑÊñπÊ≥ïÂä†ÂÖ•Êã¶Êà™ ÂéªÊéâselectÂàôÂä†ÂÖ•ÊâÄÊúâÊñπÊ≥ïw --&gt; &lt;aop:pointcut id="controllerMethodPointcut" expression=" execution(* com.crossoverJie.service.*.select*(..))"/&gt; &lt;aop:pointcut id="selectMethodPointcut" expression=" execution(* com.crossoverJie.dao..*Mapper.select*(..))"/&gt; &lt;aop:advisor advice-ref="methodCacheInterceptor" pointcut-ref="controllerMethodPointcut"/&gt; &lt;/aop:config&gt; ËøôÈáåÊàë‰ª¨‰ΩøÁî®Ë°®ËææÂºèexecution(* com.crossoverJie.service.*.select*(..))Êù•Êã¶Êà™service‰∏≠ÊâÄÊúâ‰ª•selectÂºÄÂ§¥ÁöÑÊñπÊ≥ï„ÄÇËøôÊ†∑Âè™Ë¶ÅÊàë‰ª¨Ë¶ÅÂ∞ÜÂä†ÂÖ•ÁöÑÁºìÂ≠òÁöÑÊñπÊ≥ï‰ª•selectÂëΩÂêçÂºÄÂ§¥ÁöÑËØùÊØèÊ¨°ËøõÂÖ•ÊñπÊ≥ï‰πãÂâçÈÉΩ‰ºöËøõÂÖ•Êàë‰ª¨Ëá™ÂÆö‰πâÁöÑMethodCacheInterceptorÊã¶Êà™Âô®„ÄÇËøôÈáåË¥¥‰∏Ä‰∏ãMethodCacheInterceptor‰∏≠Â§ÑÁêÜÈÄªËæëÁöÑÊ†∏ÂøÉÊñπÊ≥ïÔºö12345678910111213141516171819202122232425262728293031323334353637383940414243444546@Override public Object invoke(MethodInvocation invocation) throws Throwable &#123; Object value = null; String targetName = invocation.getThis().getClass().getName(); String methodName = invocation.getMethod().getName(); // ‰∏çÈúÄË¶ÅÁºìÂ≠òÁöÑÂÜÖÂÆπ //if (!isAddCache(StringUtil.subStrForLastDot(targetName), methodName)) &#123; if (!isAddCache(targetName, methodName)) &#123; // ÊâßË°åÊñπÊ≥ïËøîÂõûÁªìÊûú return invocation.proceed(); &#125; Object[] arguments = invocation.getArguments(); String key = getCacheKey(targetName, methodName, arguments); logger.debug("redisKey: " + key); try &#123; // Âà§Êñ≠ÊòØÂê¶ÊúâÁºìÂ≠ò if (redisUtil.exists(key)) &#123; return redisUtil.get(key); &#125; // ÂÜôÂÖ•ÁºìÂ≠ò value = invocation.proceed(); if (value != null) &#123; final String tkey = key; final Object tvalue = value; new Thread(new Runnable() &#123; @Override public void run() &#123; if (tkey.startsWith("com.service.impl.xxxRecordManager")) &#123; redisUtil.set(tkey, tvalue, xxxRecordManagerTime); &#125; else if (tkey.startsWith("com.service.impl.xxxSetRecordManager")) &#123; redisUtil.set(tkey, tvalue, xxxSetRecordManagerTime); &#125; else &#123; redisUtil.set(tkey, tvalue, defaultCacheExpireTime); &#125; &#125; &#125;).start(); &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); if (value == null) &#123; return invocation.proceed(); &#125; &#125; return value; &#125; ÂÖàÊòØÊü•Áúã‰∫ÜÂΩìÂâçÊñπÊ≥ïÊòØÂê¶Âú®Êàë‰ª¨Ëá™ÂÆö‰πâÁöÑÊñπÊ≥ï‰∏≠ÔºåÂ¶ÇÊûú‰∏çÊòØÁöÑËØùÂ∞±Áõ¥Êé•ËøîÂõûÔºå‰∏çËøõÂÖ•Êã¶Êà™Âô®„ÄÇ ‰πãÂêéÂà©Áî®ÂèçÂ∞ÑËé∑ÂèñÁöÑÁ±ªÂêç„ÄÅÊñπÊ≥ïÂêç„ÄÅÂèÇÊï∞ÁîüÊàêredisÁöÑkey„ÄÇ Áî®keyÂú®redis‰∏≠Êü•ËØ¢ÊòØÂê¶Â∑≤ÁªèÊúâÁºìÂ≠ò„ÄÇ ÊúâÁºìÂ≠òÂ∞±Áõ¥Êé•ËøîÂõûÁºìÂ≠òÂÜÖÂÆπÔºå‰∏çÂÜçÁªßÁª≠Êü•ËØ¢Êï∞ÊçÆÂ∫ì„ÄÇ Â¶ÇÊûúÊ≤°ÊúâÁºìÂ≠òÂ∞±Êü•ËØ¢Êï∞ÊçÆÂ∫ìÂπ∂Â∞ÜËøîÂõû‰ø°ÊÅØÂä†ÂÖ•Âà∞redis‰∏≠„ÄÇ ‰ΩøÁî®PageHelperËøôÊ¨°‰∏∫‰∫ÜÂàÜÈ°µÊñπ‰æø‰ΩøÁî®‰∫ÜÊØîËæÉÊµÅË°åÁöÑPageHelperÊù•Â∏ÆÊàë‰ª¨Êõ¥ÁÆÄÂçïÁöÑËøõË°åÂàÜÈ°µ„ÄÇÈ¶ñÂÖàÊòØÊñ∞Â¢û‰∏Ä‰∏™mybatisÁöÑÈÖçÁΩÆÊñá‰ª∂mybatis-configÔºö123456789101112131415161718192021222324252627282930313233343536373839404142434445464748&lt;?xml version="1.0" encoding="UTF-8" ?&gt;&lt;!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN" "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;&lt;configuration&gt; &lt;settings&gt; &lt;setting name="cacheEnabled" value="true"/&gt; &lt;setting name="lazyLoadingEnabled" value="true"/&gt; &lt;setting name="multipleResultSetsEnabled" value="true"/&gt; &lt;setting name="useColumnLabel" value="true"/&gt; &lt;setting name="useGeneratedKeys" value="false"/&gt; &lt;setting name="autoMappingBehavior" value="PARTIAL"/&gt; &lt;setting name="defaultExecutorType" value="SIMPLE"/&gt; &lt;setting name="defaultStatementTimeout" value="25"/&gt; &lt;setting name="safeRowBoundsEnabled" value="false"/&gt; &lt;setting name="mapUnderscoreToCamelCase" value="false"/&gt; &lt;setting name="localCacheScope" value="SESSION"/&gt; &lt;setting name="jdbcTypeForNull" value="OTHER"/&gt; &lt;setting name="lazyLoadTriggerMethods" value="equals,clone,hashCode,toString"/&gt; &lt;/settings&gt; &lt;plugins&gt; &lt;!-- com.github.pagehelper‰∏∫PageHelperÁ±ªÊâÄÂú®ÂåÖÂêç --&gt; &lt;plugin interceptor="com.github.pagehelper.PageHelper"&gt; &lt;property name="dialect" value="mysql"/&gt; &lt;!-- ËØ•ÂèÇÊï∞ÈªòËÆ§‰∏∫false --&gt; &lt;!-- ËÆæÁΩÆ‰∏∫trueÊó∂Ôºå‰ºöÂ∞ÜRowBoundsÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞offsetÂΩìÊàêpageNumÈ°µÁ†Å‰ΩøÁî® --&gt; &lt;!-- ÂíåstartPage‰∏≠ÁöÑpageNumÊïàÊûú‰∏ÄÊ†∑ --&gt; &lt;property name="offsetAsPageNum" value="true"/&gt; &lt;!-- ËØ•ÂèÇÊï∞ÈªòËÆ§‰∏∫false --&gt; &lt;!-- ËÆæÁΩÆ‰∏∫trueÊó∂Ôºå‰ΩøÁî®RowBoundsÂàÜÈ°µ‰ºöËøõË°åcountÊü•ËØ¢ --&gt; &lt;property name="rowBoundsWithCount" value="true"/&gt; &lt;!-- ËÆæÁΩÆ‰∏∫trueÊó∂ÔºåÂ¶ÇÊûúpageSize=0ÊàñËÄÖRowBounds.limit = 0Â∞±‰ºöÊü•ËØ¢Âá∫ÂÖ®ÈÉ®ÁöÑÁªìÊûú --&gt; &lt;!-- ÔºàÁõ∏ÂΩì‰∫éÊ≤°ÊúâÊâßË°åÂàÜÈ°µÊü•ËØ¢Ôºå‰ΩÜÊòØËøîÂõûÁªìÊûú‰ªçÁÑ∂ÊòØPageÁ±ªÂûãÔºâ &lt;property name="pageSizeZero" value="true"/&gt; --&gt; &lt;!-- 3.3.0ÁâàÊú¨ÂèØÁî® - ÂàÜÈ°µÂèÇÊï∞ÂêàÁêÜÂåñÔºåÈªòËÆ§falseÁ¶ÅÁî® --&gt; &lt;!-- ÂêØÁî®ÂêàÁêÜÂåñÊó∂ÔºåÂ¶ÇÊûúpageNum&lt;1‰ºöÊü•ËØ¢Á¨¨‰∏ÄÈ°µÔºåÂ¶ÇÊûúpageNum&gt;pages‰ºöÊü•ËØ¢ÊúÄÂêé‰∏ÄÈ°µ --&gt; &lt;!-- Á¶ÅÁî®ÂêàÁêÜÂåñÊó∂ÔºåÂ¶ÇÊûúpageNum&lt;1ÊàñpageNum&gt;pages‰ºöËøîÂõûÁ©∫Êï∞ÊçÆ --&gt; &lt;property name="reasonable" value="true"/&gt; &lt;!-- 3.5.0ÁâàÊú¨ÂèØÁî® - ‰∏∫‰∫ÜÊîØÊåÅstartPage(Object params)ÊñπÊ≥ï --&gt; &lt;!-- Â¢ûÂä†‰∫Ü‰∏Ä‰∏™`params`ÂèÇÊï∞Êù•ÈÖçÁΩÆÂèÇÊï∞Êò†Â∞ÑÔºåÁî®‰∫é‰ªéMapÊàñServletRequest‰∏≠ÂèñÂÄº --&gt; &lt;!-- ÂèØ‰ª•ÈÖçÁΩÆpageNum,pageSize,count,pageSizeZero,reasonable,‰∏çÈÖçÁΩÆÊò†Â∞ÑÁöÑÁî®ÈªòËÆ§ÂÄº --&gt; &lt;!-- ‰∏çÁêÜËß£ËØ•Âê´‰πâÁöÑÂâçÊèê‰∏ãÔºå‰∏çË¶ÅÈöè‰æøÂ§çÂà∂ËØ•ÈÖçÁΩÆ --&gt; &lt;property name="params" value="pageNum=start;pageSize=limit;"/&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/configuration&gt; Êé•ÁùÄÂú®mybatisÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏≠ÂºïÂÖ•Ê¨°ÈÖçÁΩÆÊñá‰ª∂Ôºö1234567&lt;bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean"&gt; &lt;property name="dataSource" ref="dataSource" /&gt; &lt;!-- Ëá™Âä®Êâ´Êèèmapping.xmlÊñá‰ª∂ --&gt; &lt;property name="mapperLocations" value="classpath:mapping/*.xml"&gt;&lt;/property&gt; &lt;!--Âä†ÂÖ•PageHelper--&gt; &lt;property name="configLocation" value="classpath:mybatis-config.xml"/&gt;&lt;/bean&gt; Êé•ÁùÄÂú®serviceÊñπÊ≥ï‰∏≠Ôºö1234567891011@Overridepublic PageEntity&lt;Rediscontent&gt; selectByPage(Integer pageNum, Integer pageSize) &#123; PageHelper.startPage(pageNum, pageSize); //Âõ†‰∏∫ÊòØdemoÔºåÊâÄ‰ª•ËøôÈáåÈªòËÆ§Ê≤°ÊúâÊü•ËØ¢Êù°‰ª∂„ÄÇ List&lt;Rediscontent&gt; rediscontents = rediscontentMapper.selectByExample(new RediscontentExample()); PageEntity&lt;Rediscontent&gt; rediscontentPageEntity = new PageEntity&lt;Rediscontent&gt;(); rediscontentPageEntity.setList(rediscontents); int size = rediscontentMapper.selectByExample(new RediscontentExample()).size(); rediscontentPageEntity.setCount(size); return rediscontentPageEntity;&#125; Âè™ÈúÄË¶Å‰ΩøÁî®PageHelper.startPage(pageNum, pageSize);ÊñπÊ≥ïÂ∞±ÂèØ‰ª•Â∏ÆÊàë‰ª¨ÁÆÄÂçïÁöÑÂàÜÈ°µ‰∫Ü„ÄÇËøôÈáåÊàëËá™ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ÂàÜÈ°µÂ∑•ÂÖ∑Á±ªPageEntityÊù•Êõ¥Êñπ‰æøÁöÑÂ∏ÆÊàë‰ª¨Âú®‰πãÂêéÁîüÊàêJSONÊï∞ÊçÆ„ÄÇ123456789101112131415161718192021222324252627282930package com.crossoverJie.util;import java.io.Serializable;import java.util.List;/** * ÂàÜÈ°µÂÆû‰Ωì * * @param &lt;T&gt; */public class PageEntity&lt;T&gt; implements Serializable &#123; private List&lt;T&gt; list;// ÂàÜÈ°µÂêéÁöÑÊï∞ÊçÆ private Integer count; public Integer getCount() &#123; return count; &#125; public void setCount(Integer count) &#123; this.count = count; &#125; public List&lt;T&gt; getList() &#123; return list; &#125; public void setList(List&lt;T&gt; list) &#123; this.list = list; &#125;&#125; Êõ¥Â§öPageHelperÁöÑ‰ΩøÁî®ËØ∑Êü•Áúã‰∏Ä‰∏ãÈìæÊé•Ôºöhttps://github.com/pagehelper/Mybatis-PageHelper ÂâçÁ´ØËÅîË∞ÉÊé•‰∏ãÊù•Áúã‰∏ãÊéßÂà∂Â±ÇRedisController:1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556package com.crossoverJie.controller;import com.crossoverJie.pojo.Rediscontent;import com.crossoverJie.service.RediscontentService;import com.crossoverJie.util.CommonUtil;import com.crossoverJie.util.PageEntity;import com.github.pagehelper.PageHelper;import net.sf.json.JSONArray;import net.sf.json.JSONObject;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestParam;import javax.servlet.http.HttpServletResponse;@Controller@RequestMapping("/redis")public class RedisController &#123; private static Logger logger = LoggerFactory.getLogger(RedisController.class); @Autowired private RediscontentService rediscontentService; @RequestMapping("/redis_list") public void club_list(HttpServletResponse response, @RequestParam(value = "page", defaultValue = "0") int page, @RequestParam(value = "pageSize", defaultValue = "0") int pageSize) &#123; JSONObject jsonObject = new JSONObject(); JSONObject jo = new JSONObject(); try &#123; JSONArray ja = new JSONArray(); PageHelper.startPage(1, 10); PageEntity&lt;Rediscontent&gt; rediscontentPageEntity = rediscontentService.selectByPage(page, pageSize); for (Rediscontent rediscontent : rediscontentPageEntity.getList()) &#123; JSONObject jo1 = new JSONObject(); jo1.put("rediscontent", rediscontent); ja.add(jo1); &#125; jo.put("redisContents", ja); jo.put("count", rediscontentPageEntity.getCount()); jsonObject = CommonUtil.parseJson("1", "ÊàêÂäü", jo); &#125; catch (Exception e) &#123; jsonObject = CommonUtil.parseJson("2", "Êìç‰ΩúÂºÇÂ∏∏", ""); logger.error(e.getMessage(), e); &#125; //ÊûÑÂª∫ËøîÂõû CommonUtil.responseBuildJson(response, jsonObject); &#125;&#125; ËøôÈáåÂ∞±‰∏çÂÅöËøáÂ§öËß£Èáä‰∫ÜÔºåÂ∞±ÊòØ‰ªéredisÊàñËÄÖÊòØservice‰∏≠Êü•ËØ¢Âá∫Êï∞ÊçÆÂπ∂ËøîÂõû„ÄÇ ÂâçÁ´ØÁöÑÊòæÁ§∫ÁïåÈù¢Âú®https://github.com/crossoverJie/SSM/blob/master/src/main/webapp/redis/showRedis.jsp‰∏≠(Âπ∂‰∏çÊòØÂâçÁ´ØÔºåÂ∞ÜÂ∞±Áúã)„ÄÇÂÖ∂‰∏≠Ê†∏ÂøÉÁöÑredis_list.jsÁöÑ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485var page = 1, rows = 10;$(document).ready(function () &#123; initJqPaginator(); //Âä†ËΩΩ load_redis_list(); $(".query_but").click(function () &#123;//Êü•ËØ¢ÊåâÈíÆ page = 1; load_redis_list(); &#125;);&#125;);//ÂàùÂßãÂåñÂàÜÈ°µfunction initJqPaginator() &#123; $.jqPaginator('#pagination', &#123; totalPages: 100, visiblePages: 10, currentPage: 1, first: '&lt;li class="prev"&gt;&lt;a href="javascript:;"&gt;È¶ñÈ°µ&lt;/a&gt;&lt;/li&gt;', last: '&lt;li class="prev"&gt;&lt;a href="javascript:;"&gt;Êú´È°µ&lt;/a&gt;&lt;/li&gt;', prev: '&lt;li class="prev"&gt;&lt;a href="javascript:;"&gt;‰∏ä‰∏ÄÈ°µ&lt;/a&gt;&lt;/li&gt;', next: '&lt;li class="next"&gt;&lt;a href="javascript:;"&gt;‰∏ã‰∏ÄÈ°µ&lt;/a&gt;&lt;/li&gt;', page: '&lt;li class="page"&gt;&lt;a href="javascript:;"&gt;&#123;&#123;page&#125;&#125;&lt;/a&gt;&lt;/li&gt;', onPageChange: function (num, type) &#123; page = num; if (type == "change") &#123; load_redis_list(); &#125; &#125; &#125;);&#125;//ÂàóË°®function create_club_list(redisContens) &#123; var phone = 0; var html = '&lt;div class="product_box"&gt;' + '&lt;div class="br"&gt;' + '&lt;div class="product_link"&gt;' + '&lt;div class="product_phc"&gt;' + '&lt;img class="phc" src="" &gt;' + '&lt;/div&gt;' + '&lt;span class="product_name"&gt;' + redisContens.id + '&lt;/span&gt;&lt;/div&gt;' + '&lt;div class="product_link toto"&gt;' + redisContens.content + '&lt;/div&gt;' + '&lt;div class="product_link toto"&gt;' + '&lt;span&gt;' + "" + '&lt;/span&gt;' + '&lt;/div&gt;' + '&lt;div class="product_link toto"&gt;' + '&lt;span&gt;' + phone + '&lt;/span&gt;&lt;/div&gt;' + '&lt;div class="product_link toto"&gt;' + '&lt;span&gt;' + 0 + '&lt;/span&gt;&lt;/div&gt;' + '&lt;div class="product_link toto product_operation"&gt;' + '&lt;span onclick="edit_club(' + 0 + ')"&gt;ÁºñËæë&lt;/span&gt;' + '&lt;span onclick="edit_del(' + 0 + ')"&gt;Âà†Èô§&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;' + '&lt;/div&gt;'; return html;&#125;//Âä†ËΩΩÂàóË°®function load_redis_list() &#123; var name = $("#name").val(); $.ajax(&#123; type: 'POST', url: getPath() + '/redis/redis_list', async: false, data: &#123;name: name, page: page, pageSize: rows&#125;, datatype: 'json', success: function (data) &#123; if (data.result == 1) &#123; $(".product_length_number").html(data.data.count); var html = ""; var count = data.data.count; for (var i = 0; i &lt; data.data.redisContents.length; i++) &#123; var redisContent = data.data.redisContents[i]; html += create_club_list(redisContent.rediscontent); &#125; $(".product_content").html(html); //ËøôÈáåÊòØÂàÜÈ°µÁöÑÊèí‰ª∂ $('#pagination').jqPaginator('option', &#123; totalPages: (Math.ceil(count / rows) &lt; 1 ? 1 : Math.ceil(count / rows)), currentPage: page &#125;); &#125; else &#123; alert(data.msg); &#125; &#125; &#125;); $(".product_box:even").css("background", "#e6e6e6");//ÈöîË°åÂèòËâ≤&#125; ÂÖ∂ÂÆûÂ∞±ÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑËØ∑Ê±ÇÊé•Âè£ÔºåÂπ∂Ê†πÊçÆËøîÂõûÊï∞ÊçÆÂä®ÊÄÅÁîüÊàêDomËÄåÂ∑≤„ÄÇ ÊÄªÁªì‰ª•‰∏äÂ∞±ÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑredisÁöÑÂ∫îÁî®„ÄÇredisÁöÑÂ∫îÁî®Âú∫ÊôØËøòÈùûÂ∏∏ÁöÑÂ§öÔºåÊØîÂ¶ÇÁé∞Âú®ÊàëÊâÄÂú®ÂÅöÁöÑ‰∏Ä‰∏™È°πÁõÆÂ∞±ÊúâÁî®Êù•Â§ÑÁêÜÁü≠‰ø°È™åËØÅÁ†ÅÁöÑ‰∏öÂä°Âú∫ÊôØÔºå‰πãÂêéÊúâÊó∂Èó¥ÂèØ‰ª•ÂÜô‰∏Ä‰∏™demo„ÄÇ È°πÁõÆÂú∞ÂùÄÔºöhttps://github.com/crossoverJie/SSM.gitGitHubÂú∞ÂùÄÔºöhttps://github.com/crossoverJie„ÄÇ]]></content>
      <categories>
        <category>SSM</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SSM(ÂÖ≠)Ë∑®Âüü‰º†Ëæì]]></title>
    <url>%2F2016%2F10%2F18%2FSSM6%2F</url>
    <content type="text"><![CDATA[ÂâçË®Ä‰∏çÁü•Â§ßÂÆ∂Âú®Âπ≥Êó∂ÁöÑÂºÄÂèëËøáÁ®ã‰∏≠ÊúâÊ≤°ÊúâÈÅáÂà∞ËøáË∑®ÂüüËÆøÈóÆËµÑÊ∫êÁöÑÈóÆÈ¢òÔºåÊàë‰∏çÂ∑ßÂú®‰∏äÂë®Â∞±Á¢∞Âà∞‰∏Ä‰∏™ËøôÊ†∑ÁöÑÈóÆÈ¢òÔºåÂπ∏ËøêÁöÑÊòØÂú®ÂÖ¨Âè∏ÂâçÁ´ØÂêåÂ≠¶ÁöÑÂ∏ÆÂøô‰∏ãËß£ÂÜ≥‰∫ÜËØ•ÈóÆÈ¢ò„ÄÇ ‰ªÄ‰πàÊòØË∑®ÂüüÈóÆÈ¢òÔºü Âè™Ë¶ÅÂçèËÆÆ„ÄÅÂüüÂêç„ÄÅÁ´ØÂè£Êúâ‰ªª‰Ωï‰∏Ä‰∏™‰∏çÂêåÔºåÈÉΩË¢´ÂΩì‰ΩúÊòØ‰∏çÂêåÁöÑÂüü Âè™Ë¶ÅÊòØÂú®‰∏çÂêåÂüü‰∏≠ÊòØÊó†Ê≥ïËøõË°åÈÄö‰ø°ÁöÑ„ÄÇ Âü∫‰∫é‰ª•‰∏äÁöÑÁöÑÂá∫ÂèëÁÇπÔºåÊàë‰ª¨ÂèàÊúâË∑®ÂüüÂÖ±‰∫´ËµÑÊ∫êÁöÑÈúÄÊ±Ç(Ë≠¨Â¶ÇÁé∞Âú®ÊµÅË°åÁöÑÂâçÂêéÁ´ØÂàÜÁ¶ª‰πãÂêéÂàÜÂà´ÈÉ®ÁΩ≤ÁöÑÊÉÖÂÜµ)ÔºåÊú¨ÊñáÊâÄÈááÁî®ÁöÑËß£ÂÜ≥ÂäûÊ≥ïÊòØJSONPÔºåËØ¥Âà∞JSONPÂ∞±‰ºöÈ¶ñÂÖàÊÉ≥Âà∞JSON„ÄÇËôΩÁÑ∂Âè™Êúâ‰∏ÄÂ≠ó‰πãÂ∑Æ‰ΩÜÊÑè‰πâÂç¥ÂÆåÂÖ®‰∏ç‰∏ÄÊ†∑ÔºåÈ¶ñÂÖàÁßëÊôÆ‰∏Ä‰∏ãJSON„ÄÇ JSON ÂÖ∂ÂÆûÁé∞Âú®JSONÂ∑≤ÁªèÊòØÁõ∏ÂΩìÊµÅË°å‰∫ÜÔºåÂè™Ë¶ÅÊ∂âÂèäÂà∞ÂâçÂêéÁ´ØÁöÑÊï∞ÊçÆ‰∫§‰∫íÂ§ßÈÉΩÈÉΩÊòØÈááÁî®ÁöÑJSON(‰∏çÁÆ°ÊòØwebËøòÊòØandroidÂíåIOS)ÔºåÊâÄ‰ª•ÊàëËøôÈáåÂ∞±‰∏æ‰∏Ä‰∏™‰æãÂ≠êÔºåÂ∞±ÁÆóÊòØÊ≤°ÊúâÁî®ËøáÁöÑÂêåÂ≠¶‰πüËÉΩÂæàÂø´ÊòéÁôΩÂÖ∂‰∏≠ÁöÑÊÑèÊÄù„ÄÇ PostManÈ¶ñÂÖàÁªôÂ§ßÂÆ∂ÂÆâÂà©‰∏ÄÊ¨æÂêéÁ´ØÂºÄÂèëÁöÑÂà©Âô®PostMan,ÂèØ‰ª•Áî®‰∫éÊ®°ÊãüÂá†‰πéÊâÄÊúâÁöÑHTTPËØ∑Ê±ÇÔºåÂú®ÂºÄÂèëÈò∂ÊÆµË∞ÉËØïÂêéÁ´ØÊé•Âè£ÈùûÂ∏∏ÊúâÁî®„ÄÇËøôÊòØ‰∏Ä‰∏™ChromeÊèí‰ª∂ÔºåÂèØ‰ª•Áõ¥Êé•Âú®googleÂïÜÂ∫óÊêúÁ¥¢Áõ¥Êé•‰∏ãËΩΩ(ÂΩìÁÑ∂ÂâçÊèê‰Ω†ÊáÇÂæó)„ÄÇ‰πãÂêéÁïåÈù¢Â∞±Â¶Ç‰∏ãÔºö„ÄÇÁïåÈù¢ÈùûÂ∏∏ÁÆÄÊ¥ÅÔºåÊúâÁÇπÂºÄÂèëÁªèÈ™åÁöÑÁ´•ÈûãÂ∫îËØ•ÈÉΩ‰ºö‰ΩøÁî®Ôºå‰∏çÂ§™‰ºöÁî®ÁöÑÁõ¥Êé•google‰∏ãÂ∞±ÂèØ‰ª•‰∫ÜÊØîËæÉÁÆÄÂçï„ÄÇÊé•ÁùÄÊàë‰ª¨Â∞±ÂèØ‰ª•Âà©Áî®PostManÊù•ÂèëËµ∑‰∏ÄÊ¨°ËØ∑Ê±ÇËé∑ÂèñJSON‰∫Ü„ÄÇËøôÈáå‰ª•ÊàëSSMÈ°πÁõÆ‰∏∫‰æã,‰πüÊ≠£Â•ΩÊúâÊö¥Èú≤‰∏Ä‰∏™JSONÁöÑÊé•Âè£„ÄÇÂú∞ÂùÄÂ¶Ç‰∏ã:http://www.crossoverjie.top/SSM/content_load„ÄÇÁõ¥Êé•Âú®POSTMAN‰∏≠ÁöÑÂú∞ÂùÄÊ†èËæìÂÖ•ËØ•Âú∞ÂùÄÔºåÈááÁî®GETÁöÑÊñπÂºèËØ∑Ê±ÇÔºå‰πãÂêéÊâÄËøîÂõûÁöÑÂ∞±ÊòØJSONÊ†ºÂºèÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇÁî±‰∫éJavascriptÂéüÁîüÁöÑÂ∞±ÊîØÊåÅJSONÔºåÊâÄ‰ª•Ëß£ÊûêËµ∑Êù•ÈùûÂ∏∏Êñπ‰æø„ÄÇ JSONPÂ•Ω‰∫ÜÔºåÁªà‰∫éÂèØ‰ª•Ë∞àË∞àJSONP‰∫Ü„ÄÇ‰πãÂâçËØ¥ÈÅìJSONPÊòØÁî®Êù•Ëß£ÂÜ≥Ë∑®ÂüüÈóÆÈ¢òÁöÑÔºåÈÇ£‰πà‰ªñÊòØÂ¶Ç‰ΩïËß£ÂÜ≥ÁöÑÂë¢„ÄÇÁªèËøáÊàë‰ª¨ÂºÄÂèëÁïåÁöÑÂâçËæà‰ª¨ÂèëÁé∞ÔºåHTML‰∏≠Êã•ÊúâSRCÂ±ûÊÄßÁöÑÊ†áÁ≠æÈÉΩ‰∏çÂèóË∑®ÂüüÁöÑÂΩ±ÂìçÔºåÊØîÂ¶ÇÔºö&lt;script&gt;„ÄÅ&lt;img&gt;„ÄÅ&lt;iframe&gt;Ê†áÁ≠æ„ÄÇÁî±‰∫éJSÂéüÁîüÊîØÊåÅJSONÁöÑËß£ÊûêÔºå‰∫éÊòØÊàë‰ª¨ÈááÁî®&lt;script&gt;ÁöÑÊñπÂºèÊù•Â§ÑÁêÜË∑®ÂüüËß£ÊûêÔºå‰ª£Á†ÅÂ¶Ç‰∏ã‰∏ÄÁúãÂ∞±ÊòéÁôΩ„ÄÇwebÁ´Ø:1234567891011121314151617181920212223242526272829303132&lt;html lang="zh"&gt;&lt;head&gt; &lt;script type="text/javascript"&gt; $(document).ready(function()&#123; $.ajax(&#123; type: "get", async: false, url: "http://www.crossoverjie.top/SSM/jsonpInfo?callback=getUser&amp;userId=3", dataType: "jsonp", jsonp: "callback",//‰∏ÄËà¨ÈªòËÆ§‰∏∫:callback jsonpCallback:"getUser",//Ëá™ÂÆö‰πâÁöÑjsonpÂõûË∞ÉÂáΩÊï∞ÂêçÁß∞ÔºåÈªòËÆ§‰∏∫jQueryËá™Âä®ÁîüÊàêÁöÑÈöèÊú∫ÂáΩÊï∞ÂêçÔºå‰πüÂèØ‰ª•ÂÜô"?"ÔºåjQuery‰ºöËá™Âä®‰∏∫‰Ω†Â§ÑÁêÜÊï∞ÊçÆ success: function(json)&#123; /** * Ëé∑ÂæóÊúçÂä°Âô®ËøîÂõûÁöÑ‰ø°ÊÅØ„ÄÇ * ÂèØ‰ª•ÂÅöÂÖ∑‰ΩìÁöÑ‰∏öÂä°Â§ÑÁêÜ„ÄÇ */ alert('Áî®Êà∑‰ø°ÊÅØÔºöIDÔºö ' + json.userId + ' ÔºåÂßìÂêçÔºö ' + json.username + '„ÄÇ'); &#125;, error: function()&#123; alert('fail'); &#125; &#125;); &#125;); &lt;/script&gt;&lt;/head&gt;&lt;body oncontextmenu="return false"&gt;&lt;/body&gt;&lt;/html&gt; ÂÖ∂‰∏≠Êàë‰ª¨ÈááÁî®‰∫ÜJQueryÁªôÊàëÂ∞ÅË£ÖÂ•ΩÁöÑÂáΩÊï∞ÔºåËøôÊ†∑Â∞±ÂèØ‰ª•Ëá™Âä®Â∏ÆÊàë‰ª¨Ëß£Êûê‰∫Ü„ÄÇÈ¶ñÂÖàÊàë‰ª¨Êù•Áúã‰∏ã‰ª£Á†Å‰∏≠ÁöÑhttp://www.crossoverjie.top/SSM/jsonpInfo?callback=getUser&amp;userId=3Ëøô‰∏™Âú∞ÂùÄËøîÂõûÁöÑÊòØ‰ªÄ‰πàÂÜÖÂÆπÔºåËøòÊòØÊîæÂà∞POSTMAN‰∏≠ÊâßË°åÂ¶Ç‰∏ãÔºö„ÄÇÂèØ‰ª•ÁúãÂà∞Êàë‰ª¨ÊâÄ‰º†ÈÄíÁöÑcallbackÂèÇÊï∞Â∏¶ÁùÄÊü•ËØ¢ÁöÑÊï∞ÊçÆÂèàÂéüÂ∞Å‰∏çÂä®ÁöÑËøîÂõûÁªôÊàë‰ª¨‰∫ÜÔºåËøôÊ†∑ÁöÑËØùÂç≥‰ΩøÊàë‰ª¨‰∏ç‰ΩøÁî®JQueryÁªôÊàëÂ∞ÅË£ÖÂ•ΩÁöÑÂáΩÊï∞ÔºåÊàë‰ª¨Ëá™ÂÆö‰πâ‰∏Ä‰∏™ÂíåcallbackÂêçÁß∞‰∏ÄÊ†∑ÁöÑÂáΩÊï∞‰∏ÄÊ†∑ÊòØÂèØ‰ª•Ëß£ÊûêÂÖ∂‰∏≠ÁöÑÊï∞ÊçÆÁöÑÔºåÂè™ÊòØJqueryÂ∏ÆÊàë‰ª¨ÂÅö‰∫ÜËÄåÂ∑≤„ÄÇ ÂâçÁ´ØÊ≤°ÈóÆÈ¢ò‰∫ÜÔºåÈÇ£‰πàÂêéÁ´ØÂèàÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÂë¢Ôºü‰πüÂæàÁÆÄÂçïÔºåÂ¶Ç‰∏ãÔºö1234567@RequestMapping(value = "/jsonpInfo",method = &#123; RequestMethod.GET &#125;)@ResponseBodypublic Object jsonpInfo(String callback,Integer userId) throws IOException &#123; User user = userService.getUserById(userId); JSONPObject jsonpObject = new JSONPObject(callback,user) ; return jsonpObject ;&#125; ÂêéÁ´ØÈááÁî®‰∫Üjackson‰∏≠ÁöÑJSONPObjectËøô‰∏™Á±ªÁöÑ‰∏Ä‰∏™ÊûÑÈÄ†ÊñπÊ≥ïÔºåÂè™ÈúÄË¶ÅÂ∞ÜcallbackÂ≠óÊÆµÂíåÈúÄË¶ÅËΩ¨ÊàêJSONÂ≠óÁ¨¶‰∏≤ÁöÑÂØπË±°ÊîæËøõÂéªÂç≥ÂèØ„ÄÇÈúÄË¶Å‰∏ªË¶ÅÁöÑÊòØÈúÄË¶Å‰ΩøÁî®@ResponseBodyÊ≥®Ëß£ÊâçËÉΩÊàêÂäüËøîÂõû„ÄÇ ÊÄªÁªìÂÖ∂ÂÆûÁΩë‰∏äËøòÊúâÂÖ∂‰ªñÁöÑÊñπÊ≥ïÊù•Â§ÑÁêÜË∑®ÂüüÈóÆÈ¢òÔºå‰∏çËøáÊàëËßâÂæóËøôÊ†∑ÁöÑÊñπÂºèÊúÄ‰∏∫ÁÆÄÂçï„ÄÇÂêåÊ†∑JSONP‰πüÊòØÊúâÁº∫ÁÇπÁöÑÔºåÊØîÂ¶ÇÔºöÂè™ÊîØÊåÅGETÊñπÂºèÁöÑHTTPËØ∑Ê±Ç„ÄÇ‰ª•‰∏ä‰ª£Á†Å‰æùÁÑ∂Âú®Âçö‰∏ªÁöÑSSMÈ°πÁõÆ‰∏≠ÔºåÂ¶ÇÊúâÈúÄË¶ÅÂèØ‰ª•Áõ¥Êé•FORK„ÄÇ È°πÁõÆÂú∞ÂùÄÔºöhttps://github.com/crossoverJie/SSM.git ‰∏™‰∫∫ÂçöÂÆ¢Âú∞ÂùÄÔºöhttp://crossoverjie.top„ÄÇ GitHubÂú∞ÂùÄÔºöhttps://github.com/crossoverJie„ÄÇ]]></content>
      <categories>
        <category>SSM</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JSONP</tag>
        <tag>JSON</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LinuxÔºà‰∫åÔºâÊúçÂä°Âô®ËøêË°åÁéØÂ¢ÉÈÖçÁΩÆ]]></title>
    <url>%2F2016%2F09%2F20%2FLinux-normal2%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄLinuxÁõ∏‰ø°ÂØπÂ§ßÂ§öÊï∞Á®ãÂ∫èÂëòÊù•ËØ¥ÈÉΩ‰∏çÈôåÁîüÔºåÊØïÁ´üÂú®ÊúçÂä°Âô®Á´Ø‰æùÁÑ∂ËøòÊòØÈú∏‰∏ªÂú∞‰ΩçËÄå‰∏î‰∏ùÊØ´Ê≤°ÊúâÈÄÄÂ±Ö‰∫åÁ∫øÁöÑÊÑèÊÄùÔºå‰ª•Ëá≥‰∫éÁé∞Âú®Âá†‰πéÊØè‰∏Ä‰∏™ËΩØ‰ª∂ÂºÄÂèëÁöÑÁõ∏ÂÖ≥‰∫∫ÂëòÈÉΩÂæóÊàñÂ§öÊàñÂ∞ëÁöÑÁü•ÈÅì‰∏Ä‰∫õLinuxÁöÑÁõ∏ÂÖ≥ÂÜÖÂÆπÔºåÊú¨ÊñáÂ∞Ü‰ªãÁªçÂ¶Ç‰ΩïÂú®ÂàöÊãøÂà∞‰∏ÄÂè∞‰∫ëÊúçÂä°Âô®(ÈááÁî®centos)Êù•ËøõË°åËøêË°åÁéØÂ¢ÉÁöÑÊê≠Âª∫ÔºåÂåÖÊã¨JDK„ÄÅMysql„ÄÅTomcat‰ª•Âèänginx„ÄÇÁõ∏‰ø°ÂØπ‰∫éÂ∞èÁôΩÊù•ËØ¥ÂæàÊúâÂøÖË¶ÅÁöÑÔºå‰πüÊòØÊàë‰∏™‰∫∫ÁöÑ‰∏Ä‰∏™ËÆ∞ÂΩï„ÄÇ ËØ•ÊúçÂä°Âô®ÁöÑÁî®ÈÄîÊòØÁî®‰∫éÈÉ®ÁΩ≤JavaEEÈ°πÁõÆ„ÄÇÈÉ®ÁΩ≤‰πãÂêéÁöÑÊïàÊûúÂõæÂ¶Ç‰∏ã: JDKÂÆâË£ÖÁî±‰∫éÊàë‰ª¨‰πãÂêéÈúÄË¶ÅÈÉ®ÁΩ≤ÁöÑÊòØJavaEEÈ°πÁõÆÔºåÊâÄ‰ª•È¶ñÂÖàÁ¨¨‰∏ÄÊ≠•Â∞±ÊòØÂÆâË£ÖJDK‰∫Ü„ÄÇ Âç∏ËΩΩËá™Â∏¶ÁöÑopenJDKÁé∞Âú®ÁöÑÊúçÂä°Âô®ÊãøÊù•‰πãÂêé‰∏ÄËà¨ÈÉΩÊòØÈªòËÆ§ÁªôÊàë‰ª¨ÂÆâË£Ö‰∏Ä‰∏™openJDKÔºåÈ¶ñÂÖàÊàë‰ª¨ÈúÄË¶ÅÂç∏ËΩΩÊéâ„ÄÇ ‰ΩøÁî®rpm -qa | grep javaÂëΩ‰ª§Êü•ÁúãÁ≥ªÁªü‰∏≠ÊòØÂê¶Â≠òÂú®ÊúâJava„ÄÇ ‰ΩøÁî®rpm -e --nodeps Áõ∏ÂÖ≥Â∫îÁî®ÂêçÁß∞Êù•ËøõË°åÂç∏ËΩΩ„ÄÇ(Áõ∏ÂÖ≥Â∫îÁî®ÂêçÁß∞Â∞±ÊòØ‰∏ä‰∏Ä‰∏™ÂëΩ‰ª§‰∏≠ÊòæÁ§∫Âá∫Êù•ÁöÑÂêçÁß∞Â§çÂà∂Âà∞ËøôÈáåÂç∏ËΩΩÂç≥ÂèØ)„ÄÇ ‰∏ãËΩΩÂπ∂ÂÆâË£ÖJDK ‰πãÂêéÊòØ‰∏ãËΩΩORACLEÊâÄÊèê‰æõÁöÑJDKÔºå‰º†ÈÄÅÈó®Ê†πÊçÆËá™Â∑±Á≥ªÁªüÁöÑÊÉÖÂÜµ‰∏ãËΩΩÂØπÂ∫îÁâàÊú¨Âç≥ÂèØ„ÄÇÁ¨îËÄÖ‰ΩøÁî®ÁöÑÊòØjdk-8u101-linux-x64.rpmÁâàÊú¨„ÄÇ ÁÑ∂Âêé‰ΩøÁî®FTPÂ∑•ÂÖ∑‰∏ä‰º†Âà∞/usr/javaÁõÆÂΩï‰∏ãÂç≥ÂèØÔºåÊ≤°ÊúâjavaÁõÆÂΩïÊñ∞Âª∫‰∏Ä‰∏™Âç≥ÂèØ„ÄÇ ÁÑ∂Âêé‰ΩøÁî®rpm -ivh jdk-8u101-linux-x64.rpmÂëΩ‰ª§ËøõË°åËß£ÂéãÂÆâË£Ö„ÄÇ profileÊñá‰ª∂ÈÖçÁΩÆÂÆâË£ÖÂÆåÊàê‰πãÂêé‰ΩøÁî®vi /etc/profileÂëΩ‰ª§ÁºñËæëprofileÊñá‰ª∂(Ê≥®ÊÑèËØ•Êñá‰ª∂Ë∑ØÂæÑÊòØÊåáÊ†πÁõÆÂΩï‰∏ãÁöÑetcÊñá‰ª∂Â§π‰∏çË¶ÅÊâæÈîô‰∫Ü)„ÄÇÂú®ËØ•Êñá‰ª∂‰∏≠Âä†ÂÖ•‰ª•‰∏ãÂÜÖÂÆπÔºö123export JAVA_HOME=/usr/java/jdk-8u101-linux-x64export CLASSPATH=.:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jarexport PATH=$PATH:$JAVA_HOME/bin ‰øùÂ≠ò‰πãÂêéËøêË°åsource /etc/profile‰ΩøÈÖçÁΩÆÁîüÊïà„ÄÇ È™åËØÅÊòØÂê¶ÂÆâË£ÖÊàêÂäü‰πãÂêéÊàë‰ª¨‰ΩøÁî®Âú®windowsÂπ≥Âè∞‰πüÊúâÁöÑÂëΩ‰ª§java -versionÔºåÂ¶ÇÊûúËæìÂá∫Â¶ÇÂõæÔºöË°®Á§∫ÂÆâË£ÖÊàêÂäü„ÄÇ MySQLÂÆâË£ÖÂç∏ËΩΩËá™Â∏¶ÁöÑMysqlÈ¶ñÂÖàÁ¨¨‰∏ÄÊ≠•ËøòÊòØË¶ÅÂç∏ËΩΩÊéâËá™Â∏¶ÁöÑmysql„ÄÇrpm -e --nodeps mysqlÂëΩ‰ª§Âíå‰πãÂâç‰∏ÄÊ†∑Âè™ÊòØÊääÂ∫îÁî®ÂêçÁß∞Êç¢Êàêmysql‰∫ÜËÄåÂ∑≤„ÄÇ ‰ΩøÁî®yumÊù•ÂÆâË£Ömysql‰πãÂêéÊàë‰ª¨ÈááÁî®yumÊù•ÂÆâË£Ömysql„ÄÇËøôÊ†∑ÁöÑÊñπÂºèÊúÄÁÆÄÂçï‰æøÊç∑„ÄÇyum install -y mysql-server mysql mysql-deveÊâßË°åËØ•ÂëΩ‰ª§Áõ¥Âà∞Âá∫Áé∞Complete!ÊèêÁ§∫‰πãÂêéË°®Á§∫ÂÆâË£ÖÊàêÂäü„ÄÇrpm -qi mysql-server‰πãÂêé‰ΩøÁî®ËØ•ÂëΩ‰ª§ÂèØ‰ª•Êü•ÁúãÊàë‰ª¨ÂÆâË£ÖÁöÑmysql‰ø°ÊÅØ„ÄÇ mysqlÁõ∏ÂÖ≥ÈÖçÁΩÆ‰ΩøÁî®service mysqld startÊù•ÂêØÂä®mysqlÊúçÂä°(Á¨¨‰∏ÄÊ¨°‰ºöËæìÂá∫ÂæàÂ§ö‰ø°ÊÅØ)Ôºå‰πãÂêéÂ∞±‰∏ç‰ºö‰∫Ü„ÄÇÁÑ∂ÂêéÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®chkconfig mysqld onÂëΩ‰ª§Â∞ÜmysqlËÆæÁΩÆ‰∏∫ÂºÄÊú∫ÂêØÂä®„ÄÇËæìÂÖ•chkconfig --list | grep mysqlÂëΩ‰ª§ÊòæÁ§∫Â¶Ç‰∏ãÂõæÔºöË°®Á§∫ËÆæÁΩÆÊàêÂäü„ÄÇ‰ΩøÁî®mysqladmin -u root password &#39;root&#39;‰∏∫rootË¥¶Êà∑ËÆæÁΩÆÂØÜÁ†Å„ÄÇ ËÆæÁΩÆËøúÁ®ã‰ΩøÁî®1234grant all privileges on *.* to &apos;root&apos;@&apos;%&apos; identified by &apos;123456&apos; with grant option;# rootÊòØÁî®Êà∑ÂêçÔºå%‰ª£Ë°®‰ªªÊÑè‰∏ªÊú∫Ôºå&apos;123456&apos;ÊåáÂÆöÁöÑÁôªÂΩïÂØÜÁ†ÅÔºàËøô‰∏™ÂíåÊú¨Âú∞ÁöÑrootÂØÜÁ†ÅÂèØ‰ª•ËÆæÁΩÆ‰∏çÂêåÁöÑÔºå‰∫í‰∏çÂΩ±ÂìçÔºâflush privileges; # ÈáçËΩΩÁ≥ªÁªüÊùÉÈôêexit; È™åËØÅ‰ΩøÁî®‰ΩøÁî®mysql -u root -prootÊù•ÁôªÂΩïmysql„ÄÇÂ¶ÇÊûúÂá∫Áé∞‰ª•‰∏ãÁïåÈù¢Ë°®Á§∫ËÆæÁΩÆÊàêÂäü„ÄÇ TomcatÂÆâË£ÖTomcat‰πüÊòØÊàë‰ª¨ËøêË°åJavaEEÈ°πÁõÆÂøÖÂ§áÁöÑ‰∏Ä‰∏™‰∏≠Èó¥‰ª∂„ÄÇ Á¨¨‰∏ÄÊ≠•ÈúÄË¶Å‰∏ãËΩΩlinuxÁöÑTomcatÔºå‰º†ÈÄÅÈó®„ÄÇÊ†πÊçÆËá™Â∑±Á≥ªÁªüÁâàÊú¨ËøõË°å‰∏ãËΩΩÂç≥ÂèØ„ÄÇ‰πãÂêéÂ∞Üapache-tomcat-8.5.5.tar.gz‰∏ä‰º†Âà∞/usr/localÁõÆÂΩï‰∏≠„ÄÇ Ëß£ÂéãËØ•ÂéãÁº©ÂåÖtar -zxv -f apache-tomcat-8.5.5.tar.gz,ÂÜç‰ΩøÁî®mv apache-tomcat-8.5.5 tomcatÂ∞ÜËß£ÂéãÁöÑTomcatÁßªÂä®Âà∞Â§ñÂ±ÇÁöÑTomcatÁõÆÂΩï‰∏≠„ÄÇ ËøõÂÖ•/usr/local/tomcat/apache-tomcat-8.5.5/binÁõÆÂΩï‰ΩøÁî®./startup.batÂëΩ‰ª§ÂêØÂä®tomcat„ÄÇ Âõ†‰∏∫tomcat‰ΩøÁî®ÁöÑÈªòËÆ§Á´ØÂè£ÊòØ8080ÔºålinuxÈò≤ÁÅ´Â¢ôÈªòËÆ§ÊòØ‰∏çËÉΩËÆøÈóÆÁöÑÔºåÈúÄË¶ÅÊâãÂä®Â∞ÜÂÖ∂ÊâìÂºÄ„ÄÇ‰ΩøÁî®vi + /etc/sysconfig/iptablesÁºñËæëiptables(Ê≥®ÊÑèetcÁõÆÂΩïÊòØÊ†πÁõÆÂΩï‰∏ãÁöÑ)ÔºåÂä†ÂÖ•‰ª•‰∏ã‰ª£Á†Å:12-A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 8080 -j ACCEPT-A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT ËøôÈáåÊàë‰ª¨ÂºÄÊîæ‰∫Ü8080Âíå80Á´ØÂè£Ôºå‰πãÂêéÂÆâË£ÖnginxÂ∞±‰∏çÁî®Âú®ÂºÄÊîæ‰∫Ü„ÄÇ ps:ËøôÈáåÁî®Âà∞‰∫ÜÁÆÄÂçïÁöÑvimÂëΩ‰ª§„ÄÇÊåâiËøõÂÖ•ÊèíÂÖ•Ê®°ÂºèÔºåËæìÂÖ•‰∏äÈù¢‰∏§ÊÆµ‰ª£Á†Å„ÄÇ‰πãÂêéÊåâescÈÄÄÂá∫ÊèíÂÖ•Ê®°Âºè„ÄÇÂÜçÊåâ:wq‰øùÂ≠òÂÖ≥Èó≠Âç≥ÂèØ„ÄÇ‰πãÂêé‰ΩøÁî®service iptables restartÂëΩ‰ª§ÈáçÂêØÈò≤ÁÅ´Â¢ôÂç≥ÂèØ„ÄÇÂú®ÊµèËßàÂô®ËæìÂÖ•ÊúçÂä°Âô®ÁöÑip+8080Â¶ÇÊûúÂá∫Áé∞TomcatÁöÑÊ¨¢ËøéÈ°µÂç≥Ë°®ÊòéTomcatÂÆâË£ÖÊàêÂäü„ÄÇ nginxÂÆâË£ÖÊúÄÂêéÊòØÂÆâË£ÖnginxÔºåËøôÈáåÊàë‰ª¨ËøòÊòØ‰ΩøÁî®ÊúÄÁÆÄÂçïÁöÑyumÁöÑÊñπÂºèÊù•ËøõË°åÂÆâË£Ö„ÄÇ È¶ñÂÖà‰ΩøÁî®‰ª•‰∏ãÂá†‰∏™ÂëΩ‰ª§ÂÆâË£ÖÂøÖÂ§áÁöÑÂá†‰∏™Â∫ìÔºö 123yum -y install pcre*yum -y install openssl*yum -y install gcc ‰πãÂêéÂÆâË£Önginx„ÄÇ 1234567cd /usr/local/wget http://nginx.org/download/nginx-1.4.2.tar.gztar -zxvf nginx-1.4.2.tar.gzcd nginx-1.4.2 ./configure --prefix=/usr/local/nginx --with-http_stub_status_modulemakemake install ‰πãÂêéÂ∞±ÂèØ‰ª•‰ΩøÁî®/usr/local/nginx/sbin/nginxÂëΩ‰ª§Êù•ÂêØÂä®nginx‰∫Ü„ÄÇËæìÂÖ•ÊúçÂä°Âô®ÁöÑIPÂú∞ÂùÄÔºåÂ¶ÇÊûúÂá∫Áé∞nginxÁöÑÊ¨¢ËøéÁïåÈù¢Ë°®Á§∫ÂÆâË£ÖÊàêÂäü‰∫Ü„ÄÇ nginxÈÖçÁΩÆËøôÈáåÊàëÂ∞±ÁÆÄÂçïË¥¥‰ª•‰∏ãÊàëÁöÑÈÖçÁΩÆÔºå‰∏ªË¶ÅÂ∞±ÊòØÈÖçÁΩÆ‰∏Ä‰∏™upstream,‰πãÂêéÂú®server‰∏≠ÂºïÁî®ÈÖçÁΩÆÁöÑÈÇ£‰∏™upstreamÂç≥ÂèØ„ÄÇ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125#user nobody;worker_processes 1;#error_log logs/error.log;#error_log logs/error.log notice;#error_log logs/error.log info;#pid logs/nginx.pid;events &#123; worker_connections 1024;&#125;http &#123; include mime.types; default_type application/octet-stream; #log_format main &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos; # &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos; # &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;; #access_log logs/access.log main; sendfile on; #tcp_nopush on; #keepalive_timeout 0; keepalive_timeout 65; #gzip on; upstream crossover_main &#123; server 127.0.0.1:8080; &#125; server &#123; listen 80; server_name www.crossoverjie.top; #charset koi8-r; #access_log logs/host.access.log main; location / &#123; proxy_pass http://crossover_main/examples/; proxy_set_header Host $http_host; proxy_set_header X-Forwarded-For $remote_addr; index index.jsp; &#125; #error_page 404 /404.html; # redirect server error pages to the static page /50x.html # error_page 500 502 503 504 /50x.html; location = /50x.html &#123; root html; &#125; # proxy the PHP scripts to Apache listening on 127.0.0.1:80 # #location ~ \.php$ &#123; # proxy_pass http://127.0.0.1; #&#125; # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000 # #location ~ \.php$ &#123; # root html; # fastcgi_pass 127.0.0.1:9000; # fastcgi_index index.php; # fastcgi_param SCRIPT_FILENAME /scripts$fastcgi_script_name; # include fastcgi_params; #&#125; # deny access to .htaccess files, if Apache&apos;s document root # concurs with nginx&apos;s one # #location ~ /\.ht &#123; # deny all; #&#125; &#125; # another virtual host using mix of IP-, name-, and port-based configuration # #server &#123; # listen 8000; # listen somename:8080; # server_name somename alias another.alias; # location / &#123; # root html; # index index.html index.htm; # &#125; #&#125; # HTTPS server # #server &#123; # listen 443; # server_name localhost; # ssl on; # ssl_certificate cert.pem; # ssl_certificate_key cert.key; # ssl_session_timeout 5m; # ssl_protocols SSLv2 SSLv3 TLSv1; # ssl_ciphers HIGH:!aNULL:!MD5; # ssl_prefer_server_ciphers on; # location / &#123; # root html; # index index.html index.htm; # &#125; #&#125;&#125; ‰πãÂêéÊàë‰ª¨Âú®Âú∞ÂùÄÊ†èËæìÂÖ•ÊúçÂä°Âô®ÁöÑIPÂú∞ÂùÄ(Â¶ÇÊûúÊúâÂüüÂêçËß£Êûê‰∫ÜÊúçÂä°Âô®ÁöÑIPÂèØ‰ª•Áõ¥Êé•ËæìÂÖ•ÂüüÂêç)Â∞±‰ºöËøõÂÖ•Êàë‰ª¨Âú®upstream‰∏≠ÈÖçÁΩÆÁöÑÂú∞ÂùÄÂä†‰∏äÂú®server‰∏≠ÁöÑÂú∞ÂùÄ„ÄÇÊ†πÊçÆÊàëËøôÈáåÁöÑÈÖçÁΩÆÊúÄÂêéËß£ÊûêÂú∞ÂùÄÂ∞±ÊòØhttp://127.0.0.1:8080/examplesÂ∫îËØ•ÊòØÂæàÂ•ΩÁêÜËß£ÁöÑ„ÄÇÊúÄÁªàÁöÑÁªìÊûúÊòØÊàëÂú®ÁâáÂ§¥ÊîæÁöÑÈÇ£Âº†Êà™Âõæ‰∏ÄÊ†∑„ÄÇ ÊÄªÁªìËøôÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑÂü∫‰∫écentOSÁöÑËøêË°åÁéØÂ¢ÉÈÖçÁΩÆÔºåÂØπ‰∫éÂ∞èÁôΩÁªÉÊâãÂ∫îËØ•ÊòØÂ§ü‰∫ÜÔºåÊúâ‰∏çÊ∏ÖÊ•öÂíåÈîôËØØÁöÑÂú∞ÊñπÊ¨¢ËøéÊåáÂá∫ÂèçÊ≠£Êàë‰πü‰∏ç‰ºöÂõûÂ§ç„ÄÇ ‰∏™‰∫∫ÂçöÂÆ¢Âú∞ÂùÄÔºöhttp://crossoverjie.top„ÄÇ GitHubÂú∞ÂùÄÔºöhttps://github.com/crossoverJie„ÄÇ]]></content>
      <categories>
        <category>LinuxÁ¨îËÆ∞</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>centos</tag>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SSM(‰∫î)Âü∫‰∫éwebSocketÁöÑËÅäÂ§©ÂÆ§]]></title>
    <url>%2F2016%2F09%2F04%2FSSM5%2F</url>
    <content type="text"><![CDATA[ÂâçË®Ä‰∏çÁü•Â§ßÂÆ∂Âú®Âπ≥Êó∂ÁöÑÈúÄÊ±Ç‰∏≠ÊúâÊ≤°ÊúâÈÅáÂà∞ÈúÄË¶ÅÂÆûÊó∂Â§ÑÁêÜ‰ø°ÊÅØÁöÑÊÉÖÂÜµÔºåÂ¶ÇÁ´ôÂÜÖ‰ø°ÔºåËÆ¢ÈòÖÔºåËÅäÂ§©‰πãÁ±ªÁöÑ„ÄÇÂú®Ëøô‰πãÂâçÊàë‰ª¨ÈÄöÂ∏∏ÊÉ≥Âà∞ÁöÑÊñπÊ≥ï‰∏ÄËà¨ÈÉΩÊòØÈááÁî®ËΩÆËÆ≠ÁöÑÊñπÂºèÊØèÈöî‰∏ÄÂÆöÁöÑÊó∂Èó¥ÂêëÊúçÂä°Âô®ÂèëÈÄÅËØ∑Ê±Ç‰ªéËÄåËé∑ÂæóÊúÄÊñ∞ÁöÑÊï∞ÊçÆÔºå‰ΩÜËøôÊ†∑‰ºöÊµ™Ë¥πÊéâÂæàÂ§öÁöÑËµÑÊ∫êÂπ∂‰∏î‰πü‰∏çÊòØÂÆûÊó∂ÁöÑÔºå‰∫éÊòØÈöèÁùÄHTML5ÁöÑÊé®Âá∫Â∏¶Êù•‰∫ÜwebsocketÂèØ‰ª•Ê†πÊú¨ÁöÑËß£ÂÜ≥‰ª•‰∏äÈóÆÈ¢òÂÆûÁé∞ÁúüÊ≠£ÁöÑÂÆûÊó∂‰º†Ëæì„ÄÇ websocketÊòØ‰ªÄ‰πàÔºüËá≥‰∫éwebsocketÊòØ‰ªÄ‰πà„ÄÅÊúâ‰ªÄ‰πàÁî®ËøôÊ†∑ÁöÑÈóÆÈ¢ò‰∏ÄGoogle‰∏ÄÂ§ßÊääÔºåËøôÈáåÊàëÂ∞±ÁÆÄË¶ÅÁöÑËØ¥‰∫õwebsocketÂÜçÊú¨Ê¨°ÂÆû‰æã‰∏≠ÁöÑ‰ΩúÁî®Âêß„ÄÇÁî±‰∫éÂú®Êú¨Ê¨°ÂÆû‰æã‰∏≠ÈúÄË¶ÅÂÆûÁé∞ÁöÑÊòØ‰∏Ä‰∏™ËÅäÂ§©ÂÆ§Ôºå‰∏Ä‰∏™ÂÆûÊó∂ÁöÑËÅäÂ§©ÂÆ§„ÄÇÂ¶Ç‰∏ãÂõæÔºöÈááÁî®websocket‰πãÂêéÂèØ‰ª•ËÆ©ÂâçÁ´ØÂíåÂíåÂêéÁ´ØÂÉèC/SÊ®°Âºè‰∏ÄÊ†∑ÂÆûÊó∂ÈÄö‰ø°Ôºå‰∏çÂÜçÈúÄË¶ÅÊØèÊ¨°ÂçïÁã¨ÂèëÈÄÅËØ∑Ê±Ç„ÄÇÁî±‰∫éÊòØÂü∫‰∫éH5ÁöÑÊâÄ‰ª•ÂØπ‰∫éËÄÅÁöÑÊµèËßàÂô®Â¶ÇIE7„ÄÅIE8‰πãÁ±ªÁöÑÂ∞±Ê≤°ÂäûÊ≥ï‰∫ÜÔºå‰∏çËøáH5ÊòØÂ§ßÂäøÊâÄË∂ãËøôÁÇπ‰∏çÁî®ÊãÖÂøÉ„ÄÇ ÂêéÁ´ØÊó¢ÁÑ∂Êé®Âá∫‰∫ÜwebsocketÔºå‰Ωú‰∏∫Áé∞Âú®‰∏ªÊµÅÁöÑJavaËÇØÂÆö‰πüÊúâÁõ∏Â∫îÁöÑÊîØÊåÅÔºåÊâÄ‰ª•Âú®JavaEE7‰πãÂêé‰πüÂØπwebsocketÂÅöÂá∫‰∫ÜËßÑËåÉÔºåÊâÄ‰ª•Êú¨Ê¨°ÁöÑ‰ª£Á†ÅÁêÜËÆ∫‰∏äÊòØË¶ÅËøêË°åÂú®Java1.7+ÂíåTomcat7.0+‰πã‰∏äÁöÑ„ÄÇÁúãËøáÊàëÂâçÈù¢Âá†ÁØáÊñáÁ´†ÁöÑÊúãÂèãÂ∫îËØ•ÈÉΩÁü•ÈÅìÊú¨Ê¨°ÂÆû‰æã‰πüÊòØËøêË°åÂú®‰πãÂâçÁöÑSSM‰πã‰∏äÁöÑÔºåÊâÄ‰ª•ËøôÈáåÂ∞±‰∏çÂÜçËµòËø∞‰∫Ü„ÄÇÈ¶ñÂÖàÁ¨¨‰∏ÄÊ≠•ÈúÄË¶ÅÂä†ÂÖ•websocketÁöÑ‰æùËµñÔºö123456789101112&lt;!-- https://mvnrepository.com/artifact/javax.websocket/javax.websocket-api --&gt;&lt;dependency&gt; &lt;groupId&gt;javax.websocket&lt;/groupId&gt; &lt;artifactId&gt;javax.websocket-api&lt;/artifactId&gt; &lt;version&gt;1.1&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-websocket&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt;&lt;/dependency&gt; ‰ª•‰∏äÂ∞±ÊòØ‰ΩøÁî®websocketÊâÄÈúÄË¶ÅÁî®Âà∞ÁöÑÂåÖ„ÄÇspring-websocketËøô‰∏™‰∏ªË¶ÅÊòØÂú®‰πãÂêéÈúÄË¶ÅÂú®websocketÁöÑÂêéÁ´ØÊ≥®ÂÖ•serviceÊâÄÈúÄË¶ÅÁöÑ„ÄÇ‰πãÂêéÂÜçÁúã‰∏Ä‰∏ãÂêéÁ´ØÁöÑÊ†∏ÂøÉ‰ª£Á†ÅMyWebSocket.java123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135package com.crossoverJie.controller;/** * Created by Administrator on 2016/8/7. */import com.crossoverJie.pojo.Content;import com.crossoverJie.service.ContentService;import org.apache.camel.BeanInject;import org.apache.camel.EndpointInject;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Component;import org.springframework.stereotype.Controller;import org.springframework.web.context.support.SpringBeanAutowiringSupport;import org.springframework.web.socket.server.standard.SpringConfigurator;import java.io.IOException;import java.text.SimpleDateFormat;import java.util.Date;import java.util.concurrent.CopyOnWriteArraySet;import javax.annotation.PostConstruct;import javax.websocket.OnClose;import javax.websocket.OnError;import javax.websocket.OnMessage;import javax.websocket.OnOpen;import javax.websocket.Session;import javax.websocket.server.ServerEndpoint;//ËØ•Ê≥®Ëß£Áî®Êù•ÊåáÂÆö‰∏Ä‰∏™URIÔºåÂÆ¢Êà∑Á´ØÂèØ‰ª•ÈÄöËøáËøô‰∏™URIÊù•ËøûÊé•Âà∞WebSocket„ÄÇ/** Á±ª‰ººServletÁöÑÊ≥®Ëß£mapping„ÄÇÊó†ÈúÄÂú®web.xml‰∏≠ÈÖçÁΩÆ„ÄÇ * configurator = SpringConfigurator.classÊòØ‰∏∫‰∫Ü‰ΩøËØ•Á±ªÂèØ‰ª•ÈÄöËøáSpringÊ≥®ÂÖ•„ÄÇ */@ServerEndpoint(value = "/websocket",configurator = SpringConfigurator.class)public class MyWebSocket &#123; //ÈùôÊÄÅÂèòÈáèÔºåÁî®Êù•ËÆ∞ÂΩïÂΩìÂâçÂú®Á∫øËøûÊé•Êï∞„ÄÇÂ∫îËØ•ÊääÂÆÉËÆæËÆ°ÊàêÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ„ÄÇ private static int onlineCount = 0; public MyWebSocket() &#123; &#125; @Autowired private ContentService contentService ; //concurrentÂåÖÁöÑÁ∫øÁ®ãÂÆâÂÖ®SetÔºåÁî®Êù•Â≠òÊîæÊØè‰∏™ÂÆ¢Êà∑Á´ØÂØπÂ∫îÁöÑMyWebSocketÂØπË±°„ÄÇ // Ëã•Ë¶ÅÂÆûÁé∞ÊúçÂä°Á´Ø‰∏éÂçï‰∏ÄÂÆ¢Êà∑Á´ØÈÄö‰ø°ÁöÑËØùÔºåÂèØ‰ª•‰ΩøÁî®MapÊù•Â≠òÊîæÔºåÂÖ∂‰∏≠KeyÂèØ‰ª•‰∏∫Áî®Êà∑Ê†áËØÜ private static CopyOnWriteArraySet&lt;MyWebSocket&gt; webSocketSet = new CopyOnWriteArraySet&lt;MyWebSocket&gt;(); //‰∏éÂÆ¢Êà∑Á´ØÁöÑËøûÊé•‰ºöËØùÔºåÈúÄË¶ÅÈÄöËøáÂÆÉÊù•ÁªôÂÆ¢Êà∑Á´ØÂèëÈÄÅÊï∞ÊçÆ private Session session; /** * ËøûÊé•Âª∫Á´ãÊàêÂäüË∞ÉÁî®ÁöÑÊñπÊ≥ï * @param session ÂèØÈÄâÁöÑÂèÇÊï∞„ÄÇsession‰∏∫‰∏éÊüê‰∏™ÂÆ¢Êà∑Á´ØÁöÑËøûÊé•‰ºöËØùÔºåÈúÄË¶ÅÈÄöËøáÂÆÉÊù•ÁªôÂÆ¢Êà∑Á´ØÂèëÈÄÅÊï∞ÊçÆ */ @OnOpen public void onOpen(Session session)&#123; this.session = session; webSocketSet.add(this); //Âä†ÂÖ•set‰∏≠ addOnlineCount(); //Âú®Á∫øÊï∞Âä†1 System.out.println("ÊúâÊñ∞ËøûÊé•Âä†ÂÖ•ÔºÅÂΩìÂâçÂú®Á∫ø‰∫∫Êï∞‰∏∫" + getOnlineCount()); &#125; /** * ËøûÊé•ÂÖ≥Èó≠Ë∞ÉÁî®ÁöÑÊñπÊ≥ï */ @OnClose public void onClose()&#123; webSocketSet.remove(this); //‰ªéset‰∏≠Âà†Èô§ subOnlineCount(); //Âú®Á∫øÊï∞Âáè1 System.out.println("Êúâ‰∏ÄËøûÊé•ÂÖ≥Èó≠ÔºÅÂΩìÂâçÂú®Á∫ø‰∫∫Êï∞‰∏∫" + getOnlineCount()); &#125; /** * Êî∂Âà∞ÂÆ¢Êà∑Á´ØÊ∂àÊÅØÂêéË∞ÉÁî®ÁöÑÊñπÊ≥ï * @param message ÂÆ¢Êà∑Á´ØÂèëÈÄÅËøáÊù•ÁöÑÊ∂àÊÅØ * @param session ÂèØÈÄâÁöÑÂèÇÊï∞ */ @OnMessage public void onMessage(String message, Session session) &#123; System.out.println("Êù•Ëá™ÂÆ¢Êà∑Á´ØÁöÑÊ∂àÊÅØ:" + message); //Áæ§ÂèëÊ∂àÊÅØ for(MyWebSocket item: webSocketSet)&#123; try &#123; item.sendMessage(message); &#125; catch (IOException e) &#123; e.printStackTrace(); continue; &#125; &#125; &#125; /** * ÂèëÁîüÈîôËØØÊó∂Ë∞ÉÁî® * @param session * @param error */ @OnError public void onError(Session session, Throwable error)&#123; System.out.println("ÂèëÁîüÈîôËØØ"); error.printStackTrace(); &#125; /** * Ëøô‰∏™ÊñπÊ≥ï‰∏é‰∏äÈù¢Âá†‰∏™ÊñπÊ≥ï‰∏ç‰∏ÄÊ†∑„ÄÇÊ≤°ÊúâÁî®Ê≥®Ëß£ÔºåÊòØÊ†πÊçÆËá™Â∑±ÈúÄË¶ÅÊ∑ªÂä†ÁöÑÊñπÊ≥ï„ÄÇ * @param message * @throws IOException */ public void sendMessage(String message) throws IOException&#123; //‰øùÂ≠òÊï∞ÊçÆÂà∞Êï∞ÊçÆÂ∫ì Content content = new Content() ; content.setContent(message); SimpleDateFormat sm = new SimpleDateFormat("yyyy-MM-dd HH:mm:dd") ; content.setCreateDate(sm.format(new Date())); contentService.insertSelective(content) ; this.session.getBasicRemote().sendText(message); //this.session.getAsyncRemote().sendText(message); &#125; public static synchronized int getOnlineCount() &#123; return onlineCount; &#125; public static synchronized void addOnlineCount() &#123; MyWebSocket.onlineCount++; &#125; public static synchronized void subOnlineCount() &#123; MyWebSocket.onlineCount--; &#125;&#125; ËøôÂ∞±ÊòØÊï¥‰∏™websocketÁöÑÂêéÁ´Ø‰ª£Á†Å„ÄÇÁúãËµ∑Êù•‰πüÊØîËæÉÁÆÄÂçï‰∏ªË¶ÅÂ∞±ÊòØ‰ΩøÁî®ÈÇ£Âá†‰∏™Ê≥®Ëß£„ÄÇÊØèÂΩìÊúâ‰∏Ä‰∏™ÂÆ¢Êà∑Á´ØËøûÂÖ•„ÄÅÂÖ≥Èó≠„ÄÅÂèëÈÄÅÊ∂àÊÅØÈÉΩ‰ºöË∞ÉÁî®ÂêÑËá™Ê≥®Ëß£ÁöÑÊñπÊ≥ï„ÄÇËøôÈáåÊàëËÆ≤‰∏Ä‰∏ãsendMessage()Ëøô‰∏™ÊñπÊ≥ï„ÄÇ websocketÁªïÂùëÂú®sendMessage()ÊñπÊ≥ï‰∏≠ÊàëÂè™ÊÉ≥ÂÆûÁé∞‰∏Ä‰∏™ÁÆÄÂçïÁöÑÂäüËÉΩÔºåÂ∞±ÊòØÂ∞ÜÊØèÊ¨°ÁöÑËÅäÂ§©ËÆ∞ÂΩïÈÉΩÂ≠òÂà∞Êï∞ÊçÆÂ∫ì‰∏≠„ÄÇÁúã‰ºº‰∏Ä‰∏™ÁÆÄÂçïÁöÑÂäüËÉΩÁ°¨ÊòØËä±‰∫ÜÊàëÂçäÂ§©ÁöÑÊó∂Èó¥„ÄÇÊàëÂÖàÊòØÊåâÁÖß‰ª•ÂâçÁöÑÊÉØÊÄßÊÄùÁª¥Âè™ÈúÄË¶ÅÂú®Ëøô‰∏™Á±ª‰∏≠Ê≥®ÂÖ•serviceÂç≥ÂèØ„ÄÇ‰ΩÜÊòØÊó†ËÆ∫ÊÄé‰πàÂºÑÊØèÊ¨°ÈÉΩÊ≥®ÂÖ•‰∏çËøõÊù•ÈÉΩÊòØnull„ÄÇÊúÄÂêéÊ≤°ÂäûÊ≥ïÂè™Êúâgoogle‰∫ÜÔºåÊúÄÂêéÁªà‰∫éÂú®Á•ûÁ∫ßÁ§æÂå∫StackOverFlow‰∏≠ÊâæÂà∞‰∫ÜÁ≠îÊ°àÔºåÂ∞±ÊòØÂâçËæπÊâÄËØ¥ÁöÑÈúÄË¶ÅÊ∑ªÂä†ÁöÑÁ¨¨‰∫å‰∏™ maven‰æùËµñÔºåÁÑ∂ÂêéÂä†ÂÖ•@ServerEndpoint(value = &quot;/websocket&quot;,configurator = SpringConfigurator.class)Ëøô‰∏™Ê≥®Ëß£Âç≥ÂèØÂà©Áî®SpringÊ≥®ÂÖ•‰∫Ü„ÄÇÊé•ÁùÄÂ∞±ÂèØ‰ª•ÂÅöÊ∂àÊÅØÁöÑ‰øùÂ≠ò‰∫Ü„ÄÇ ÂâçÁ´ØÂâçÁ´ØÊàëÈááÁî®‰∫ÜBootstrapÂÅöÁöÑÔºå‰∏çÂ§™Ê∏ÖÊ•öBootstrapÁöÑÁ´•ÈûãÂª∫ËÆÆÂÖàÁúã‰∏ãÂÆòÊñπÊñáÊ°£‰πüÊØîËæÉÁÆÄÂçï„ÄÇËøòÊòØÂÖàË¥¥‰∏Ä‰∏ã‰ª£Á†ÅÔºö123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146&lt;%@ page language="java" import="java.util.*" pageEncoding="UTF-8" %&gt;&lt;% String path = request.getContextPath(); String basePath = request.getScheme() + "://" + request.getServerName() + ":" + request.getServerPort() + path + "/";%&gt;&lt;!DOCTYPE HTML&gt;&lt;html&gt;&lt;head&gt; &lt;base href="&lt;%=basePath%&gt;"&gt; &lt;!-- Bootstrap --&gt; &lt;link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css"&gt; &lt;!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries --&gt; &lt;!-- WARNING: Respond.js doesn't work if you view the page via file:// --&gt; &lt;!--[if lt IE 9]&gt; &lt;script src="//cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"&gt;&lt;/script&gt; &lt;script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"&gt;&lt;/script&gt; &lt;![endif]--&gt; &lt;script type="text/javascript" charset="utf-8" src="&lt;%=path%&gt;/ueditor/ueditor.config.js"&gt;&lt;/script&gt; &lt;script type="text/javascript" charset="utf-8" src="&lt;%=path%&gt;/ueditor/ueditor.all.min.js"&gt; &lt;/script&gt; &lt;!--Âª∫ËÆÆÊâãÂä®Âä†Âú®ËØ≠Ë®ÄÔºåÈÅøÂÖçÂú®ie‰∏ãÊúâÊó∂Âõ†‰∏∫Âä†ËΩΩËØ≠Ë®ÄÂ§±Ë¥•ÂØºËá¥ÁºñËæëÂô®Âä†ËΩΩÂ§±Ë¥•--&gt; &lt;!--ËøôÈáåÂä†ËΩΩÁöÑËØ≠Ë®ÄÊñá‰ª∂‰ºöË¶ÜÁõñ‰Ω†Âú®ÈÖçÁΩÆÈ°πÁõÆÈáåÊ∑ªÂä†ÁöÑËØ≠Ë®ÄÁ±ªÂûãÔºåÊØîÂ¶Ç‰Ω†Âú®ÈÖçÁΩÆÈ°πÁõÆÈáåÈÖçÁΩÆÁöÑÊòØËã±ÊñáÔºåËøôÈáåÂä†ËΩΩÁöÑ‰∏≠ÊñáÔºåÈÇ£ÊúÄÂêéÂ∞±ÊòØ‰∏≠Êñá--&gt; &lt;script type="text/javascript" charset="utf-8" src="&lt;%=path%&gt;/ueditor/lang/zh-cn/zh-cn.js"&gt;&lt;/script&gt; &lt;title&gt;ËÅäÂ§©ÂÆ§&lt;/title&gt;&lt;/head&gt;&lt;body data="/ssm"&gt;&lt;input id="text" type="text"/&gt;&lt;button onclick="send()"&gt;ÂèëÈÄÅ&lt;/button&gt;&lt;button onclick="closeWebSocket()"&gt;ÂÖ≥Èó≠ËøûÊé•&lt;/button&gt;&lt;div id="message"&gt;&lt;/div&gt;&lt;div class="container-fluid"&gt; &lt;div class="row"&gt; &lt;div class="col-md-12"&gt; &lt;div class="panel panel-primary"&gt; &lt;div class="panel-heading"&gt;ËÅäÂ§©ÂÆ§&lt;/div&gt; &lt;div id="msg" class="panel-body"&gt; &lt;/div&gt; &lt;div class="panel-footer"&gt; Âú®Á∫ø‰∫∫Êï∞&lt;span id="onlineCount"&gt;1&lt;/span&gt;‰∫∫ &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt;&lt;div class="container-fluid"&gt; &lt;div class="row"&gt; &lt;div class="col-md-12"&gt; &lt;script id="editor" type="text/plain" style="width:1024px;height:200px;"&gt;&lt;/script&gt; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt;&lt;div class="container-fluid"&gt; &lt;div class="row"&gt; &lt;div class="col-md-12"&gt; &lt;p class="text-right"&gt; &lt;button onclick="sendMsg();" class="btn btn-success"&gt;ÂèëÈÄÅ&lt;/button&gt; &lt;/p&gt; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;script type="text/javascript"&gt; var ue = UE.getEditor('editor'); var websocket = null; //Âà§Êñ≠ÂΩìÂâçÊµèËßàÂô®ÊòØÂê¶ÊîØÊåÅWebSocket if ('WebSocket' in window) &#123; websocket = new WebSocket("ws://192.168.0.102:8080/ssm/websocket"); &#125; else &#123; alert("ÂØπ‰∏çËµ∑ÔºÅ‰Ω†ÁöÑÊµèËßàÂô®‰∏çÊîØÊåÅwebSocket") &#125; //ËøûÊé•ÂèëÁîüÈîôËØØÁöÑÂõûË∞ÉÊñπÊ≥ï websocket.onerror = function () &#123; setMessageInnerHTML("error"); &#125;; //ËøûÊé•ÊàêÂäüÂª∫Á´ãÁöÑÂõûË∞ÉÊñπÊ≥ï websocket.onopen = function (event) &#123; setMessageInnerHTML("Âä†ÂÖ•ËøûÊé•"); &#125;; //Êé•Êî∂Âà∞Ê∂àÊÅØÁöÑÂõûË∞ÉÊñπÊ≥ï websocket.onmessage = function (event) &#123; setMessageInnerHTML(event.data); &#125;; //ËøûÊé•ÂÖ≥Èó≠ÁöÑÂõûË∞ÉÊñπÊ≥ï websocket.onclose = function () &#123; setMessageInnerHTML("Êñ≠ÂºÄËøûÊé•"); &#125;; //ÁõëÂê¨Á™óÂè£ÂÖ≥Èó≠‰∫ã‰ª∂ÔºåÂΩìÁ™óÂè£ÂÖ≥Èó≠Êó∂Ôºå‰∏ªÂä®ÂéªÂÖ≥Èó≠websocketËøûÊé•Ôºå // Èò≤Ê≠¢ËøûÊé•ËøòÊ≤°Êñ≠ÂºÄÂ∞±ÂÖ≥Èó≠Á™óÂè£ÔºåserverÁ´Ø‰ºöÊäõÂºÇÂ∏∏„ÄÇ window.onbeforeunload = function () &#123; var is = confirm("Á°ÆÂÆöÂÖ≥Èó≠Á™óÂè£Ôºü"); if (is)&#123; websocket.close(); &#125; &#125;; //Â∞ÜÊ∂àÊÅØÊòæÁ§∫Âú®ÁΩëÈ°µ‰∏ä function setMessageInnerHTML(innerHTML) &#123; $("#msg").append(innerHTML+"&lt;br/&gt;") &#125;; //ÂÖ≥Èó≠ËøûÊé• function closeWebSocket() &#123; websocket.close(); &#125; //ÂèëÈÄÅÊ∂àÊÅØ function send() &#123; var message = $("#text").val() ; websocket.send(message); $("#text").val("") ; &#125; function sendMsg()&#123; var msg = ue.getContent(); websocket.send(msg); ue.setContent(''); &#125;&lt;/script&gt;&lt;!-- jQuery (necessary for Bootstrap's JavaScript plugins) --&gt;&lt;script src="http://cdn.bootcss.com/jquery/1.11.3/jquery.min.js"&gt;&lt;/script&gt;&lt;!-- Include all compiled plugins (below), or include individual files as needed --&gt;&lt;script src="http://cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"&gt;&lt;/script&gt;&lt;script type="text/javascript" src="&lt;%=path%&gt;/js/Globals.js"&gt;&lt;/script&gt;&lt;script type="text/javascript" src="&lt;%=path%&gt;/js/websocket.js"&gt;&lt;/script&gt;&lt;/html&gt; ÂÖ∂ÂÆûÂÖ∂‰∏≠ÈáçË¶ÅÁöÑÂ∞±ÊòØÈÇ£Âá†‰∏™JSÊñπÊ≥ïÔºåÈÉΩÂÜôÊúâÊ≥®Èáä„ÄÇÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØËøôÈáå1234567//Âà§Êñ≠ÂΩìÂâçÊµèËßàÂô®ÊòØÂê¶ÊîØÊåÅWebSocketif ('WebSocket' in window) &#123; websocket = new WebSocket("ws://192.168.0.102:8080/ssm/websocket");&#125;else &#123; alert("ÂØπ‰∏çËµ∑ÔºÅ‰Ω†ÁöÑÊµèËßàÂô®‰∏çÊîØÊåÅwebSocket")&#125; ÂΩìÈ°πÁõÆË∑ëËµ∑Êù•‰πãÂêéÈúÄË¶ÅÂ∞ÜËøôÈáåÁöÑÂú∞ÂùÄÊîπ‰∏∫‰Ω†È°πÁõÆÁöÑÂú∞ÂùÄÂç≥ÂèØ„ÄÇÂì¶ÂØπ‰∫ÜÔºåÊàëÂú®ËøôÈáåÈááÁî®‰∫ÜÁôæÂ∫¶ÁöÑ‰∏Ä‰∏™UeditorÁöÑÂØåÊñáÊú¨ÁºñËæëÂô®(ËôΩÁÑ∂ÁôæÂ∫¶ÊêúÁ¥¢ÊàëÁé∞Âú®ÂæàÂ∞ëÁî®‰∫ÜÔºå‰ΩÜÊòØËøô‰∏™ÁºñËæëÂô®Á°ÆÂÆûËøò‰∏çÈîô)ÔºåËøô‰∏™ÁºñËæëÂô®‰πüÊØîËæÉÁÆÄÂçïÂè™ÈúÄË¶Å‰∏™ÊÄßÂåñÁöÑÈÖçÁΩÆ‰∏Ä‰∏ã‰∏™‰∫∫ÁöÑÈúÄÊ±ÇÂç≥ÂèØ„ÄÇ UeditorÁõ∏ÂÖ≥ÈÖçÁΩÆÁõ¥Êé•‰ΩøÁî®ÊàëÈ°πÁõÆËøêË°åÁöÑÁ´•ÈûãÂ∞±‰∏çÈúÄË¶ÅÈáçÊñ∞‰∏ãËΩΩ‰∫ÜÔºåÊàëÂ∞ÜËµÑÊ∫êÊîæÂú®‰∫ÜwebappÁõÆÂΩï‰∏ãÁöÑueditorÊñá‰ª∂Â§π‰∏ãÈù¢ÁöÑ„ÄÇÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØÊàë‰ª¨È¶ñÂÖàÈúÄË¶ÅÂ∞Üjsp--&gt;lib‰∏ãÁöÑjarÂåÖÂä†ÂÖ•Âà∞È°πÁõÆ‰∏≠„ÄÇÂä†Â•Ω‰πãÂêé‰ºöÂá∫Áé∞‰∏Ä‰∏™ÊÉ≥‰∏ãÁöÑÁÆ≠Â§¥Ë°®Á§∫Â∑≤ÁªèÂºïÂÖ•ÊàêÂäü„ÄÇÔºå‰πãÂêé‰øÆÊîπËØ•ÁõÆÂΩï‰∏ãÁöÑconfig.jsonÊñá‰ª∂Ôºå‰∏ªË¶Å‰øÆÊîπ‰ª•‰∏ãÂÜÖÂÆπÂç≥ÂèØÔºö123456"imageAllowFiles": [".png", ".jpg", ".jpeg", ".gif", ".bmp"], /* ‰∏ä‰º†ÂõæÁâáÊ†ºÂºèÊòæÁ§∫ */"imageCompressEnable": true, /* ÊòØÂê¶ÂéãÁº©ÂõæÁâá,ÈªòËÆ§ÊòØtrue */"imageCompressBorder": 1600, /* ÂõæÁâáÂéãÁº©ÊúÄÈïøËæπÈôêÂà∂ */"imageInsertAlign": "none", /* ÊèíÂÖ•ÁöÑÂõæÁâáÊµÆÂä®ÊñπÂºè */"imageUrlPrefix": "http://192.168.0.102:8080/ssm", /* ÂõæÁâáËÆøÈóÆË∑ØÂæÑÂâçÁºÄ */"imagePathFormat": "/ueditor/jsp/upload/image/&#123;yyyy&#125;&#123;mm&#125;&#123;dd&#125;/&#123;time&#125;&#123;rand:6&#125;", ËøôÈáå‰∏ªË¶ÅÊòØË¶Å‰øÆÊîπimageUrlPrefix‰∏∫‰Ω†Ëá™Â∑±ÁöÑÈ°πÁõÆÂú∞ÂùÄÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇueditor‰∏Ä‰∏™ÊàëËÆ§‰∏∫Âæà‰∏çÈîôÁöÑÂ∞±ÊòØ‰ªñÊîØÊåÅÂõæÁâá„ÄÅÂ§öÂõæ„ÄÅÊà™Âõæ‰∏ä‰º†ÔºåËÄå‰∏îÈÉΩ‰∏çÈúÄË¶ÅÊâãÂä®ÁºñÂÜôÂêéÁ´ØÊé•Âè£ÔºåÊâÄÊúâ‰∏ä‰º†ÁöÑÊñá‰ª∂„ÄÅÂõæÁâáÈÉΩ‰ºö‰øùÂ≠òÂà∞È°πÁõÆÂèëÂ∏ÉÂá∫ÂéªÁöÑjsp--&gt;uploadÊñá‰ª∂Â§π‰∏ã‰∏ÄÁúãÂ∞±ÊòéÁôΩ‰∫Ü„ÄÇÊõ¥Â§öÂÖ≥‰∫éueditorÁöÑÈÖçÁΩÆÂèØ‰ª•Êü•ÁúãÂÆòÁΩë„ÄÇ ÂÖ∂‰∏≠ÂÄºÂæóÊ≥®ÊÑè‰∏ÄÁÇπÁöÑÊòØÔºåÁî±‰∫éÈ°πÁõÆÈááÁî®‰∫ÜSpring MVCÂπ∂Êã¶Êà™‰∫ÜÊâÄÊúâÁöÑËØ∑Ê±ÇÔºåÂØºËá¥ÈùôÊÄÅËµÑÊ∫ê‰∏çËÉΩËÆøÈóÆÔºåÂ¶ÇÊûúÊòØÈúÄË¶ÅÁî®Âà∞‰∏ä‰º†txtÊñá‰ª∂‰πãÁ±ªÁöÑÈúÄÊ±ÇÂèØ‰ª•ÂèÇÁÖßweb.xml‰∏≠‰øÆÊîπÔºåÂ¶Ç‰∏ã:1234&lt;servlet-mapping&gt; &lt;servlet-name&gt;default&lt;/servlet-name&gt; &lt;url-pattern&gt;*.txt&lt;/url-pattern&gt;&lt;/servlet-mapping&gt; ËøôÊ†∑Â∞±ÂèØ‰ª•ËÆøÈóÆtxtÊñá‰ª∂‰∫ÜÔºåÂ¶ÇÊûúËøòÈúÄË¶Å‰∏ä‰º†PPT‰πãÁ±ªÁöÑÂ∞±‰ª•Ê≠§Á±ªÊé®„ÄÇ ÊÄªÁªìËøôÊ†∑‰∏Ä‰∏™ÁÆÄÂçïÁöÑÂü∫‰∫éwebsocketÁöÑËÅäÂ§©ÂÆ§Â∞±ÁÆóÂÆåÊàê‰∫ÜÔºåÊÑüÂÖ¥Ë∂£ÁöÑÊúãÂèãÂèØ‰ª•Â∞ÜÈ°πÁõÆÈÉ®ÁΩ≤Âà∞Â§ñÁΩëÊúçÂä°Âô®‰∏äËøôÊ†∑Â•ΩÂü∫Âèã‰πãÈó¥Â∞±ÂèØ‰ª•ÊÑâÂø´ÁöÑËÅä(zhuang)Â§©(bi)‰∫Ü„ÄÇÂΩìÁÑ∂ËøôÂè™ÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑÈ°πÁõÆÔºåÊÑüÂÖ¥Ë∂£ÁöÑÊúãÂèãÂÜçËøôÂü∫Á°Ä‰πã‰∏äÂä†ÂÖ•ÂÆûÊó∂Âú®Á∫ø‰∫∫Êï∞ÔºåÁî®Êà∑ÂêçÂíåIP‰πãÁ±ªÁöÑ„ÄÇ È°πÁõÆÂú∞ÂùÄÔºöhttps://github.com/crossoverJie/SSM.git‰∏™‰∫∫ÂçöÂÆ¢Âú∞ÂùÄÔºöhttp://crossoverjie.top„ÄÇGitHubÂú∞ÂùÄÔºöhttps://github.com/crossoverJie„ÄÇ]]></content>
      <categories>
        <category>SSM</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>websocket</tag>
        <tag>HTML5</tag>
        <tag>ueditor</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SSM(Âõõ)WebServiceÂÖ•Èó®ËØ¶Ëß£]]></title>
    <url>%2F2016%2F08%2F02%2FSSM4%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄwebserviceËøô‰∏™‰∏çÁü•ÈÅìÂ§ßÂÆ∂È¶ñÊ¨°Êé•Ëß¶ÁöÑÊó∂ÂÄôÊòØÊÄé‰πàÁêÜËß£ÁöÑÔºåÂèçÊ≠£ÊàëËÆ∞ÂæóÊàëÂΩìÊó∂Á¨¨‰∏ÄÊ¨°Êé•Ëß¶Ëøô‰∏™‰∏úË•øÁöÑÊó∂ÂÄô‰ª•‰∏∫ÂèàÊòØ‰∏Ä‰∏™XXÊ°ÜÊû∂ÔºåËßâÂæóËøòÊå∫È´òÂ§ß‰∏ä„ÄÇÁÑ∂ËÄåËøô‰∏ÄÂàáÂú®‰πãÂêéÊàë‰ΩøÁî®ËøáÂêéÊâçÂèëÁé∞Ëøô‰∫õÂÖ®ÈÉΩÊòØYY„ÄÇÈÇ£‰πàwebserviceÂà∞Â∫ïÊòØ‰ªÄ‰πàÂë¢ÔºåÊ†πÊçÆÊàëËá™Â∑±ÁöÑÁêÜËß£ÔºöÁÆÄÂçïÊù•ËØ¥Â∞±ÂÉèÊòØ‰∏Ä‰∏™ÂÖ¨ÂºÄÁöÑÊé•Âè£ÔºåÂÖ∂‰ªñÁ≥ªÁªü‰∏çÁÆ°‰Ω†ÊòØÁî®‰ªÄ‰πàËØ≠Ë®ÄÊù•ÁºñÂÜôÁöÑÈÉΩÂèØ‰ª•Ë∞ÉÁî®Ëøô‰∏™Êé•Âè£ÔºåÂπ∂ÂèØ‰ª•ËøîÂõûÁõ∏Â∫îÁöÑÊï∞ÊçÆÁªô‰Ω†„ÄÇÂ∞±ÂÉèÊòØÁé∞Âú®ÂæàÂ§öÁöÑÂ§©Ê∞îÂ∫îÁî®Ôºå‰ªñ‰ª¨ËÇØÂÆö‰∏ç‰ºöËá™Â∑±ÂéªÊêû‰∏Ä‰∏™Ê∞îË±°Â±Ä‰πãÁ±ªÁöÑÈÉ®Èó®ÂéªÁõëÊµãÂ§©Ê∞îÔºåÂ§ßÂ§öÈÉΩÊòØÁõ¥Êé•Ë∞ÉÁî®‰∏Ä‰∏™Â§©Ê∞îÊé•Âè£ÔºåÁÑ∂ÂêéËøîÂõûÂ§©Ê∞îÊï∞ÊçÆÔºåÁõ∏ÂÖ≥Â∫îÁî®Â∞±ÂèØ‰ª•Â∞ÜËøô‰∫õ‰ø°ÊÅØÂ±ïÁ§∫ÁªôÁî®Êà∑‰∫Ü„ÄÇÈÄöÂ∏∏Êù•ËØ¥ÂèëÂ∏ÉËøôÁ±ªÊé•Âè£ÁöÑÂ∫îÁî®ÈÉΩÊòØÁî®‰∏Ä‰∏§ÁßçËØ≠Ë®ÄÊù•ÁºñÂÜôÂç≥ÂèØÔºå‰ΩÜÊòØË∞ÉÁî®Ëøô‰∏™Êé•Âè£Â∫îÁî®ÂèØËÉΩ‰ºöÊòØÂêÑÁßçËØ≠Ë®ÄÊù•ÁºñÂÜôÁöÑÔºå‰∏∫‰∫ÜÊª°Ë∂≥ËøôÊ†∑ÁöÑÈúÄÊ±ÇwebserviceÂá∫Áé∞‰∫Ü„ÄÇ ÁÆÄÂçïÊù•ËØ¥webserviceÂ∞±ÊòØ‰∏∫‰∫ÜÊª°Ë∂≥‰ª•‰∏äÈúÄÊ±ÇËÄåÂÆö‰πâÂá∫Êù•ÁöÑËßÑËåÉ„ÄÇ SpringÊï¥ÂêàCXFÂú®Java‰∏≠ÂÆûÁé∞webserviceÊúâÂ§öÁßçÊñπÊ≥ïÔºåjavaÊú¨Ë∫´Âú®jdk1.7‰πãÂêé‰πüÂØπwebserviceÊúâ‰∫ÜÈªòËÆ§ÁöÑÂÆûÁé∞Ôºå‰ΩÜÊòØÂú®Êàë‰ª¨ÂÆûÈôÖÂºÄÂèë‰∏≠‰∏ÄËà¨ËøòÊòØ‰ºö‰ΩøÁî®Ê°ÜÊû∂Êù•ÔºåÊØîÂ¶ÇËøôÈáåÊâÄÊèêÂà∞ÁöÑCXFÂ∞±ÊúâÁùÄÂπøÊ≥õÁöÑÂ∫îÁî®„ÄÇÂ∫üËØùÊàëÂ∞±‰∏çÂ§öËØ¥‰∫ÜÔºåÁõ¥Êé•ËÆ≤SpringÊï¥ÂêàCXFÔºåÊØïÁ´üÁé∞Âú®ÁöÑJavaEEÂºÄÂèëÊòØÁ¶ª‰∏çÂºÄSpring‰∫Ü„ÄÇËØ•È°πÁõÆËøòÊòØÂü∫‰∫é‰πãÂâçÁöÑSSMËøõË°åÂºÄÂèëÁöÑ„ÄÇ Âä†ÂÖ•maven‰æùËµñÁ¨¨‰∏ÄÊ≠•ËÇØÂÆöÊòØË¶ÅÂä†ÂÖ•maven‰æùËµñÔºö12345678910111213141516171819&lt;!--cxf--&gt;&lt;!-- https://mvnrepository.com/artifact/org.apache.cxf/cxf-rt-frontend-jaxws --&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt; &lt;artifactId&gt;cxf-rt-frontend-jaxws&lt;/artifactId&gt; &lt;version&gt;3.1.6&lt;/version&gt;&lt;/dependency&gt;&lt;!-- https://mvnrepository.com/artifact/org.apache.cxf/cxf-core --&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt; &lt;artifactId&gt;cxf-core&lt;/artifactId&gt; &lt;version&gt;3.1.6&lt;/version&gt;&lt;/dependency&gt;&lt;!-- https://mvnrepository.com/artifact/org.apache.cxf/cxf-rt-transports-http --&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt; &lt;artifactId&gt;cxf-rt-transports-http&lt;/artifactId&gt; &lt;version&gt;3.1.6&lt;/version&gt;&lt;/dependency&gt; web.xmlÈÖçÁΩÆÊé•ÁùÄÊàë‰ª¨ÈúÄË¶ÅÈÖçÁΩÆ‰∏Ä‰∏™CXFÁöÑservletÔºö123456789&lt;!--ÂÆö‰πâ‰∏Ä‰∏™cxfÁöÑservlet--&gt;&lt;servlet&gt; &lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt; &lt;servlet-class&gt;org.apache.cxf.transport.servlet.CXFServlet&lt;/servlet-class&gt;&lt;/servlet&gt;&lt;servlet-mapping&gt; &lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt; &lt;url-pattern&gt;/webservice/*&lt;/url-pattern&gt;&lt;/servlet-mapping&gt; ‰πãÂêéÂè™Ë¶ÅÊàë‰ª¨ËÆøÈóÆwebservice/*Ëøô‰∏™Âú∞ÂùÄÂ∞±‰ºöËøõÂÖ•CXFÁöÑservlet‰∏≠„ÄÇ Êï¥ÂêàSpringÈÖçÁΩÆÊé•‰∏ãÊù•ÊòØÊúÄÈáçË¶ÅÁöÑ‰∏ÄÈÉ®ÔºåÁî®SpringÊï¥ÂêàCXFÔºöÂú®Ëøô‰πãÂâçÊàëÊúâÊñ∞Âª∫‰∏Ä‰∏™CXFÁöÑÂåÖÔºåÂ¶Ç‰∏ãÂõæÔºöËøôÈáåÊúâ‰∏§‰∏™‰∏ªË¶ÅÁ±ª HelloWorldÊé•Âè£„ÄÇ ÂÆûÁé∞HelloWorldÊé•Âè£ÁöÑHelloWorldImplÁ±ª„ÄÇ‰ª£Á†ÅÂ¶Ç‰∏ãÔºöHelloWorld.java12345678package com.crossoverJie.cxf;import javax.jws.WebService;@WebServicepublic interface HelloWorld &#123; public String say(String str);&#125; ÂÖ∂‰∏≠Â∞±Âè™ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ÁÆÄÂçïÁöÑsay()ÊñπÊ≥ï„ÄÇHelloWorldImpl.java1234567891011package com.crossoverJie.cxf.impl;import com.crossoverJie.cxf.HelloWorld;import org.springframework.stereotype.Component;import javax.jws.WebService;@Component("helloWorld")@WebServicepublic class HelloWorldImpl implements HelloWorld &#123; public String say(String str) &#123; return "Hello"+str; &#125;&#125; ËøôÈáåÂ∞±ÊòØÂØπsay()ÊñπÊ≥ïÁöÑÁÆÄÂçïÂÆûÁé∞„ÄÇÊé•‰∏ãÊù•Â∞±ÊòØÊï¥ÂêàSpring‰∫ÜÔºåÁî±‰∫éÈúÄË¶Å‰ΩøÁî®Âà∞CXFÁöÑÊ†áÁ≠æÔºåÊâÄ‰ª•Êàë‰ª¨ÈúÄË¶ÅÊ∑ªÂä†È¢ùÂ§ñÁöÑÂëΩÂêçË∑ØÂæÑÂ¶Ç‰∏ãÔºö 1234567891011121314151617181920212223242526&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p" xmlns:aop="http://www.springframework.org/schema/aop" xmlns:context="http://www.springframework.org/schema/context" xmlns:jee="http://www.springframework.org/schema/jee" xmlns:tx="http://www.springframework.org/schema/tx" xmlns:jaxws="http://cxf.apache.org/jaxws" xsi:schemaLocation=" http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-4.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd"&gt; &lt;import resource="classpath:META-INF/cxf/cxf.xml"/&gt; &lt;import resource="classpath:META-INF/cxf/cxf-servlet.xml"/&gt; &lt;!-- Ëá™Âä®Êâ´ÊèèwebService --&gt; &lt;context:component-scan base-package="com.crossoverJie.cxf" /&gt; &lt;!-- ÂÆö‰πâwebserviceÁöÑÂèëÂ∏ÉÊé•Âè£ --&gt; &lt;jaxws:endpoint implementor="#helloWorld" address="/HelloWorld"&lt;/beans&gt; Êõ¥Âä†ÂÖ∑‰ΩìÁöÑÈÖçÁΩÆÂèØ‰ª•Êü•ÁúãÂÆòÊñπÁªôÂá∫ÁöÑÊñáÊ°£:http://cxf.apache.org/docs/how-do-i-develop-a-service.html„ÄÇ#helloWorldÊåáÁöÑÊòØÊàë‰ª¨Âú®HelloWorldImplÁ±ª‰∏≠ÊâÄËá™ÂÆö‰πâÁöÑÂêçÂ≠óÔºå/HelloWorldÂàôÊòØÊàë‰ª¨ÈúÄË¶ÅËÆøÈóÆÁöÑÂú∞ÂùÄ„ÄÇ‰πãÂêéÊàë‰ª¨ËøêË°åÈ°πÁõÆËæìÂÖ•ËØ•Âú∞ÂùÄÔºöhttp://127.0.0.1:8080/ssm/webservice/HelloWorld?wsdlÂ¶ÇÊûúÂá∫Áé∞Â¶Ç‰∏ãÁïåÈù¢ÔºöÂàôËØ¥ÊòéÊàë‰ª¨ÁöÑwebserviceÂèëÂ∏ÉÊàêÂäü‰∫Ü„ÄÇÊé•‰∏ãÊù•Âè™ÈúÄË¶ÅÈÄöËøáÂÆ¢Êà∑Á´ØË∞ÉÁî®Ëøô‰∏™Êé•Âè£Âç≥ÂèØËé∑ÂæóËøîÂõûÁªìÊûú‰∫Ü„ÄÇ ÊÄªÁªì‰ª•‰∏äÂ∞±ÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑwebserviceÂÖ•Èó®ÂÆû‰æãÔºåÊõ¥Â§öÁöÑÂÖ≥‰∫éCXFÊã¶Êà™Âô®ÔºåÂÆ¢Êà∑Á´ØË∞ÉÁî®Â∞±Ê≤°ÊúâÂÅöËøáÂ§ö‰ªãÁªçÔºåÂêéÁª≠ÊúâÊó∂Èó¥ÁöÑËØùÂÜçÊé•ÁùÄÊõ¥Êñ∞„ÄÇ È°πÁõÆÂú∞ÂùÄÔºöhttps://github.com/crossoverJie/SSM.git‰∏™‰∫∫ÂçöÂÆ¢Âú∞ÂùÄÔºöhttp://crossoverjie.top„ÄÇGitHubÂú∞ÂùÄÔºöhttps://github.com/crossoverJie„ÄÇ]]></content>
      <categories>
        <category>SSM</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>IDEA</tag>
        <tag>CXF</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SSM(‰∏â)Shiro‰ΩøÁî®ËØ¶Ëß£]]></title>
    <url>%2F2016%2F07%2F15%2FSSM3%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄÁõ∏ÊØîÊúâÂÅöËøá‰ºÅ‰∏öÁ∫ßÂºÄÂèëÁöÑÁ´•ÈûãÂ∫îËØ•ÈÉΩÊúâÂÅöËøáÊùÉÈôêÂÆâÂÖ®‰πãÁ±ªÁöÑÂäüËÉΩÂêßÔºåÊúÄÂÖàÂºÄÂßãÊàëÈááÁî®ÁöÑÊòØÂª∫Áî®Êà∑Ë°®,ËßíËâ≤Ë°®,ÊùÉÈôêË°®Ôºå‰πãÂêéÂú®Êã¶Êà™Âô®‰∏≠ÂØπÊØè‰∏Ä‰∏™ËØ∑Ê±ÇËøõË°åÊã¶Êà™ÔºåÂÜçÂà∞Êï∞ÊçÆÂ∫ì‰∏≠ËøõË°åÊü•ËØ¢ÁúãÂΩìÂâçÁî®Êà∑ÊòØÂê¶ÊúâËØ•ÊùÉÈôêÔºåËøôÊ†∑ÁöÑËÆæËÆ°ËÉΩÊª°Ë∂≥Â§ßÂ§öÊï∞‰∏≠Â∞èÂûãÁ≥ªÁªüÁöÑÈúÄÊ±Ç„ÄÇ‰∏çËøáËøôÁØáÊâÄ‰ªãÁªçÁöÑShiroËÉΩÊª°Ë∂≥‰πãÂâçÁöÑÊâÄÊúâÈúÄÊ±ÇÔºåÂπ∂‰∏î‰ΩøÁî®ÁÆÄÂçïÔºåÂÆâÂÖ®ÊÄßÈ´òÔºåËÄå‰∏îÁé∞Âú®Ë∂äÊù•Ë∂äÁöÑÂ§ö‰ºÅ‰∏öÈÉΩÂú®‰ΩøÁî®ShiroÔºåËøôÂ∫îËØ•ÊòØ‰∏Ä‰∏™Êî∂ÂÖ•ÁöÑ‰Ω†ÁöÑÊäÄËÉΩÂ∫ì„ÄÇ ÂàõÂª∫Ëá™ÂÆö‰πâMyRealmÁ±ªÊúâÂÖ≥ShiroÁöÑÂü∫Á°ÄÁü•ËØÜÊàëËøôÈáåÂ∞±‰∏çËøáÂ§ö‰ªãÁªç‰∫ÜÔºåÁõ¥Êé•Êù•Âπ≤Ë¥ßÔºåÂà∞ÊúÄÂêé‰ºöÊï¥ÂêàSpringÊù•ËøõË°åÊùÉÈôêÈ™åËØÅ„ÄÇÈ¶ñÂÖàÂú®‰ΩøÁî®ShiroÁöÑÊó∂ÂÄôÊàë‰ª¨Ë¶ÅËÄÉËôëÂú®‰ªÄ‰πàÊ†∑ÁöÑÁéØÂ¢É‰∏ã‰ΩøÁî®Ôºö ÁôªÂΩïÁöÑÈ™åËØÅ ÂØπÊåáÂÆöËßíËâ≤ÁöÑÈ™åËØÅ ÂØπURLÁöÑÈ™åËØÅ Âü∫Êú¨‰∏äÊàë‰ª¨‰πüÂ∞±Ëøô‰∏â‰∏™ÈúÄÊ±ÇÔºåÊâÄ‰ª•ÂêåÊó∂Êàë‰ª¨‰πüÈúÄË¶Å‰∏â‰∏™ÊñπÊ≥ïÔºö findUserByUserName(String username)Ê†πÊçÆusernameÊü•ËØ¢Áî®Êà∑Ôºå‰πãÂêéShiro‰ºöÊ†πÊçÆÊü•ËØ¢Âá∫Êù•ÁöÑUserÁöÑÂØÜÁ†ÅÊù•ÂíåÊèê‰∫§‰∏äÊù•ÁöÑÂØÜÁ†ÅËøõË°åÊØîÂØπ„ÄÇ findRoles(String username)Ê†πÊçÆusernameÊü•ËØ¢ËØ•Áî®Êà∑ÁöÑÊâÄÊúâËßíËâ≤ÔºåÁî®‰∫éËßíËâ≤È™åËØÅ„ÄÇ findPermissions(String username)Ê†πÊçÆusernameÊü•ËØ¢‰ªñÊâÄÊã•ÊúâÁöÑÊùÉÈôê‰ø°ÊÅØÔºåÁî®‰∫éÊùÉÈôêÂà§Êñ≠„ÄÇ ‰∏ãÈù¢ÊàëË¥¥‰∏Ä‰∏ãÊàëÁöÑmapper‰ª£Á†Å(PS:ËØ•È°πÁõÆ‰æùÁÑ∂ÊòØÂü∫‰∫é‰πãÂâçÁöÑSSMÔºå‰∏çÂ§™Ê∏ÖÊ•öÊï¥ÂêàÁöÑËØ∑ÁúãSSM‰∏Ä)„ÄÇ123456789101112131415161718192021222324252627&lt;?xml version="1.0" encoding="UTF-8" ?&gt;&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" &gt;&lt;mapper namespace="com.crossoverJie.dao.T_userDao" &gt; &lt;resultMap id="BaseResultMap" type="com.crossoverJie.pojo.T_user" &gt; &lt;result property="id" column="id"/&gt; &lt;result property="userName" column="userName"/&gt; &lt;result property="password" column="password"/&gt; &lt;result property="roleId" column="roleId"/&gt; &lt;/resultMap&gt; &lt;sql id="Base_Column_List" &gt; id, username, password,roleId &lt;/sql&gt; &lt;select id="findUserByUsername" parameterType="String" resultMap="BaseResultMap"&gt; select &lt;include refid="Base_Column_List"/&gt; from t_user where userName=#&#123;userName&#125; &lt;/select&gt; &lt;select id="findRoles" parameterType="String" resultType="String"&gt; select r.roleName from t_user u,t_role r where u.roleId=r.id and u.userName=#&#123;userName&#125; &lt;/select&gt; &lt;select id="findPermissions" parameterType="String" resultType="String"&gt; select p.permissionName from t_user u,t_role r,t_permission p where u.roleId=r.id and p.roleId=r.id and u.userName=#&#123;userName&#125; &lt;/select&gt;&lt;/mapper&gt; ÂæàÁÆÄÂçïÂè™Êúâ‰∏â‰∏™ÊñπÊ≥ïÔºåÂàÜÂà´ÂØπÂ∫î‰∏äÈù¢ÊâÄËØ¥ÁöÑ‰∏â‰∏™ÊñπÊ≥ï„ÄÇÂØπsqlÁ®çÂæÆÁÜüÊÇâÁÇπÁöÑÁ´•ÈûãÂ∫îËØ•ÈÉΩËÉΩÁúãÊáÇÔºå‰∏çÂ§™Ê∏ÖÊ•öÂ∞±Êã∑Âà∞Êï∞ÊçÆÂ∫ì‰∏≠ÊâßË°å‰∏Ä‰∏ãÂ∞±Ë°å‰∫ÜÔºåÊï∞ÊçÆÂ∫ìÁöÑSql‰πüÂú®ÊàëÁöÑgithub‰∏ä„ÄÇÂÆû‰ΩìÁ±ªÂ∞±ÊØîËæÉÁÆÄÂçï‰∫ÜÔºåÂ∞±Âè™ÊúâÂõõ‰∏™Â≠óÊÆµ‰ª•Âèäget,setÊñπÊ≥ï„ÄÇÊàëÂ∞±ËøôÈáåÂ∞±‰∏çË¥¥‰∫ÜÔºåÂÖ∑‰ΩìÂèØ‰ª•Âéªgithub‰∏äforkÊàëÁöÑÊ∫êÁ†Å„ÄÇ Áé∞Âú®Â∞±ÈúÄË¶ÅÂàõÂª∫Ëá™ÂÆö‰πâÁöÑMyRealmÁ±ªÔºåËøô‰∏™ËøòÊòØÊØîËæÉÈáçË¶ÅÁöÑ„ÄÇÁªßÊâøËá≥ShiroÁöÑAuthorizingRealmÁ±ªÔºåÁî®‰∫éÂ§ÑÁêÜËá™Â∑±ÁöÑÈ™åËØÅÈÄªËæëÔºå‰∏ãÈù¢Ë¥¥‰∏Ä‰∏ãÊàëÁöÑ‰ª£Á†ÅÔºö12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364package com.crossoverJie.shiro;import com.crossoverJie.pojo.T_user;import com.crossoverJie.service.T_userService;import org.apache.shiro.authc.AuthenticationException;import org.apache.shiro.authc.AuthenticationInfo;import org.apache.shiro.authc.AuthenticationToken;import org.apache.shiro.authc.SimpleAuthenticationInfo;import org.apache.shiro.authz.AuthorizationInfo;import org.apache.shiro.authz.SimpleAuthorizationInfo;import org.apache.shiro.realm.AuthorizingRealm;import org.apache.shiro.subject.PrincipalCollection;import javax.annotation.Resource;import java.util.Set;/** * Created with IDEA * Created by $&#123;jie.chen&#125; on 2016/7/14. * ShiroËá™ÂÆö‰πâÂüü */public class MyRealm extends AuthorizingRealm &#123; @Resource private T_userService t_userService; /** * Áî®‰∫éÁöÑÊùÉÈôêÁöÑËÆ§ËØÅ„ÄÇ * @param principalCollection * @return */ @Override protected AuthorizationInfo doGetAuthorizationInfo(PrincipalCollection principalCollection) &#123; String username = principalCollection.getPrimaryPrincipal().toString() ; SimpleAuthorizationInfo info = new SimpleAuthorizationInfo() ; Set&lt;String&gt; roleName = t_userService.findRoles(username) ; Set&lt;String&gt; permissions = t_userService.findPermissions(username) ; info.setRoles(roleName); info.setStringPermissions(permissions); return info; &#125; /** * È¶ñÂÖàÊâßË°åËøô‰∏™ÁôªÂΩïÈ™åËØÅ * @param token * @return * @throws AuthenticationException */ @Override protected AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken token) throws AuthenticationException &#123; //Ëé∑ÂèñÁî®Êà∑Ë¥¶Âè∑ String username = token.getPrincipal().toString() ; T_user user = t_userService.findUserByUsername(username) ; if (user != null)&#123; //Â∞ÜÊü•ËØ¢Âà∞ÁöÑÁî®Êà∑Ë¥¶Âè∑ÂíåÂØÜÁ†ÅÂ≠òÊîæÂà∞ authenticationInfoÁî®‰∫éÂêéÈù¢ÁöÑÊùÉÈôêÂà§Êñ≠„ÄÇÁ¨¨‰∏â‰∏™ÂèÇÊï∞Èöè‰æøÊîæ‰∏Ä‰∏™Â∞±Ë°å‰∫Ü„ÄÇ AuthenticationInfo authenticationInfo = new SimpleAuthenticationInfo(user.getUserName(),user.getPassword(), "a") ; return authenticationInfo ; &#125;else&#123; return null ; &#125; &#125;&#125; ÁªßÊâøAuthorizingRealmÁ±ª‰πãÂêéÂ∞±ÈúÄË¶ÅË¶ÜÂÜôÂÆÉÁöÑ‰∏§‰∏™ÊñπÊ≥ïÔºådoGetAuthorizationInfo,doGetAuthenticationInfoÔºåËøô‰∏§‰∏™ÊñπÊ≥ïÁöÑ‰ΩúÁî®ÊàëÈÉΩÊúâÂÜôÊ≥®ÈáäÔºåÈÄªËæë‰πüÊØîËæÉÁÆÄÂçï„ÄÇdoGetAuthenticationInfoÊòØÁî®‰∫éÁôªÂΩïÈ™åËØÅÁöÑÔºåÂú®ÁôªÂΩïÁöÑÊó∂ÂÄôÈúÄË¶ÅÂ∞ÜÊï∞ÊçÆÂ∞ÅË£ÖÂà∞ShiroÁöÑ‰∏Ä‰∏™token‰∏≠ÔºåÊâßË°åshiroÁöÑlogin()ÊñπÊ≥ïÔºå‰πãÂêéÂè™Ë¶ÅÊàë‰ª¨Â∞ÜMyRealmËøô‰∏™Á±ªÈÖçÁΩÆÂà∞Spring‰∏≠ÔºåÁôªÂΩïÁöÑÊó∂ÂÄôShiroÂ∞±‰ºöËá™Âä®ÁöÑË∞ÉÁî®doGetAuthenticationInfo()ÊñπÊ≥ïËøõË°åÈ™åËØÅ„ÄÇÂì¶ÂØπ‰∫ÜÔºåÂøò‰∫ÜË¥¥‰∏ãÁôªÂΩïÁöÑController‰∫ÜÔºö12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455package com.crossoverJie.controller;import com.crossoverJie.pojo.T_user;import com.crossoverJie.service.T_userService;import org.apache.shiro.SecurityUtils;import org.apache.shiro.authc.UsernamePasswordToken;import org.apache.shiro.subject.Subject;import org.springframework.stereotype.Controller;import org.springframework.ui.Model;import org.springframework.web.bind.annotation.RequestMapping;import javax.annotation.Resource;/** * Created with IDEA * Created by $&#123;jie.chen&#125; on 2016/7/14. * ÂêéÂè∞Controller */@Controller@RequestMapping("/")public class T_userController &#123; @Resource private T_userService t_userService ; @RequestMapping("/loginAdmin") public String login(T_user user, Model model)&#123; Subject subject = SecurityUtils.getSubject() ; UsernamePasswordToken token = new UsernamePasswordToken(user.getUserName(),user.getPassword()) ; try &#123; subject.login(token); return "admin" ; &#125;catch (Exception e)&#123; //ËøôÈáåÂ∞ÜÂºÇÂ∏∏ÊâìÂç∞ÂÖ≥Èó≠ÊòØÂõ†‰∏∫Â¶ÇÊûúÁôªÂΩïÂ§±Ë¥•ÁöÑËØù‰ºöËá™Âä®ÊäõÂºÇÂ∏∏// e.printStackTrace(); model.addAttribute("error","Áî®Êà∑ÂêçÊàñÂØÜÁ†ÅÈîôËØØ") ; return "../../login" ; &#125; &#125; @RequestMapping("/admin") public String admin()&#123; return "admin"; &#125; @RequestMapping("/student") public String student()&#123; return "admin" ; &#125; @RequestMapping("/teacher") public String teacher()&#123; return "admin" ; &#125;&#125; ‰∏ªË¶ÅÂ∞±ÊòØlogin()ÊñπÊ≥ï„ÄÇÈÄªËæëÊØîËæÉÁÆÄÂçïÔºåÂè™ÊòØÁôªÂΩïÈ™åËØÅÁöÑÊó∂ÂÄô‰∏çÊòØÂÉè‰πãÂâçÈÇ£Ê†∑Áõ¥Êé•Êü•ËØ¢Êï∞ÊçÆÂ∫ìÁÑ∂ÂêéËøîÂõûÊòØÂê¶ÊúâÁî®Êà∑‰∫ÜÔºåËÄåÊòØË∞ÉÁî®subjectÁöÑlogin()ÊñπÊ≥ï,Â∞±ÊòØÊàë‰∏äÈù¢ÊèêÂà∞ÁöÑÔºåË∞ÉÁî®login()ÊñπÊ≥ïÊó∂Shiro‰ºöËá™Âä®Ë∞ÉÁî®Êàë‰ª¨Ëá™ÂÆö‰πâÁöÑMyRealmÁ±ª‰∏≠ÁöÑdoGetAuthenticationInfo()ÊñπÊ≥ïËøõË°åÈ™åËØÅÁöÑÔºåÈ™åËØÅÈÄªËæëÊòØÂÖàÊ†πÊçÆÁî®Êà∑ÂêçÊü•ËØ¢Áî®Êà∑ÔºåÂ¶ÇÊûúÊü•ËØ¢Âà∞ÁöÑËØùÂÜçÂ∞ÜÊü•ËØ¢Âà∞ÁöÑÁî®Êà∑ÂêçÂíåÂØÜÁ†ÅÊîæÂà∞SimpleAuthenticationInfoÂØπË±°‰∏≠ÔºåShiro‰ºöËá™Âä®Ê†πÊçÆÁî®Êà∑ËæìÂÖ•ÁöÑÂØÜÁ†ÅÂíåÊü•ËØ¢Âà∞ÁöÑÂØÜÁ†ÅËøõË°åÂåπÈÖçÔºåÂ¶ÇÊûúÂåπÈÖç‰∏ç‰∏äÂ∞±‰ºöÊäõÂá∫ÂºÇÂ∏∏ÔºåÂåπÈÖç‰∏ä‰πãÂêéÂ∞±‰ºöÊâßË°ådoGetAuthorizationInfo()ËøõË°åÁõ∏Â∫îÁöÑÊùÉÈôêÈ™åËØÅ„ÄÇdoGetAuthorizationInfo()ÊñπÊ≥ïÁöÑÂ§ÑÁêÜÈÄªËæë‰πüÊØîËæÉÁÆÄÂçïÔºåÊ†πÊçÆÁî®Êà∑ÂêçËé∑ÂèñÂà∞‰ªñÊâÄÊã•ÊúâÁöÑËßíËâ≤‰ª•ÂèäÊùÉÈôêÔºåÁÑ∂ÂêéËµãÂÄºÂà∞SimpleAuthorizationInfoÂØπË±°‰∏≠Âç≥ÂèØÔºåShiroÂ∞±‰ºöÊåâÁÖßÊàë‰ª¨ÈÖçÁΩÆÁöÑXXËßíËâ≤ÂØπÂ∫îXXÊùÉÈôêÊù•ËøõË°åÂà§Êñ≠ÔºåËøô‰∏™ÈÖçÁΩÆÂú®‰∏ãÈù¢ÁöÑÊï¥Âêà‰∏≠‰ºöËÆ≤Âà∞„ÄÇ Êï¥ÂêàSpringÊé•‰∏ãÊù•Â∫îËØ•ÊòØÂ§ßÂÆ∂ÊØîËæÉÂÖ≥Á≥ªÁöÑ‰∏ÄÊ≠•ÔºöÊï¥ÂêàSpring„ÄÇÊàëÊòØÂú®‰πãÂâçÁöÑSpring SpringMVC MybatisÁöÑÂü∫Á°Ä‰∏äËøõË°åÊï¥ÂêàÁöÑ„ÄÇ web.xmlÈÖçÁΩÆÈ¶ñÂÖàÊàë‰ª¨ÈúÄË¶ÅÂú®web.xmlËøõË°åÈÖçÁΩÆShiroÁöÑËøáÊª§Âô®„ÄÇÊàëÂè™Ë¥¥ShiroÈÉ®ÂàÜÁöÑÔºåÂÖ∂‰ΩôÁöÑÂíå‰πãÂâçÈÖçÁΩÆÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ1234567891011121314&lt;!-- shiroËøáÊª§Âô®ÂÆö‰πâ --&gt;&lt;filter&gt; &lt;filter-name&gt;shiroFilter&lt;/filter-name&gt; &lt;filter-class&gt;org.springframework.web.filter.DelegatingFilterProxy&lt;/filter-class&gt; &lt;init-param&gt; &lt;!-- ËØ•ÂÄºÁº∫ÁúÅ‰∏∫false,Ë°®Á§∫ÁîüÂëΩÂë®ÊúüÁî±SpringApplicationContextÁÆ°ÁêÜ,ËÆæÁΩÆ‰∏∫trueÂàôË°®Á§∫Áî±ServletContainerÁÆ°ÁêÜ --&gt; &lt;param-name&gt;targetFilterLifecycle&lt;/param-name&gt; &lt;param-value&gt;true&lt;/param-value&gt; &lt;/init-param&gt;&lt;/filter&gt;&lt;filter-mapping&gt; &lt;filter-name&gt;shiroFilter&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt;&lt;/filter-mapping&gt; ÈÖçÁΩÆËøòÊòØÊØîËæÉÁÆÄÂçïÁöÑÔºåËøôÊ†∑‰ºöËøáÊª§ÊâÄÊúâÁöÑËØ∑Ê±Ç„ÄÇ‰πãÂêéÊàë‰ª¨ËøòÈúÄË¶ÅÂú®Spring‰∏≠ÈÖçÁΩÆ‰∏Ä‰∏™shiroFilterÁöÑbean„ÄÇ spring-mybatis.xmlÈÖçÁΩÆÁî±‰∫éËøôÈáåÈÖçÁΩÆËæÉÂ§öÔºåÊàëÂ∞±ÂÖ®ÈÉ®Ë¥¥‰∏Ä‰∏ãÔºö123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd"&gt; &lt;!-- Ëá™Âä®Êâ´Êèè --&gt; &lt;context:component-scan base-package="com.crossoverJie" /&gt; &lt;!-- ÂºïÂÖ•ÈÖçÁΩÆÊñá‰ª∂ --&gt; &lt;bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"&gt; &lt;property name="location" value="classpath:jdbc.properties" /&gt; &lt;/bean&gt; &lt;bean id="dataSource" class="com.alibaba.druid.pool.DruidDataSource" init-method="init" destroy-method="close"&gt; &lt;!-- ÊåáÂÆöËøûÊé•Êï∞ÊçÆÂ∫ìÁöÑÈ©±Âä® --&gt; &lt;property name="driverClassName" value="$&#123;jdbc.driverClass&#125;" /&gt; &lt;property name="url" value="$&#123;jdbc.url&#125;" /&gt; &lt;property name="username" value="$&#123;jdbc.user&#125;" /&gt; &lt;property name="password" value="$&#123;jdbc.password&#125;" /&gt; &lt;!-- ÈÖçÁΩÆÂàùÂßãÂåñÂ§ßÂ∞è„ÄÅÊúÄÂ∞è„ÄÅÊúÄÂ§ß --&gt; &lt;property name="initialSize" value="3" /&gt; &lt;property name="minIdle" value="3" /&gt; &lt;property name="maxActive" value="20" /&gt; &lt;!-- ÈÖçÁΩÆËé∑ÂèñËøûÊé•Á≠âÂæÖË∂ÖÊó∂ÁöÑÊó∂Èó¥ --&gt; &lt;property name="maxWait" value="60000" /&gt; &lt;!-- ÈÖçÁΩÆÈó¥ÈöîÂ§ö‰πÖÊâçËøõË°å‰∏ÄÊ¨°Ê£ÄÊµãÔºåÊ£ÄÊµãÈúÄË¶ÅÂÖ≥Èó≠ÁöÑÁ©∫Èó≤ËøûÊé•ÔºåÂçï‰ΩçÊòØÊØ´Áßí --&gt; &lt;property name="timeBetweenEvictionRunsMillis" value="60000" /&gt; &lt;!-- ÈÖçÁΩÆ‰∏Ä‰∏™ËøûÊé•Âú®Ê±†‰∏≠ÊúÄÂ∞èÁîüÂ≠òÁöÑÊó∂Èó¥ÔºåÂçï‰ΩçÊòØÊØ´Áßí --&gt; &lt;property name="minEvictableIdleTimeMillis" value="300000" /&gt; &lt;property name="validationQuery" value="SELECT 'x'" /&gt; &lt;property name="testWhileIdle" value="true" /&gt; &lt;property name="testOnBorrow" value="false" /&gt; &lt;property name="testOnReturn" value="false" /&gt; &lt;!-- ÊâìÂºÄPSCacheÔºåÂπ∂‰∏îÊåáÂÆöÊØè‰∏™ËøûÊé•‰∏äPSCacheÁöÑÂ§ßÂ∞è --&gt; &lt;property name="poolPreparedStatements" value="true" /&gt; &lt;property name="maxPoolPreparedStatementPerConnectionSize" value="20" /&gt; &lt;!-- ÈÖçÁΩÆÁõëÊéßÁªüËÆ°Êã¶Êà™ÁöÑfiltersÔºåÂéªÊéâÂêéÁõëÊéßÁïåÈù¢sqlÊó†Ê≥ïÁªüËÆ° --&gt; &lt;property name="filters" value="stat" /&gt; &lt;/bean&gt; &lt;!-- springÂíåMyBatisÂÆåÁæéÊï¥ÂêàÔºå‰∏çÈúÄË¶ÅmybatisÁöÑÈÖçÁΩÆÊò†Â∞ÑÊñá‰ª∂ --&gt; &lt;bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean"&gt; &lt;property name="dataSource" ref="dataSource" /&gt; &lt;!-- Ëá™Âä®Êâ´Êèèmapping.xmlÊñá‰ª∂ --&gt; &lt;property name="mapperLocations" value="classpath:mapping/*.xml"&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!-- DAOÊé•Âè£ÊâÄÂú®ÂåÖÂêçÔºåSpring‰ºöËá™Âä®Êü•ÊâæÂÖ∂‰∏ãÁöÑÁ±ª --&gt; &lt;bean class="org.mybatis.spring.mapper.MapperScannerConfigurer"&gt; &lt;property name="basePackage" value="com.crossoverJie.dao" /&gt; &lt;property name="sqlSessionFactoryBeanName" value="sqlSessionFactory"&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!-- (‰∫ãÂä°ÁÆ°ÁêÜ)transaction manager, use JtaTransactionManager for global tx --&gt; &lt;bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt; &lt;property name="dataSource" ref="dataSource" /&gt; &lt;/bean&gt; &lt;!-- ÈÖçÁΩÆËá™ÂÆö‰πâRealm --&gt; &lt;bean id="myRealm" class="com.crossoverJie.shiro.MyRealm"/&gt; &lt;!-- ÂÆâÂÖ®ÁÆ°ÁêÜÂô® --&gt; &lt;bean id="securityManager" class="org.apache.shiro.web.mgt.DefaultWebSecurityManager"&gt; &lt;property name="realm" ref="myRealm"/&gt; &lt;/bean&gt; &lt;!-- ShiroËøáÊª§Âô® Ê†∏ÂøÉ--&gt; &lt;bean id="shiroFilter" class="org.apache.shiro.spring.web.ShiroFilterFactoryBean"&gt; &lt;!-- ShiroÁöÑÊ†∏ÂøÉÂÆâÂÖ®Êé•Âè£,Ëøô‰∏™Â±ûÊÄßÊòØÂøÖÈ°ªÁöÑ --&gt; &lt;property name="securityManager" ref="securityManager"/&gt; &lt;!-- Ë∫´‰ªΩËÆ§ËØÅÂ§±Ë¥•ÔºåÂàôË∑≥ËΩ¨Âà∞ÁôªÂΩïÈ°µÈù¢ÁöÑÈÖçÁΩÆ --&gt; &lt;property name="loginUrl" value="/login.jsp"/&gt; &lt;!-- ÊùÉÈôêËÆ§ËØÅÂ§±Ë¥•ÔºåÂàôË∑≥ËΩ¨Âà∞ÊåáÂÆöÈ°µÈù¢ --&gt; &lt;property name="unauthorizedUrl" value="/nopower.jsp"/&gt; &lt;!-- ShiroËøûÊé•Á∫¶ÊùüÈÖçÁΩÆ,Âç≥ËøáÊª§ÈìæÁöÑÂÆö‰πâ --&gt; &lt;property name="filterChainDefinitions"&gt; &lt;value&gt; &lt;!--anon Ë°®Á§∫ÂåøÂêçËÆøÈóÆÔºå‰∏çÈúÄË¶ÅËÆ§ËØÅ‰ª•ÂèäÊéàÊùÉ--&gt; /loginAdmin=anon &lt;!--authcË°®Á§∫ÈúÄË¶ÅËÆ§ËØÅ Ê≤°ÊúâËøõË°åË∫´‰ªΩËÆ§ËØÅÊòØ‰∏çËÉΩËøõË°åËÆøÈóÆÁöÑ--&gt; /admin*=authc /student=roles[teacher] /teacher=perms["user:create"] &lt;/value&gt; &lt;/property&gt; &lt;/bean&gt; &lt;!-- ‰øùËØÅÂÆûÁé∞‰∫ÜShiroÂÜÖÈÉ®lifecycleÂáΩÊï∞ÁöÑbeanÊâßË°å --&gt; &lt;bean id="lifecycleBeanPostProcessor" class="org.apache.shiro.spring.LifecycleBeanPostProcessor"/&gt; &lt;!-- ÂºÄÂêØShiroÊ≥®Ëß£ --&gt; &lt;bean class="org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator" depends-on="lifecycleBeanPostProcessor"/&gt; &lt;bean class="org.apache.shiro.spring.security.interceptor.AuthorizationAttributeSourceAdvisor"&gt; &lt;property name="securityManager" ref="securityManager"/&gt; &lt;/bean&gt;&lt;/beans&gt; Âú®ËøôÈáåÊàë‰ª¨ÈÖçÁΩÆ‰∫Ü‰∏äÊñá‰∏≠ÊâÄÊèêÂà∞ÁöÑËá™ÂÆö‰πâmyRealm,ËøôÊ†∑ShiroÂ∞±ÂèØ‰ª•ÊåâÁÖßÊàë‰ª¨Ëá™ÂÆö‰πâÁöÑÈÄªËæëÊù•ËøõË°åÊùÉÈôêÈ™åËØÅ‰∫Ü„ÄÇÂÖ∂‰ΩôÁöÑÈÉΩÊØîËæÉÁÆÄÂçïÔºåÁúãÊ≥®ÈáäÂ∫îËØ•ÈÉΩËÉΩÊòéÁôΩ„ÄÇÁùÄÈáçËÆ≤Ëß£‰∏Ä‰∏ãÔºö12345678910111213&lt;property name="filterChainDefinitions"&gt; &lt;value&gt; &lt;!--anon Ë°®Á§∫ÂåøÂêçËÆøÈóÆÔºå‰∏çÈúÄË¶ÅËÆ§ËØÅ‰ª•ÂèäÊéàÊùÉ--&gt; /loginAdmin=anon &lt;!--authcË°®Á§∫ÈúÄË¶ÅËÆ§ËØÅ Ê≤°ÊúâËøõË°åË∫´‰ªΩËÆ§ËØÅÊòØ‰∏çËÉΩËøõË°åËÆøÈóÆÁöÑ--&gt; /admin*=authc /student=roles[teacher] /teacher=perms["user:create"] &lt;/value&gt;&lt;/property&gt; /loginAdmin=anonÁöÑÊÑèÊÄùÁöÑÊÑèÊÄùÊòØÔºåÂèëËµ∑/loginAdminËøô‰∏™ËØ∑Ê±ÇÊòØ‰∏çÈúÄË¶ÅËøõË°åË∫´‰ªΩËÆ§ËØÅÁöÑÔºåËøô‰∏™ËØ∑Ê±ÇÂú®ËøôÊ¨°È°πÁõÆ‰∏≠ÊòØ‰∏Ä‰∏™ÁôªÂΩïËØ∑Ê±ÇÔºå‰∏ÄËà¨ÂØπ‰∫éËøôÊ†∑ÁöÑËØ∑Ê±ÇÈÉΩÊòØ‰∏çÈúÄË¶ÅË∫´‰ªΩËÆ§ËØÅÁöÑ„ÄÇ /admin*=authcË°®Á§∫ /admin,/admin1,/admin2ËøôÊ†∑ÁöÑËØ∑Ê±ÇÈÉΩÊòØÈúÄË¶ÅËøõË°åË∫´‰ªΩËÆ§ËØÅÁöÑÔºå‰∏çÁÑ∂ÊòØ‰∏çËÉΩËÆøÈóÆÁöÑ„ÄÇ /student=roles[teacher]Ë°®Á§∫ËÆøÈóÆ/studentËØ∑Ê±ÇÁöÑÁî®Êà∑ÂøÖÈ°ªÊòØteacherËßíËâ≤Ôºå‰∏çÁÑ∂ÊòØ‰∏çËÉΩËøõË°åËÆøÈóÆÁöÑ„ÄÇ /teacher=perms[‚Äúuser:create‚Äù]Ë°®Á§∫ËÆøÈóÆ/teacherËØ∑Ê±ÇÊòØÈúÄË¶ÅÂΩìÂâçÁî®Êà∑ÂÖ∑Êúâuser:createÊùÉÈôêÊâçËÉΩËøõË°åËÆøÈóÆÁöÑ„ÄÇÊõ¥Â§öÁõ∏ÂÖ≥ÊùÉÈôêËøáÊª§ÁöÑËµÑÊñôÂèØ‰ª•ËÆøÈóÆshiroÁöÑÂÆòÊñπ‰ªãÁªçÔºö‰º†ÈÄÅÈó® ‰ΩøÁî®ShiroÊ†áÁ≠æÂ∫ìShiroËøòÊúâÁùÄÂº∫Â§ßÊ†áÁ≠æÂ∫ìÔºåÂèØ‰ª•Âú®ÂâçÁ´ØÂ∏ÆÊàëËé∑Âèñ‰ø°ÊÅØÂíåÂÅöÂà§Êñ≠„ÄÇÊàëË¥¥‰∏Ä‰∏ãÊàëËøôÈáåÁôªÂΩïÂÆåÊàê‰πãÂêéÊòæÁ§∫ÁöÑÁïåÈù¢Ôºö12345678910111213141516171819202122232425&lt;%-- Created by IntelliJ IDEA. User: Administrator Date: 2016/7/14 Time: 13:17 To change this template use File | Settings | File Templates.--%&gt;&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;&lt;%@ taglib prefix="shiro" uri="http://shiro.apache.org/tags" %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;ÂêéÂè∞&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;shiro:hasRole name="admin"&gt; ËøôÊòØadminËßíËâ≤ÁôªÂΩïÔºö&lt;shiro:principal&gt;&lt;/shiro:principal&gt;&lt;/shiro:hasRole&gt;&lt;shiro:hasPermission name="user:create"&gt; Êúâuser:createÊùÉÈôê‰ø°ÊÅØ&lt;/shiro:hasPermission&gt;&lt;br&gt;ÁôªÂΩïÊàêÂäü&lt;/body&gt;&lt;/html&gt; Ë¶ÅÊÉ≥‰ΩøÁî®ShiroÊ†áÁ≠æÔºåÂè™ÈúÄË¶ÅÂºïÂÖ•‰∏Ä‰∏ãÊ†áÁ≠æÂç≥ÂèØÔºö&lt;%@ taglib prefix=&quot;shiro&quot; uri=&quot;http://shiro.apache.org/tags&quot; %&gt;ÂÖ∂ÂÆûËã±ËØ≠Á®çÂæÆÂ•ΩÁÇπÁöÑÁ´•ÈûãÂ∫îËØ•ÈÉΩËÉΩÁúãÊáÇ„ÄÇ‰∏ãÈù¢ÊàëÂ§ßÊ¶Ç‰ªãÁªç‰∏ã‰∏Ä‰∫õÊ†áÁ≠æÁöÑÁî®Ê≥ïÔºö ÂÖ∑ÊúâadminËßíËâ≤Êâç‰ºöÊòæÁ§∫Ê†áÁ≠æÂÜÖÁöÑ‰ø°ÊÅØ„ÄÇ Ëé∑ÂèñÁî®Êà∑‰ø°ÊÅØ„ÄÇÈªòËÆ§Ë∞ÉÁî®Subject.getPrincipal()Ëé∑ÂèñÔºåÂç≥ Primary Principal„ÄÇ Áî®Êà∑Êã•Êúâuser:createËøô‰∏™ÊùÉÈôêÊâçÂõûÊòæÁ§∫Ê†áÁ≠æÂÜÖÁöÑ‰ø°ÊÅØ„ÄÇÊõ¥Â§öÁöÑÊ†áÁ≠æÂèØ‰ª•Êü•ÁúãÂÆòÁΩëÔºö‰º†ÈÄÅÈó® Êï¥‰ΩìÊµãËØï ËøôÊòØÊàëÁöÑÊµãËØïÊï∞ÊçÆ„ÄÇÈ¶ñÂÖàÊù•È™åËØÅ‰∏Ä‰∏ãÁôªÂΩïÔºöÂÖàËæìÂÖ•‰∏Ä‰∏™ÈîôËØØÁöÑË¥¶Âè∑ÂíåÂØÜÁ†ÅÔºö Êé•‰∏ãÊù•ËæìÂÖ•‰∏Ä‰∏™Ê≠£Á°ÆÁöÑÔºö ÂèØ‰ª•ÁúãÂà∞ÊàëÁôªÂΩïÁöÑÁî®Êà∑ÊòØcrossoverJie‰ªñÊòØÊúâadminÁöÑËßíËâ≤ÔºåÂπ∂‰∏îÊã•Êúâuser:*(ps:Á≥ªÁªüÊï∞ÊçÆËØ¶ËßÅ‰∏äÈù¢ÁöÑÊï∞ÊçÆÂ∫ìÊà™Âõæ)ÁöÑÊùÉÈôêÔºåÊâÄ‰ª•Âú®ËøôÈáåÔºö 123456&lt;shiro:hasRole name="admin"&gt; ËøôÊòØadminËßíËâ≤ÁôªÂΩïÔºö&lt;shiro:principal&gt;&lt;/shiro:principal&gt;&lt;/shiro:hasRole&gt;&lt;shiro:hasPermission name="user:create"&gt; Êúâuser:createÊùÉÈôê‰ø°ÊÅØ&lt;/shiro:hasPermission&gt; ÊòØËÉΩÊòæÁ§∫Âá∫Ê†áÁ≠æÂÜÖÁöÑ‰ø°ÊÅØÔºåÂπ∂ÊääÁî®Êà∑‰ø°ÊÅØ‰πüÊòæÁ§∫Âá∫Êù•‰∫Ü„ÄÇÊé•ÁùÄÊàë‰ª¨Êù•ËÆøÈóÆ‰∏Ä‰∏ã/studentËøô‰∏™ËØ∑Ê±ÇÔºåÂõ†‰∏∫Âú®SpringÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏≠Ôºö 12345678910111213&lt;property name="filterChainDefinitions"&gt; &lt;value&gt; &lt;!--anon Ë°®Á§∫ÂåøÂêçËÆøÈóÆÔºå‰∏çÈúÄË¶ÅËÆ§ËØÅ‰ª•ÂèäÊéàÊùÉ--&gt; /loginAdmin=anon &lt;!--authcË°®Á§∫ÈúÄË¶ÅËÆ§ËØÅ Ê≤°ÊúâËøõË°åË∫´‰ªΩËÆ§ËØÅÊòØ‰∏çËÉΩËøõË°åËÆøÈóÆÁöÑ--&gt; /admin*=authc /student=roles[teacher] /teacher=perms["user:create"] &lt;/value&gt;&lt;/property&gt; Âè™ÊúâteacherËßíËâ≤ÊâçËÉΩËÆøÈóÆ/studentËøô‰∏™ËØ∑Ê±ÇÁöÑÔºö ÊûúÁÑ∂ÔºåShiroÂÅö‰∫ÜÂÆâÂÖ®ÊéßÂà∂ÊòØ‰∏çËÉΩËøõË°åËÆøÈóÆÁöÑ„ÄÇÁÑ∂ÂêéÊàë‰ª¨Êç¢aaaÁî®Êà∑ÁôªÂΩïÔºå‰ªñÊ≠£Â•ΩÊòØteacherËßíËâ≤ÔºåÁúãËÉΩ‰∏çËÉΩËÆøÈóÆ/student„ÄÇ ÊûúÁÑ∂ÊòØËÉΩËÆøÈóÆÁöÑ„ÄÇÂõ†‰∏∫ÊàëÂú®ÊéßÂà∂Âô®ÈáåËÆøÈóÆ/studentËøîÂõûÁöÑÊòØÂêå‰∏Ä‰∏™ÁïåÈù¢ÊâÄ‰ª•ÁúãÂà∞ÁöÑËøòÊòØËøô‰∏™ÁïåÈù¢„ÄÇ 1234@RequestMapping("/teacher")public String teacher()&#123; return "admin" ;&#125; Âπ∂‰∏îÊ≤°ÊúâÊòæÁ§∫‰πãÂâçShiroÊ†áÁ≠æÂÜÖÁöÑÂÜÖÂÆπ„ÄÇÂÖ∂‰ªñÁöÑÊàëÂ∞±‰∏çÊµã‰∫ÜÔºåÂ§ßÂÆ∂ÂèØ‰ª•Ëá™Â∑±Âú®Êï∞ÊçÆÂ∫ìÈáåÂä†‰∏Ä‰∫õÊï∞ÊçÆÔºåÊàñËÄÖÊòØÊîπ‰∏ãÊã¶Êà™ÁöÑÊùÉÈôêÂ§öËØïËØïÔºåËøôÊ†∑ÂØπShiroÁöÑÁêÜËß£Â∞±‰ºöÊõ¥Âä†Ê∑±Âàª„ÄÇ MD5Âä†ÂØÜShiroËøòÂ∞ÅË£Ö‰∫Ü‰∏Ä‰∏™ÊàëËÆ§‰∏∫ÈùûÂ∏∏‰∏çÈîôÁöÑÂäüËÉΩÔºåÈÇ£Â∞±ÊòØMD5Âä†ÂØÜÔºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 1234567891011121314151617181920package com.crossoverJie.shiro;import org.apache.shiro.crypto.hash.Md5Hash;/** * Created with IDEA * Âü∫‰∫éShiroÁöÑMD5Âä†ÂØÜ * Created by $&#123;jie.chen&#125; on 2016/7/13. */public class MD5Util &#123; public static String md5(String str,String salt)&#123; return new Md5Hash(str,salt).toString() ; &#125; public static void main(String[] args) &#123; String md5 = md5("abc123","crossoverjie") ; System.out.println(md5); &#125;&#125; ‰ª£Á†ÅÈùûÂ∏∏ÁÆÄÂçïÔºåÂè™ÈúÄË¶ÅË∞ÉÁî®Md5Hash(str,salt)ÊñπÊ≥ïÂç≥ÂèØÔºåËøôÈáåÂ§ö‰∫Ü‰∏Ä‰∏™ÂèÇÊï∞ÔºåÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞‰∏çÁî®Â§öËß£ÈáäÔºåÊòØÈúÄË¶ÅÂä†ÂØÜÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇÁ¨¨‰∫å‰∏™ÂèÇÊï∞salt‰∏≠ÊñáÁøªËØëÂè´ÁõêÔºåÂä†ÂØÜÁöÑÊó∂ÂÄôÊàë‰ª¨‰º†‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ËøõÂéªÔºåÂè™Ë¶ÅËøô‰∏™salt‰∏çË¢´Ê≥ÑÈú≤Âá∫ÂéªÔºåÈÇ£ÂéüÂàô‰∏äÂä†ÂØÜ‰πãÂêéÊòØÊó†Ê≥ïË¢´Ëß£ÂØÜÁöÑÔºåÂú®Â≠òÁî®Êà∑ÂØÜÁ†ÅÁöÑÊó∂ÂÄôÂèØ‰ª•‰ΩøÁî®ÔºåÊÑüËßâËøòÊòØÈùûÂ∏∏Â±åÁöÑ„ÄÇ ÊÄªÁªì‰ª•‰∏äÂ∞±ÊòØShiroÂÆûÈôÖ‰ΩøÁî®ÁöÑÊ°à‰æãÔºåÂ∞ÜÁöÑÊØîËæÉÂàùÁï•Ôºå‰ΩÜÊòØÂÖ≥‰∫éShiroÁöÑÊ†∏ÂøÉ‰∏úË•øÈÉΩÂú®ÈáåÈù¢‰∫Ü„ÄÇÂ§ßÂÆ∂ÂèØ‰ª•ÂéªÊàëÁöÑgithub‰∏ä‰∏ãËΩΩÊ∫êÁ†ÅÔºåÂè™Ë¶ÅÊåâÁÖßÊàëÁªôÁöÑÊï∞ÊçÆÂ∫ìÂ∞±Ê≤°ÊúâÈóÆÈ¢òÔºåÈ°πÁõÆË∑ëËµ∑Êù•‰πãÂêéËØïÁùÄÊîπ‰∏ãÈáåÈù¢ÁöÑ‰∏úË•øÂèØ‰ª•Âä†Ê∑±ÂØπShiroÁöÑÁêÜËß£„ÄÇ È°πÁõÆÂú∞ÂùÄÔºöhttps://github.com/crossoverJie/SSM.git‰∏™‰∫∫ÂçöÂÆ¢Âú∞ÂùÄÔºöhttp://crossoverjie.top„ÄÇGitHubÂú∞ÂùÄÔºöhttps://github.com/crossoverJie„ÄÇ]]></content>
      <categories>
        <category>SSM</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>IDEA</tag>
        <tag>Shiro</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SSM(‰∫å)LuceneÂÖ®ÊñáÊ£ÄÁ¥¢]]></title>
    <url>%2F2016%2F07%2F06%2FSSM2%2F</url>
    <content type="text"><![CDATA[ÂâçË®Ä Â§ßÂÆ∂Âπ≥Êó∂ËÇØÂÆöÈÉΩÊúâÁî®ËøáÂÖ®ÊñáÊ£ÄÁ¥¢Â∑•ÂÖ∑ÔºåÊúÄÂ∏∏Áî®ÁöÑÁôæÂ∫¶Ë∞∑Ê≠åÂ∞±ÊòØÂÖ∂‰∏≠ÁöÑÂÖ∏Âûã„ÄÇÂ¶ÇÊûúËá™Â∑±ËÉΩÂ§üÂÅö‰∏Ä‰∏™ÈÇ£ÊòØ‰∏çÊòØÊÉ≥ÊÉ≥Â∞±ÈÄºÊ†ºÊª°Êª°Âë¢„ÄÇApacheÂ∞±‰∏∫Êàë‰ª¨Êèê‰æõ‰∫ÜËøôÊ†∑‰∏Ä‰∏™Ê°ÜÊû∂Ôºå‰ª•‰∏ãÂ∞±ÊòØÂú®ÂÆûÈôÖÂºÄÂèë‰∏≠Âä†ÂÖ•LuceneÁöÑ‰∏Ä‰∏™Â∞èDemo„ÄÇ Ëé∑ÂèñMaven‰æùËµñÈ¶ñÂÖàÁúã‰∏Ä‰∏ãÂÆûÈôÖËøêË°åÁöÑÊïàÊûúÂõæÔºöËøô‰∏™È°πÁõÆÊòØÂü∫‰∫é‰πãÂâç‰ΩøÁî®IDEAÊê≠Âª∫ÁöÑSSMÁöÑÂü∫Á°Ä‰∏äËøõË°åÂ¢ûÂä†ÁöÑÔºåÂª∫ËÆÆÂ∞èÁôΩÂÖàÁúã‰∏ã‰∏ÄÊàë„ÄÇ‰∏ä‰∏ÄÁØáÂçöÂÆ¢Ôºå‰ª•ÂèäÂÖ±‰∫´Âú®Github‰∏äÁöÑÊ∫êÁ†Å„ÄÇ‰ª•‰∏ãÊòØLuceneÊâÄÈúÄË¶ÅÁöÑ‰æùËµñÔºö1234567891011121314151617181920212223242526272829303132333435&lt;!--Âä†ÂÖ•lucene--&gt; &lt;!-- https://mvnrepository.com/artifact/org.apache.lucene/lucene-core --&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.lucene&lt;/groupId&gt; &lt;artifactId&gt;lucene-core&lt;/artifactId&gt; &lt;version&gt;$&#123;lucene.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.apache.lucene/lucene-queryparser --&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.lucene&lt;/groupId&gt; &lt;artifactId&gt;lucene-queryparser&lt;/artifactId&gt; &lt;version&gt;$&#123;lucene.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.apache.lucene/lucene-analyzers-common --&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.lucene&lt;/groupId&gt; &lt;artifactId&gt;lucene-analyzers-common&lt;/artifactId&gt; &lt;version&gt;$&#123;lucene.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!--lucene‰∏≠ÊñáÂàÜËØç--&gt; &lt;!-- https://mvnrepository.com/artifact/org.apache.lucene/lucene-analyzers-smartcn --&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.lucene&lt;/groupId&gt; &lt;artifactId&gt;lucene-analyzers-smartcn&lt;/artifactId&gt; &lt;version&gt;$&#123;lucene.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!--luceneÈ´ò‰∫Æ--&gt; &lt;!-- https://mvnrepository.com/artifact/org.apache.lucene/lucene-highlighter --&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.lucene&lt;/groupId&gt; &lt;artifactId&gt;lucene-highlighter&lt;/artifactId&gt; &lt;version&gt;$&#123;lucene.version&#125;&lt;/version&gt; &lt;/dependency&gt; ÂÖ∑‰ΩìÁöÑÁî®ÈÄîÊàëÈÉΩÂÜôÊúâÊ≥®Èáä„ÄÇÂú®IDEA‰∏≠‰øÆÊîπ‰∫ÜPom.xmlÊñá‰ª∂‰πãÂêéÂè™ÈúÄË¶ÅÁÇπÂáªÂ¶ÇÂõæÊâÄÁ§∫ÁöÑÊåâÈíÆÂç≥ÂèØÈáçÊñ∞Ëé∑Âèñ‰æùËµñÔºö ÁºñÂÜôLuceneÂ∑•ÂÖ∑Á±ªËøô‰∏™Â∑•ÂÖ∑Á±ª‰∏≠ÁöÑÂÖ∑‰Ωì‰ª£Á†ÅÊàëÂ∞±‰∏çÂçïÁã¨ÊèêÂá∫Êù•ËØ¥‰∫ÜÔºåÊØè‰∏™ÂÖ≥ÈîÆÁöÑÂú∞ÊñπÊàëÈÉΩÂÜôÊúâÊ≥®ÈáäÔºå‰∏çÊ∏ÖÊ•öÁöÑÂÜçËÆ®ËÆ∫„ÄÇ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164package com.crossoverJie.lucene;import com.crossoverJie.pojo.User;import org.apache.lucene.analysis.TokenStream;import org.apache.lucene.analysis.cn.smart.SmartChineseAnalyzer;import org.apache.lucene.document.Document;import org.apache.lucene.document.Field;import org.apache.lucene.document.StringField;import org.apache.lucene.document.TextField;import org.apache.lucene.index.*;import org.apache.lucene.queryparser.classic.QueryParser;import org.apache.lucene.search.*;import org.apache.lucene.search.highlight.*;import org.apache.lucene.store.Directory;import org.apache.lucene.store.FSDirectory;import java.io.StringReader;import java.nio.file.Paths;import java.util.LinkedList;import java.util.List;import com.crossoverJie.util.*;/** * ÂçöÂÆ¢Á¥¢ÂºïÁ±ª * @author Administrator * */public class LuceneIndex &#123; private Directory dir=null; /** * Ëé∑ÂèñIndexWriterÂÆû‰æã * @return * @throws Exception */ private IndexWriter getWriter()throws Exception&#123; /** * ÁîüÊàêÁöÑÁ¥¢ÂºïÊàëÊîæÂú®‰∫ÜCÁõòÔºåÂèØ‰ª•Ê†πÊçÆËá™Â∑±ÁöÑÈúÄË¶ÅÊîæÂú®ÂÖ∑‰Ωì‰ΩçÁΩÆ */ dir= FSDirectory.open(Paths.get("C://lucene")); SmartChineseAnalyzer analyzer=new SmartChineseAnalyzer(); IndexWriterConfig iwc=new IndexWriterConfig(analyzer); IndexWriter writer=new IndexWriter(dir, iwc); return writer; &#125; /** * Ê∑ªÂä†ÂçöÂÆ¢Á¥¢Âºï * @param user */ public void addIndex(User user)throws Exception&#123; IndexWriter writer=getWriter(); Document doc=new Document(); doc.add(new StringField("id",String.valueOf(user.getUserId()), Field.Store.YES)); /** * yesÊòØ‰ºöÂ∞ÜÊï∞ÊçÆÂ≠òËøõÁ¥¢ÂºïÔºåÂ¶ÇÊûúÊü•ËØ¢ÁªìÊûú‰∏≠ÈúÄË¶ÅÂ∞ÜËÆ∞ÂΩïÊòæÁ§∫Âá∫Êù•Â∞±Ë¶ÅÂ≠òËøõÂéªÔºåÂ¶ÇÊûúÊü•ËØ¢ÁªìÊûú * Âè™ÊòØÊòæÁ§∫Ê†áÈ¢ò‰πãÁ±ªÁöÑÂ∞±ÂèØ‰ª•‰∏çÁî®Â≠òÔºåËÄå‰∏îÂÜÖÂÆπËøáÈïø‰∏çÂª∫ËÆÆÂ≠òËøõÂéª * ‰ΩøÁî®TextFieldÁ±ªÊòØÂèØ‰ª•Áî®‰∫éÊü•ËØ¢ÁöÑ„ÄÇ */ doc.add(new TextField("username", user.getUsername(), Field.Store.YES)); doc.add(new TextField("description",user.getDescription(), Field.Store.YES)); writer.addDocument(doc); writer.close(); &#125; /** * Êõ¥Êñ∞ÂçöÂÆ¢Á¥¢Âºï * @param user * @throws Exception */ public void updateIndex(User user)throws Exception&#123; IndexWriter writer=getWriter(); Document doc=new Document(); doc.add(new StringField("id",String.valueOf(user.getUserId()), Field.Store.YES)); doc.add(new TextField("username", user.getUsername(), Field.Store.YES)); doc.add(new TextField("description",user.getDescription(), Field.Store.YES)); writer.updateDocument(new Term("id", String.valueOf(user.getUserId())), doc); writer.close(); &#125; /** * Âà†Èô§ÊåáÂÆöÂçöÂÆ¢ÁöÑÁ¥¢Âºï * @param userId * @throws Exception */ public void deleteIndex(String userId)throws Exception&#123; IndexWriter writer=getWriter(); writer.deleteDocuments(new Term("id", userId)); writer.forceMergeDeletes(); // Âº∫Âà∂Âà†Èô§ writer.commit(); writer.close(); &#125; /** * Êü•ËØ¢Áî®Êà∑ * @param q Êü•ËØ¢ÂÖ≥ÈîÆÂ≠ó * @return * @throws Exception */ public List&lt;User&gt; searchBlog(String q)throws Exception&#123; /** * Ê≥®ÊÑèÁöÑÊòØÊü•ËØ¢Á¥¢ÂºïÁöÑ‰ΩçÁΩÆÂæóÊòØÂ≠òÊîæÁ¥¢ÂºïÁöÑ‰ΩçÁΩÆÔºå‰∏çÁÑ∂‰ºöÊâæ‰∏çÂà∞„ÄÇ */ dir= FSDirectory.open(Paths.get("C://lucene")); IndexReader reader = DirectoryReader.open(dir); IndexSearcher is=new IndexSearcher(reader); BooleanQuery.Builder booleanQuery = new BooleanQuery.Builder(); SmartChineseAnalyzer analyzer=new SmartChineseAnalyzer(); /** * usernameÂíådescriptionÂ∞±ÊòØÊàë‰ª¨ÈúÄË¶ÅËøõË°åÊü•ÊâæÁöÑ‰∏§‰∏™Â≠óÊÆµ * ÂêåÊó∂Âú®Â≠òÊîæÁ¥¢ÂºïÁöÑÊó∂ÂÄôË¶Å‰ΩøÁî®TextFieldÁ±ªËøõË°åÂ≠òÊîæ„ÄÇ */ QueryParser parser=new QueryParser("username",analyzer); Query query=parser.parse(q); QueryParser parser2=new QueryParser("description",analyzer); Query query2=parser2.parse(q); booleanQuery.add(query, BooleanClause.Occur.SHOULD); booleanQuery.add(query2, BooleanClause.Occur.SHOULD); TopDocs hits=is.search(booleanQuery.build(), 100); QueryScorer scorer=new QueryScorer(query); Fragmenter fragmenter = new SimpleSpanFragmenter(scorer); /** * ËøôÈáåÂèØ‰ª•Ê†πÊçÆËá™Â∑±ÁöÑÈúÄË¶ÅÊù•Ëá™ÂÆö‰πâÊü•ÊâæÂÖ≥ÈîÆÂ≠óÈ´ò‰∫ÆÊó∂ÁöÑÊ†∑Âºè„ÄÇ */ SimpleHTMLFormatter simpleHTMLFormatter=new SimpleHTMLFormatter("&lt;b&gt;&lt;font color='red'&gt;","&lt;/font&gt;&lt;/b&gt;"); Highlighter highlighter=new Highlighter(simpleHTMLFormatter, scorer); highlighter.setTextFragmenter(fragmenter); List&lt;User&gt; userList=new LinkedList&lt;User&gt;(); for(ScoreDoc scoreDoc:hits.scoreDocs)&#123; Document doc=is.doc(scoreDoc.doc); User user=new User(); user.setUserId(Integer.parseInt(doc.get(("id")))); user.setDescription(doc.get(("description"))); String username=doc.get("username"); String description=doc.get("description"); if(username!=null)&#123; TokenStream tokenStream = analyzer.tokenStream("username", new StringReader(username)); String husername=highlighter.getBestFragment(tokenStream, username); if(StringUtil.isEmpty(husername))&#123; user.setUsername(username); &#125;else&#123; user.setUsername(husername); &#125; &#125; if(description!=null)&#123; TokenStream tokenStream = analyzer.tokenStream("description", new StringReader(description)); String hContent=highlighter.getBestFragment(tokenStream, description); if(StringUtil.isEmpty(hContent))&#123; if(description.length()&lt;=200)&#123; user.setDescription(description); &#125;else&#123; user.setDescription(description.substring(0, 200)); &#125; &#125;else&#123; user.setDescription(hContent); &#125; &#125; userList.add(user); &#125; return userList; &#125;&#125; Êü•ËØ¢ControllerÁöÑÁºñÂÜôÊé•‰∏ãÊù•ÊòØÊü•ËØ¢ControllerÔºö123456789101112131415161718192021222324@RequestMapping("/q")public String search(@RequestParam(value = "q", required = false,defaultValue = "") String q, @RequestParam(value = "page", required = false, defaultValue = "1") String page, Model model, HttpServletRequest request) throws Exception &#123; LuceneIndex luceneIndex = new LuceneIndex() ; List&lt;User&gt; userList = luceneIndex.searchBlog(q); /** * ÂÖ≥‰∫éÊü•ËØ¢‰πãÂêéÁöÑÂàÜÈ°µÊàëÈááÁî®ÁöÑÊòØÊØèÊ¨°ÂàÜÈ°µÂèëËµ∑ÁöÑËØ∑Ê±ÇÈÉΩÊòØÂ∞ÜÊâÄÊúâÁöÑÊï∞ÊçÆÊü•ËØ¢Âá∫Êù•Ôºå * ÂÖ∑‰ΩìÊòØÁ¨¨Âá†È°µÂÜçÊà™ÂèñÂØπÂ∫îÈ°µÊï∞ÁöÑÊï∞ÊçÆÔºåÂÖ∏ÂûãÁöÑÊãøÁ©∫Èó¥Êç¢Êó∂Èó¥ÁöÑÂÅöÊ≥ïÔºåÂ¶ÇÊûúÂêÑ‰ΩçÊúâ‰ªÄ‰πà * È´òÊãõÊ¨¢ËøéÂèóÊïô„ÄÇ */ Integer toIndex = userList.size() &gt;= Integer.parseInt(page) * 5 ? Integer.parseInt(page) * 5 : userList.size(); List&lt;User&gt; newList = userList.subList((Integer.parseInt(page) - 1) * 5, toIndex); model.addAttribute("userList",newList) ; String s = this.genUpAndDownPageCode(Integer.parseInt(page), userList.size(), q, 5, request.getServletContext(). getContextPath()); model.addAttribute("pageHtml",s) ; model.addAttribute("q",q) ; model.addAttribute("resultTotal",userList.size()) ; model.addAttribute("pageTitle","ÊêúÁ¥¢ÂÖ≥ÈîÆÂ≠ó'" + q + "'ÁªìÊûúÈ°µÈù¢") ; return "queryResult";&#125; ÂÖ∂‰∏≠ÊúâÁî®Âà∞‰∏Ä‰∏™genUpAndDownPageCode()ÊñπÊ≥ïÊù•ÁîüÊàêÂàÜÈ°µÁöÑHtml‰ª£Á†ÅÔºåÂ¶Ç‰∏ãÔºö1234567891011121314151617181920212223242526272829303132/** * Êü•ËØ¢‰πãÂêéÁöÑÂàÜÈ°µ * @param page * @param totalNum * @param q * @param pageSize * @param projectContext * @return */private String genUpAndDownPageCode(int page,Integer totalNum,String q,Integer pageSize,String projectContext)&#123; long totalPage=totalNum%pageSize==0?totalNum/pageSize:totalNum/pageSize+1; StringBuffer pageCode=new StringBuffer(); if(totalPage==0)&#123; return ""; &#125;else&#123; pageCode.append("&lt;nav&gt;"); pageCode.append("&lt;ul class='pager' &gt;"); if(page&gt;1)&#123; pageCode.append("&lt;li&gt;&lt;a href='"+projectContext+"/q?page="+(page-1)+"&amp;q="+q+"'&gt;‰∏ä‰∏ÄÈ°µ&lt;/a&gt;&lt;/li&gt;"); &#125;else&#123; pageCode.append("&lt;li class='disabled'&gt;&lt;a href='#'&gt;‰∏ä‰∏ÄÈ°µ&lt;/a&gt;&lt;/li&gt;"); &#125; if(page&lt;totalPage)&#123; pageCode.append("&lt;li&gt;&lt;a href='"+projectContext+"/q?page="+(page+1)+"&amp;q="+q+"'&gt;‰∏ã‰∏ÄÈ°µ&lt;/a&gt;&lt;/li&gt;"); &#125;else&#123; pageCode.append("&lt;li class='disabled'&gt;&lt;a href='#'&gt;‰∏ã‰∏ÄÈ°µ&lt;/a&gt;&lt;/li&gt;"); &#125; pageCode.append("&lt;/ul&gt;"); pageCode.append("&lt;/nav&gt;"); &#125; return pageCode.toString();&#125; ‰ª£Á†ÅÊØîËæÉÁÆÄÂçïÔºåÂ∞±ÊòØÊ†πÊçÆÁöÑÈ°µÊï∞„ÄÅÊÄªÈ°µÊï∞Êù•ÁîüÊàêÂàÜÈ°µ‰ª£Á†ÅÔºåÂØπ‰∫ÜÊàëÂâçÁ´ØÈááÁî®ÁöÑÊòØÁé∞Âú®ÊµÅË°åÁöÑBootstrapÔºåËøô‰∏™Êúâ‰∏ç‰ºöÁöÑÂèØ‰ª•Âéª‰ªñÂÆòÁΩëÁúãÁúãÔºåÊØîËæÉÁÆÄÂçïÊòì‰∏äÊâã„ÄÇÊé•‰∏ãÊù•Âè™ÈúÄË¶ÅÁºñÂÜôÊòæÁ§∫ÁïåÈù¢Â∞±Â§ßÂäüÂëäÊàê‰∫Ü„ÄÇ ÊòæÁ§∫ÁïåÈù¢ÊàëÂè™Ë¥¥ÂÖ≥ÈîÆ‰ª£Á†ÅÔºåÂÖ∑‰ΩìÁöÑÂèØ‰ª•ÂéªGithub‰∏äÊü•Áúã„ÄÇ1234567891011121314151617181920212223242526272829303132333435363738394041&lt;c:choose&gt; &lt;c:when test="$&#123;userList.size()==0 &#125;"&gt; &lt;div align="center" style="padding-top: 20px"&gt;&lt;font color="red"&gt;$&#123;q&#125;&lt;/font&gt;Êú™Êü•ËØ¢Âà∞ÁªìÊûúÔºåËØ∑Êç¢‰∏™ÂÖ≥ÈîÆÂ≠óËØïËØïÔºÅ&lt;/div&gt; &lt;/c:when&gt; &lt;c:otherwise&gt; &lt;div align="center" style="padding-top: 20px"&gt; Êü•ËØ¢&lt;font color="red"&gt;$&#123;q&#125;&lt;/font&gt;ÂÖ≥ÈîÆÂ≠óÔºåÁ∫¶$&#123;resultTotal&#125;Êù°ËÆ∞ÂΩïÔºÅ &lt;/div&gt; &lt;c:forEach var="u" items="$&#123;userList &#125;" varStatus="status"&gt; &lt;div class="panel-heading "&gt; &lt;div class="row"&gt; &lt;div class="col-md-6"&gt; &lt;div class="row"&gt; &lt;div class="col-md-12"&gt; &lt;b&gt; &lt;a href="&lt;%=path %&gt;/user/showUser/$&#123;u.userId&#125;"&gt;$&#123;u.username&#125;&lt;/a&gt; &lt;/b&gt; &lt;br/&gt; $&#123;u.description&#125; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class="col-md-4 col-md-offset-2"&gt; &lt;p class="text-muted text-right"&gt; $&#123;u.password&#125; &lt;/p&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class="panel-footer"&gt; &lt;p class="text-right"&gt; &lt;span class="label label-default"&gt; &lt;span class="glyphicon glyphicon-comment" aria-hidden="true"&gt;&lt;/span&gt; $&#123;u.password&#125; &lt;/span&gt; &lt;/p&gt; &lt;/div&gt; &lt;/c:forEach&gt; &lt;/c:otherwise&gt; &lt;/c:choose&gt; Âà©Áî®JSTLÊ†áÁ≠æÂç≥ÂèØÂ∞ÜÊï∞ÊçÆÂæ™ÁéØÂ±ïÁ§∫Âá∫Êù•ÔºåÂÖ≥ÈîÆÂ≠óÂ∞±‰∏çÈúÄË¶ÅÂçïÁã¨ÂÅöÂ§ÑÁêÜ‰∫ÜÔºåÂú®ÂêéÂè∞Êü•ËØ¢ÁöÑÊó∂ÂÄôÂ∑≤ÁªèÂÅö‰∫Ü‰øÆÊîπ‰∫Ü„ÄÇ ÊÄªÁªìÂÖ≥‰∫éÂÖ®ÊñáÊ£ÄÁ¥¢ÁöÑÊ°ÜÊû∂‰∏çÊ≠¢LuceneËøòÊúâsolrÔºåÂÖ∑‰ΩìË∞ÅÂ•ΩÊúâ‰ªÄ‰πàÂå∫Âà´Êàë‰πü‰∏çÂ§™Ê∏ÖÊ•öÔºåÂáÜÂ§á‰∏ãÊù•Ëä±ÁÇπÊó∂Èó¥Á†îÁ©∂‰∏ã„ÄÇÂì¶ÂØπ‰∫ÜÔºåÊúÄËøëÂèàÊúâÁÇπÊÉ≥ÂÅöAndroidÂºÄÂèë‰∫ÜÔºåÊÑüËßâÂÅöÁÇπ‰∏úË•øËÉΩÂ§üÂÆûÂÆûÂú®Âú®ÁöÑÊë∏ÂæóÂà∞ÈÄºÊ†ºÁ°ÆÂÆûË¶ÅÈ´ò‰∫õ(Áé∞Âú®‰∏ªË¶ÅÂú®ÂÅöÂêéÁ´ØÂºÄÂèë)ÔºåÊÑüÂÖ¥Ë∂£ÁöÑÊúãÂèãÂèØ‰ª•ÂÖ≥Ê≥®‰∏ã„ÄÇÂì¶ÂØπ‰∫ÜÔºåÁõ¥Êé•ËøêË°åÊàë‰ª£Á†ÅÁöÑÊúãÂèãË¶Å‰∏ãÊ≥®ÊÑèÔºö È¶ñÂÖàË¶ÅÂ∞ÜÊï∞ÊçÆÂ∫ìÂÄíÂà∞Ëá™Â∑±ÁöÑMySQL‰∏ä ‰πãÂêéÂú®È¶ñÊ¨°ËøêË°åÁöÑÊó∂ÂÄôÈúÄË¶ÅÁÇπÂáªÈáçÊñ∞ÁîüÊàêÁ¥¢ÂºïÊåâÈíÆÁîüÊàê‰∏ÄÈÅçÁ¥¢Âºï‰πãÂêéÊâçËÉΩËøõË°åÊêúÁ¥¢ÔºåÂõ†‰∏∫Áé∞Âú®ÁöÑÊï∞ÊçÆÊòØÁõ¥Êé•Â≠òÂà∞Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑÔºåÂπ∂Ê≤°ÊúâÂú®Êñ∞Â¢ûÁöÑÊó∂ÂÄôÂ∞±Â¢ûÂä†Á¥¢ÂºïÔºåÂú®ÂÆûÈôÖÂºÄÂèëÁöÑÊó∂ÂÄôÈúÄË¶ÅÂú®Êñ∞Â¢ûÊï∞ÊçÆÈÇ£ÈáåÂÜçÁîüÊàê‰∏Ä‰ªΩÁ¥¢ÂºïÔºåÂ∞±Áõ¥Êé•Ë∞ÉÁî®LuceneIndexÁ±ª‰∏≠ÁöÑaddIndexÊñπÊ≥ï‰º†ÂÖ•ÂÆû‰ΩìÂç≥ÂèØÔºåÂÜçÂÅöÊõ¥Êñ∞„ÄÅÂà†Èô§Êìç‰ΩúÁöÑÊó∂ÂÄô‰πüÂêåÊ†∑ÈúÄË¶ÅÂØπÁ¥¢ÂºïÂÅöÊìç‰Ωú„ÄÇ]]></content>
      <categories>
        <category>SSM</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>IDEA</tag>
        <tag>Lucene</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SSM(‰∏Ä)Ê°ÜÊû∂ÁöÑÊï¥Âêà]]></title>
    <url>%2F2016%2F06%2F28%2FSSM1%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄÊúÄËøëËøôÂá†Âπ¥JetBrainsÂÖ¨Âè∏ÂºÄÂèëÁöÑIDEAÊòØË∂äÊù•Ë∂äÊµÅË°å‰∫ÜÔºåÁîöËá≥GoogleÁöÑÂÆòÊñπIDEÈÉΩÊòØIDEAÊù•ÂÆöÂà∂ÁöÑÔºåÂèØËßÅIDEAÁöÑÂèëÂ±ïË∂ãÂäøÊòØË∂äÊù•Ë∂äÂ•ΩÔºåÁî±‰∫éÂçö‰∏ªÊé•Ëß¶IDEAÁöÑÊó∂Èó¥‰πü‰∏çÈïøÔºåÊâÄ‰ª•ÊúâÂÖ≥IDEAÂíåEclipseÁöÑÂå∫Âà´Âíå‰ºòÂä£ÂäøËØ∑Ëá™Ë°åÁôæÂ∫¶‰∫Ü„ÄÇÂÄüÊ≠§Êú∫‰ºöÊàëÂ∞±‰ΩøÁî®IDEAÊù•Êï¥Âêà‰∏Ä‰∏ãSSMÔºåÈíàÂØπ‰∫éÂàùÂ≠¶ËÄÖ(ÂàùÊ¨°‰ΩøÁî®IDEAÂíåJAVAEEÂàùÂ≠¶ËÄÖ)ËøòÊòØÊúâÂ∏ÆÂä©ÁöÑ„ÄÇ Êñ∞Âª∫SSMÈ°πÁõÆÂì¶ÂØπ‰∫ÜÔºåÂÖ≥‰∫éIDEAÁöÑÁâàÊú¨ÈóÆÈ¢òÂº∫ÁÉàÂª∫ËÆÆ‰ΩøÁî®ÊóóËà∞ÁâàÔºåÊúâÊù°‰ª∂ÁöÑÂ∞±Ë¥≠‰π∞ÔºåÊ≤°Êù°‰ª∂ÁöÑÂòõ„ÄÇ„ÄÇÂ§©Êúù‰Ω†ÊáÇÁöÑ„ÄÇÂú®Ê¨¢ËøéÁïåÈù¢ÁÇπÂáªCreate New Project„ÄÇ‰πãÂêéÈÄâÊã©Maven(Êñ∞Âª∫JAVAEEÈ°πÁõÆÊòØÈúÄË¶ÅÂÆâË£ÖJDKÁöÑÔºåËøô‰∏™Â∞±‰∏çÂú®ËøôÈáåËÆ≤Ëß£‰∫Ü„ÄÇ)ÈÄâÂ•Ω‰πãÂêéÁÇπÂáª‰∏ã‰∏ÄÊ≠•„ÄÇ‰πãÂêéÂ°´ÂÖ•GroupIDÂíåArtifactIDËøôÈáåÂ∞ΩÈáèÊåâÁÖßMavenÁöÑÂëΩÂêçËßÑËåÉÊù•Âç≥ÂèØ„ÄÇ‰πãÂêéÁÇπÂáª‰∏ã‰∏ÄÊ≠•ÔºåÂ°´ÂÖ•È°πÁõÆÂêçÁß∞ÔºåËøôÈáåÊàëÂª∫ËÆÆÂíå‰πãÂâçÂ°´ÂÜôÁöÑArtifactIDÂêçÁß∞‰∏ÄÊ†∑Âç≥ÂèØ„ÄÇÁÇπÂáªFinishÂÆåÊàêÈ°πÁõÆÁöÑÂàõÂª∫„ÄÇ‰πãÂêéÂ∞ΩÈáè‰∏çË¶ÅÂÅöÂÖ∂‰ªñÊìç‰ΩúÔºåËÆ©IDEAÂÆåÊàêÁ¥¢ÂºïÂàõÂª∫„ÄÇ ÂÆåÂñÑÁõÆÂΩïÁªìÊûÑÈ¶ñÂÖàËßÇÂØü‰∏Ä‰∏ãIDEAÁªôÊàë‰ª¨ÁîüÊàêÁöÑÁõÆÂΩïÁªìÊûÑÔºåËøôÊòØ‰∏Ä‰∏™Ê†áÂáÜÁöÑMavenÁõÆÂΩï„ÄÇ‰ΩÜÊòØÂÖ∂‰∏≠Â∞ë‰∫Ü‰∏Ä‰∏™webappÁõÆÂΩïÁî®‰∫éÂ≠òÊîæjsp„ÄÅcss„ÄÅjs„ÄÅÂõæÁâá‰πãÁ±ªÁöÑÊñá‰ª∂„ÄÇ‰πãÂêéËøòÈúÄË¶ÅÂÆåÂñÑÊàë‰ª¨ÁöÑÁõÆÂΩïÁªìÊûÑÔºåÂ¶Ç‰∏ãÂõæÔºö‰ª•‰∏äÁöÑÂëΩÂêçÈÉΩÊòØÊàë‰ª¨ÂºÄÂèëËøáÁ®ã‰∏≠Â∏∏Áî®ÁöÑÂëΩÂêçËßÑÂàôÔºå‰∏ç‰∏ÄÂÆöÊåâÁÖßÊàëËøôÊ†∑Êù•Ôºå‰ΩÜÊòØÊúÄÂ•ΩÊòØÊúâ‰∏ÄÂÆöÁöÑËßÑËåÉ„ÄÇ POM.xmlpom.xmlÊòØÊï¥‰∏™mavenÁöÑÊ†∏ÂøÉÈÖçÁΩÆÊñá‰ª∂ÔºåÈáåÈù¢ÊúâÂØπÈ°πÁõÆÁöÑÊèèËø∞ÂíåÈ°πÁõÆÊâÄÈúÄË¶ÅÁöÑ‰æùËµñ„ÄÇÂì¶ÂØπ‰∫ÜÔºåÂú®‰øÆÊîπpom.xmlÊñá‰ª∂‰πãÂâçÊàë‰ª¨ÊúÄÂ•ΩÂÖàËÆæÁΩÆ‰∏Ä‰∏ãËØ•È°πÁõÆÁöÑMavenËÆæÁΩÆ(IDEAÂØπÊØè‰∏™È°πÁõÆÁöÑmavenËÆæÁΩÆÂíåEclipse‰∏ç‰∏ÄÊ†∑Ôºå‰∏çÊòØËÆæÁΩÆ‰∏ÄÊ¨°Â∞±ÂèØ‰∫ÜÔºåÂ¶ÇÊûú‰ªäÂêéËøòË¶ÅÊñ∞Âª∫È°πÁõÆÈÇ£Â∞±ËøòÈúÄË¶ÅËÆæÁΩÆÔºåÂêåÊó∂Êåâ‰Ωèctrl,alt,sÊòØÊâìÂºÄËÆæÁΩÆÁöÑÂø´Êç∑ÈîÆÔºåÊõ¥Â§öÊúâÂÖ≥IDEAÁöÑÊìç‰Ωú‰ªäÂêé‰ºöÊõ¥Êñ∞Áõ∏ÂÖ≥ÂçöÊñá„ÄÇ) IDEAÁöÑMavenËÆæÁΩÆÂú®Eclipse‰∏≠Áî®ËøáMavenÁöÑÈÉΩÂ∫îËØ•Áü•ÈÅìÔºåËøôÈáåÊòØÂ∞ÜÈ°πÁõÆÁöÑMavenÊç¢ÊàêÊàë‰ª¨Ëá™Â∑±ÂÆâË£ÖÁöÑMavenÔºå‰∏ãÈù¢‰∏§‰∏™ÁõÆÂΩïÊòØÈÄâÊã©MavenÈÖçÁΩÆÊñá‰ª∂Ôºå‰∏çÁü•ÈÅìÊòØ‰ªÄ‰πàÂéüÂõ†Âú®Eclipse‰∏≠ÈÄâÊã©‰∫ÜÈÖçÁΩÆÊñá‰ª∂‰πãÂêé‰ºöËá™Âä®ÁöÑÂ∞ÜMavenÊú¨Âú∞ÂéÇÂ∫ìÁöÑË∑ØÂæÑÊõ¥Êîπ‰∏∫‰Ω†settings.xml‰∏≠ÈÖçÁΩÆÁöÑË∑ØÂæÑ„ÄÇÊó¢ÁÑ∂ËøôÈáåÊ≤°ÊúâËá™Âä®ÈÄâ‰∏≠ÈÇ£Êàë‰ª¨Â∞±ÊâãÂä®‰øÆÊîπÂç≥ÂèØÔºåÂ∞ΩÈáè‰∏çË¶ÅÊîæÂú®CÁõòÔºå‰∏ÄÊòØÁî®‰πÖ‰πãÂêéÊú¨Âú∞ÂéÇÂ∫ìÂç†Áî®ÁöÑÁ©∫Èó¥‰ºöÊØîËæÉÂ§ßÔºå‰∫åÊòØ‰∏á‰∏ÄÁ≥ªÁªüÂ¥©Ê∫ÉÁöÑËØùËøòÊúâÂèØËÉΩÊâæÂõûÊù•„ÄÇ ‰øÆÊîπpom.xml‰ª•‰∏ãÊòØÊàëÁöÑpom.xmlÊñá‰ª∂Ôºö123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;!--suppress MavenModelInspection --&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.crossoverJie&lt;/groupId&gt; &lt;artifactId&gt;SSM&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;source&gt;1.6&lt;/source&gt; &lt;target&gt;1.6&lt;/target&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt; &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;spring.version&gt;4.1.4.RELEASE&lt;/spring.version&gt; &lt;jackson.version&gt;2.5.0&lt;/jackson.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;3.8.1&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;!-- spring --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-core&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-beans&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-tx&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-web&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-test&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;!-- ‰ΩøÁî®SpringMVCÈúÄÈÖçÁΩÆ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!-- ÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÊï¥ÂêàÊó∂ÈúÄÈÖçÁΩÆ Â¶Çhibernate jpaÁ≠â --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-orm&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt; &lt;version&gt;1.2.4&lt;/version&gt; &lt;/dependency&gt; &lt;!-- log4j --&gt; &lt;dependency&gt; &lt;groupId&gt;log4j&lt;/groupId&gt; &lt;artifactId&gt;log4j&lt;/artifactId&gt; &lt;version&gt;1.2.17&lt;/version&gt; &lt;/dependency&gt; &lt;!-- mysqlËøûÊé• --&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.34&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis&lt;/artifactId&gt; &lt;version&gt;3.3.1&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;version&gt;1.0.18&lt;/version&gt; &lt;/dependency&gt; &lt;!-- json --&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;fastjson&lt;/artifactId&gt; &lt;version&gt;1.2.3&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt; &lt;version&gt;$&#123;jackson.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-core&lt;/artifactId&gt; &lt;version&gt;$&#123;jackson.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt; &lt;version&gt;$&#123;jackson.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!-- aop --&gt; &lt;dependency&gt; &lt;groupId&gt;org.aspectj&lt;/groupId&gt; &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt; &lt;version&gt;1.8.4&lt;/version&gt; &lt;/dependency&gt; &lt;!-- servlet --&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet&lt;/groupId&gt; &lt;artifactId&gt;servlet-api&lt;/artifactId&gt; &lt;version&gt;3.0-alpha-1&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet&lt;/groupId&gt; &lt;artifactId&gt;jstl&lt;/artifactId&gt; &lt;version&gt;1.2&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.commons&lt;/groupId&gt; &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt; &lt;version&gt;3.4&lt;/version&gt; &lt;/dependency&gt; &lt;!-- ‰∏ä‰º†Êñá‰ª∂ --&gt; &lt;dependency&gt; &lt;groupId&gt;commons-fileupload&lt;/groupId&gt; &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt; &lt;version&gt;1.3.1&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; ÂÖ≥‰∫émavenÁöÑÁü•ËØÜÁÇπÊàëÂ∞±‰∏çÁªÜËÆ≤‰∫ÜÔºåÊØïÁ´üËøôÊòØ‰∏Ä‰∏™Êï¥ÂêàÊïôÁ®ã„ÄÇ spring-mvc.xmlËøô‰∏™ÈÖçÁΩÆÊñá‰ª∂ÊòØspringMVCÁöÑÈÖçÁΩÆÊñá‰ª∂ÔºöÈáåÈù¢ÁöÑÊàëÈÉΩÂÜôÊúâÊ≥®ÈáäÔºåÂ∫îËØ•ÈÉΩËÉΩÁúãÊáÇ„ÄÇ12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p" xmlns:context="http://www.springframework.org/schema/context" xmlns:mvc="http://www.springframework.org/schema/mvc" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.0.xsd"&gt; &lt;!-- Ëá™Âä®Êâ´ÊèèËØ•ÂåÖÔºå‰ΩøSpringMVCËÆ§‰∏∫ÂåÖ‰∏ãÁî®‰∫Ü@controllerÊ≥®Ëß£ÁöÑÁ±ªÊòØÊéßÂà∂Âô® --&gt; &lt;context:component-scan base-package="com.crossoverJie.controller" /&gt; &lt;!--ÈÅøÂÖçIEÊâßË°åAJAXÊó∂ÔºåËøîÂõûJSONÂá∫Áé∞‰∏ãËΩΩÊñá‰ª∂ --&gt; &lt;!--&lt;bean id="mappingJacksonHttpMessageConverter" class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"&gt; &lt;property name="supportedMediaTypes"&gt; &lt;list&gt; &lt;value&gt;text/html;charset=UTF-8&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; &lt;/bean&gt;--&gt; &lt;mvc:annotation-driven/&gt; &lt;!-- ÂêØÂä®SpringMVCÁöÑÊ≥®Ëß£ÂäüËÉΩÔºåÂÆåÊàêËØ∑Ê±ÇÂíåÊ≥®Ëß£POJOÁöÑÊò†Â∞Ñ --&gt; &lt;!-- ÂÆö‰πâË∑≥ËΩ¨ÁöÑÊñá‰ª∂ÁöÑÂâçÂêéÁºÄ ÔºåËßÜÂõæÊ®°ÂºèÈÖçÁΩÆ--&gt; &lt;bean class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt; &lt;!-- ËøôÈáåÁöÑÈÖçÁΩÆÊàëÁöÑÁêÜËß£ÊòØËá™Âä®ÁªôÂêéÈù¢actionÁöÑÊñπÊ≥ïreturnÁöÑÂ≠óÁ¨¶‰∏≤Âä†‰∏äÂâçÁºÄÂíåÂêéÁºÄÔºåÂèòÊàê‰∏Ä‰∏™ ÂèØÁî®ÁöÑurlÂú∞ÂùÄ --&gt; &lt;property name="prefix" value="/WEB-INF/jsp/" /&gt; &lt;property name="suffix" value=".jsp" /&gt; &lt;/bean&gt; &lt;!-- ÈÖçÁΩÆÊñá‰ª∂‰∏ä‰º†ÔºåÂ¶ÇÊûúÊ≤°Êúâ‰ΩøÁî®Êñá‰ª∂‰∏ä‰º†ÂèØ‰ª•‰∏çÁî®ÈÖçÁΩÆÔºåÂΩìÁÑ∂Â¶ÇÊûú‰∏çÈÖçÔºåÈÇ£‰πàÈÖçÁΩÆÊñá‰ª∂‰∏≠‰πü‰∏çÂøÖÂºïÂÖ•‰∏ä‰º†ÁªÑ‰ª∂ÂåÖ --&gt; &lt;bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver"&gt; &lt;!-- ÈªòËÆ§ÁºñÁ†Å --&gt; &lt;property name="defaultEncoding" value="utf-8" /&gt; &lt;!-- Êñá‰ª∂Â§ßÂ∞èÊúÄÂ§ßÂÄº --&gt; &lt;property name="maxUploadSize" value="10485760000" /&gt; &lt;!-- ÂÜÖÂ≠ò‰∏≠ÁöÑÊúÄÂ§ßÂÄº --&gt; &lt;property name="maxInMemorySize" value="40960" /&gt; &lt;/bean&gt; &lt;!-- ÈÖçÁΩÆÊã¶Êà™Âô® --&gt; &lt;!--&lt;mvc:interceptors&gt; &lt;mvc:interceptor&gt; &amp;lt;!&amp;ndash; &lt;mvc:mapping path="/**"/&gt;Êã¶Êà™ÊâÄÊúâ &amp;ndash;&amp;gt; &lt;mvc:mapping path="/user/**"/&gt; &lt;mvc:mapping path="/role/**"/&gt; &lt;mvc:mapping path="/function/**"/&gt; &lt;mvc:mapping path="/news/**"/&gt; &lt;mvc:mapping path="/img/**"/&gt; &lt;bean class="com.crossoverJie.intercept.Intercept"&gt;&lt;/bean&gt; &lt;/mvc:interceptor&gt; &lt;/mvc:interceptors&gt;--&gt;&lt;/beans&gt; ÂÖ≥‰∫é‰∏äÈù¢Êã¶Êà™Âô®Ê≥®ÈáäÊéâÁöÑÈÇ£ÈáåÔºåÈÖçÁΩÆÊòØÊ≤°ÊúâÈóÆÈ¢òÁöÑÔºåÂõ†‰∏∫ËøôÊòØ‰∏Ä‰∏™Êï¥ÂêàÈ°πÁõÆÔºåÊâÄ‰ª•ÈáåËæπ‰πüÊ≤°ÊúâÁî®Âà∞Êã¶Êà™Âô®Ôºå‰∏∫‰∫ÜÈò≤Ê≠¢ËøêË°åÊä•ÈîôÊâÄ‰ª•Â∞±ÂÖàÊ≥®ÈáäÊéâ‰∫Ü„ÄÇÂ¶ÇÊûúÂêéÁª≠ÈúÄË¶ÅÂ¢ûÂä†Êã¶Êà™Âô®ÔºåÂèØ‰ª•ÂèÇËÄÉËøôÈáåÁöÑÈÖçÁΩÆ„ÄÇ spring-mybatis.xmlËøô‰∏™ÊòØspringÂíåmybatisÁöÑÊï¥ÂêàÈÖçÁΩÆÊñá‰ª∂ÔºåÂÖ∂‰∏≠ËøòÊúâDruidËøûÊé•Ê±†ÁöÑÈÖçÁΩÆ„ÄÇ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd"&gt; &lt;!-- Ëá™Âä®Êâ´Êèè --&gt; &lt;context:component-scan base-package="com.crossoverJie" /&gt; &lt;!-- ÂºïÂÖ•ÈÖçÁΩÆÊñá‰ª∂ --&gt; &lt;bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"&gt; &lt;property name="location" value="classpath:jdbc.properties" /&gt; &lt;/bean&gt; &lt;bean id="dataSource" class="com.alibaba.druid.pool.DruidDataSource" init-method="init" destroy-method="close"&gt; &lt;!-- ÊåáÂÆöËøûÊé•Êï∞ÊçÆÂ∫ìÁöÑÈ©±Âä® --&gt; &lt;property name="driverClassName" value="$&#123;jdbc.driverClass&#125;" /&gt; &lt;property name="url" value="$&#123;jdbc.url&#125;" /&gt; &lt;property name="username" value="$&#123;jdbc.user&#125;" /&gt; &lt;property name="password" value="$&#123;jdbc.password&#125;" /&gt; &lt;!-- ÈÖçÁΩÆÂàùÂßãÂåñÂ§ßÂ∞è„ÄÅÊúÄÂ∞è„ÄÅÊúÄÂ§ß --&gt; &lt;property name="initialSize" value="3" /&gt; &lt;property name="minIdle" value="3" /&gt; &lt;property name="maxActive" value="20" /&gt; &lt;!-- ÈÖçÁΩÆËé∑ÂèñËøûÊé•Á≠âÂæÖË∂ÖÊó∂ÁöÑÊó∂Èó¥ --&gt; &lt;property name="maxWait" value="60000" /&gt; &lt;!-- ÈÖçÁΩÆÈó¥ÈöîÂ§ö‰πÖÊâçËøõË°å‰∏ÄÊ¨°Ê£ÄÊµãÔºåÊ£ÄÊµãÈúÄË¶ÅÂÖ≥Èó≠ÁöÑÁ©∫Èó≤ËøûÊé•ÔºåÂçï‰ΩçÊòØÊØ´Áßí --&gt; &lt;property name="timeBetweenEvictionRunsMillis" value="60000" /&gt; &lt;!-- ÈÖçÁΩÆ‰∏Ä‰∏™ËøûÊé•Âú®Ê±†‰∏≠ÊúÄÂ∞èÁîüÂ≠òÁöÑÊó∂Èó¥ÔºåÂçï‰ΩçÊòØÊØ´Áßí --&gt; &lt;property name="minEvictableIdleTimeMillis" value="300000" /&gt; &lt;property name="validationQuery" value="SELECT 'x'" /&gt; &lt;property name="testWhileIdle" value="true" /&gt; &lt;property name="testOnBorrow" value="false" /&gt; &lt;property name="testOnReturn" value="false" /&gt; &lt;!-- ÊâìÂºÄPSCacheÔºåÂπ∂‰∏îÊåáÂÆöÊØè‰∏™ËøûÊé•‰∏äPSCacheÁöÑÂ§ßÂ∞è --&gt; &lt;property name="poolPreparedStatements" value="true" /&gt; &lt;property name="maxPoolPreparedStatementPerConnectionSize" value="20" /&gt; &lt;!-- ÈÖçÁΩÆÁõëÊéßÁªüËÆ°Êã¶Êà™ÁöÑfiltersÔºåÂéªÊéâÂêéÁõëÊéßÁïåÈù¢sqlÊó†Ê≥ïÁªüËÆ° --&gt; &lt;property name="filters" value="stat" /&gt; &lt;/bean&gt; &lt;!-- springÂíåMyBatisÂÆåÁæéÊï¥ÂêàÔºå‰∏çÈúÄË¶ÅmybatisÁöÑÈÖçÁΩÆÊò†Â∞ÑÊñá‰ª∂ --&gt; &lt;bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean"&gt; &lt;property name="dataSource" ref="dataSource" /&gt; &lt;!-- Ëá™Âä®Êâ´Êèèmapping.xmlÊñá‰ª∂ --&gt; &lt;property name="mapperLocations" value="classpath:mapping/*.xml"&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!-- DAOÊé•Âè£ÊâÄÂú®ÂåÖÂêçÔºåSpring‰ºöËá™Âä®Êü•ÊâæÂÖ∂‰∏ãÁöÑÁ±ª --&gt; &lt;bean class="org.mybatis.spring.mapper.MapperScannerConfigurer"&gt; &lt;property name="basePackage" value="com.crossoverJie.dao" /&gt; &lt;property name="sqlSessionFactoryBeanName" value="sqlSessionFactory"&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!-- (‰∫ãÂä°ÁÆ°ÁêÜ)transaction manager, use JtaTransactionManager for global tx --&gt; &lt;bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt; &lt;property name="dataSource" ref="dataSource" /&gt; &lt;/bean&gt;&lt;/beans&gt; ‰ª•‰∏ä‰∏§‰∏™Â∞±ÊòØÊúÄÈáçË¶ÅÁöÑÈÖçÁΩÆÊñá‰ª∂‰∫ÜÔºåÂè™Ë¶ÅÂÖ∂‰∏≠ÁöÑÂåÖÂêçÂíåÈÖçÁΩÆÊñá‰ª∂‰∏≠ÁöÑÂêçÂ≠ó‰∏ÄÊ†∑Â∞±‰∏ç‰ºöÂá∫ÈóÆÈ¢ò„ÄÇÂÖ≥‰∫éxxMpper.xml‰ª•ÂèäÂÆû‰ΩìÁ±ªÁöÑÁîüÊàêÔºåÊàë‰ª¨ÂèØ‰ª•ÂÄüÂä©mybatis-generatorËá™Âä®ÁîüÊàêÂ∑•ÂÖ∑Êù•ÁîüÊàêÔºåÊñπ‰æøÂø´Êç∑„ÄÇ IDEAÈÖçÁΩÆTomcatÂÖ≥‰∫éTomcatÁöÑ‰∏ãËΩΩ‰∏éÂÆâË£ÖÊàëËøôÈáåÂ∞±‰∏çÂ§ö‰ªãÁªç‰∫Ü„ÄÇÊåâÁÖß‰∏ãÂõæÈÄâÊã©ÔºöÂú®name‰∏≠‰∏∫Ëøô‰∏™TomcatËæìÂÖ•‰∏Ä‰∏™ÂêçÂ≠ó„ÄÇ‰πãÂêéÈÄâÊã©‰Ω†Êú¨Âú∞TomcatÁöÑÁõÆÂΩïÁÇπÂáªOkÂç≥ÂèØ„ÄÇÁÇπÂáªapplyÂíå‰øùÂ≠ò‰πãÂêéÂ∞±ËøîÂõûÈ¶ñÈ°µÂç≥ÂèØÁúãÂà∞TomcatÁöÑÊ†áËØÜ„ÄÇÊ†πÊçÆÈúÄË¶ÅÁÇπÂáªRunÂíåDebugÂç≥ÂèØËøêË°å„ÄÇ ËøêË°åÁªìÊûúÂ¶Ç‰∏ãÔºöÁÇπÂáª‰∏äÂõæÁöÑ2,3,4ÂèØÁúãÂà∞‰∏çÂêåÁî®Êà∑ÁöÑÁªìÊûúÔºåÂ¶ÇÊûú‰Ω†Ëµ∞Âà∞Ëøô‰∏ÄÊ≠•ÔºåÈÇ£‰πàÊÅ≠Âñú‰Ω†Êï¥ÂêàÊàêÂäü„ÄÇ ÊÄªÁªì‰ª•‰∏äÊ∫êÁ†ÅÈÉΩÂú®github‰∏ä„ÄÇÈ°πÁõÆÂú∞ÂùÄÔºöSSMÊ¨¢ËøéÊãçÁ†ñ„ÄÇ]]></content>
      <categories>
        <category>SSM</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Spring</tag>
        <tag>SpringMVC</tag>
        <tag>Mybatis</tag>
        <tag>IDEA</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Êó•Â∏∏ËÆ∞ÂΩïÔºà‰∏âÔºâÊõ¥Êç¢Hexo‰∏ªÈ¢ò]]></title>
    <url>%2F2016%2F06%2F18%2Fnormal-skill3%2F</url>
    <content type="text"><![CDATA[ÂâçË®Ä Áî±‰∫éÂçö‰∏ªÁöÑÂñúÊñ∞ÂéåÊóßÔºåÂÜçÁªèËøá‰∏ÄÊÆµÊó∂Èó¥ÂØπ‰∏ä‰∏Ä‰∏™‰∏ªÈ¢òÁöÑÂÆ°ÁæéÁñ≤Âä≥Âä†‰∏äÊàë‰∏ì(zhuang)Á†î(bi)ÁöÑÁ≤æÁ•û‰∫éÊòØÂ∞±ÊÉ≥Êâæ‰∏Ä‰∏™BÊ†ºËæÉÈ´òÁöÑ‰∏ªÈ¢ò„ÄÇÁªèËøá‰∏ÄÊÆµÊó∂Èó¥ÁöÑÊü•ÊâæÂèëÁé∞NexTËøô‰∏™‰∏ªÈ¢òÁÆÄÊ¥ÅËÄå‰∏çÂ§±Âçé‰∏ΩÔºå‰ΩéË∞ÉËÄå‰∏çÂ§±ÈÄºÊ†º(Â∞±‰∏çÊî∂ÂπøÂëäË¥π‰∫Ü)ÁâπÂà´ÈÄÇÂêàÊàëÔºåÊé•ÁùÄÂ∞±ÁùÄÊâãÂºÄÂπ≤„ÄÇ ÂÆâË£ÖNexT‰∏ªÈ¢ò‰ªéGit‰∏äÂÖãÈöÜ‰∏ªÈ¢òËøôÈáåÊàëÂ∞±‰∏ç‰ªãÁªçÊúâÂÖ≥HexoÁöÑ‰∏úË•ø‰∫ÜÔºåÈªòËÆ§ÊòØÁü•ÈÅìÂ¶Ç‰ΩïÊê≠Âª∫HexoÂçöÂÆ¢ÁöÑ„ÄÇËøò‰∏çÂ§™Ê∏ÖÊ•öÁöÑËØ∑Ëá™Ë°åÁôæÂ∫¶„ÄÇÈ¶ñÂÖàÂ∞ÜNexT‰∏ªÈ¢òÂÖàÂÖãÈöÜÂà∞Ëá™Â∑±ÁîµËÑë‰∏äÔºö cd your-hexo-site git clone https://github.com/iissnan/hexo-theme-next themes/next„ÄÇÂÆâË£Ö‰∏ªÈ¢òÊé•‰∏ãÊù•Êàë‰ª¨Âè™ÈúÄË¶ÅÂ∞ÜÁ´ôÁÇπ‰∏ãÁöÑ_config.ymlÈÖçÁΩÆÊñá‰ª∂‰∏≠ÁöÑ‰∏ªÈ¢òÈÖçÁΩÆÊõ¥Êç¢ÊàêNextÔºåÂ¶Ç‰∏ãÂõæÔºöÂÖ∂ÂÆûËøôÊ†∑‰∏ªÈ¢òÂ∞±ÈÖçÂ•Ω‰∫ÜÔºåÊòØ‰∏çÊòØÂæàÁÆÄÂçï„ÄÇ NexT‰∏ªÈ¢òÈÖçÁΩÆHexoÈÖçÁΩÆÊñá‰ª∂Áõ∏ÂÖ≥ÈÖçÁΩÆNext‰∏ªÈ¢òÁöÑ‰∏™‰∫∫Â§¥ÂÉèÊòØÂú®HexoÈÖçÁΩÆÊñá‰ª∂‰∏≠ÁöÑ„ÄÇNexTÂêåÊ†∑‰πüÊîØÊåÅÂ§öËØ¥ÈÖçÁΩÆÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÂ∞Ü‰Ω†Ëá™Â∑±ÁöÑÂ§öËØ¥Ë¥¶Âè∑‰πüÈÖçÁΩÆÂà∞HexoÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏≠Âç≥ÂèØ„ÄÇduoshuo_shortname: your name NextÈÖçÁΩÆÊñá‰ª∂Áõ∏ÂÖ≥ÈÖçÁΩÆNexT‰∏ªÈ¢òÈùûÂ∏∏Âê∏ÂºïÊàëÁöÑ‰∏ÄÁÇπÂ∞±ÊòØ‰ªñÊîØÊåÅÊâìËµèÂäüËÉΩÔºåËøôËÆ©ÊàëËøôÁßçÁ©∑ÈÄºÁ®ãÂ∫èÁåøÂèàÁúãÂà∞‰∫ÜÁîüË∑Ø(Â§öÂçä‰πüÊ≤°‰∫∫‰ºöÁªôÊàëÊâìËµè)Ôºå‰ª•‰∏ã‰∏ÄÊÆµÈÖçÁΩÆÂç≥ÂèØÂú®ÊØèÁØáÂçöÊñá‰∏ãËæπÂºÄÂêØÊâìËµèÂäüËÉΩ„ÄÇÂæÆ‰ø°‰πüÊòØÂèØ‰ª•ÁöÑÔºå‰ΩÜÊòØÊàëÊâæ‰∫ÜÂçäÂ§©Ê≤°ÊúâÊâæÂà∞ÁîüÊàêÂæÆ‰ø°ÊîØ‰ªòÁ†ÅÁöÑÂú∞Êñπ„ÄÇÂÖ∂‰ªñÁöÑ‰∏Ä‰∫õÈÖçÁΩÆÊàëËßâÂæóÈÉΩÊØîËæÉÁÆÄÂçïÔºåÁúãÂÆòÊñπÁöÑÂ∏ÆÂä©ÊñáÊ°£‰πüÊòØÂÆåÂÖ®ÂèØ‰ª•ÁöÑÔºåÊúâÈóÆÈ¢òÁöÑÊàë‰ª¨ÂèØ‰ª•ÂÜçËÆ®ËÆ∫„ÄÇ ‰∏Ä‰∏™ÁªïÂùëÊåáÂçóÊàëÂú®Êç¢ÂÆåNexT‰πãÂêéÂèëÁé∞Âú®È¶ñÈ°µËøôÈáåÊòæÁ§∫ÁöÑÂàÜÁ±ªÂíå‰æøÁ≠æÁöÑÁªüËÆ°ÈÉΩÊòØÂØπÁöÑÔºå‰ΩÜÊòØÁÇπËøõÂéª‰πãÂêéÂ∞±ÊòØÁ©∫ÁôΩÁöÑ„ÄÇÊàëÊü•Áúã‰∫ÜHexoÂíåNexTÁöÑÊñáÊ°£ÂèëÁé∞ÊàëÂÜôÁöÑÊ≤°Êúâ‰ªª‰ΩïÈóÆÈ¢òÔºå‰πãÂêéÂ∞±ÊáµÈÄº‰∫Ü„ÄÇ„ÄÇ„ÄÇÂêÑ‰ΩçÊúâÁ¢∞Âà∞Ëøô‰∏™ÈóÆÈ¢òÁöÑÂèØ‰ª•ÂæÄ‰∏ãÁúã„ÄÇ ÁªïÂùë‰πãÂêéÊàë‰ªîÁªÜÁöÑÊü•ÈòÖ‰∫ÜNexTÁöÑÊñáÊ°£ÔºåÂèëÁé∞‰ªñÊâÄ‰ΩøÁî®ÁöÑtagsÂíåcategoriesÊñá‰ª∂Â§π‰∏ãÁöÑindex.mdÁöÑÊ†ºÂºèÊòØËøôÊ†∑ÁöÑÔºö12345---title: tagsdate: 2016-06-16 02:13:06type: &quot;tags&quot;--- ËøôÂíåÊàë‰πãÂâç‰ΩøÁî®ÁöÑJackMan‰∏ªÈ¢òÊòØÂÆåÂÖ®‰∏ç‰∏ÄÊ†∑ÁöÑ(ÊúâÂÖ≥JackMan‰∏ªÈ¢òÂèØ‰ª•Ëá™Ë°åÊü•ÈòÖ)„ÄÇ‰πãÂêéÊàëËÆ≤categoriesÊñá‰ª∂‰∏ãÁöÑindex.mdÊñá‰ª∂‰πüÊç¢ÊàêËøôÊ†∑ÁöÑÊ†ºÂºèÂ∞±Ê≤°ÊúâÈóÆÈ¢ò‰∫Ü„ÄÇÂ¶ÇÊûú‰Ω†ÂíåÊàë‰∏ÄÊ†∑ÁúºÁ•û‰∏çÂ•ΩÁöÑËØùÂª∫ËÆÆÈÖçÂâØÁúºÈïú„ÄÇ ÊÄªÁªìÂÖ∂ÂÆû‰ª•‰∏äÁöÑÂæàÂ§ö‰∏úË•øÈÉΩÊòØÂú®NexTÂÆòÊñπÊñáÊ°£ÈáåÊü•ÂæóÂà∞ÁöÑÔºåÊé•‰∏ãÊù•Êàë‰ºöÂ∞ùËØïÊèê‰∏ÄÁÇπpull requestÊù•Êõ¥Âä†Ê∑±ÂÖ•ÁöÑ‰∫ÜËß£Hexo„ÄÇ]]></content>
      <categories>
        <category>Êó•Â∏∏ËÆ∞ÂΩï</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Êó•Â∏∏ËÆ∞ÂΩïÔºà‰∫åÔºâSpringMvcÂØºÂá∫Excel]]></title>
    <url>%2F2016%2F06%2F14%2Fnormal-skill2%2F</url>
    <content type="text"><![CDATA[ÂâçË®Ä Áõ∏‰ø°ÂæàÂ§öÊúãÂèãÂú®ÂÆûÈôÖÂ∑•‰Ωú‰∏≠ÈÉΩ‰ºöË¶ÅÂ∞ÜÊï∞ÊçÆÂØºÂá∫ÊàêExcelÁöÑÈúÄÊ±ÇÔºåÈÄöÂ∏∏ËøôÊ†∑ÁöÑÂÅöÊ≥ïÊúâ‰∏§Áßç„ÄÇ‰∏ÄÊòØÈááÁî®JXLÊù•ÁîüÊàêExcelÔºå‰πãÂêé‰øùÂ≠òÂà∞ÊúçÂä°Âô®ÔºåÁÑ∂ÂêéÂú®ÁîüÊàêÈ°µÈù¢‰πãÂêé‰∏ãËΩΩËØ•Êñá‰ª∂„ÄÇ‰∫åÊòØ‰ΩøÁî®POIÊù•ÁîüÊàêExcelÔºå‰πãÂêé‰ΩøÁî®StreamÁöÑÊñπÂºèËæìÂá∫Âà∞ÂâçÂè∞Áõ¥Êé•‰∏ãËΩΩ(ps:ÂΩìÁÑ∂‰πüÂèØ‰ª•ÁîüÊàêÂà∞ÊúçÂä°Âô®‰∏≠ÂÜç‰∏ãËΩΩ„ÄÇ)„ÄÇËøôÈáåÊàë‰ª¨ËÆ®ËÆ∫Á¨¨‰∫åÁßç„ÄÇËá≥‰∫é‰∏§ÁßçÊñπÂºèÁöÑ‰ºòÁº∫ÁÇπËØ∑Ëá™Ë°åÁôæÂ∫¶„ÄÇ Struts2ÁöÑÊñπÂºèÈÄöÂ∏∏Êàë‰ºöÂ∞ÜÂ∑≤ÁªèÁîüÊàêÂ•ΩÁöÑHSSFWorkbookÊîæÂà∞‰∏Ä‰∏™InputStream‰∏≠ÔºåÁÑ∂ÂêéÂÜçÂà∞xmlÈÖçÁΩÆÊñá‰ª∂‰∏≠Â∞ÜËøîÂõûÁªìÊûúÊõ¥Êîπ‰∏∫streamÁöÑÊñπÂºè„ÄÇÂ¶Ç‰∏ãÔºö12345678private void responseData(HSSFWorkbook wb) throws IOException &#123; ByteArrayOutputStream baos = new ByteArrayOutputStream(); wb.write(baos); baos.flush(); byte[] aa = baos.toByteArray(); excelStream = new ByteArrayInputStream(aa, 0, aa.length); baos.close();&#125; ÈÖçÁΩÆÊñá‰ª∂Ôºö1234567&lt;action name="exportXxx" class="xxxAction" method="exportXxx"&gt; &lt;result name="exportSuccess" type="stream"&gt; &lt;param name="inputName"&gt;excelStream&lt;/param&gt; &lt;param name="contentType"&gt;application/vnd.ms-excel&lt;/param&gt; &lt;param name="contentDisposition"&gt;attachment;filename="Undefined.xls"&lt;/param&gt; &lt;/result&gt;&lt;/action&gt; ËøôÊ†∑Âç≥ÂèØËææÂà∞ÁÇπÂáªÈìæÊé•Âç≥ÂèØÁõ¥Êé•‰∏ãËΩΩÊñá‰ª∂ÁöÑÁõÆÁöÑ„ÄÇ SpringMVCÁöÑÊñπÂºèÂÖàË¥¥‰ª£Á†ÅÔºö123456789101112131415@RequestMapping("/exportXxx.action")public void exportXxx(HttpServletRequest request, HttpServletResponse response, @RequestParam(value="scheduleId", defaultValue="0")int scheduleId)&#123; HSSFWorkbook wb = createExcel(scheduleId) ; try &#123; response.setHeader("Content-Disposition", "attachment; filename=appointmentUser.xls"); response.setContentType("application/vnd.ms-excel; charset=utf-8") ; OutputStream out = response.getOutputStream() ; wb.write(out) ; out.flush(); out.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; ÂÖ∂ÂÆûspringMVCÂíåStruts2ÁöÑÂéüÁêÜ‰∏äÊòØ‰∏ÄÊ†∑ÁöÑÔºåÂè™ÊòØStruts2ÊòØÊâçÂéªÈÖçÁΩÆÊñá‰ª∂ÁöÑÊñπÂºè„ÄÇÈ¶ñÂÖàÊòØ‰ΩøÁî®createExcel()Ëøô‰∏™ÊñπÊ≥ïÊù•ÁîüÊàêExcelÂπ∂ËøîÂõûÔºåÊúÄÂêéÂà©Áî®rresponseÂç≥ÂèØÂêëÂâçÂè∞ËæìÂá∫ExcelÔºåËøôÁßçÊñπÊ≥ïÊòØÈÄöÁî®ÁöÑÔºå‰πüÂèØ‰ª•ËØïÁî®‰∏éServlet„ÄÅStruts2Á≠â„ÄÇÊàë‰ª¨Âè™ÈúÄË¶ÅÂú®responseÁöÑÂ§¥‰ø°ÊÅØ‰∏≠ËÆæÁΩÆÁõ∏Â∫îÁöÑËæìÂá∫‰ø°ÊÅØÂç≥ÂèØ„ÄÇ ÊÄªÁªì‰∏çÁÆ°ÊòØ‰ΩøÁî®Struts2ÔºåËøòÊòØ‰ΩøÁî®SpringMVCÁ©∂ÂÖ∂Ê†πÊú¨ÈÉΩÊòØ‰ΩøÁî®ÁöÑresponseÔºåÊâÄ‰ª•Âè™Ë¶ÅÊàë‰ª¨ÊääresponseÁêÜËß£ÈÄè‰∫Ü‰∏çÁÆ°ÊòØ‰∏ãËΩΩÂõæÁâá„ÄÅworld„ÄÅExcelËøòÊòØÂÖ∂‰ªñ‰ªÄ‰πàÊñá‰ª∂ÈÉΩÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ]]></content>
      <categories>
        <category>Êó•Â∏∏ËÆ∞ÂΩï</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>poi</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Êó•Â∏∏ËÆ∞ÂΩïÔºà‰∏ÄÔºâMySQLË¢´ÈîÅËß£ÂÜ≥ÊñπÊ°à]]></title>
    <url>%2F2016%2F06%2F05%2Fnormal-skill1%2F</url>
    <content type="text"><![CDATA[ÂâçË®Ä Áî±‰∫éÂâçÊÆµÊó∂Èó¥‰∏∫‰∫ÜËÆ©ÈÉ®ÁΩ≤Âú®Linux‰∏≠ÁöÑÈ°πÁõÆËÆøÈóÆÂè¶‰∏ÄÂè∞ÊúçÂä°Âô®ÁöÑMySQLÔºåÁªèËøáÂêÑÁßçÊäòËÖæÂ∞±ÊäärootÁî®Êà∑ÁªôÂºÑÂá∫ÈóÆÈ¢ò‰∫ÜÔºåÂØºËá¥Ê≠ªÊ¥ªÁôª‰∏ç‰∏äPS:Linux‰∏≠ÁöÑÈ°πÁõÆËøòÊòØÊ≤°ÊúâËøû‰∏ä„ÄÇ„ÄÇ(ËøôÊòØÂêéËØù‰∫Ü„ÄÇ)„ÄÇÁªèËøáÂêÑÁßçÊü•ÈòÖËµÑÊñôÁªà‰∫éÊâæÂà∞Ëß£ÂÜ≥ÊñπÊ≥ï‰∫Ü„ÄÇ Êä•ÈîôÂ¶Ç‰∏ãÔºöAccess denied for user &#39;root&#39;@&#39;localhost&#39; (using password:YES) ÂÖ≥Èó≠MySQLÊúçÂä°Ôºå‰øÆÊîπMySQLÂàùÂßãÊñá‰ª∂ÊâìÂºÄMySQLÁõÆÂΩï‰∏ãÁöÑmy-default.iniÊñá‰ª∂ÔºåÂ¶ÇÂõæÔºöÂú®ÊúÄÂêé‰∏ÄË°åÂä†ÂÖ•skip-grant-tables‰πãÂêé‰øùÂ≠ò„ÄÇÁÑ∂ÂêéÈáçÂêØMySQLÊúçÂä°„ÄÇ Áî®ÂëΩ‰ª§Ë°åÁôªÂΩïMySQL‰øÆÊîπROOTË¥¶Âè∑ÂØÜÁ†ÅÁî®ÂëΩ‰ª§Ë°åÁôªÂΩïMySQLËæìÂÖ•mysql -uroot -p,‰∏çÁî®ËæìÂÖ•ÂØÜÁ†ÅÔºåÁõ¥Êé•Êï≤ÂõûËΩ¶Âç≥ÂèØËøõÂÖ•„ÄÇÂ¶Ç‰∏ãÂõæÔºö‰πãÂêéÊâßË°å‰ª•‰∏ãËØ≠Âè•‰øÆÊîπROOTÁî®Êà∑ÂØÜÁ†ÅÔºö use mysql; update user set password=PASSWORD(&quot;‰Ω†ÁöÑÂØÜÁ†Å&quot;) where user=&#39;root&#39;; ËøòÂéümy-default.iniÊñá‰ª∂ÊúÄÂêéËøòÂéüÈÖçÁΩÆÊñá‰ª∂Ôºå‰πãÂêéÈáçÂêØMySQLÊúçÂä°Âç≥ÂèØÊ≠£Â∏∏ÁôªÂΩï‰∫Ü„ÄÇ]]></content>
      <categories>
        <category>Êó•Â∏∏ËÆ∞ÂΩï</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[javaÂ§öÁ∫øÁ®ãÔºà‰∫åÔºâÊúâËøîÂõûÂÄºÁöÑÂ§öÁ∫øÁ®ã]]></title>
    <url>%2F2016%2F05%2F27%2Fjava-thread2%2F</url>
    <content type="text"><![CDATA[ÂâçË®Ä‰πãÂâçÊàë‰ª¨‰ΩøÁî®Â§öÁ∫øÁ®ãË¶Å‰πàÊòØÁªßÊâøThreadÁ±ªÔºåË¶Å‰πàÊòØÂÆûÁé∞RunnableÊé•Âè£ÔºåÁÑ∂ÂêéÈáçÂÜô‰∏Ä‰∏ãrun()ÊñπÊ≥ïÂç≥ÂèØ„ÄÇ‰ΩÜÊòØÂè™ÊúâÁöÑËØùÂ¶ÇÊûúÊúâÊ≠ªÈîÅ„ÄÅÂØπÂÖ±‰∫´ËµÑÊ∫êÁöÑËÆøÈóÆÂíåÈöèÊó∂ÁõëÊéßÁ∫øÁ®ãÁä∂ÊÄÅÂ∞±‰∏çË°å‰∫ÜÔºå‰∫éÊòØÂú®Java5‰πãÂêéÂ∞±Êúâ‰∫ÜCallableÊé•Âè£„ÄÇ ÁÆÄÂçïÁöÑÂÆûÁé∞ÊúâËøîÂõûÂÄºÁöÑÁ∫øÁ®ã‰ª£Á†ÅÂ¶Ç‰∏ãÔºöCallableFutureÁ±ª1234567891011121314151617181920212223242526272829303132333435package top.crosssoverjie.study.Thread;import java.util.concurrent.ExecutionException;import java.util.concurrent.ExecutorService;import java.util.concurrent.Executors;import java.util.concurrent.Future;public class CallableFuture &#123; public static void main(String[] args) &#123; //ÂàõÂª∫‰∏Ä‰∏™Á∫øÁ®ãÊ±† ExecutorService pool = Executors.newFixedThreadPool(3) ; //ÂàõÂª∫‰∏â‰∏™ÊúâËøîÂõûÂÄºÁöÑ‰ªªÂä° CallableTest2 c1 = new CallableTest2("Á∫øÁ®ã1") ; CallableTest2 c2 = new CallableTest2("Á∫øÁ®ã2") ; CallableTest2 c3 = new CallableTest2("Á∫øÁ®ã3") ; Future f1 = pool.submit(c1) ; Future f2 = pool.submit(c2) ; Future f3 = pool.submit(c3) ; try &#123; System.out.println(f1.get().toString()); System.out.println(f2.get().toString()); System.out.println(f3.get().toString()); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; catch (ExecutionException e) &#123; e.printStackTrace(); &#125;finally&#123; pool.shutdown(); &#125; &#125;&#125; ¬∑CallableTest2¬∑Á±ªÔºö123456789101112131415161718package top.crosssoverjie.study.Thread;import java.util.concurrent.Callable;public class CallableTest2 implements Callable &#123; private String name ; public CallableTest2(String name) &#123; this.name = name; &#125; @Override public Object call() throws Exception &#123; return name+"ËøîÂõû‰∫Ü‰∏úË•ø"; &#125; &#125; ËøêË°åÁªìÊûúÔºö123Á∫øÁ®ã1ËøîÂõû‰∫Ü‰∏úË•øÁ∫øÁ®ã2ËøîÂõû‰∫Ü‰∏úË•øÁ∫øÁ®ã3ËøîÂõû‰∫Ü‰∏úË•ø ÊÄªÁªì‰ª•‰∏äÂ∞±ÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑ‰æãÂ≠êÔºåÈúÄË¶Å‰∫ÜËß£Êõ¥Â§öËØ¶ÊÉÖÂèØ‰ª•ÂéªÁúãÈÇ£Âá†‰∏™Á±ªÁöÑAPI„ÄÇ]]></content>
      <categories>
        <category>javaÂ§öÁ∫øÁ®ã</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Callable</tag>
        <tag>ExecutorService</tag>
        <tag>Future</tag>
        <tag>Executors</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËÆ©ÁôæÂ∫¶ÂíågoogleÊî∂ÂΩïÊàë‰ª¨ÁöÑÁΩëÁ´ô]]></title>
    <url>%2F2016%2F05%2F19%2Fbaidu-google%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄËä±‰∫ÜÂá†Â§©Êó∂Èó¥Áªà‰∫éÊääËøô‰∏™Áúã‰ººÈ´òÂ§ß‰∏äÁöÑÂçöÂÆ¢ÊêûÂ•Ω‰∫ÜÔºå‰ΩÜÊòØÂèëÁé∞Âè™ËÉΩÈÄöËøáÂú®Âú∞ÂùÄÊ†èËæìÂÖ•Âú∞ÂùÄËøõË°åËÆøÈóÆÔºåËøôÂæàÊòéÊòæÂíåÊàëË£ÖXË£ÖÂà∞Â∫ïÁöÑÊÄßÊ†ºÔºå‰∫éÊòØ‰πéÂú®Êü•ÈòÖ‰∫ÜÂòüÁà∑ÁöÑÂçöÂÆ¢ÔºåÂíåÊàëÂêÑÁßçÁôæÂ∫¶Áªà‰∫éÊêûÂá∫Êù•‰∫Ü„ÄÇ ËÆ©Ë∞∑Ê≠åÊî∂ÂΩïËÆ©Ë∞∑Ê≠åÊî∂ÂΩïËøòÊòØÊØîËæÉÁÆÄÂçïÔºåÈ¶ñÂÖàÊàë‰ª¨ËÇØÂÆöÊòØË¶ÅÁøªÂ¢ôÁöÑ(Ëøô‰∏™Â∞±‰∏ç‰ªîÁªÜËØ¥‰∫ÜÔºåÂÖ∑‰ΩìÁôæÂ∫¶„ÄÇ)Áî±‰∫éÊàëËøôÈáåÁ™ÅÁÑ∂Áôª‰∏ç‰∏ägoogleË¥¶Âè∑‰∫ÜÔºåÊâÄ‰ª•‰∏ãÊ¨°Ë°•ÂÖÖÊà™Âõæ„ÄÇÂêå‰ΩìÊù•ËØ¥Â∞±ÊòØ‰ª•‰∏ãÊ≠•È™§Ôºö ‰∏ãËΩΩgoogleÁöÑhtmlÈ™åËØÅÊñá‰ª∂ÊîæÂà∞ÁΩëÁ´ôÁöÑÊ†πÁõÆÂΩïÔºå‰ΩøgoogleËÉΩÂ§üËÆøÈóÆÂæóÂà∞„ÄÇ Âú®Ë∞∑Ê≠åÁ´ôÈïøÂ∑•ÂÖ∑ÈáåÂä†‰∏äËá™Â∑±ÁöÑÁ´ôÁÇπÂú∞Âõæ„ÄÇ ÂàõÂª∫Á´ôÁÇπÂú∞ÂõæÁ´ôÁÇπÂú∞ÂõæÊòØ‰∏ÄÁßçÊñá‰ª∂ÔºåÂèØ‰ª•ÈÄöËøáËØ•Êñá‰ª∂ÂàóÂá∫ÊÇ®ÁΩëÁ´ô‰∏äÁöÑÁΩëÈ°µÔºå‰ªéËÄåÂ∞ÜÊÇ®ÁΩëÁ´ôÂÜÖÂÆπÁöÑÁªÑÁªáÊû∂ÊûÑÂëäÁü•GoogleÂíåÂÖ∂‰ªñÊêúÁ¥¢ÂºïÊìéÔºå‰ª•‰æøÊõ¥Âä†Êô∫ËÉΩÁöÑÊäìÂèñ‰Ω†ÁöÑÁΩëÁ´ô‰ø°ÊÅØ„ÄÇÈ¶ñÂÖàÊàë‰ª¨Ë¶Å‰∏∫HexoÂÆâË£ÖË∞∑Ê≠åÂíåÁôæÂ∫¶ÁöÑÊèí‰ª∂(Âçö‰∏ªÊòØÁî®HexoÊù•Êê≠Âª∫ÁöÑÂçöÂÆ¢)ÔºåÂ¶Ç‰∏ãÔºö123npm install hexo-generator-sitemap --savenpm install hexo-generator-baidu-sitemap --save Âú®ÂçöÂÆ¢ÁöÑÊ†πÁõÆÂΩï‰∏≠ÁöÑ_config.ymlÊñá‰ª∂‰∏≠Âä†ÂÖ•‰ª•‰∏ãÂÜÖÂÆπÔºö‰πãÂêéÈÉ®ÁΩ≤‰∏äÂéª‰πãÂêéÂ¶ÇÊûúÂú®Âú∞ÂùÄÊ†èÂêéÈù¢Âä†‰∏äÁ´ôÁÇπÂú∞ÂõæÂ¶Ç‰∏ãÁöÑËØùË°®Á§∫ÈÉ®ÁΩ≤ÊàêÂäüÔºö ËÆ©ÁôæÂ∫¶Êî∂ÂΩïÊúâ‰∏âÁßçÊñπÂºèÂèØ‰ª•ËÆ©ÁôæÂ∫¶Êî∂ÂΩïÊàë‰ª¨ÁöÑÁΩëÁ´ô„ÄÇÁ¨¨‰∏ÄÁßçÔºö‰∏ªÂä®Êé®ÈÄÅÊàëÁî®JavaÂÜô‰∫Ü‰∏Ä‰∏™Â∞èÁ®ãÂ∫èÔºåÂèØ‰ª•ÊâãÂ∑•ÁöÑËá™Â∑±Êé®ÈÄÅÂú∞ÂùÄÁªôÁôæÂ∫¶„ÄÇ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990package top.crossoverjie.post;import java.io.BufferedReader;import java.io.IOException;import java.io.InputStreamReader;import java.io.PrintWriter;import java.net.URL;import java.net.URLConnection;public class Post &#123; public static void main(String[] args) &#123; String url = "http://data.zz.baidu.com/urls?site=crossoverjie.top&amp;token=1002EzhDReuy34dq";// ÁΩëÁ´ôÁöÑÊúçÂä°Âô®ËøûÊé• String[] param = &#123; // ÈúÄË¶ÅÊé®ÈÄÅÁöÑÁΩëÂùÄ// "http://crossoverjie.top/tags",// "http://crossoverjie.top/categories", //"http://crossoverjie.top/about/" "http://crossoverjie.top/2016/05/14/java-thread1" &#125;; String json = Post(url, param);// ÊâßË°åÊé®ÈÄÅÊñπÊ≥ï System.out.println("ÁªìÊûúÊòØ" + json); // ÊâìÂç∞Êé®ÈÄÅÁªìÊûú &#125; /** * ÁôæÂ∫¶ÈìæÊé•ÂÆûÊó∂Êé®ÈÄÅ * * @param PostUrl * @param Parameters * @return */ public static String Post(String PostUrl, String[] Parameters) &#123; if (null == PostUrl || null == Parameters || Parameters.length == 0) &#123; return null; &#125; String result = ""; PrintWriter out = null; BufferedReader in = null; try &#123; // Âª∫Á´ãURL‰πãÈó¥ÁöÑËøûÊé• URLConnection conn = new URL(PostUrl).openConnection(); // ËÆæÁΩÆÈÄöÁî®ÁöÑËØ∑Ê±ÇÂ±ûÊÄß conn.setRequestProperty("Host", "data.zz.baidu.com"); conn.setRequestProperty("User-Agent", "curl/7.12.1"); conn.setRequestProperty("Content-Length", "83"); conn.setRequestProperty("Content-Type", "text/plain"); // ÂèëÈÄÅPOSTËØ∑Ê±ÇÂøÖÈ°ªËÆæÁΩÆÂ¶Ç‰∏ã‰∏§Ë°å conn.setDoInput(true); conn.setDoOutput(true); // Ëé∑ÂèñconnÂØπÂ∫îÁöÑËæìÂá∫ÊµÅ out = new PrintWriter(conn.getOutputStream()); // ÂèëÈÄÅËØ∑Ê±ÇÂèÇÊï∞ String param = ""; for (String s : Parameters) &#123; param += s + "\n"; &#125; out.print(param.trim()); // ËøõË°åËæìÂá∫ÊµÅÁöÑÁºìÂÜ≤ out.flush(); // ÈÄöËøáBufferedReaderËæìÂÖ•ÊµÅÊù•ËØªÂèñUrlÁöÑÂìçÂ∫î in = new BufferedReader( new InputStreamReader(conn.getInputStream())); String line; while ( (line = in.readLine()) != null) &#123; result += line; &#125; &#125; catch (Exception e) &#123; System.out.println("ÂèëÈÄÅpostËØ∑Ê±ÇÂá∫Áé∞ÂºÇÂ∏∏ÔºÅ" + e); e.printStackTrace(); &#125; finally &#123; try &#123; if (out != null) &#123; out.close(); &#125; if (in != null) &#123; in.close(); &#125; &#125; catch (IOException ex) &#123; ex.printStackTrace(); &#125; &#125; return result; &#125;&#125; ËøêË°å‰πãÂêéÁªìÊûúÂ¶Ç‰∏ãÔºö1ÁªìÊûúÊòØ&#123;"remain":499,"success":1&#125; remainË°®Á§∫ËøòÊúâÂ§öÂ∞ëÂèØ‰ª•Êé®ÈÄÅÔºåÊàëËøôÈáåË°®Á§∫ËøòÊúâ499Êù°„ÄÇsuccessË°®Á§∫ÊàêÂäüÊé®ÈÄÅ‰∫ÜÂ§öÂ∞ëÊù°ÈìæÊé•ÔºåÊàëËøôÈáåË°®Á§∫ÊàêÂäüÊé®ÈÄÅ‰∫Ü‰∏ÄÊù°ÈìæÊé•„ÄÇ Á¨¨‰∫åÁßçÊòØ‰∏ªÂä®Êé®ÈÄÅÔºåÂèØ‰ª•ÊåâÁÖßÁôæÂ∫¶ÁöÑÊïôÁ®ãËøõË°åÈÖçÁΩÆÔºö Á¨¨‰∏âÁßçÂ∞±ÊòØÈÖçÁΩÆÁ´ôÁÇπÂú∞Âõæ‰∫ÜÔºåÊåâÁÖß‰πãÂâçÂ∞ÜÁöÑÂ∞ÜÁ´ôÁÇπÂú∞ÂõæÂÆâË£ÖÂà∞È°πÁõÆ‰∏≠ÔºåÂèÇÁÖßÊàëÁöÑÈÖçÁΩÆÂç≥ÂèØÔºöÂ¶ÇÊûúËÉΩÂÉèÊàëËøô‰∏™‰∏ÄÊ†∑Áä∂ÊÄÅÊ≠£Â∏∏ÔºåËÉΩËé∑ÂèñÂà∞URLÊï∞ÈáèÂ∞±Ë°®Á§∫ÊàêÂäü‰∫Ü„ÄÇ ÊÄªÁªìÂú®Êï¥‰∏™ËøáÁ®ã‰∏≠‰∏çÊòØÊàëÈªëÁôæÂ∫¶ÔºåÁôæÂ∫¶ÁöÑÊïàÁéáÁúüÊòØÂ§™‰Ωé‰∫Ü„ÄÇÊàëÂ§¥‰∏ÄÂ§©Âú®googleÊèê‰∫§‰∏äÂéªÁ¨¨‰∫åÂ§©Â∞±ËÉΩÊî∂Âà∞‰∫ÜÔºåÁôæÂ∫¶ÊòØÊàëÊèê‰∫§‰∫ÜÂ§ßÊ¶Ç‰∏ÄÂë®Â§öÊâçÁªôÊàëÊî∂ÂΩïËøõÂéªÔºåËøôÂΩìÁÑ∂ËÇØÂÆö‰πüÂíåÊàëÁöÑÂÜÖÂÆπÊúâÂÖ≥Á≥ª„ÄÇ]]></content>
      <categories>
        <category>Â∞èÊäÄÂ∑ß</category>
      </categories>
      <tags>
        <tag>baidu</tag>
        <tag>google</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[javaÂ§öÁ∫øÁ®ãÔºà‰∏ÄÔºâÂ§öÁ∫øÁ®ãÂü∫Á°Ä]]></title>
    <url>%2F2016%2F05%2F14%2Fjava-thread1%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄÊú¨Êñá‰∏ªË¶ÅËÆ≤Ëß£javaÂ§öÁ∫øÁ®ãÁöÑÂü∫Á°ÄÔºå‰ª•Âèä‰∏Ä‰∫õÂ∏∏Áî®ÊñπÊ≥ï„ÄÇÂÖ≥‰∫éÁ∫øÁ®ãÂêåÊ≠•„ÄÅExecutorServiceÊ°ÜÊû∂Êàë‰ºöÊîæÂà∞ÂêéÁª≠ÁöÑÊñáÁ´†ËøõË°åËÆ≤Ëß£„ÄÇ ËøõÁ®ã‰∏éÁ∫øÁ®ãÁöÑÂå∫Âà´ËøõÁ®ãËøõÁ®ãÁÆÄÂçïÁöÑÊù•ËØ¥Â∞±ÊòØÂú®ÂÜÖÂ≠ò‰∏≠ËøêË°åÁöÑÂ∫îÁî®Á®ãÂ∫èÔºå‰∏Ä‰∏™ËøõÁ®ãÂèØ‰ª•ÂêØÂä®Â§ö‰∏™Á∫øÁ®ã„ÄÇÊØîÂ¶ÇÂú®windows‰∏≠‰∏Ä‰∏™ËøêË°åEXEÊñá‰ª∂Â∞±ÊòØ‰∏Ä‰∏™ËøõÁ®ã„ÄÇ Á∫øÁ®ãÂêå‰∏Ä‰∏™Á∫øÁ®ã‰∏≠ÁöÑËøõÁ®ãÂÖ±Áî®Áõ∏ÂêåÁöÑÂú∞ÂùÄÁ©∫Èó¥ÔºåÂêåÊó∂ÂÖ±‰∫´ËøõÁ®ãÊâÄÊã•ÊúâÁöÑÂÜÖÂ≠òÂíåÂÖ∂‰ªñËµÑÊ∫ê„ÄÇ Á∫øÁ®ãDemo-ÁªßÊâøThreadÁ±ªÈ¶ñÂÖàÊàë‰ª¨Êàë‰ª¨ÁªßÊâøjava.lang.ThreadÁ±ªÊù•ÂàõÂª∫Á∫øÁ®ã„ÄÇ12345678910111213141516171819202122232425262728293031package top.crosssoverjie.study.Thread;public class TestThread &#123; public static void main(String[] args) &#123; System.out.println("‰∏ªÁ∫øÁ®ãIDÊòØÔºö" + Thread.currentThread().getId()); MyThread my = new MyThread("Á∫øÁ®ã1"); my.start() ; MyThread my2 = new MyThread("Á∫øÁ®ã2") ; /** * ËøôÈáåÁõ¥Êé•Ë∞ÉÁî®my2ÁöÑrun()ÊñπÊ≥ï„ÄÇ */ my2.run() ; &#125;&#125;class MyThread extends Thread &#123; private String name; public MyThread(String name) &#123; this.name = name; &#125; @Override public void run() &#123; System.out.println("ÂêçÂ≠óÔºö" + name + "ÁöÑÁ∫øÁ®ãIDÊòØ=" + Thread.currentThread().getId()); &#125;&#125; ËæìÂá∫ÁªìÊûú:123‰∏ªÁ∫øÁ®ãIDÊòØÔºö1ÂêçÂ≠óÔºöÁ∫øÁ®ã2ÁöÑÁ∫øÁ®ãIDÊòØ=1ÂêçÂ≠óÔºöÁ∫øÁ®ã1ÁöÑÁ∫øÁ®ãIDÊòØ=9 Áî±ËæìÂá∫ÁªìÊûúÊàë‰ª¨ÂèØ‰ª•ÂæóÂá∫‰ª•‰∏ãÁªìËÆ∫Ôºö myÂíåmy2ÁöÑÁ∫øÁ®ãID‰∏çÁõ∏ÂêåÔºåmy2Âíå‰∏ªÁ∫øÁ®ãIDÁõ∏Âêå„ÄÇËØ¥ÊòéÁõ¥Êé•Ë∞ÉÁî®run()ÊñπÊ≥ï‰∏ç‰ºöÂàõÂª∫Êñ∞ÁöÑÁ∫øÁ®ãÔºåËÄåÊòØÂú®‰∏ªÁ∫øÁ®ã‰∏≠Áõ¥Êé•Ë∞ÉÁî®ÁöÑrun()ÊñπÊ≥ï,ÂíåÊôÆÈÄöÁöÑÊñπÊ≥ïË∞ÉÁî®Ê≤°ÊúâÂå∫Âà´„ÄÇ ËôΩÁÑ∂myÁöÑstart()ÊñπÊ≥ïÊòØÂú®my2ÁöÑrun()ÊñπÊ≥ï‰πãÂâçË∞ÉÁî®Ôºå‰ΩÜÊòØÂç¥ÊòØÂêéËæìÂá∫ÂÜÖÂÆπÔºåËØ¥ÊòéÊñ∞Âª∫ÁöÑÁ∫øÁ®ãÂπ∂‰∏ç‰ºöÂΩ±Âìç‰∏ªÁ∫øÁ®ãÁöÑÊâßË°å„ÄÇ Á∫øÁ®ãDemo-ÂÆûÁé∞RunnableÊé•Âè£Èô§‰∫ÜÁªßÊâøjava.lang.ThreadÁ±ª‰πãÂ§ñÔºåÊàë‰ª¨ËøòÂèØ‰ª•ÂÆûÁé∞java.lang.RunnableÊé•Âè£Êù•ÂàõÂª∫Á∫øÁ®ã„ÄÇ12345678910111213141516171819202122232425262728293031package top.crosssoverjie.study.Thread;public class TestRunnable &#123; public static void main(String[] args) &#123; System.out.println("‰∏ªÁ∫øÁ®ãÁöÑÁ∫øÁ®ãIDÊòØ"+Thread.currentThread().getId()); MyThread2 my = new MyThread2("Á∫øÁ®ã1") ; Thread t = new Thread(my) ; t.start() ; MyThread2 my2 = new MyThread2("Á∫øÁ®ã2") ; Thread t2 = new Thread(my2) ; /** * ÊñπÊ≥ïË∞ÉÁî®ÔºåÂπ∂‰∏ç‰ºöÂàõÂª∫Á∫øÁ®ãÔºå‰æùÁÑ∂ÊòØ‰∏ªÁ∫øÁ®ã */ t2.run() ; &#125;&#125;class MyThread2 implements Runnable&#123; private String name ; public MyThread2(String name)&#123; this.name = name ; &#125; @Override public void run() &#123; System.out.println("Á∫øÁ®ã"+name+"ÁöÑÁ∫øÁ®ãIDÊòØ"+Thread.currentThread().getId()); &#125; &#125; ËæìÂá∫ÁªìÊûú:123‰∏ªÁ∫øÁ®ãÁöÑÁ∫øÁ®ãIDÊòØ1Á∫øÁ®ãÁ∫øÁ®ã2ÁöÑÁ∫øÁ®ãIDÊòØ1Á∫øÁ®ãÁ∫øÁ®ã1ÁöÑÁ∫øÁ®ãIDÊòØ9 notes: ÂÆûÁé∞RunnableÁöÑÊñπÂºèÈúÄË¶ÅÂ∞ÜÂÆûÁé∞RunnableÊé•Âè£ÁöÑÁ±ª‰Ωú‰∏∫ÂèÇÊï∞‰º†ÈÄíÁªôThreadÔºåÁÑ∂ÂêéÈÄöËøáThreadÁ±ªË∞ÉÁî®Start()ÊñπÊ≥ïÊù•ÂàõÂª∫Á∫øÁ®ã„ÄÇ Ëøô‰∏§ÁßçÊñπÂºèÈÉΩÂèØ‰ª•Êù•ÂàõÂª∫Á∫øÁ®ãÔºåËá≥‰∫éÈÄâÊã©Âì™‰∏ÄÁßçË¶ÅÁúãËá™Â∑±ÁöÑÈúÄÊ±Ç„ÄÇÁõ¥Êé•ÁªßÊâøThreadÁ±ªÁöÑËØù‰ª£Á†ÅË¶ÅÁÆÄÊ¥Å‰∏Ä‰∫õÔºå‰ΩÜÊòØÁî±‰∫éjavaÂè™ÊîØÊåÅÂçïÁªßÊâøÔºåÊâÄ‰ª•Â¶ÇÊûúË¶ÅÁªßÊâøÂÖ∂‰ªñÁ±ªÁöÑÂêåÊó∂ÈúÄË¶ÅÂÆûÁé∞Á∫øÁ®ãÈÇ£Â∞±Âè™ËÉΩÂÆûÁé∞RunnableÊé•Âè£‰∫ÜÔºåËøôÈáåÊõ¥Êé®ËçêÂÆûÁé∞RunnableÊé•Âè£„ÄÇ ÂÆûÈôÖ‰∏äÂ¶ÇÊûúÊàë‰ª¨Êü•ÁúãThreadÁ±ªÁöÑÊ∫êÁ†ÅÊàë‰ª¨‰ºöÂèëÁé∞ThreadÊòØÂÆûÁé∞‰∫ÜRunnableÊé•Âè£ÁöÑÔºö Á∫øÁ®ã‰∏≠Â∏∏Áî®ÁöÑÊñπÊ≥ï Â∫èÂè∑ ÊñπÊ≥ï ‰ªãÁªç 1 public void start() ‰ΩøËØ•Á∫øÁ®ãÊâßË°åÔºåjavaËôöÊãüÊú∫‰ºöË∞ÉÁî®ËØ•Á∫øÁ®ãÁöÑrun()ÊñπÊ≥ï„ÄÇ 2 public final void setName(String name) ‰øÆÊîπÁ∫øÁ®ãÂêçÁß∞„ÄÇ 3 public final void setPriority(int privority) ‰øÆÊîπÁ∫øÁ®ãÁöÑ‰ºòÂÖàÁ∫ß„ÄÇ 4 public final void setDaemon(false on) Â∞ÜËØ•Á∫øÁ®ãÊ†áËÆ∞‰∏∫ÂÆàÊä§Á∫øÁ®ãÊàñÁî®Êà∑Á∫øÁ®ãÔºåÂΩìÊ≠£Âú®ËøêË°åÁ∫øÁ®ãÈÉΩÊòØÂÆàÊä§Á∫øÁ®ãÊó∂ÔºåjavaËôöÊãüÊú∫ÈÄÄÂá∫ÔºåËØ•ÊñπÊ≥ïÂøÖÈ°ªÂú®ÂêØÂä®Á∫øÁ®ãÂâçË∞ÉÁî®„ÄÇ 5 public final void join(long mills) Á≠âÂæÖËØ•Á∫øÁ®ãÁöÑÁªàÊ≠¢Êó∂Èó¥ÊúÄÈïø‰∏∫millsÊØ´Áßí„ÄÇ 6 public void interrupt() ‰∏≠Êñ≠Á∫øÁ®ã„ÄÇ 7 public static boolean isAlive() ÊµãËØïÁ∫øÁ®ãÊòØÂê¶Â§Ñ‰∫éÊ¥ªÂä®Áä∂ÊÄÅ„ÄÇÂ¶ÇÊûúËØ•Á∫øÁ®ãÂ∑≤ÁªèÂêØÂä®Â∞öÊú™ÁªàÊ≠¢ÔºåÂàô‰∏∫Ê¥ªÂä®Áä∂ÊÄÅ„ÄÇ 8 public static void yield() ÊöÇÂÅúÂΩìÂâçÁ∫øÁ®ãÊâßË°åÁöÑÂØπË±°ÔºåÂπ∂ÊâßË°åÂÖ∂‰ªñÁ∫øÁ®ã„ÄÇ 9 public static void sleep(long mills) Âú®ÊåáÂÆöÊØ´ÁßíÊï∞ÂÜÖÔºåËÆ©ÂΩìÂâçÊâßË°åÁöÑÁ∫øÁ®ã‰ºëÁú†(ÊöÇÂÅú)„ÄÇ 10 public static Thread currentThread() ËøîÂõûÂΩìÂâçÁ∫øÁ®ãÁöÑÂºïÁî®„ÄÇ ÊñπÊ≥ïËØ¶Ëß£- public static void sleep(long mills)1234567891011121314151617181920212223242526272829303132333435package top.crosssoverjie.study.Thread;public class TestSleep &#123; private int i = 10 ; private Object ob = new Object() ; public static void main(String[] args) &#123; TestSleep t = new TestSleep() ; MyThread3 thread1 = t.new MyThread3() ; MyThread3 thread2 = t.new MyThread3() ; thread1.start() ; thread2.start() ; &#125; class MyThread3 extends Thread&#123; @Override public void run() &#123; synchronized (ob) &#123; i++ ; System.out.println("iÁöÑÂÄºÔºö"+i); System.out.println("Á∫øÁ®ãÔºö"+Thread.currentThread().getName()+"ËøõÂÖ•‰ºëÁú†Áä∂ÊÄÅ"); try &#123; Thread.currentThread().sleep(1000) ; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; System.out.println("Á∫øÁ®ãÔºö"+Thread.currentThread().getName()+"‰ºëÁú†ÁªìÊùü"); i++; System.out.println("iÁöÑÂÄº&gt;Ôºö"+i); &#125; &#125; &#125; &#125; ËæìÂá∫ÁªìÊûúÔºö12345678iÁöÑÂÄºÔºö11Á∫øÁ®ãÔºöThread-0ËøõÂÖ•‰ºëÁú†Áä∂ÊÄÅÁ∫øÁ®ãÔºöThread-0‰ºëÁú†ÁªìÊùüiÁöÑÂÄº&gt;Ôºö12iÁöÑÂÄºÔºö13Á∫øÁ®ãÔºöThread-1ËøõÂÖ•‰ºëÁú†Áä∂ÊÄÅÁ∫øÁ®ãÔºöThread-1‰ºëÁú†ÁªìÊùüiÁöÑÂÄº&gt;Ôºö14 Áî±ËæìÂá∫ÁªìÊûúÊàë‰ª¨ÂèØ‰ª•ÂæóÂá∫Ôºö ÂΩìThread0ËøõÂÖ•‰ºëÁú†Áä∂ÊÄÅÊó∂ÔºåThread1Âπ∂Ê≤°ÊúâÁªßÁª≠ÊâßË°åÔºåËÄåÊòØÁ≠âÂæÖThread0‰ºëÁú†ÁªìÊùüÈáäÊîæ‰∫ÜÂØπË±°ÈîÅÔºåThread1ÊâçÁªßÁª≠ÊâßË°å„ÄÇÂΩìË∞ÉÁî®sleep()ÊñπÊ≥ïÊó∂ÔºåÂøÖÈ°ªÊçïËé∑ÂºÇÂ∏∏ÊàñËÄÖÂêë‰∏äÂ±ÇÊäõÂá∫ÂºÇÂ∏∏„ÄÇÂΩìÁ∫øÁ®ã‰ºëÁú†Êó∂Èó¥Êª°Êó∂ÔºåÂπ∂‰∏ç‰∏ÄÂÆö‰ºöÈ©¨‰∏äÊâßË°åÔºåÂõ†‰∏∫Ê≠§Êó∂ÊúâÂèØËÉΩCPUÊ≠£Âú®ÊâßË°åÂÖ∂‰ªñÁöÑ‰ªªÂä°ÔºåÊâÄ‰ª•Ë∞ÉÁî®‰∫Üsleep()ÊñπÊ≥ïÁõ∏ÂΩì‰∫éÁ∫øÁ®ãËøõÂÖ•‰∫ÜÈòªÂ°ûÁä∂ÊÄÅ„ÄÇ ÊñπÊ≥ïËØ¶Ëß£- public static void yield()123456789101112131415161718192021package top.crosssoverjie.study.Thread;public class Testyield &#123; public static void main(String[] args) &#123; MyThread4 my = new MyThread4() ; my.start() ; &#125;&#125;class MyThread4 extends Thread&#123; @Override public void run() &#123; long open = System.currentTimeMillis(); int count= 0 ; for(int i=0 ;i&lt;1000000;i++)&#123; count= count+(i+1);// Thread.yield() ; &#125; long end = System.currentTimeMillis(); System.out.println("Áî®Êó∂Ôºö"+(end-open)+"ÊØ´Áßí"); &#125;&#125; ËæìÂá∫ÁªìÊûú:Áî®Êó∂Ôºö1ÊØ´ÁßíÂ¶ÇÊûúÂ∞Ü Thread.yield()Ê≥®ÈáäÂèñÊ∂àÊéâÔºåËæìÂá∫ÁªìÊûú:Áî®Êó∂Ôºö116ÊØ´Áßí Ë∞ÉÁî®yield()ÊñπÊ≥ïÊòØ‰∏∫‰∫ÜËÆ©ÂΩìÂâçÁ∫øÁ®ã‰∫§Âá∫CPUÊùÉÈôêÔºåËÆ©CPUÂéªÊâßË°åÂÖ∂‰ªñÁ∫øÁ®ã„ÄÇÂÆÉÂíåsleep()ÊñπÊ≥ïÁ±ª‰ººÂêåÊ†∑ÊòØ‰∏ç‰ºöÈáäÊîæÈîÅ„ÄÇ‰ΩÜÊòØyield()‰∏çËÉΩÊéßÂà∂ÂÖ∑‰ΩìÁöÑ‰∫§Âá∫CUPÁöÑÊó∂Èó¥„ÄÇÂπ∂‰∏îÂÆÉÂè™ËÉΩËÆ©Áõ∏Âêå‰ºòÂÖàÁ∫ßÁöÑÁ∫øÁ®ãËé∑ÂæóCPUÊâßË°åÊó∂Èó¥ÁöÑÊú∫‰ºö„ÄÇ Ë∞ÉÁî®yield()ÊñπÊ≥ï‰∏ç‰ºöËÆ©Á∫øÁ®ãËøõÂÖ•ÈòªÂ°ûÁä∂ÊÄÅÔºåËÄåÊòØËøõÂÖ•Â∞±Áª™Áä∂ÊÄÅÔºåÂÆÉÂè™ÈúÄË¶ÅÁ≠âÂæÖÈáçÊñ∞Ëé∑ÂèñCPUÁöÑÊó∂Èó¥ÔºåËøô‰∏ÄÁÇπÂíåsleep()ÊñπÊ≥ïÊòØ‰∏ç‰∏ÄÊ†∑ÁöÑ„ÄÇ ÊñπÊ≥ïËØ¶Ëß£- public final void join()Âú®ÂæàÂ§öÊÉÖÂÜµ‰∏ãÊàë‰ª¨ÈúÄË¶ÅÂú®Â≠êÁ∫øÁ®ã‰∏≠ÊâßË°åÂ§ßÈáèÁöÑËÄóÊó∂‰ªªÂä°Ôºå‰ΩÜÊòØÊàë‰ª¨‰∏ªÁ∫øÁ®ãÂèàÂøÖÈ°ªÂæóÁ≠âÂæÖÂ≠êÁ∫øÁ®ãÊâßË°åÂÆåÊØï‰πãÂêéÊâçËÉΩÁªìÊùüÔºåËøôÂ∞±ÈúÄË¶ÅÁî®Âà∞ join()ÊñπÊ≥ï‰∫Ü„ÄÇjoin()ÊñπÊ≥ïÁöÑ‰ΩúÁî®ÊòØÁ≠âÂæÖÁ∫øÁ®ãÂØπË±°ÈîÄÊØÅÔºåÂ¶ÇÊûúÂ≠êÁ∫øÁ®ãÊâßË°å‰∫ÜËøô‰∏™ÊñπÊ≥ïÔºåÈÇ£‰πà‰∏ªÁ∫øÁ®ãÂ∞±Ë¶ÅÁ≠âÂæÖÂ≠êÁ∫øÁ®ãÊâßË°åÂÆåÊØï‰πãÂêéÊâç‰ºöÈîÄÊØÅÔºåËØ∑Áúã‰∏ãÈù¢Ëøô‰∏™‰æãÂ≠êÔºö123456789101112131415161718192021222324252627package top.crosssoverjie.study.Thread;public class Testjoin &#123; public static void main(String[] args) throws InterruptedException &#123; new MyThread5("t1").start() ; for (int i = 0; i &lt; 10; i++) &#123; if(i == 5)&#123; MyThread5 my =new MyThread5("t2") ; my.start() ; my.join() ; &#125; System.out.println("mainÂΩìÂâçÁ∫øÁ®ãÔºö"+Thread.currentThread().getName()+" "+i); &#125; &#125;&#125;class MyThread5 extends Thread&#123; public MyThread5(String name)&#123; super(name) ; &#125; @Override public void run() &#123; for (int i = 0; i &lt; 5; i++) &#123; System.out.println("ÂΩìÂâçÁ∫øÁ®ãÔºö"+Thread.currentThread().getName()+" "+i); &#125; &#125;&#125; ËæìÂá∫ÁªìÊûúÔºö1234567891011121314151617181920mainÂΩìÂâçÁ∫øÁ®ãÔºömain 0ÂΩìÂâçÁ∫øÁ®ãÔºöt1 0ÂΩìÂâçÁ∫øÁ®ãÔºöt1 1mainÂΩìÂâçÁ∫øÁ®ãÔºömain 1ÂΩìÂâçÁ∫øÁ®ãÔºöt1 2mainÂΩìÂâçÁ∫øÁ®ãÔºömain 2ÂΩìÂâçÁ∫øÁ®ãÔºöt1 3mainÂΩìÂâçÁ∫øÁ®ãÔºömain 3ÂΩìÂâçÁ∫øÁ®ãÔºöt1 4mainÂΩìÂâçÁ∫øÁ®ãÔºömain 4ÂΩìÂâçÁ∫øÁ®ãÔºöt2 0ÂΩìÂâçÁ∫øÁ®ãÔºöt2 1ÂΩìÂâçÁ∫øÁ®ãÔºöt2 2ÂΩìÂâçÁ∫øÁ®ãÔºöt2 3ÂΩìÂâçÁ∫øÁ®ãÔºöt2 4mainÂΩìÂâçÁ∫øÁ®ãÔºömain 5mainÂΩìÂâçÁ∫øÁ®ãÔºömain 6mainÂΩìÂâçÁ∫øÁ®ãÔºömain 7mainÂΩìÂâçÁ∫øÁ®ãÔºömain 8mainÂΩìÂâçÁ∫øÁ®ãÔºömain 9 Â¶ÇÊûúÊàë‰ª¨Êääjoin()ÊñπÊ≥ïÊ≥®ÈáäÊéâ‰πãÂêéÔºö1234567891011121314151617181920mainÂΩìÂâçÁ∫øÁ®ãÔºömain 0ÂΩìÂâçÁ∫øÁ®ãÔºöt1 0mainÂΩìÂâçÁ∫øÁ®ãÔºömain 1ÂΩìÂâçÁ∫øÁ®ãÔºöt1 1mainÂΩìÂâçÁ∫øÁ®ãÔºömain 2ÂΩìÂâçÁ∫øÁ®ãÔºöt1 2mainÂΩìÂâçÁ∫øÁ®ãÔºömain 3ÂΩìÂâçÁ∫øÁ®ãÔºöt1 3mainÂΩìÂâçÁ∫øÁ®ãÔºömain 4ÂΩìÂâçÁ∫øÁ®ãÔºöt1 4mainÂΩìÂâçÁ∫øÁ®ãÔºömain 5mainÂΩìÂâçÁ∫øÁ®ãÔºömain 6mainÂΩìÂâçÁ∫øÁ®ãÔºömain 7mainÂΩìÂâçÁ∫øÁ®ãÔºömain 8mainÂΩìÂâçÁ∫øÁ®ãÔºömain 9ÂΩìÂâçÁ∫øÁ®ãÔºöt2 0ÂΩìÂâçÁ∫øÁ®ãÔºöt2 1ÂΩìÂâçÁ∫øÁ®ãÔºöt2 2ÂΩìÂâçÁ∫øÁ®ãÔºöt2 3ÂΩìÂâçÁ∫øÁ®ãÔºöt2 4 Áî±‰∏äÊàë‰ª¨ÂèØ‰ª•ÂæóÂá∫‰ª•‰∏ãÁªìËÆ∫Ôºö Âú®‰ΩøÁî®‰∫Üjoin()ÊñπÊ≥ï‰πãÂêé‰∏ªÁ∫øÁ®ã‰ºöÁ≠âÂæÖÂ≠êÁ∫øÁ®ãÁªìÊùü‰πãÂêéÊâç‰ºöÁªìÊùü„ÄÇ ÊñπÊ≥ïËØ¶Ëß£- setDaemon(boolean on),getDaemon()Áî®Êù•ËÆæÁΩÆÊòØÂê¶‰∏∫ÂÆàÊä§Á∫øÁ®ãÂíåÂà§Êñ≠ÊòØÂê¶‰∏∫ÂÆàÊä§Á∫øÁ®ã„ÄÇnotesÔºö ÂÆàÊä§Á∫øÁ®ã‰æùËµñ‰∫éÂàõÂª∫‰ªñÁöÑÁ∫øÁ®ãÔºåËÄåÁî®Êà∑Á∫øÁ®ãÂàô‰∏çÈúÄË¶Å„ÄÇÂ¶ÇÊûúÂú®main()ÊñπÊ≥ï‰∏≠ÂàõÂª∫‰∫Ü‰∏Ä‰∏™ÂÆàÊä§Á∫øÁ®ãÔºåÈÇ£‰πàÂΩìmainÊñπÊ≥ïÊâßË°åÂÆåÊØï‰πãÂêéÂÆàÊä§Á∫øÁ®ã‰πü‰ºöÂÖ≥Èó≠„ÄÇËÄåÁî®Êà∑Á∫øÁ®ãÂàô‰∏ç‰ºöÔºåÂú®JVM‰∏≠ÂûÉÂúæÊî∂ÈõÜÂô®ÁöÑÁ∫øÁ®ãÂ∞±ÊòØÂÆàÊä§Á∫øÁ®ã„ÄÇ ‰ºòÈõÖÁöÑÁªàÊ≠¢Á∫øÁ®ãÊúâ‰∏âÁßçÊñπÊ≥ïÂèØ‰ª•ÁªàÊ≠¢Á∫øÁ®ãÔºåÂ¶Ç‰∏ãÔºö ‰ΩøÁî®ÈÄÄÂá∫Ê†áËØÜÔºå‰ΩøÁ∫øÁ®ãÊ≠£Â∏∏ÁöÑÈÄÄÂá∫Ôºå‰πüÂ∞±ÊòØÂΩìrun()ÊñπÊ≥ïÂÆåÊàêÂêéÁ∫øÁ®ãÁªàÊ≠¢„ÄÇ ‰ΩøÁî®stop()ÊñπÊ≥ïÂº∫Ë°åÂÖ≥Èó≠ÔºåËøô‰∏™ÊñπÊ≥ïÁé∞Âú®Â∑≤ÁªèË¢´Â∫üÂºÉÔºå‰∏çÊé®Ëçê‰ΩøÁî® ‰ΩøÁî®interrupt()ÊñπÊ≥ïÁªàÊ≠¢Á∫øÁ®ã„ÄÇ ÂÖ∑‰ΩìÁöÑÂÆûÁé∞‰ª£Á†ÅÊàëÂ∞ÜÂú®‰∏ã‰∏ÄÁØáÂçöÊñá‰∏≠Â∞ÜÂà∞„ÄÇ„ÄÇ Á∫øÁ®ãÁöÑ‰ºòÂÖàÁ∫ßÂú®Êìç‰ΩúÁ≥ªÁªü‰∏≠Á∫øÁ®ãÊòØÂàÜ‰ºòÂÖàÁ∫ßÁöÑÔºå‰ºòÂÖàÁ∫ßÈ´òÁöÑÁ∫øÁ®ãCPUÂ∞Ü‰ºöÊèê‰æõÊõ¥Â§öÁöÑËµÑÊ∫êÔºåÂú®java‰∏≠Êàë‰ª¨ÂèØ‰ª•ÈÄöËøásetPriority(int newPriority)ÊñπÊ≥ïÊù•Êõ¥ÊîπÁ∫øÁ®ãÁöÑ‰ºòÂÖàÁ∫ß„ÄÇÂú®java‰∏≠ÂàÜ‰∏∫1~10Ëøô‰∏™ÂçÅ‰∏™‰ºòÂÖàÁ∫ßÔºåËÆæÁΩÆ‰∏çÂú®Ëøô‰∏™ËåÉÂõ¥ÂÜÖÁöÑ‰ºòÂÖàÁ∫ßÂ∞Ü‰ºöÊäõÂá∫IllegalArgumentExceptionÂºÇÂ∏∏„ÄÇjava‰∏≠Êúâ‰∏â‰∏™È¢ÑËÆæÂ•ΩÁöÑ‰ºòÂÖàÁ∫ßÔºö public final static int MIN_PRIORITY = 1; public final static int NORM_PRIORITY = 5; public final static int MAX_PRIORITY = 10; ÂèÇËÄÉ Â¶Ç‰ΩïÁªàÊ≠¢Á∫øÁ®ã javaÂ§öÁ∫øÁ®ãÂ≠¶‰π† javaÂ§öÁ∫øÁ®ãÊÄùÁª¥Âõæ ÊÄªÁªì‰ª•‰∏äÂ∞±ÊòØÊàëÊÄªÁªìÁöÑjavaÂ§öÁ∫øÁ®ãÂü∫Á°ÄÁü•ËØÜÔºåÂêéÁª≠‰ºöË°•ÂÖÖÁ∫øÁ®ãÂÖ≥Èó≠„ÄÅÁ∫øÁ®ãÁä∂ÊÄÅ„ÄÅÁ∫øÁ®ãÂêåÊ≠•ÂíåÊúâËøîÂõûÁªìÊûúÁöÑÂ§öÁ∫øÁ®ã„ÄÇ]]></content>
      <categories>
        <category>javaÂ§öÁ∫øÁ®ã</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Thread</tag>
        <tag>Runnable</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÁ¨îËÆ∞Ôºà‰∏ÄÔºâJavaÁöÑÂèçÂ∞ÑÊú∫Âà∂]]></title>
    <url>%2F2016%2F05%2F10%2Fjava-reflect%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄjavaÂèçÂ∞ÑÊú∫Âà∂ÊåáÁöÑÊòØÂú®javaËøêË°åËøáÁ®ã‰∏≠ÔºåÂØπ‰∫é‰ªªÊÑèÁöÑÁ±ªÈÉΩÂèØ‰ª•Áü•ÈÅì‰ªñÁöÑÊâÄÊúâÂ±ûÊÄß‰ª•ÂèäÊñπÊ≥ïÔºåÂØπ‰∫é‰ªªÊÑè‰∏Ä‰∏™ÂØπË±°ÈÉΩÂèØ‰ª•‰ªªÊÑèÁöÑË∞ÉÁî®‰ªñÁöÑÂ±ûÊÄßÂíåÊñπÊ≥ïÔºåËøôÁßçÂä®ÊÄÅËé∑ÂèñÂØπË±°‰ø°ÊÅØÂíåÂä®ÊÄÅË∞ÉÁî®ÂØπË±°ÊñπÊ≥ïÁöÑÂäüËÉΩÁß∞‰∏∫javaÂèçÂ∞ÑÊú∫Âà∂Ôºå‰ΩÜÊòØÂèçÂ∞Ñ‰ΩøÁî®‰∏çÂΩì‰ºöÈÄ†ÊàêÂæàÈ´òÁöÑÊàêÊú¨„ÄÇ ÁÆÄÂçïÂÆû‰æã ÂèçÂ∞ÑËé∑ÂèñÁ±ªÂêçÁß∞123456789101112131415161718package top.crosssoverjie.study;public class Reflect &#123; public static void main(String[] args) &#123; Class&lt;Reflect&gt; c1 = Reflect.class; System.out.println(c1.getName()); Reflect r1 = new Reflect() ; Class&lt;Reflect&gt; c2 = (Class&lt;Reflect&gt;) r1.getClass() ; System.out.println(c2.getName()); try &#123; Class&lt;Reflect&gt; c3 = (Class&lt;Reflect&gt;) Class.forName("top.crosssoverjie.study.Reflect"); System.out.println(c3.getName()); &#125; catch (ClassNotFoundException e) &#123; e.printStackTrace(); &#125; &#125;&#125; ËæìÂá∫ÁªìÊûúÔºö 123top.crosssoverjie.study.Reflecttop.crosssoverjie.study.Reflecttop.crosssoverjie.study.Reflect ‰ª•‰∏äÁöÑ c1,c2,c3ÊòØÂÆåÂÖ®‰∏ÄÊ†∑ÁöÑÔºå‰ªñ‰ª¨ÈÉΩÊúâ‰∏Ä‰∏™Áªü‰∏ÄÁöÑÂêçÁß∞ÔºöÂè´ÂÅöReflectÁ±ªÁöÑÁ±ªÁ±ªÂûã„ÄÇ ÂèçÂ∞ÑÁöÑÁî®Â§ÑËé∑ÂèñÊàêÂëòÊñπÊ≥ï12public Method getDeclaredMethod(String name,Class&lt;?&gt;...parameterTypes)//ÂæóÂà∞ËØ•Á±ªÁöÑÊâÄÊúâÊñπÊ≥ïÔºå‰ΩÜÊòØ‰∏çÂåÖÊã¨Áà∂Á±ªÁöÑÊñπÊ≥ï„ÄÇpublic Method getMethod(String name,Class&lt;?&gt;...parameterTypes)//Ëé∑ÂæóËØ•Á±ªÁöÑÊâÄÊúâpublicÊñπÊ≥ïÔºåÂåÖÊã¨Áà∂Á±ªÁöÑ„ÄÇ ÈÄöËøáÂèçÂ∞ÑËé∑ÂèñÊàêÂëòÊñπÊ≥ïË∞ÉÁî®ÁöÑÂÆû‰æã:1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465package top.crosssoverjie.study;import java.lang.reflect.Method;public class Person &#123; private String name="crossover" ; private String msg ; public Person(String name, String msg) &#123; this.name = name; this.msg = msg; System.out.println(name+"ÁöÑÊèèËø∞ÊòØ"+msg); &#125; public Person() &#123; super(); &#125; public void say(String name ,String msg)&#123; System.out.println(name+"ËØ¥Ôºö"+msg); &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public String getMsg() &#123; return msg; &#125; public void setMsg(String msg) &#123; this.msg = msg; &#125; public static void main(String[] args) &#123; try &#123; //È¶ñÂÖàËé∑ÂèñÁ±ªÁ±ªÂûã Class c1 = Class.forName("top.crosssoverjie.study.Person") ; //ÈÄöËøánewInstance()ÊñπÊ≥ïÁîüÊàê‰∏Ä‰∏™ÂÆû‰æã Object o1 = c1.newInstance() ; //Ëé∑ÂèñËØ•Á±ªÁöÑsayÊñπÊ≥ï Method m1 = c1.getMethod("say", String.class,String.class) ; //ÈÄöËøáinvokeÊñπÊ≥ïË∞ÉÁî®ËØ•ÊñπÊ≥ï// m1.invoke(o1, "Âº†‰∏â","‰Ω†Â•ΩÂïä") ; Method[] methods = c1.getDeclaredMethods() ;// for(Method m : methods)&#123;// System.out.println(m.getName());// &#125; Method[] methods2 = c1.getMethods() ; for (Method method : methods2) &#123; System.out.println(method.getName()); &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125;&#125; ËæìÂá∫ÁªìÊûúÔºö1Âº†‰∏âËØ¥Ôºö‰Ω†Â•ΩÂïä ÊâÄ‰ª•Êàë‰ª¨Âè™Ë¶ÅÁü•ÈÅìÁ±ªÁöÑÂÖ®ÈôêÂÆöÂêçÂ∞±ÂèØ‰ª•‰ªªÊÑèÁöÑË∞ÉÁî®ÈáåÈù¢ÁöÑÊñπÊ≥ï„ÄÇ 1234Method[] methods = c1.getDeclaredMethods() ;for(Method m : methods)&#123; System.out.println(m.getName());&#125; ËæìÂá∫ÁªìÊûúÔºö123456maingetNamesetNamesaygetMsgsetMsg ‰ΩøÁî®ÁöÑËøòÊòØ‰πãÂâçÈÇ£‰∏™PersonÁ±ªÔºåÊâÄ‰ª•ËøôÈáåÂè™ÂÜô‰∫ÜÂÖ≥ÈîÆ‰ª£Á†Å„ÄÇËøôÈáåËæìÂá∫ÁöÑÊòØPersonÁöÑÊâÄÊúâpublicÊñπÊ≥ï„ÄÇ Â¶ÇÊûúÊàë‰ª¨Ë∞ÉÁî®getMethods()ÊñπÊ≥ï‰ºöÊòØ‰ªÄ‰πàÁªìÊûúÂë¢Ôºü1234Method[] methods2 = c1.getMethods() ;for (Method method : methods2) &#123; System.out.println(method.getName());&#125; ËæìÂá∫ÁªìÊûú:123456789101112131415maingetNamesetNamesaygetMsgsetMsgwaitwaitwaithashCodegetClassequalstoStringnotifynotifyAll ËøôÊó∂Êàë‰ª¨‰ºöÂèëÁé∞ËøôÈáåËæìÂá∫ÁöÑÁªìÊûú‰ºöÊØîÂàöÊâçÂ§öÂæóÂ§öÔºåËøôÊó∂Âõ†‰∏∫getMethods()ÊñπÊ≥ïËøîÂõûÁöÑÊòØÂåÖÊã¨Áà∂Á±ªÁöÑÊâÄÊúâÊñπÊ≥ï„ÄÇ Ëé∑ÂèñÊàêÂëòÂèòÈáèÊàë‰ª¨ËøòÂèØ‰ª•ÈÄöËøáÂèçÂ∞ÑÊù•Ëé∑ÂèñÁ±ªÂåÖÊã¨Áà∂Á±ªÁöÑÊàêÂëòÂèòÈáèÔºå‰∏ªË¶ÅÊñπÊ≥ïÂ¶Ç‰∏ãÔºö12public Field getDeclaredFiled(String name)//Ëé∑ÂæóËØ•Á±ªÊâÄÊúâÁöÑÊàêÂëòÂèòÈáèÔºå‰ΩÜ‰∏çÂåÖÊã¨Áà∂Á±ªÁöÑ„ÄÇpublic Filed getFiled(String name)//Ëé∑ÂæóËØ•Á±ªÁöÑÊâÄÊúâÁöÑpublicÂèòÈáèÔºåÂåÖÊã¨ÂÖ∂Áà∂Á±ªÁöÑ„ÄÇ ËøòÊòØÊåâÁÖß‰πãÂâç‰æãÂ≠ê‰∏≠ÁöÑPersonÁ±ª‰∏æ‰æãÔºå‰ªñÂÖ∑Êúâ‰∏§‰∏™ÊàêÂëòÂèòÈáèÔºö12private String name="crossover" ;private String msg ; Êàë‰ª¨ÂèØ‰ª•ÈÄöËøá‰ª•‰∏ãÊñπÊ≥ïÊù•Ëé∑ÂèñÂÖ∂‰∏≠ÁöÑÊàêÂëòÂèòÈáèÔºö12Class c1 = Class.forName("top.crosssoverjie.study.Person") ;Field field = c1.getDeclaredField("name");//Ëé∑ÂèñËØ•Á±ªÊâÄÊúâÁöÑÊàêÂëòÂ±ûÊÄß ÈÄöËøá‰ª•‰∏ã‰æãÂ≠êÂèØ‰ª•Ëé∑ÂèñÊåáÂÆöÂØπË±°‰∏äÊ≠§fieldÁöÑÂÄºÔºö123456789101112131415161718192021222324252627282930313233343536package top.crosssoverjie.study;import java.io.File;import java.lang.reflect.Field;public class Reflect &#123; public static void main(String[] args) &#123; try &#123; Class c1 = Class.forName("top.crosssoverjie.study.Person"); Field field = c1.getDeclaredField("name") ; Object o1 = c1.newInstance() ; /** * Áî±‰∫éPersonÁ±ª‰∏≠ÁöÑnameÂèòÈáèÊòØprivate‰øÆÈ•∞ÁöÑÔºå * ÊâÄ‰ª•ÈúÄË¶ÅÊâãÂä®ÂºÄÂêØÂÖÅËÆ∏ËÆøÈóÆÔºåÊòØpublic‰øÆÈ•∞ÁöÑÂ∞±‰∏çÈúÄË¶ÅËÆæÁΩÆ‰∫Ü */ field.setAccessible(true); Object name = field.get(o1) ; System.out.println(name); &#125; catch (Exception e) &#123; e.printStackTrace() ; &#125;// Class&lt;Reflect&gt; c1 = Reflect.class;// System.out.println(c1.getName());// // Reflect r1 = new Reflect() ;// Class&lt;Reflect&gt; c2 = (Class&lt;Reflect&gt;) r1.getClass() ;// System.out.println(c2.getName());// // try &#123;// Class&lt;Reflect&gt; c3 = (Class&lt;Reflect&gt;) Class.forName("top.crosssoverjie.study.Reflect");// System.out.println(c3.getName());// &#125; catch (ClassNotFoundException e) &#123;// e.printStackTrace();// &#125; &#125;&#125; ËæìÂá∫ÁªìÊûúÔºö1crossover Êàë‰ª¨‰πüÂèØ‰ª•ÈÄöËøáÊñπÊ≥ïgetDeclaredFieds()ÊñπÊ≥ïÊù•Ëé∑ÂèñÊâÄÊúâÁöÑÊàêÂëòÂèòÈáèÔºåËøîÂõûÊòØÊòØ‰∏Ä‰∏™Field[]Êï∞ÁªÑÔºåÂè™ÈúÄË¶ÅÈÅçÂéÜËøô‰∏™Êï∞ÁªÑÂç≥ÂèØËé∑ÊâÄÊúâÁöÑÊàêÂëòÂèòÈáè„ÄÇ‰æãÂ≠êÂ¶Ç‰∏ãÔºö 1234Field[] fields = c1.getDeclaredFields() ;for(Field f :fields)&#123; System.out.println(f.getName());&#125; ËæìÂá∫ÁªìÊûúÂ¶Ç‰∏ãÔºö12namemsg Ëé∑ÂèñÊûÑÈÄ†ÊñπÊ≥ïÂèØ‰ª•ÈÄöËøá‰ª•‰∏ã‰∏§‰∏™ÊñπÊ≥ïÊù•Ëé∑ÂèñÊûÑÈÄ†ÊñπÊ≥ïÔºö12public Constructor getDeclaredConstructor(Class&lt;?&gt;...parameterTypes)//Ëé∑ÂèñËØ•Á±ªÁöÑÊâÄÊúâÊûÑÈÄ†ÊñπÊ≥ïÔºå‰∏çÂåÖÊã¨Áà∂Á±ªÁöÑ„ÄÇpublic Constructor getConstructor(Class&lt;?&gt;...parameterTypes)//Ëé∑ÂèñËØ•Á±ªÁöÑÊâÄÊúâpublic‰øÆÈ•∞ÁöÑÊûÑÈÄ†ÊñπÊ≥ïÔºåÂåÖÊã¨Áà∂Á±ªÁöÑ„ÄÇ Âú®‰πãÂâçÁöÑPersonÁ±ª‰∏≠Êúâ‰ª•‰∏ãÁöÑÊûÑÈÄ†ÊñπÊ≥ïÔºö1234public Person(String name, String msg) &#123; this.name = name; this.msg = msg;&#125; Êàë‰ª¨ÂèØ‰ª•ÈÄöËøá‰ª•‰∏ãÊñπÊ≥ïÊù•Ëé∑ÂèñPersonÁ±ªÁöÑÊûÑÈÄ†ÊñπÊ≥ïÔºö1Constructor dc1 = c1.getDeclaredConstructor(String.class,String.class) ; ÂÖ∑‰Ωì‰ª£Á†ÅÂ¶Ç‰∏ãÔºö123Constructor dc1 = c1.getDeclaredConstructor(String.class,String.class) ;dc1.setAccessible(true);dc1.newInstance("Â∞èÊòé","ÂæàÂ∏Ö") ; dc1.newInstance(&quot;Â∞èÊòé&quot;,&quot;ÂæàÂ∏Ö&quot;);ÊñπÊ≥ïË∞ÉÁî®‰∫ÜPersonÁ±ª‰∏≠ÁöÑÔºö12345public Person(String name, String msg) &#123; this.name = name; this.msg = msg; System.out.println(name+"ÁöÑÊèèËø∞ÊòØ"+msg);&#125; Ëøô‰∏™ÊûÑÈÄ†ÊñπÊ≥ïÔºåÂ¶ÇÊûú‰∏ç‰º†ÂèÇÊï∞ÁöÑËØùÔºåÈÇ£‰πàË∞ÉÁî®ÁöÑÂ∞±ÊòØÊó†ÂèÇÁöÑÊûÑÈÄ†ÊñπÊ≥ï„ÄÇËæìÂá∫ÁªìÊûú‰∏∫:1Â∞èÊòéÁöÑÊèèËø∞ÊòØÂæàÂ∏Ö ÈÄöËøáÂèçÂ∞Ñ‰∫ÜËß£ÈõÜÂêàÊ≥õÂûãÁöÑÊú¨Ë¥®ÈÄöËøá‰ª•‰∏ã‰æãÂ≠êÁ®ãÂ∫èÂèØ‰ª•ÁúãÂá∫Ôºö1234567891011121314151617181920212223242526272829303132333435363738394041package top.crosssoverjie.study;import java.lang.reflect.Method;import java.util.ArrayList;import java.util.List;public class GenericEssence &#123; public static void main(String[] args) &#123; //Â£∞Êòé‰∏§‰∏™listÔºå‰∏Ä‰∏™ÊúâÊ≥õÂûãÔºå‰∏Ä‰∏™Ê≤°ÊúâÊ≥õÂûã List list1 = new ArrayList() ; List&lt;String&gt; list2 = new ArrayList&lt;String&gt;() ; list2.add("‰Ω†Â•Ω") ;// list2.add(11) ;Âä†‰∏äÊ≥õÂûã‰πãÂêéÂú®ÁºñËØëÊúüÈó¥Âè™ËÉΩÊ∑ªÂä†StringÔºå‰∏çÁÑ∂‰ºöÊä•Èîô„ÄÇ System.out.println("list2ÁöÑÈïøÂ∫¶ÊòØÔºö"+list2.size()); Class c1 = list1.getClass(); Class c2 = list2.getClass() ; System.out.print("c1,c2ÊòØÂê¶Áõ∏Á≠â:"); System.out.println(c1==c2); try &#123; //ÈÄöËøáÂèçÂ∞ÑÁªïËøáÁºñËØëÂô®Âä®ÊÄÅË∞ÉÁî®addÊñπÊ≥ïÔºåÂèØËÉΩÂê¶Âä†ÂÖ•ÈùûStringÁ±ªÂûãÁöÑÂÖÉÁ¥† Method method = c2.getDeclaredMethod("add", Object.class) ; method.invoke(list2, 123) ;//Âú®ËøôÈáåÂä†ÂÖ•intÁ±ªÂûãÔºåÂú®‰∏äÈù¢Â¶ÇÊûúÂä†ÂÖ•int‰ºöÂá∫Áé∞ÁºñËØëÊä•Èîô„ÄÇ //list2ÁöÑÈïøÂ∫¶Â¢ûÂä†‰∫ÜÔºåËØ¥ÊòéÊ∑ªÂä†ÊàêÂäü‰∫Ü System.out.println("Áé∞Âú®list2ÁöÑÈïøÂ∫¶ÊòØ:"+list2.size()); /** * ÊâÄ‰ª•ÂèØ‰ª•ÁúãÂá∫ÔºåÊ≥õÂûãÂè™ÊòØÂú®ÁºñËØëÊúüÈó¥Ëµ∑‰ΩúÁî®ÔºåÂú®ÁªèËøáÁºñËØëËøõÂÖ•ËøêË°åÊúüÈó¥ÊòØ‰∏çËµ∑‰ΩúÁî®ÁöÑ„ÄÇ * Â∞±ÁÆóÊòØ‰∏çÊòØÊ≥õÂûãË¶ÅÊ±ÇÁöÑÁ±ªÂûã‰πüÊòØÂèØ‰ª•ÊèíÂÖ•ÁöÑ„ÄÇ */ &#125; catch (Exception e) &#123; e.printStackTrace() ; &#125; &#125;&#125; ÊâÄ‰ª•ÂèØ‰ª•ÁúãÂá∫ÔºåÊ≥õÂûãÂè™ÊòØÂú®ÁºñËØëÊúüÈó¥Ëµ∑‰ΩúÁî®ÔºåÂú®ÁªèËøáÁºñËØëËøõÂÖ•ËøêË°åÊúüÈó¥ÊòØ‰∏çËµ∑‰ΩúÁî®ÁöÑ„ÄÇÂ∞±ÁÆóÊòØ‰∏çÊòØÊ≥õÂûãË¶ÅÊ±ÇÁöÑÁ±ªÂûã‰πüÊòØÂèØ‰ª•ÊèíÂÖ•ÁöÑ„ÄÇ ÂèçÂ∞ÑÁü•ËØÜÁÇπ ÊÄªÁªì Ê≥õÂûãÁöÑÂ∫îÁî®ÊØîËæÉÂ§öÔºö springÁöÑIOC/DI„ÄÇ JDBC‰∏≠ÁöÑ‰∏≠ÁöÑÂä†ËΩΩÈ©±Âä® ÂèÇËÄÉ java‰∏≠ÁöÑÂèçÂ∞ÑÊú∫Âà∂ ÂèçÂ∞ÑÊú∫Âà∂ÊòØ‰ªÄ‰πà]]></content>
      <categories>
        <category>JavaÁ¨îËÆ∞</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Reflect</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Á¨¨‰∏ÄÊ¨°ÊÄªÁªì]]></title>
    <url>%2F2016%2F05%2F07%2F%E7%AC%AC%E4%B8%80%E6%AC%A1%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[ÂâçË®Ä Êò®Â§©Âà∞‰ªäÂ§©‰∏ÄÂÖ±Ëä±‰∫ÜÂ∑Æ‰∏çÂ§ö‰∏§Â§©ÁöÑÊó∂Èó¥Áªà‰∫éÊääÂçöÂÆ¢Êê≠Â•Ω‰∫Ü„ÄÇËøò‰π∞‰∫Ü‰∏Ä‰∏™ÂüüÂêçÔºåÁé∞Âú®Â∞±Ëø´‰∏çÂèäÂæÖÁöÑÊÉ≥ÊääËøôÊÆµÂÜÖÂÆπÂÜô‰∏ãÊù•„ÄÇ ÊÑüË∞¢ È¶ñÂÖàÈùûÂ∏∏ÊÑüË∞¢ ÂòüÁà∑ÁöÑÂ∏ÆÂøôÔºåÊ≤°ÊúâËøô‰∫õËµÑÊñôÊàëÂèØËÉΩËøòÂæóËá™Â∑±Á†îÁ©∂Â•Ω‰∏ÄÊÆµÊó∂Èó¥„ÄÇ ËøáÁ®ã ÊàëÊòØÂâçÂ§©Êó†ÊÑèÈó¥Âú®ÂæÆÂçö‰∏äÁúãÂà∞ÂòüÁà∑ÁöÑ‰∏ÄÁØáÂçöÊñáÔºåÂ∞±‰ªîÁªÜÁúã‰∫Ü‰∏ãÔºåÂèëÁé∞ÂÜôÁöÑÈùûÂ∏∏Â•ΩÔºåÁÑ∂ÂêéÂ∞±Â∞Ü‰ªñÊâÄÊúâÁöÑÂçöÊñáÂ§ßËá¥ÁöÑÊµèËßà‰∫Ü‰∏Ä‰∏ã„ÄÇ ÊàëÂæàÊó©‰ª•ÂâçÂ∞±ÊâìÁÆóÊê≠‰∏Ä‰∏™ÂçöÂÆ¢Ôºå‰ΩÜÊòØÁôæÂ∫¶‰∫Ü‰∏Ä‰∏ãÂèëÁé∞ËøòÊòØÊå∫È∫ªÁÉ¶ÁöÑÔºåÂä†‰∏äÊúÄËøë‰πüÊØîËæÉÂøôÊâÄÊúâ‰∏ÄÁõ¥‰πüÂ∞±Ê≤°ÊúâÂÅöÔºåÁõ¥Âà∞ÁúãÂà∞ËøôÁØáÂçöÊñáÊâçÈ°∫Âà©ÁöÑÊê≠Ëµ∑‰∫ÜËøô‰∏™ÂçöÂÆ¢„ÄÇ‰∏≠ÈÄîÈÅáÂà∞‰∏çÂ∞ëÈóÆÈ¢ò‰πüÈÉΩÈ°∫Âà©Ëß£ÂÜ≥‰∫ÜÔºåÁúüÊòØÂ≠¶Âà∞‰∫Ü‰∏çÂ∞ëÁöÑ‰∏úË•ø„ÄÇ ÁÜüÁªÉ‰∫ÜMarkdownËØ≠Ê≥ï„ÄÇ ÁúüÊ≠£‰ΩøÁî®‰∫ÜÁºñËæëÁ•ûÂô® Sublime„ÄÇ ‰ΩøÁî®ÈòøÈáå‰∫ëËß£Êûê‰∫ÜgithubÂíåcodingÈáåÁöÑPagesÊúçÂä°„ÄÇ hexoÂíåÂ∏∏Áî®ÁöÑ‰∏ªÈ¢òÈÖçÁΩÆ„ÄÇ ÊàëÁöÑÈÖçÁΩÆ HexoÈÖçÁΩÆ JackManÈÖçÁΩÆimglogo: enable: true ## display image logo true/false. src: img/logo.gif ## `.svg` and `.png` are recommended,please put image into the theme folder `/jacman/source/img`. favicon: img/favicon.ico ## size:32px*32px,`.ico` is recommended,please put image into the theme folder `/jacman/source/img`. apple_icon: img/jacman.jpg ## size:114px*114px,please put image into the theme folder `/jacman/source/img`. author_img: img/author.jpg ## size:220px*220px.display author avatar picture.if don&apos;t want to display,please don&apos;t set this. banner_img: #img/banner.jpg ## size:1920px*200px+. Banner Picture ### Theme Color theme_color: theme: &apos;#2ca6cb&apos; ##the defaut theme color is blue # ‰ª£Á†ÅÈ´ò‰∫Æ‰∏ªÈ¢ò # available: default | night highlight_theme: night #### index post is expanding or not index: expand: false ## default is unexpanding,so you can only see the short description of each post. excerpt_link: Read More close_aside: false #close sidebar in post page if true mathjax: false #enable mathjax if true ### Creative Commons License Support, see http://creativecommons.org/ ### you can choose: by , by-nc , by-nc-nd , by-nc-sa , by-nd , by-sa , zero creative_commons: none ÁªìÊùüËØ≠‰ª•‰∏ä„ÄÇ„ÄÇÊàëÂÅöËøô‰∏™ÂçöÂÆ¢ÁöÑÂàùË°∑‰∏ÄÊòØ‰∏∫‰∫ÜËÆ∞ÂΩïÊàëÁöÑÊï¥‰∏™Á®ãÂ∫èÁåøÁîüÊ∂ØÁöÑÊïÖ‰∫ãÔºå‰∫åÊòØÂ∏åÊúõËÉΩÊúâÂ§ßÁ•ûËÉΩÂú®ËøáÁ®ã‰∏≠ÊåáÂá∫ÊàëÁöÑÈîôËØØÔºåËÉΩËÆ©ÊàëÁöÑÊ∞¥Âπ≥Êõ¥Ëøõ‰∏ÄÊ≠•„ÄÇ]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>ÊÄªÁªì</tag>
        <tag>Markdown</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MarkdownÂ∞èËÆ°]]></title>
    <url>%2F2016%2F05%2F06%2FMarkdown%E5%B0%8F%E8%AE%A1%2F</url>
    <content type="text"><![CDATA[# Ê†áÈ¢ò Ë°®Á§∫Ê†áÈ¢ò ‰∏Ä‰∏™#Âè∑‰ª£Ë°®‰∏ÄÁ∫ßÊ†áÈ¢òÔºå‰ª•Ê≠§Á±ªÊé®„ÄÇ * Êó†Â∫èÂàóË°® Êó†Â∫èÂàóË°® &gt; ÂºïÁî® ÂºïÁî® [http://www.baidu.com](http://www.baidu.com &quot;ÁôæÂ∫¶&quot;) ÁôæÂ∫¶ ![ËâæÂºóÊ£Æ](http://i.imgur.com/TLnZ2S6.jpg)ÊèíÂÖ•ÂõæÁâá]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>Markdown</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LinuxÔºà‰∏ÄÔºâÂ∏∏Áî®ÂëΩ‰ª§]]></title>
    <url>%2F2016%2F04%2F10%2FLinux-normal%2F</url>
    <content type="text"><![CDATA[ÂâçË®Ä Áî±‰∫éÁé∞Âú®JAVAÂºÄÂèëÁöÑÂæàÂ§öÂ∫îÁî®ÈÉΩÊòØÈÉ®ÁΩ≤Âà∞LinuxÁ≥ªÁªü‰∏äÁöÑÔºåÂõ†Ê≠§‰∫ÜËß£ÂíåÊéåÊè°‰∏Ä‰∫õLinuxÁöÑÂ∏∏Áî®ÂëΩ‰ª§ÊòØÈùûÂ∏∏ÊúâÂøÖË¶ÅÁöÑÔºå‰ª•‰∏ãÂ∞±ÊòØÂú®JavaÂºÄÂèëËøáÁ®ã‰∏≠‰∏Ä‰∫õÂ∏∏Áî®ÁöÑÂëΩ‰ª§„ÄÇ Â∏∏Áî®ÂëΩ‰ª§ Êü•ÊâæÊñá‰ª∂find / -name log.txtÊ†πÊçÆÂêçÁß∞Êü•ÊâæÂú® /ÁõÆÂΩï‰∏ãÁöÑ log.txtÊñá‰ª∂„ÄÇ find .-name &quot;*.xml&quot;ÈÄíÂΩíÊü•ÊâæÊâÄÊúâÁöÑxmlÊñá‰ª∂„ÄÇ find .-name &quot;*.xml&quot;|xargs grep &quot;hello&quot;ÈÄíÂΩíÊü•ÊâæÊâÄÊúâÂåÖÂê´helloÁöÑxmlÊñá‰ª∂„ÄÇ ls -l grep &#39;jar&#39;Êü•ÊâæÂΩìÂâçÁõÆÂΩï‰∏≠ÁöÑÊâÄÊúâjarÊñá‰ª∂„ÄÇ Ê£ÄÊü•‰∏Ä‰∏™Êñá‰ª∂ÊòØÂê¶ËøêË°åps ‚Äìef|grep tomecateÊ£ÄÊü•ÊâÄÊúâÊúâÂÖ≥tomcatÁöÑËøõÁ®ã„ÄÇ ÁªàÊ≠¢Á∫øÁ®ãkill -9 19979ÁªàÊ≠¢Á∫øÁ®ãÂè∑‰∏∫19979ÁöÑÁ∫øÁ®ã Êü•ÁúãÊñá‰ª∂ÔºåÂåÖÊã¨ÈöêËóèÊñá‰ª∂„ÄÇls -al Êü•ÁúãÂΩìÂâçÂ∑•‰ΩúÁõÆÂΩï„ÄÇpwd Â§çÂà∂Êñá‰ª∂ÂåÖÊã¨ÂÖ∂Â≠êÊñá‰ª∂Âà∞ÊåáÂÆöÁõÆÂΩïcp -r source targetÂ§çÂà∂sourceÊñá‰ª∂Âà∞targetÁõÆÂΩï‰∏≠„ÄÇ ÂàõÂª∫‰∏Ä‰∏™ÁõÆÂΩïmkdir newÂàõÂª∫‰∏Ä‰∏™newÁöÑÁõÆÂΩï Âà†Èô§ÁõÆÂΩï(ÂâçÊèêÊòØÊ≠§ÁõÆÂΩïÊòØÁ©∫ÁõÆÂΩï)rmdir sourceÂà†Èô§sourceÁõÆÂΩï„ÄÇ Âà†Èô§Êñá‰ª∂ ÂåÖÊã¨ÂÖ∂Â≠êÊñá‰ª∂rm -rf fileÂà†Èô§fileÊñá‰ª∂ÂíåÂÖ∂‰∏≠ÁöÑÂ≠êÊñá‰ª∂„ÄÇ-rË°®Á§∫Âêë‰∏ãÈÄíÂΩíÔºå‰∏çÁÆ°ÊúâÂ§öÂ∞ëÁõÆÂΩï‰∏ÄÂæãÂà†Èô§-fË°®Á§∫Âº∫Âà∂Âà†Èô§Ôºå‰∏çÂÅö‰ªª‰ΩïÊèêÁ§∫„ÄÇ ÁßªÂä®Êñá‰ª∂mv /temp/movefile /target ÂàáÊç¢Áî®Êà∑su -username Êü•ÁúãipifconfigÊ≥®ÊÑèÊòØ ifconfig ‰∏çÊòØwindows‰∏≠ÁöÑipconfig ÊÄªÁªì‰ª•‰∏äÂ∞±ÊòØÂú®Linux‰∏ãÂºÄÂèëJavaÂ∫îÁî®Â∏∏Áî®ÁöÑLinuxÂëΩ‰ª§ÔºåÂ¶ÇÊúâÈÅóÊºèËØ∑Âú®ËØÑËÆ∫Â§ÑË°•ÂÖÖÔºåÊàëÂ∞Ü‰∏çÂÆöÊúüÊ∑ªÂä†„ÄÇ]]></content>
      <categories>
        <category>LinuxÁ¨îËÆ∞</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[‰∏™‰∫∫ÁÆÄÂéÜ]]></title>
    <url>%2F1994%2F08%2F08%2Fmyresume%2F</url>
    <content type="text"><![CDATA[‰∏™‰∫∫‰ø°ÊÅØ ÈôàÊù∞/Áî∑/1994 Â∑•‰ΩúÂπ¥ÈôêÔºö3Âπ¥ ÊäÄÊúØÂçöÂÆ¢Ôºöhttps://crossoverjie.top GithubÔºöhttp://github.com/crossoverjie ÊúüÊúõËÅå‰ΩçÔºöJava È´òÁ∫ßÂ∑•Á®ãÂ∏à ËÅîÁ≥ªÊñπÂºè ÊâãÊú∫Ôºö18523985794 EmailÔºöcrossoverJie@gmail.com QQ/ÂæÆ‰ø°Âè∑Ôºö731756881 / chycjj Â∑•‰ΩúÁªèÂéÜ‰∫ö‰ø°ÁßëÊäÄ Ôºà 2017Âπ¥05Êúà ~ Ëá≥‰ªä ÔºâIOP Êô∫ËÉΩËê•ÈîÄÂπ≥Âè∞È°πÁõÆÊèèËø∞ÔºöÊ†πÊçÆÁî®Êà∑DNAÊï∞ÊçÆ„ÄÅÂΩìÂâç‰ΩçÁΩÆÁ≠â‰ø°ÊÅØÂêàÁêÜÁöÑÊé®ÈÄÅÁõ∏Â∫îÁöÑËê•ÈîÄÊ¥ªÂä®ÁªôÁî®Êà∑„ÄÇ‰∏ªË¶ÅË¥üË¥£Ôºö Áü≠‰ø°Áæ§ÂèëÊ∏†ÈÅìÁöÑÊï¥‰∏™ÊµÅÁ®ã„ÄÇ Áü≠‰ø°ÁΩëÂÖ≥:‰øùËØÅ 1000W+ ÁöÑÁî®Êà∑Êï∞ÊçÆÂÆâÂÖ®ÊúâÊïàÁöÑÈÄöËøáÁü≠‰ø°ÁΩëÂÖ≥ËøõË°åÁü≠‰ø°‰∏ãÂèë„ÄÇ 51 Ëê•‰∏öÂéÖÈ°πÁõÆÊèèËø∞: Âü∫‰∫é‰∫ëÁ´ØÁöÑËøõÈîÄÂ≠òÁ≥ªÁªü„ÄÇ‰∏ªË¶ÅË¥üË¥£Ôºö ÊîØ‰ªòÊ®°Âùó„ÄÇ Ë¥¢Âä°Ê®°Âùó„ÄÇ Á∫ø‰∏äÂú∞ÂùÄ : https://www.51yyt.com.cn/ ÂÖ∂‰ªñÈ°πÁõÆËØ∑Ê±ÇÈò≤ÈáçÁªÑ‰ª∂È°πÁõÆÊèèËø∞ : ÂØπ‰∫éÊüê‰∫õ‰∏öÂä°Ë¶ÅÊ±ÇÊØèÊ¨°ËØ∑Ê±Ç‰øùËØÅÂîØ‰∏ÄÔºåÂ¶ÇÊûúÊØè‰∏™Êé•Âè£ÈÉΩÂÅöÊ†°È™åÊìç‰ΩúÁöÑËØùËÄ¶ÂêàÂ§™È´ò‰πü‰∏çÂà©‰∫éÁª¥Êä§„ÄÇÂü∫‰∫éÊ≠§Ëá™ÂÆö‰πâ‰∫Ü annotation ,ÈÄöËøá Spring ÁöÑ AOP Âè™Ë¶ÅÁªôÁõ∏Â∫îÁöÑÊé•Âè£Âä†‰∏äËØ•Ê≥®Ëß£Âç≥ÂèØÂÆûÁé∞ËØ∑Ê±ÇÂéªÈáç„ÄÇ ÂºÄÊ∫êÂú∞ÂùÄ: Spring Áâà: https://github.com/crossoverJie/SSM-REQUEST-CHECK SpringBoot Áâà: https://github.com/crossoverJie/springboot-cloud Áå™ÂÖ´ÊàíÁΩëÁªúÊúâÈôêÂÖ¨Âè∏ Ôºà 2016Âπ¥05Êúà ~ 2017Âπ¥05Êúà ÔºâÂÖ´ÊàíËÆ§ËØÅÈ°πÁõÆÊèèËø∞Ôºö‰∏∫Êï¥‰∏™Áå™ÂÖ´ÊàíÁΩëÊèê‰æõÂÆûÂêçËÆ§ËØÅÊúçÂä°Ôºå‰∏ªÊé®‰∫∫ËÑ∏ËØÜÂà´ËÆ§ËØÅ„ÄÇÊúüÊúõÊâìÈÄ†Êàê‰∏Ä‰∏™ÊùÉÂ®ÅÁöÑÁ¨¨‰∏âÊñπÂÆûÂêçËÆ§ËØÅÂπ≥Âè∞„ÄÇÂàÜ‰∏∫‰ª•‰∏ãÂá†‰∏™Ê®°ÂùóÔºö WebÁ´Ø‰∫∫ËÑ∏ËØÜÂà´ËÆ§ËØÅ„ÄÇ ÁßªÂä®Á´Ø‰∫∫ËÑ∏ËØÜÂà´ËÆ§ËØÅ(IOS,Android)„ÄÇ ÂõΩÂÜÖÂ¢ÉÂ§ñ‰ºÅ‰∏öÂÆ°Ê†∏ËÆ§ËØÅ„ÄÇ ÂõΩÂÜÖÊ∏ØÊæ≥Âè∞‰∏™‰∫∫ÂÆ°Ê†∏ËÆ§ËØÅ„ÄÇ ‰∏ªË¶ÅË¥üË¥£Ôºö ÂÖ´ÊàíËÆ§ËØÅÊ†∏ÂøÉÊúçÂä°ÂºÄÂèë„ÄÇ Êñ∞ËÄÅÁ≥ªÁªüÊï∞ÊçÆËøÅÁßª„ÄÇ Êï¥‰∏™‰∏ªÁ´ôÊâÄ‰æùËµñÁöÑÂÆûÂêçÊü•ËØ¢Êé•Âè£„ÄÇ Á∫ø‰∏äÂú∞ÂùÄ : https://do.renzheng.zbj.com/fe/page/index ÂÖ∂‰ªñÈ°πÁõÆDubbo Êé•Âè£ ÂÆûÁé∞ HTTP ËÆøÈóÆÁªÑ‰ª∂È°πÁõÆÊèèËø∞ : Áî±‰∫é Dubbo Êé•Âè£ÈÄöÂ∏∏ÊòØÂÜÖÈÉ®Â∫îÁî®‰πãÈó¥ËøõË°åË∞ÉÁî®ÔºåÂΩìÊàë‰ª¨ÊÉ≥Ë¶ÅÊéíÈô§ÊéâËØ≠Ë®ÄÁöÑÁâπÊúâÊÄßÁöÑËØùÊúÄÂ•ΩËøòÊòØÊèê‰æõ‰∏Ä‰∏™ HTTP Êé•Âè£„ÄÇÂü∫‰∫éÊ≠§ÂºÄÂèë‰∫Ü‰∏Ä‰∏™ÁªÑ‰ª∂ÂèØ‰ª•Âú®‰∏ç‰øÆÊîπÂéüÊúâ Dubbo Êé•Âè£ÁöÑÂâçÊèê‰∏ãÂÆûÁé∞ HTTP ËÆøÈóÆÔºåËøôÂú®Êüê‰∫õÁâπÊúâÁéØÂ¢É‰∏ãËøõË°åË∞ÉËØïÊòØÈùûÂ∏∏Êñπ‰æøÁöÑ„ÄÇ ÂºÄÊ∫êÂú∞ÂùÄ : https://github.com/crossoverJie/SSM-DUBBO-HTTP ÈáçÂ∫ÜÈ©∞È™ÖÁßëÊäÄ Ôºà 2014Âπ¥11Êúà ~ 2016Âπ¥05Êúà ÔºâÈïøÂÆâÈ©¨Ëá™ËææÂÜÖÈÉ®ÂÆ°ËÆ°Á≥ªÁªü È°πÁõÆÊèèËø∞ÔºöËØ•È°πÁõÆ‰∏∫ÈïøÂÆâÈ©¨Ëá™ËææË¥¢Âä°ÈÉ®Èó®ÂÜÖÈÉ®‰ΩøÁî®ÁöÑ‰∏Ä‰∏™ÂÆ°ËÆ°Á≥ªÁªüÔºåÁî®‰∫éÂçáÁ∫ßÊï¥‰∏™ÈïøÈ©¨ÂÖ¨Âè∏ÁöÑÈ£éÈô©ÂíåÁÆ°ÁêÜÂ∑•‰Ωú„ÄÇ‰∏ªË¶ÅË¥üË¥£Ôºö ÁºñÂÜôÈ°πÁõÆËøáÁ®ã‰∏≠ÁöÑÂêÑ‰∏™ÈáåÁ®ãÁ¢ëÊñáÊ°£„ÄÇ Á≥ªÁªüÊï∞ÊçÆÂ∫ìËÆæËÆ°„ÄÇ Âà∂ÂÆöÂπ∂ÂàÜÈÖçÂºÄÂèë‰ªªÂä°„ÄÇ ËµÑÊ∫êÂÖ±‰∫´„ÄÅÁ≥ªÁªüÊåáÂçó„ÄÅÁ≥ªÁªüÁÆ°ÁêÜ„ÄÅÈ£éÈô©ÁÆ°ÁêÜÊ®°Âùó‰ª£Á†ÅÁöÑÂÆûÁé∞„ÄÇ ÈïøÂÆâÊ±ΩËΩ¶ËÆæËÆ°ÊàêÊú¨ÁÆ°ÊéßÁ≥ªÁªüÈ°πÁõÆÊèèËø∞ÔºöËØ•È°πÁõÆ‰∏∫ÈáçÂ∫ÜÈïøÂÆâÂÖ¨Âè∏‰ΩøÁî®ÊàêÊú¨ÁÆ°ÊéßÁ≥ªÁªüÔºåÂØπÊï¥‰∏™Ê±ΩËΩ¶Áîü‰∫ßÊâÄ‰∫ßÁîüÁöÑÊàêÊú¨ËøõË°åÈ¢Ñ‰º∞‰∏éÁÆ°ÁêÜ ‰∏ªË¶ÅË¥üË¥£Ôºö Èõ∂ÈÉ®‰ª∂ÂèÇÊï∞ÂáÜÁ°ÆÁéá„ÄÅÂèäÊó∂ÁéáÁöÑÂºÄÂèë„ÄÇ ÂºÄÊ∫êÈ°πÁõÆÂíå‰ΩúÂìÅÂºÄÊ∫êÈ°πÁõÆ SSMÔºö‰ªé 0 ÊûÑÂª∫‰∏ÄÂ•óÂàÜÂ∏ÉÂºèÁ≥ªÁªü„ÄÇ(1.2K star) springboot-cloudÔºöÂü∫‰∫é SpringBoot + SpringCloud Êê≠Âª∫ÁöÑÂæÆÊúçÂä°È°πÁõÆ ÊäÄÊúØÊñáÁ´† Âü∫‰∫édubboÁöÑÂàÜÂ∏ÉÂºèÊû∂ÊûÑ MQÂ∫îÁî® ËØë ‰Ω†ÂèØ‰ª•Áî®GitHubÂÅöÁöÑ12‰ª∂ Cool ‰∫ãÊÉÖ ÊäÄËÉΩÊ∏ÖÂçï‰ª•‰∏ãÂùá‰∏∫ÊàëÁÜüÁªÉ‰ΩøÁî®ÁöÑÊäÄËÉΩ ‰∏ªÂäõËØ≠Ë®ÄÔºöJava Ê°ÜÊû∂ÔºöSpring/SpringMVC/Mybatis/SpringBoot/SpringCloud/Dubbo ‰∏≠Èó¥‰ª∂ÔºöKafka/Zookeeper/ÈÖçÁΩÆ‰∏≠ÂøÉ/Ë∞ÉÂ∫¶‰∏≠ÂøÉ Êï∞ÊçÆÂ∫ìÁõ∏ÂÖ≥ÔºöMySQL/Oracle ÁâàÊú¨ÁÆ°ÁêÜ„ÄÅÊñáÊ°£ÂíåËá™Âä®ÂåñÈÉ®ÁΩ≤Â∑•ÂÖ∑ÔºöSvn/Git/Jenkins ÂçïÂÖÉÊµãËØïÔºöJunit/Jacoco/coveralls ÊúçÂä°Âô® : LinuxÂ∏∏Áî®Êìç‰ΩúÔºåÂü∫Êú¨ÁöÑ Shell ËÑöÊú¨ÁºñÂÜô Ëá¥Ë∞¢ÊÑüË∞¢ÊÇ®Ëä±Êó∂Èó¥ÈòÖËØªÊàëÁöÑÁÆÄÂéÜÔºåÊúüÂæÖËÉΩÊúâÊú∫‰ºöÂíåÊÇ®ÂÖ±‰∫ã„ÄÇ]]></content>
      <categories>
        <category>resume</category>
      </categories>
      <tags>
        <tag>ÊÄªÁªì</tag>
      </tags>
  </entry>
</search>
